(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7391],{406447:function(e,t,i){e=i.nmd(e);var s=i(348764).Buffer,n=i(734155);!function(e){const t=e.en=e.en||{};t.dictionary=Object.assign(t.dictionary||{},{"%0 of %1":"%0 of %1","Align center":"Align center","Align left":"Align left","Align right":"Align right",Aquamarine:"Aquamarine",Big:"Big",Black:"Black","Block quote":"Block quote",Blue:"Blue",Bold:"Bold","Break text":"Break text","Bulleted List":"Bulleted List",Cancel:"Cancel","Centered image":"Centered image","Change image text alternative":"Change image text alternative","Choose heading":"Choose heading",Column:"Column","Decrease indent":"Decrease indent",Default:"Default","Delete column":"Delete column","Delete row":"Delete row","Dim grey":"Dim grey","Document colors":"Document colors",Downloadable:"Downloadable","Dropdown toolbar":"Dropdown toolbar","Edit block":"Edit block","Edit link":"Edit link","Editor toolbar":"Editor toolbar","Enter image caption":"Enter image caption","Font Background Color":"Font Background Color","Font Color":"Font Color","Font Family":"Font Family","Font Size":"Font Size","Full size image":"Full size image",Green:"Green",Grey:"Grey","Header column":"Header column","Header row":"Header row",Heading:"Heading","Heading 1":"Heading 1","Heading 2":"Heading 2","Heading 3":"Heading 3","Heading 4":"Heading 4","Heading 5":"Heading 5","Heading 6":"Heading 6",Huge:"Huge","Image resize list":"Image resize list","Image toolbar":"Image toolbar","image widget":"image widget","In line":"In line","Increase indent":"Increase indent","Insert column left":"Insert column left","Insert column right":"Insert column right","Insert image":"Insert image","Insert media":"Insert media","Insert paragraph after block":"Insert paragraph after block","Insert paragraph before block":"Insert paragraph before block","Insert row above":"Insert row above","Insert row below":"Insert row below","Insert table":"Insert table",Italic:"Italic",Justify:"Justify","Left aligned image":"Left aligned image","Light blue":"Light blue","Light green":"Light green","Light grey":"Light grey",Link:"Link","Link URL":"Link URL","Media URL":"Media URL","media widget":"media widget","Merge cell down":"Merge cell down","Merge cell left":"Merge cell left","Merge cell right":"Merge cell right","Merge cell up":"Merge cell up","Merge cells":"Merge cells",Next:"Next","Numbered List":"Numbered List","Open in a new tab":"Open in a new tab","Open link in new tab":"Open link in new tab",Orange:"Orange",Original:"Original",Paragraph:"Paragraph","Paste the media URL in the input.":"Paste the media URL in the input.",Previous:"Previous",Purple:"Purple",Red:"Red",Redo:"Redo","Remove color":"Remove color","Resize image":"Resize image","Resize image to %0":"Resize image to %0","Resize image to the original size":"Resize image to the original size","Rich Text Editor":"Rich Text Editor","Rich Text Editor, %0":"Rich Text Editor, %0","Right aligned image":"Right aligned image",Row:"Row",Save:"Save","Select all":"Select all","Select column":"Select column","Select row":"Select row","Show more items":"Show more items","Side image":"Side image",Small:"Small","Split cell horizontally":"Split cell horizontally","Split cell vertically":"Split cell vertically",Strikethrough:"Strikethrough","Table toolbar":"Table toolbar","Text alignment":"Text alignment","Text alignment toolbar":"Text alignment toolbar","Text alternative":"Text alternative","The URL must not be empty.":"The URL must not be empty.","This link has no URL":"This link has no URL","This media URL is not supported.":"This media URL is not supported.",Tiny:"Tiny","Tip: Paste the URL into the content to embed faster.":"Tip: Paste the URL into the content to embed faster.","Toggle caption off":"Toggle caption off","Toggle caption on":"Toggle caption on",Turquoise:"Turquoise",Underline:"Underline",Undo:"Undo",Unlink:"Unlink","Upload failed":"Upload failed","Upload in progress":"Upload in progress",White:"White","Widget toolbar":"Widget toolbar","Wrap text":"Wrap text",Yellow:"Yellow"})}(window.CKEDITOR_TRANSLATIONS||(window.CKEDITOR_TRANSLATIONS={})),self,e.exports=(()=>{var o={3140:(e,t,i)=>{var s=i(8393),n=i(8110);n.on("load",(function(e,t){if(e&&e.nodeName&&"string"==typeof t){var i=document.createElement("a");i.setAttribute("href",t),e.appendChild(i),n.trigger("load",i)}})),n.on("load",(function(e){if(!e&&!n.import)for(var t=document.querySelectorAll("a[data-iframely-url]:not([data-import-uri])"),i=0;i<t.length;i++)n.trigger("load",t[i])})),n.on("load",(function(e){e&&"A"===e.nodeName&&(e.getAttribute("data-iframely-url")||e.getAttribute("href"))&&!e.hasAttribute("data-import-uri")&&function(e){if(e.getAttribute("data-iframely-url")||e.getAttribute("href")){var t,i=e.getAttribute("data-iframely-url");if(i&&/^((?:https?:)?\/\/[^/]+)\/\w+/i.test(i)?t=s.getEndpoint(i,{v:n.VERSION,app:1}):(n.config.api_key||n.config.key)&&n.CDN?t=s.getEndpoint("/api/iframe",{url:e.getAttribute("href"),v:n.VERSION,app:1},n.SUPPORTED_QUERY_STRING):console.warn("Iframely cannot build embeds: api key is required as query-string of embed.js"),t){var o=document.createElement("iframe");o.setAttribute("allowfullscreen",""),o.setAttribute("allow","autoplay *; encrypted-media *"),e.hasAttribute("data-img")&&o.setAttribute("data-img",e.getAttribute("data-img"));var r=e.hasAttribute("data-lazy")||e.hasAttribute("data-img")||/&lazy=1/.test(t)||n.config.lazy,a=e.textContent||e.innerText;a&&""!==a&&(o.textContent=a);var l=s.getIframeWrapper(e,!0);if(l)for(;l.aspectWrapper.lastChild;)l.aspectWrapper.removeChild(l.aspectWrapper.lastChild);else l=s.addDefaultWrappers(e),e.parentNode.removeChild(e);l.aspectWrapper.appendChild(o),r?(o.setAttribute("data-iframely-url",t),n.trigger("load",o)):(o.setAttribute("src",t),n.trigger("iframe-ready",o))}else e.removeAttribute("data-iframely-url")}}(e)}))},6473:(e,t,i)=>{var s=i(8110);s.VERSION=1,s.ASPECT_WRAPPER_CLASS="iframely-responsive",s.MAXWIDTH_WRAPPER_CLASS="iframely-embed",s.LOADER_CLASS="iframely-loader",s.DOMAINS=["cdn.iframe.ly","iframe.ly","if-cdn.com","iframely.net"],s.CDN=s.CDN||s.DOMAINS[0],s.BASE_RE=/^(?:https?:)?\/\/[^/]+/i,s.ID_RE=/^(?:https?:)?\/\/[^/]+\/(\w+-?\w+)(?:\?.*)?$/,s.SCRIPT_RE=/^(?:https?:|file:\/)?\/\/[^/]+(?:.+)?\/(?:embed|iframely)\.js(?:[^/]+)?$/i,s.CDN_RE=/^(?:https?:)?\/\/([^/]+)\/(?:embed|iframely)\.js(?:[^/]+)?$/i,s.SUPPORTED_QUERY_STRING=["api_key","key","iframe","html5","playerjs","align","language","media","maxwidth","maxheight","lazy","import","parent","click_to_play","autoplay","mute","card",/^_.+/],s.LAZY_IFRAME_SHOW_TIMEOUT=3e3,s.LAZY_IFRAME_FADE_TIMEOUT=200,s.CLEAR_WRAPPER_STYLES_TIMEOUT=3e3},9113:(e,t,i)=>{var s=i(8110);s.widgets=s.widgets||{},s.widgets.load=s.load,s.events||(s.events={},s.events.on=s.on,s.events.trigger=s.trigger),s.on("cancel",(function(e,t,i,s){if(e&&t&&i&&""!==i){var n=document.createElement("a");n.setAttribute("href",e),n.setAttribute("target","_blank"),n.setAttribute("rel","noopener"),n.textContent=i,s?t.insertBefore(n,s):t.appendChild(n)}}))},7048:(e,t,i)=>{var s,n=i(8110);s=function(){n.trigger("load")},"complete"!==document.readyState&&"interactive"!==document.readyState||setTimeout(s,0),document.addEventListener?document.addEventListener("DOMContentLoaded",s):window.attachEvent("onload",s)},7186:(e,t,i)=>{var s=i(8110),n=function(e,t,i,s){for(;!s&&i<t.length;)s=e[t[i++]+"equestAnimationFrame"];return s&&s.bind(e)||e.setImmediate||function(t){e.setTimeout(t,0)}}("undefined"!=typeof window?window:i.g,"r webkitR mozR msR oR".split(" "),0),o={};function r(e,t,i){(o[e]||[]).forEach((function(e){t?n((function(){e.apply(s,i)})):e.apply(s,i)})),"init"===e&&(o[e]=[])}s.on=function(e,t){(o[e]=o[e]||[]).push(t)},s.trigger=function(e){r(e,!1,Array.prototype.slice.call(arguments,1))},s.triggerAsync=function(e){r(e,!0,Array.prototype.slice.call(arguments,1))}},8110:e=>{var t=window.iframely=window.iframely||{};t.config=t.config||{},e.exports=t},9324:(e,t,i)=>{var s=i(8393),n=i(8110),o={};function r(e,t,i){var o,r=e.cancel,a=e.shadow,h=e.renderEvent,d=s.getIframeWrapper(t,!0);if(r)o=s.getWidget(t),n.cancelWidget(o||{maxWidthWrapper:t,iframe:t,url:t.getAttribute("href")});else{var u,m;if((o=document.createElement("div")).innerHTML=e.html,d&&!h?(u=d.aspectWrapper.parentNode,m=d.aspectWrapper,d.maxWidthWrapper.removeAttribute("style")):(u=t.parentNode,m=t),a){var p=document.createElement("div"),f=p.attachShadow({mode:"open"});f.appendChild(o);var g={shadowRoot:f,shadowContainer:p,container:u,context:e.context,stylesIds:e.stylesIds,stylesDict:i.commonShadowStyles};n.trigger("import-shadow-widget-before-render",g),u.insertBefore(p,m),n.trigger("import-shadow-widget-after-render",g)}else u.insertBefore(o,m),c(o);u.removeChild(m),h&&setTimeout((function(){l(u)}),n.CLEAR_WRAPPER_STYLES_TIMEOUT)}}function a(){delete n.import;for(var e=document.querySelectorAll("a[data-iframely-url][data-import-uri]"),t=0;t<e.length;t++)e[t].removeAttribute("data-import-uri"),n.trigger("load",e[t])}function l(e){for(var t=e,i=0;t&&t.getAttribute("class")!==n.ASPECT_WRAPPER_CLASS;)t=t.parentNode,++i>4&&(t=null);var s=t&&t.parentNode;s&&s.getAttribute("class")===n.MAXWIDTH_WRAPPER_CLASS&&(t.removeAttribute("style"),t.removeAttribute("class"),s.removeAttribute("style"))}function c(e){function t(t){var i=t.text||t.textContent||t.innerHTML||"",s=document.createElement("script");t.src&&(s.src=t.src),s.type="text/javascript";try{s.appendChild(document.createTextNode(i))}catch(e){s.text=i}e.appendChild(s)}var i,s,n,o,r,a=[],l=e.childNodes;for(n=0;l[n];n++)r="script",!(o=s=l[n]).nodeName||o.nodeName.toUpperCase()!==r.toUpperCase()||s.type&&"text/javascript"!==s.type.toLowerCase()&&"application/javascript"!==s.type.toLowerCase()?c(s):(a.push(s),e.removeChild(s));for(n=0;a[n];n++)(i=a[n]).parentNode&&i.parentNode.removeChild(i),t(a[n])}n.on("load",(function(e){if(!e&&!1!==n.config.import&&document.head.attachShadow&&(n.debug||"http:"===document.location.protocol||"https:"===document.location.protocol)&&!n.config.playerjs&&!n.config.lazy&&!n.import){var t=document.querySelectorAll("a[data-iframely-url]:not([data-import-uri])");t.length>1&&function(e){var t=document.createElement("script"),i=[],r=[],l=null;function c(e,t){o[e]||(o[e]=[]),o[e].push(t)}function h(e){var t=e.getAttribute("data-iframely-url"),o=t.match(n.ID_RE),a=o&&o[1],h=s.parseQueryString(t,n.SUPPORTED_QUERY_STRING.concat("url")),d=h.url;delete h.url;var u="0"===h.import||"false"===h.import||"1"===h.playerjs||"true"===h.playerjs;if(!u){var m=t.match(n.BASE_RE);h.CDN=m&&m[0],l?JSON.stringify(h,Object.keys(h).sort())!==JSON.stringify(l,Object.keys(l).sort())&&(u=!0):l=h}u?n.trigger("load",e):a?(e.setAttribute("data-import-uri",a),-1===r.indexOf(a)&&r.push(a),c(a,e)):(d||(d=e.getAttribute("href")),(l.key||l.api_key||n.config.api_key||n.config.key)&&d?(e.setAttribute("data-import-uri",d),-1===i.indexOf(d)&&i.push(d),c(d,e)):n.trigger("load",e))}for(var d=0;d<e.length;d++){var u=e[d];!u.getAttribute("data-import-uri")&&u.hasAttribute("data-iframely-url")&&h(u)}i.length>0||r.length>0?((l=l||{}).touch=n.isTouch(),l.flash=function(){var e=!1;try{e=!!new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(t){e=!(!navigator.mimeTypes||null==navigator.mimeTypes["application/x-shockwave-flash"]||!navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin)}return e}(),l.app=1,i.length>0&&(l.uri=i),r.length>0&&(l.ids=r.join("&")),l.v=n.VERSION,t.src=s.getEndpoint("/api/import/v2",l,n.SUPPORTED_QUERY_STRING),t.onerror=function(){a()},document.head.appendChild(t),n.import=t):(a(),n.trigger("load"))}(t)}})),n.on("load",(function(e,t){if(e&&e.uri&&(e.html||e.cancel)){var i=o[e.uri];if(i)for(var s=0;s<i.length;s++)r(e,i[s],t);delete o[e.uri]}})),n.buildImportWidgets=function(e){n.trigger("import-loaded",e),e.widgets.forEach((function(t){n.trigger("load",t,e)})),a()},n.isTouch=function(){return"ontouchstart"in window||navigator.maxTouchPoints},n.on("import-widget-ready",l),n.addEventListener||(n.addEventListener=function(e,t,i){e&&(e.addEventListener?e.addEventListener(t,i,!1):e.attachEvent?e.attachEvent("on"+t,i):e["on"+t]=i)})},1462:(e,t,i)=>{i(7048);var s=i(8110);s._loaded||(s._loaded=!0,i(6473),i(7186),i(3573),i(9324),i(3140),i(694),i(5001),i(1360),i(2772),i(786),i(1469),i(9113),s.trigger("init"))},3573:(e,t,i)=>{var s=i(5166),n=i(8110),o={};"IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&(n.on("init",(function(){n.extendOptions({intersection:1})})),n.on("message",(function(e,t){if("send-intersections"===t.method&&e.iframe){var i=t.options;i||(i={margin:1e3}),function(e){var t=JSON.stringify(e),i=o[t];return i||(i=new IntersectionObserver((function(t){t.forEach((function(t){s.postMessage({method:"intersection",entry:{isIntersecting:t.isIntersecting},options:e},"*",t.target.contentWindow)}))}),function(e){var t={};return e&&e.threshold&&(t.threshold=e.threshold),e&&e.margin&&(t.rootMargin=e.margin+"px "+e.margin+"px "+e.margin+"px "+e.margin+"px"),t}(e)),o[t]=i),i}(i).observe(e.iframe)}})))},5001:(e,t,i)=>{var s=i(8393),n=i(8110);n.on("load",(function(e){if(!e)for(var t=document.querySelectorAll("iframe[data-iframely-url]"),i=0;i<t.length;i++)n.trigger("load",t[i])})),n.on("load",(function(e){e&&"IFRAME"===e.nodeName&&e.hasAttribute("data-iframely-url")&&!e.hasAttribute("data-img")&&!e.getAttribute("src")&&function(e){var t=s.getWidget(e),i=e.getAttribute("data-iframely-url");t&&i&&(i=s.getEndpoint(i,{lazy:n.config.intersection,v:n.VERSION,app:1})),e.setAttribute("src",i),e.removeAttribute("data-iframely-url"),n.trigger("iframe-ready",e)}(e)}))},694:(e,t,i)=>{var s=i(8393),n=i(8110);function o(e){var t=e.aspectWrapper&&function(e){for(var t=0,i=0;i<e.childNodes.length;i++){var s=e.childNodes[i];if(s.nodeType===Node.TEXT_NODE){var n=s.textContent||s.innerText;(n=n.replace(/\s|\n/g,""))&&t++}else s.nodeType===Node.ELEMENT_NODE&&t++}return t}(e.aspectWrapper)>1&&function(e,t){for(var i=0,s=0;s<t.childNodes.length;s++){var n=t.childNodes[s];if(n.nodeType===Node.TEXT_NODE);else if(n.nodeType===Node.ELEMENT_NODE){if(e===i)return n;i++}}}(1,e.aspectWrapper);t&&"DIV"===t.nodeName&&e.aspectWrapper.removeChild(t)}n.on("load",(function(e){if(e&&"IFRAME"===e.nodeName&&e.hasAttribute("data-iframely-url")&&e.hasAttribute("data-img")&&!e.getAttribute("src")){var t=e.getAttribute("data-img");e.removeAttribute("data-img");var i=s.getWidget(e),o=e.getAttribute("data-iframely-url");!function(e,t,i){var o;if(i&&/^(https?:)?\/\//.test(i))o=i;else{var r=s.parseQueryString(t),a={};for(var l in r)0===l.indexOf("_")&&(a[l]=r[l]);if(t.match(/\/api\/iframe/))o=s.getEndpoint(t.match(/^(.+)\/api\/iframe/i)[1]+"/api/thumbnail",Object.assign({url:r.url,api_key:r.api_key,key:r.key},a));else{if(!t.match(n.ID_RE))return;o=s.getEndpoint(t.replace(/^((?:https?:)?\/\/[^/]+\/(\w+-?\w+))(?:\?.*)?$/,"$1/thumbnail"),a)}}var c=document.createElement("div");s.setStyles(c,{position:"absolute",width:"100%",height:"100%",backgroundImage:"url('"+o+"')",backgroundSize:"cover",backgroundPosition:"center"});var h=document.createElement("div");h.setAttribute("class",n.LOADER_CLASS),c.appendChild(h);var d=n.getElementComputedStyle(e.aspectWrapper,"padding-top"),u=n.getElementComputedStyle(e.aspectWrapper,"padding-bottom"),m=d.match(/^(\d+)px$/);if(m&&parseInt(m[1])&&u){var p=document.createElement("div");s.setStyles(p,{top:"-"+d,width:"100%",height:0,position:"relative",paddingBottom:u}),p.appendChild(c),e.aspectWrapper.appendChild(p)}else e.aspectWrapper.appendChild(c)}(i,o,t),o=s.addQueryString(o,{img:1}),e.setAttribute("data-iframely-url",o),new c(i),n.trigger("load",e)}})),n.on("message",(function(e,t){var i;"widgetRendered"===t.method&&(o(e),(i=l(e))&&i.deactivate()),"begin-waiting-widget-render"===t.method&&(i=l(e))&&i.clearLoadingTimeout(),"end-waiting-widget-render"===t.method&&(i=l(e))&&i.registerLoadingTimeout()}));var r=[];function a(e){for(var t=0;t<r.length&&r[t].widget.iframe!==e.iframe;)t++;if(t<r.length&&r[t].widget.iframe===e.iframe)return t}function l(e){var t=a(e);if(t||0===t)return r[t]}function c(e){this.widget=e,this.loadCount=0;var t=e.iframe,i=this;n.addEventListener(t,"load",(function(){i.iframeOnLoad()})),this.registerLoadingTimeout(),r.push(this)}c.prototype.iframeOnLoad=function(){if(this.loadCount++,2===this.loadCount){this.deactivate();var e=this;setTimeout((function(){o(e.widget)}),n.LAZY_IFRAME_FADE_TIMEOUT)}},c.prototype.deactivate=function(){var e;this.clearLoadingTimeout(),((e=a(this))||0===e)&&r.splice(e,1)},c.prototype.clearLoadingTimeout=function(){this.timeoutId&&clearTimeout(this.timeoutId),this.timeoutId=null},c.prototype.registerLoadingTimeout=function(){if(!this.timeoutId){var e=this;this.timeoutId=setTimeout((function(){e.iframeOnLoad()}),n.LAZY_IFRAME_SHOW_TIMEOUT)}}},5166:(e,t,i)=>{var s=i(8110),n=i(8393);function o(e,t){for(var i,s=0;s<e.length&&!i;s++){var n=e[s];n.contentWindow===t&&(i=n)}return i}!function(e){function t(t){var i;try{i=JSON.parse(t.data)}catch(e){}e(t,i)}window.postMessage&&(window.addEventListener?window[e?"addEventListener":"removeEventListener"]("message",t,!1):window[e?"attachEvent":"detachEvent"]("onmessage",t))}((function(e,t){if(t&&t.method){var i=function(e){var t;return e.src&&(t=o(document.querySelectorAll('iframe[src*="'+e.src.replace(/^https?:/,"")+'"]'),e.contentWindow)),t||(t=o(e.domains?document.querySelectorAll('iframe[src*="'+(e.domains||s.DOMAINS).join('"], iframe[src*="')+'"]'):document.getElementsByTagName("iframe"),e.contentWindow)),t}({contentWindow:e.source,src:t.context,domains:s.DOMAINS.concat(s.CDN)});if(i){var r=n.getWidget(i);r&&t.url&&(r.url=t.url),s.trigger("message",r,t)}}})),t.postMessage=function(e,t,i){window.postMessage&&("object"==typeof e&&(e.context=document.location.href),e=JSON.stringify(e),t=t||"*",(i=i||window.parent).postMessage(e,t.replace(/([^:]+:\/\/[^/]+).*/,"$1")))}},8393:(e,t,i)=>{var s=i(8110),n=i(5166);s.on("init",(function(){s.extendOptions(function(){for(var e=document.querySelectorAll('script[src*="embed.js"], script[src*="iframely.js"]'),t=0;t<e.length;t++){var i=e[t].getAttribute("src").replace(/&amp;/gi,"&");if(s.SCRIPT_RE.test(i)){var n=c(i,s.SUPPORTED_QUERY_STRING.concat("cdn")),o=i.match(s.CDN_RE);if((o||n.cdn)&&(s.CDN=n.cdn||o[1]),Object.keys(n).length>0)return n}}return{}}()),function(){var e="iframely-styles",t=document.getElementById(e);if(!t){var i=".iframely-responsive{top:0;left:0;width:100%;height:0;position:relative;padding-bottom:56.25%;box-sizing:border-box;}.iframely-responsive>*{top:0;left:0;width:100%;height:100%;position:absolute;border:0;box-sizing:border-box;}";(t=document.createElement("style")).id=e,t.type="text/css",t.styleSheet?t.styleSheet.cssText=i:t.innerHTML=i,document.getElementsByTagName("head")[0].appendChild(t)}}(),function(e){for(var t=document.querySelectorAll('iframe[src*="'+(e||s.DOMAINS).join('"], iframe[src*="')+'"]'),i=0;i<t.length;i++){var o=t[i],r=o.src;(r.match(/^(https?:)?\/\/[^/]+\/api\/iframe\?.+/)||r.match(/^(https?:)?\/\/[^/]+\/\w+(\?.*)?$/))&&n.postMessage({method:"getSize"},"*",o.contentWindow)}}(s.DOMAINS.concat(s.CDN.replace(/^https?:\/\//,"")))})),s.load=function(){var e=Array.prototype.slice.call(arguments);e.unshift("load"),s.trigger.apply(this,e)};var o=t.getIframeWrapper=function(e,t){var i=e.parentNode;if(!(!i||"DIV"!==i.nodeName||a(i)>2||t&&i.getAttribute("class")!==s.ASPECT_WRAPPER_CLASS||!t&&"relative"!==i.style.position&&i.getAttribute("class")!==s.ASPECT_WRAPPER_CLASS)){var n=i.parentNode;if(!(!n||"DIV"!==n.nodeName||a(n)>1||t&&n.getAttribute("class")!==s.MAXWIDTH_WRAPPER_CLASS||!t&&n.getAttribute("class")&&!n.getAttribute("class").match(/iframely/i)))return{aspectWrapper:i,maxWidthWrapper:n}}};t.addDefaultWrappers=function(e){var t=e.parentNode,i=document.createElement("div");i.className=s.MAXWIDTH_WRAPPER_CLASS;var n=document.createElement("div");return n.className=s.ASPECT_WRAPPER_CLASS,i.appendChild(n),t.insertBefore(i,e),{aspectWrapper:n,maxWidthWrapper:i}},t.getWidget=function(e){var t=o(e);if(t){var i={iframe:e,aspectWrapper:t.aspectWrapper,maxWidthWrapper:t.maxWidthWrapper};if("A"===e.nodeName&&e.hasAttribute("href"))i.url=e.getAttribute("href");else if(e.hasAttribute("src")&&/url=/.test(e.getAttribute("src"))){var s=c(e.getAttribute("src"));s.url&&(i.url=s.url)}return i}},s.getElementComputedStyle=function(e,t){return window.getComputedStyle&&window.getComputedStyle(e).getPropertyValue(t)},t.setStyles=function(e,t){e&&Object.keys(t).forEach((function(i){var n=t[i];("number"==typeof n||"string"==typeof n&&/^(\d+)?\.?(\d+)$/.test(n))&&(n+="px");var o=e.style[i];window.getComputedStyle&&(s.getElementComputedStyle(e,i)==n||"iframely-responsive"==e.className&&"paddingBottom"===i&&!o&&/^56\.2\d+%$/.test(n)||"max-width"===i&&"keep"===n)||(e.style[i]=n||"")}))};var r=t.addQueryString=function(e,t){var i="";return Object.keys(t).forEach((function(s){var n=t[s];if("[object Array]"===Object.prototype.toString.call(n)){var o=n.map((function(e){return s+"="+encodeURIComponent(e)}));i+="&"+o.join("&")}else void 0!==n&&-1===e.indexOf(s+"=")&&(!0===n&&(n=1),!1===n&&(n=0),i+="&"+s+"="+encodeURIComponent(n))})),e+(""!==i?(e.indexOf("?")>-1?"&":"?")+i.replace(/^&/,""):"")};function a(e){for(var t=0,i=0;i<e.childNodes.length;i++){var s=e.childNodes[i];if(s.nodeType===Node.TEXT_NODE){var n=s.textContent||s.innerText;(n=n.replace(/\s|\n/g,""))&&t++}else s.nodeType===Node.ELEMENT_NODE&&t++}return t}function l(e,t){for(var i,s=0;s<e.length;){if((i=e[s])==t)return!0;if(i&&i.test&&i.test(t))return!0;s++}}t.getEndpoint=function(e,t,i){var n=e;if(/^(https?:)?\/\//i.test(e)||(n=(t.CDN||s.CDN)+n,delete t.CDN),/^(?:https?:)?\/\//i.test(n)||(n="//"+n),t&&(n=r(n,t)),i&&i.length){for(var o={},a=Object.keys(s.config),c=0;c<a.length;c++){var h=a[c];l(i,h)&&(o[h]=s.config[h])}n=r(n,o)}return/^(https?:)?\/\//i.test(n)&&!n.match(/^(https?:)?\/\//i)[1]&&"file:"===document.location.protocol&&(n="http:"+n),n},s.extendOptions=function(e){e&&Object.keys(e).forEach((function(t){var i=0!==e[t]&&"0"!==e[t]&&!1!==e[t]&&"false"!==e[t]&&(1===e[t]||"1"===e[t]||!0===e[t]||"true"===e[t]||e[t]);!1!==s.config[t]&&(s.config[t]=i)}))};var c=t.parseQueryString=function(e,t){var i=e.match(/\?(.+)/i);if(i){for(var s=(i=i[1]).split("&"),n={},o=0;o<s.length;o++){var r=s[o].split("=");t&&!l(t,r[0])||(n[r[0]]=decodeURIComponent(r[1]))}return n}return{}}},1360:(e,t,i)=>{var s=i(8110);s.on("message",(function(e,t){"cancelWidget"===t.method&&s.cancelWidget(e)})),s.cancelWidget=function(e){if(e){var t=e.maxWidthWrapper&&e.maxWidthWrapper.parentNode,i=e.maxWidthWrapper;if(s.config&&s.config.parent){var n=function(e,t){for(var i=!1;!i&&e.parentNode;)i=(e=e.parentNode).className&&e.className.split(" ").indexOf(t)>=0;return i&&e}(e.maxWidthWrapper,s.config.parent);n&&(t=n.parentNode,i=n)}if(e.url){var o=e.iframe&&(e.iframe.textContent||e.iframe.innerText);s.triggerAsync("cancel",e.url,t,o,i.nextSibling)}t.removeChild(i)}else console.warn("iframely.cancelWidget called without widget param")}},786:(e,t,i)=>{var s=i(8110);s.on("message",(function(e,t){"open-href"!==t.method&&"click"!==t.method||s.trigger(t.method,t.href)})),s.openHref||(s.openHref=function(e){0===e.indexOf(window.location.origin)?window.location.href=e:window.open(e,"_blank","noopener")}),s.on("open-href",(function(e){s.triggerAsync("click",e),s.openHref(e)}))},1469:(e,t,i)=>{var s=i(8110);s.on("message",(function(e,t){"setIframelyEmbedOptions"===t.method&&s.trigger("options",e,t.data)}))},2772:(e,t,i)=>{var s=i(8393),n=i(8110);n.on("message",(function(e,t){if("setIframelyWidgetSize"===t.method||"resize"===t.method||"setIframelyEmbedData"===t.method){var i=null;t.data&&t.data.media&&t.data.media.frame_style?(t.data.media.frame_style.split(";").forEach((function(e){if(""!==e.trim()&&e.indexOf(":")>-1){var t=e.split(":");2===t.length&&((i=i||{})[t[0].trim()]=t[1].trim())}})),a(e,i)):"setIframelyEmbedData"===t.method&&a(e,null);var o=t.data&&t.data.media;!o&&t.height&&(o={height:t.height,"max-width":"keep"}),function(e,t){if(t&&Object.keys(t).length>0&&e){var i=function(e){var t=e.iframe&&e.iframe.style.border||e.aspectWrapper&&e.aspectWrapper.style.border,i=t&&t.match(/(\d+)px/)||0;return i&&(i=parseInt(i[1]),i*=2),i}(e),o=window.getComputedStyle&&window.getComputedStyle(e.iframe).getPropertyValue("height"),r=t["max-width"];"number"==typeof r&&(r+=i),s.setStyles(e.maxWidthWrapper,{"max-width":r,"min-width":t["min-width"]&&t["min-width"]+i,width:t.width&&t.width+i}),t.scrolling&&e.iframe&&e.iframe.setAttribute("scrolling",t.scrolling);var a=t["aspect-ratio"];(a||t.height)&&s.setStyles(e.aspectWrapper,{paddingBottom:a?Math.round(1e5/a)/1e3+"%":0,paddingTop:a&&t["padding-bottom"],height:a?0:t.height&&t.height+i});var l=window.getComputedStyle&&window.getComputedStyle(e.iframe).getPropertyValue("height");o&&o!==l&&n.triggerAsync("heightChanged",e.iframe,o,l)}}(e,o)}}));var o={border:"","border-radius":"","box-shadow":"",overflow:""},r={border:"0","border-radius":"","box-shadow":"",overflow:""};function a(e,t){t&&e&&e.iframe?t["border-radius"]?(t.overflow="hidden",s.setStyles(e.aspectWrapper,t)):s.setStyles(e.iframe,t):!t&&e&&e.iframe&&(s.setStyles(e.aspectWrapper,o),s.setStyles(e.iframe,r))}},4036:e=>{"use strict";var t=function(e){return function(e){return!!e&&"object"==typeof e}(e)&&!function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===i}(e)}(e)},i="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function s(e,t){return!1!==t.clone&&t.isMergeableObject(e)?l((i=e,Array.isArray(i)?[]:{}),e,t):e;var i}function n(e,t,i){return e.concat(t).map((function(e){return s(e,i)}))}function o(e){return Object.keys(e).concat(function(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter((function(t){return e.propertyIsEnumerable(t)})):[]}(e))}function r(e,t){try{return t in e}catch(e){return!1}}function a(e,t,i){var n={};return i.isMergeableObject(e)&&o(e).forEach((function(t){n[t]=s(e[t],i)})),o(t).forEach((function(o){(function(e,t){return r(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))})(e,o)||(r(e,o)&&i.isMergeableObject(t[o])?n[o]=function(e,t){if(!t.customMerge)return l;var i=t.customMerge(e);return"function"==typeof i?i:l}(o,i)(e[o],t[o],i):n[o]=s(t[o],i))})),n}function l(e,i,o){(o=o||{}).arrayMerge=o.arrayMerge||n,o.isMergeableObject=o.isMergeableObject||t,o.cloneUnlessOtherwiseSpecified=s;var r=Array.isArray(i);return r===Array.isArray(e)?r?o.arrayMerge(e,i,o):a(e,i,o):s(i,o)}l.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce((function(e,i){return l(e,i,t)}),{})};var c=l;e.exports=c},3117:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.attributeNames=t.elementNames=void 0,t.elementNames=new Map([["altglyph","altGlyph"],["altglyphdef","altGlyphDef"],["altglyphitem","altGlyphItem"],["animatecolor","animateColor"],["animatemotion","animateMotion"],["animatetransform","animateTransform"],["clippath","clipPath"],["feblend","feBlend"],["fecolormatrix","feColorMatrix"],["fecomponenttransfer","feComponentTransfer"],["fecomposite","feComposite"],["feconvolvematrix","feConvolveMatrix"],["fediffuselighting","feDiffuseLighting"],["fedisplacementmap","feDisplacementMap"],["fedistantlight","feDistantLight"],["fedropshadow","feDropShadow"],["feflood","feFlood"],["fefunca","feFuncA"],["fefuncb","feFuncB"],["fefuncg","feFuncG"],["fefuncr","feFuncR"],["fegaussianblur","feGaussianBlur"],["feimage","feImage"],["femerge","feMerge"],["femergenode","feMergeNode"],["femorphology","feMorphology"],["feoffset","feOffset"],["fepointlight","fePointLight"],["fespecularlighting","feSpecularLighting"],["fespotlight","feSpotLight"],["fetile","feTile"],["feturbulence","feTurbulence"],["foreignobject","foreignObject"],["glyphref","glyphRef"],["lineargradient","linearGradient"],["radialgradient","radialGradient"],["textpath","textPath"]]),t.attributeNames=new Map([["definitionurl","definitionURL"],["attributename","attributeName"],["attributetype","attributeType"],["basefrequency","baseFrequency"],["baseprofile","baseProfile"],["calcmode","calcMode"],["clippathunits","clipPathUnits"],["diffuseconstant","diffuseConstant"],["edgemode","edgeMode"],["filterunits","filterUnits"],["glyphref","glyphRef"],["gradienttransform","gradientTransform"],["gradientunits","gradientUnits"],["kernelmatrix","kernelMatrix"],["kernelunitlength","kernelUnitLength"],["keypoints","keyPoints"],["keysplines","keySplines"],["keytimes","keyTimes"],["lengthadjust","lengthAdjust"],["limitingconeangle","limitingConeAngle"],["markerheight","markerHeight"],["markerunits","markerUnits"],["markerwidth","markerWidth"],["maskcontentunits","maskContentUnits"],["maskunits","maskUnits"],["numoctaves","numOctaves"],["pathlength","pathLength"],["patterncontentunits","patternContentUnits"],["patterntransform","patternTransform"],["patternunits","patternUnits"],["pointsatx","pointsAtX"],["pointsaty","pointsAtY"],["pointsatz","pointsAtZ"],["preservealpha","preserveAlpha"],["preserveaspectratio","preserveAspectRatio"],["primitiveunits","primitiveUnits"],["refx","refX"],["refy","refY"],["repeatcount","repeatCount"],["repeatdur","repeatDur"],["requiredextensions","requiredExtensions"],["requiredfeatures","requiredFeatures"],["specularconstant","specularConstant"],["specularexponent","specularExponent"],["spreadmethod","spreadMethod"],["startoffset","startOffset"],["stddeviation","stdDeviation"],["stitchtiles","stitchTiles"],["surfacescale","surfaceScale"],["systemlanguage","systemLanguage"],["tablevalues","tableValues"],["targetx","targetX"],["targety","targetY"],["textlength","textLength"],["viewbox","viewBox"],["viewtarget","viewTarget"],["xchannelselector","xChannelSelector"],["ychannelselector","yChannelSelector"],["zoomandpan","zoomAndPan"]])},1671:function(e,t,i){"use strict";var s=this&&this.__assign||function(){return(s=Object.assign||function(e){for(var t,i=1,s=arguments.length;i<s;i++)for(var n in t=arguments[i])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},n=this&&this.__createBinding||(Object.create?function(e,t,i,s){void 0===s&&(s=i),Object.defineProperty(e,s,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,s){void 0===s&&(s=i),e[s]=t[i]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});var a=r(i(7304)),l=i(7531),c=i(3117),h=new Set(["style","script","xmp","iframe","noembed","noframes","plaintext","noscript"]),d=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]);function u(e,t){void 0===t&&(t={});for(var i=("length"in e?e:[e]),s="",n=0;n<i.length;n++)s+=m(i[n],t);return s}function m(e,t){switch(e.type){case a.Root:return u(e.children,t);case a.Directive:case a.Doctype:return"<"+e.data+">";case a.Comment:return function(e){return"\x3c!--"+e.data+"--\x3e"}(e);case a.CDATA:return function(e){return"<![CDATA["+e.children[0].data+"]]>"}(e);case a.Script:case a.Style:case a.Tag:return function(e,t){var i;"foreign"===t.xmlMode&&(e.name=null!==(i=c.elementNames.get(e.name))&&void 0!==i?i:e.name,e.parent&&p.has(e.parent.name)&&(t=s(s({},t),{xmlMode:!1}))),!t.xmlMode&&f.has(e.name)&&(t=s(s({},t),{xmlMode:"foreign"}));var n="<"+e.name,o=function(e,t){if(e)return Object.keys(e).map((function(i){var s,n,o=null!==(s=e[i])&&void 0!==s?s:"";return"foreign"===t.xmlMode&&(i=null!==(n=c.attributeNames.get(i))&&void 0!==n?n:i),t.emptyAttrs||t.xmlMode||""!==o?i+'="'+(!1!==t.decodeEntities?l.encodeXML(o):o.replace(/"/g,"&quot;"))+'"':i})).join(" ")}(e.attribs,t);return o&&(n+=" "+o),0===e.children.length&&(t.xmlMode?!1!==t.selfClosingTags:t.selfClosingTags&&d.has(e.name))?(t.xmlMode||(n+=" "),n+="/>"):(n+=">",e.children.length>0&&(n+=u(e.children,t)),!t.xmlMode&&d.has(e.name)||(n+="</"+e.name+">")),n}(e,t);case a.Text:return function(e,t){var i=e.data||"";return!1===t.decodeEntities||!t.xmlMode&&e.parent&&h.has(e.parent.name)||(i=l.encodeXML(i)),i}(e,t)}}t.default=u;var p=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignObject","desc","title"]),f=new Set(["svg","math"])},7304:(e,t)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.Doctype=t.CDATA=t.Tag=t.Style=t.Script=t.Comment=t.Directive=t.Text=t.Root=t.isTag=t.ElementType=void 0,function(e){e.Root="root",e.Text="text",e.Directive="directive",e.Comment="comment",e.Script="script",e.Style="style",e.Tag="tag",e.CDATA="cdata",e.Doctype="doctype"}(i=t.ElementType||(t.ElementType={})),t.isTag=function(e){return e.type===i.Tag||e.type===i.Script||e.type===i.Style},t.Root=i.Root,t.Text=i.Text,t.Directive=i.Directive,t.Comment=i.Comment,t.Script=i.Script,t.Style=i.Style,t.Tag=i.Tag,t.CDATA=i.CDATA,t.Doctype=i.Doctype},1363:function(e,t,i){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,i,s){void 0===s&&(s=i),Object.defineProperty(e,s,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,s){void 0===s&&(s=i),e[s]=t[i]}),n=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||s(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),t.DomHandler=void 0;var o=i(7304),r=i(5653);n(i(5653),t);var a=/\s+/g,l={normalizeWhitespace:!1,withStartIndices:!1,withEndIndices:!1,xmlMode:!1},c=function(){function e(e,t,i){this.dom=[],this.root=new r.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,"function"==typeof t&&(i=t,t=l),"object"==typeof e&&(t=e,e=void 0),this.callback=null!=e?e:null,this.options=null!=t?t:l,this.elementCB=null!=i?i:null}return e.prototype.onparserinit=function(e){this.parser=e},e.prototype.onreset=function(){this.dom=[],this.root=new r.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null},e.prototype.onend=function(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))},e.prototype.onerror=function(e){this.handleCallback(e)},e.prototype.onclosetag=function(){this.lastNode=null;var e=this.tagStack.pop();this.options.withEndIndices&&(e.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(e)},e.prototype.onopentag=function(e,t){var i=this.options.xmlMode?o.ElementType.Tag:void 0,s=new r.Element(e,t,void 0,i);this.addNode(s),this.tagStack.push(s)},e.prototype.ontext=function(e){var t=this.options.normalizeWhitespace,i=this.lastNode;if(i&&i.type===o.ElementType.Text)t?i.data=(i.data+e).replace(a," "):i.data+=e,this.options.withEndIndices&&(i.endIndex=this.parser.endIndex);else{t&&(e=e.replace(a," "));var s=new r.Text(e);this.addNode(s),this.lastNode=s}},e.prototype.oncomment=function(e){if(this.lastNode&&this.lastNode.type===o.ElementType.Comment)this.lastNode.data+=e;else{var t=new r.Comment(e);this.addNode(t),this.lastNode=t}},e.prototype.oncommentend=function(){this.lastNode=null},e.prototype.oncdatastart=function(){var e=new r.Text(""),t=new r.NodeWithChildren(o.ElementType.CDATA,[e]);this.addNode(t),e.parent=t,this.lastNode=e},e.prototype.oncdataend=function(){this.lastNode=null},e.prototype.onprocessinginstruction=function(e,t){var i=new r.ProcessingInstruction(e,t);this.addNode(i)},e.prototype.handleCallback=function(e){if("function"==typeof this.callback)this.callback(e,this.dom);else if(e)throw e},e.prototype.addNode=function(e){var t=this.tagStack[this.tagStack.length-1],i=t.children[t.children.length-1];this.options.withStartIndices&&(e.startIndex=this.parser.startIndex),this.options.withEndIndices&&(e.endIndex=this.parser.endIndex),t.children.push(e),i&&(e.prev=i,i.next=e),e.parent=t,this.lastNode=null},e}();t.DomHandler=c,t.default=c},5653:function(e,t,i){"use strict";var s,n=this&&this.__extends||(s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,i=1,s=arguments.length;i<s;i++)for(var n in t=arguments[i])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.cloneNode=t.hasChildren=t.isDocument=t.isDirective=t.isComment=t.isText=t.isCDATA=t.isTag=t.Element=t.Document=t.NodeWithChildren=t.ProcessingInstruction=t.Comment=t.Text=t.DataNode=t.Node=void 0;var r=i(7304),a=new Map([[r.ElementType.Tag,1],[r.ElementType.Script,1],[r.ElementType.Style,1],[r.ElementType.Directive,1],[r.ElementType.Text,3],[r.ElementType.CDATA,4],[r.ElementType.Comment,8],[r.ElementType.Root,9]]),l=function(){function e(e){this.type=e,this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}return Object.defineProperty(e.prototype,"nodeType",{get:function(){var e;return null!==(e=a.get(this.type))&&void 0!==e?e:1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parentNode",{get:function(){return this.parent},set:function(e){this.parent=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"previousSibling",{get:function(){return this.prev},set:function(e){this.prev=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextSibling",{get:function(){return this.next},set:function(e){this.next=e},enumerable:!1,configurable:!0}),e.prototype.cloneNode=function(e){return void 0===e&&(e=!1),k(this,e)},e}();t.Node=l;var c=function(e){function t(t,i){var s=e.call(this,t)||this;return s.data=i,s}return n(t,e),Object.defineProperty(t.prototype,"nodeValue",{get:function(){return this.data},set:function(e){this.data=e},enumerable:!1,configurable:!0}),t}(l);t.DataNode=c;var h=function(e){function t(t){return e.call(this,r.ElementType.Text,t)||this}return n(t,e),t}(c);t.Text=h;var d=function(e){function t(t){return e.call(this,r.ElementType.Comment,t)||this}return n(t,e),t}(c);t.Comment=d;var u=function(e){function t(t,i){var s=e.call(this,r.ElementType.Directive,i)||this;return s.name=t,s}return n(t,e),t}(c);t.ProcessingInstruction=u;var m=function(e){function t(t,i){var s=e.call(this,t)||this;return s.children=i,s}return n(t,e),Object.defineProperty(t.prototype,"firstChild",{get:function(){var e;return null!==(e=this.children[0])&&void 0!==e?e:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastChild",{get:function(){return this.children.length>0?this.children[this.children.length-1]:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"childNodes",{get:function(){return this.children},set:function(e){this.children=e},enumerable:!1,configurable:!0}),t}(l);t.NodeWithChildren=m;var p=function(e){function t(t){return e.call(this,r.ElementType.Root,t)||this}return n(t,e),t}(m);t.Document=p;var f=function(e){function t(t,i,s,n){void 0===s&&(s=[]),void 0===n&&(n="script"===t?r.ElementType.Script:"style"===t?r.ElementType.Style:r.ElementType.Tag);var o=e.call(this,n,s)||this;return o.name=t,o.attribs=i,o}return n(t,e),Object.defineProperty(t.prototype,"tagName",{get:function(){return this.name},set:function(e){this.name=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"attributes",{get:function(){var e=this;return Object.keys(this.attribs).map((function(t){var i,s;return{name:t,value:e.attribs[t],namespace:null===(i=e["x-attribsNamespace"])||void 0===i?void 0:i[t],prefix:null===(s=e["x-attribsPrefix"])||void 0===s?void 0:s[t]}}))},enumerable:!1,configurable:!0}),t}(m);function g(e){return(0,r.isTag)(e)}function w(e){return e.type===r.ElementType.CDATA}function b(e){return e.type===r.ElementType.Text}function v(e){return e.type===r.ElementType.Comment}function y(e){return e.type===r.ElementType.Directive}function _(e){return e.type===r.ElementType.Root}function k(e,t){var i;if(void 0===t&&(t=!1),b(e))i=new h(e.data);else if(v(e))i=new d(e.data);else if(g(e)){var s=t?A(e.children):[],n=new f(e.name,o({},e.attribs),s);s.forEach((function(e){return e.parent=n})),e["x-attribsNamespace"]&&(n["x-attribsNamespace"]=o({},e["x-attribsNamespace"])),e["x-attribsPrefix"]&&(n["x-attribsPrefix"]=o({},e["x-attribsPrefix"])),i=n}else if(w(e)){s=t?A(e.children):[];var a=new m(r.ElementType.CDATA,s);s.forEach((function(e){return e.parent=a})),i=a}else if(_(e)){s=t?A(e.children):[];var l=new p(s);s.forEach((function(e){return e.parent=l})),e["x-mode"]&&(l["x-mode"]=e["x-mode"]),i=l}else{if(!y(e))throw new Error("Not implemented yet: "+e.type);var c=new u(e.name,e.data);null!=e["x-name"]&&(c["x-name"]=e["x-name"],c["x-publicId"]=e["x-publicId"],c["x-systemId"]=e["x-systemId"]),i=c}return i.startIndex=e.startIndex,i.endIndex=e.endIndex,i}function A(e){for(var t=e.map((function(e){return k(e,!0)})),i=1;i<t.length;i++)t[i].prev=t[i-1],t[i-1].next=t[i];return t}t.Element=f,t.isTag=g,t.isCDATA=w,t.isText=b,t.isComment=v,t.isDirective=y,t.isDocument=_,t.hasChildren=function(e){return Object.prototype.hasOwnProperty.call(e,"children")},t.cloneNode=k},3625:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFeed=void 0;var s=i(3633),n=i(7344);t.getFeed=function(e){var t=l(d,e);return t?"feed"===t.name?function(e){var t,i=e.children,s={type:"atom",items:(0,n.getElementsByTagName)("entry",i).map((function(e){var t,i=e.children,s={media:a(i)};h(s,"id","id",i),h(s,"title","title",i);var n=null===(t=l("link",i))||void 0===t?void 0:t.attribs.href;n&&(s.link=n);var o=c("summary",i)||c("content",i);o&&(s.description=o);var r=c("updated",i);return r&&(s.pubDate=new Date(r)),s}))};h(s,"id","id",i),h(s,"title","title",i);var o=null===(t=l("link",i))||void 0===t?void 0:t.attribs.href;o&&(s.link=o),h(s,"description","subtitle",i);var r=c("updated",i);return r&&(s.updated=new Date(r)),h(s,"author","email",i,!0),s}(t):function(e){var t,i,s=null!==(i=null===(t=l("channel",e.children))||void 0===t?void 0:t.children)&&void 0!==i?i:[],o={type:e.name.substr(0,3),id:"",items:(0,n.getElementsByTagName)("item",e.children).map((function(e){var t=e.children,i={media:a(t)};h(i,"id","guid",t),h(i,"title","title",t),h(i,"link","link",t),h(i,"description","description",t);var s=c("pubDate",t);return s&&(i.pubDate=new Date(s)),i}))};h(o,"title","title",s),h(o,"link","link",s),h(o,"description","description",s);var r=c("lastBuildDate",s);return r&&(o.updated=new Date(r)),h(o,"author","managingEditor",s,!0),o}(t):null};var o=["url","type","lang"],r=["fileSize","bitrate","framerate","samplingrate","channels","duration","height","width"];function a(e){return(0,n.getElementsByTagName)("media:content",e).map((function(e){for(var t=e.attribs,i={medium:t.medium,isDefault:!!t.isDefault},s=0,n=o;s<n.length;s++)t[c=n[s]]&&(i[c]=t[c]);for(var a=0,l=r;a<l.length;a++){var c;t[c=l[a]]&&(i[c]=parseInt(t[c],10))}return t.expression&&(i.expression=t.expression),i}))}function l(e,t){return(0,n.getElementsByTagName)(e,t,!0,1)[0]}function c(e,t,i){return void 0===i&&(i=!1),(0,s.textContent)((0,n.getElementsByTagName)(e,t,i,1)).trim()}function h(e,t,i,s,n){void 0===n&&(n=!1);var o=c(i,s,n);o&&(e[t]=o)}function d(e){return"rss"===e||"feed"===e||"rdf:RDF"===e}},3757:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uniqueSort=t.compareDocumentPosition=t.removeSubsets=void 0;var s=i(1363);function n(e,t){var i=[],n=[];if(e===t)return 0;for(var o=(0,s.hasChildren)(e)?e:e.parent;o;)i.unshift(o),o=o.parent;for(o=(0,s.hasChildren)(t)?t:t.parent;o;)n.unshift(o),o=o.parent;for(var r=Math.min(i.length,n.length),a=0;a<r&&i[a]===n[a];)a++;if(0===a)return 1;var l=i[a-1],c=l.children,h=i[a],d=n[a];return c.indexOf(h)>c.indexOf(d)?l===t?20:4:l===e?10:2}t.removeSubsets=function(e){for(var t=e.length;--t>=0;){var i=e[t];if(t>0&&e.lastIndexOf(i,t-1)>=0)e.splice(t,1);else for(var s=i.parent;s;s=s.parent)if(e.includes(s)){e.splice(t,1);break}}return e},t.compareDocumentPosition=n,t.uniqueSort=function(e){return(e=e.filter((function(e,t,i){return!i.includes(e,t+1)}))).sort((function(e,t){var i=n(e,t);return 2&i?-1:4&i?1:0})),e}},5511:function(e,t,i){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,i,s){void 0===s&&(s=i),Object.defineProperty(e,s,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,s){void 0===s&&(s=i),e[s]=t[i]}),n=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||s(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),t.hasChildren=t.isDocument=t.isComment=t.isText=t.isCDATA=t.isTag=void 0,n(i(3633),t),n(i(6530),t),n(i(1833),t),n(i(7062),t),n(i(7344),t),n(i(3757),t),n(i(3625),t);var o=i(1363);Object.defineProperty(t,"isTag",{enumerable:!0,get:function(){return o.isTag}}),Object.defineProperty(t,"isCDATA",{enumerable:!0,get:function(){return o.isCDATA}}),Object.defineProperty(t,"isText",{enumerable:!0,get:function(){return o.isText}}),Object.defineProperty(t,"isComment",{enumerable:!0,get:function(){return o.isComment}}),Object.defineProperty(t,"isDocument",{enumerable:!0,get:function(){return o.isDocument}}),Object.defineProperty(t,"hasChildren",{enumerable:!0,get:function(){return o.hasChildren}})},7344:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getElementsByTagType=t.getElementsByTagName=t.getElementById=t.getElements=t.testElement=void 0;var s=i(1363),n=i(7062),o={tag_name:function(e){return"function"==typeof e?function(t){return(0,s.isTag)(t)&&e(t.name)}:"*"===e?s.isTag:function(t){return(0,s.isTag)(t)&&t.name===e}},tag_type:function(e){return"function"==typeof e?function(t){return e(t.type)}:function(t){return t.type===e}},tag_contains:function(e){return"function"==typeof e?function(t){return(0,s.isText)(t)&&e(t.data)}:function(t){return(0,s.isText)(t)&&t.data===e}}};function r(e,t){return"function"==typeof t?function(i){return(0,s.isTag)(i)&&t(i.attribs[e])}:function(i){return(0,s.isTag)(i)&&i.attribs[e]===t}}function a(e,t){return function(i){return e(i)||t(i)}}function l(e){var t=Object.keys(e).map((function(t){var i=e[t];return Object.prototype.hasOwnProperty.call(o,t)?o[t](i):r(t,i)}));return 0===t.length?null:t.reduce(a)}t.testElement=function(e,t){var i=l(e);return!i||i(t)},t.getElements=function(e,t,i,s){void 0===s&&(s=1/0);var o=l(e);return o?(0,n.filter)(o,t,i,s):[]},t.getElementById=function(e,t,i){return void 0===i&&(i=!0),Array.isArray(t)||(t=[t]),(0,n.findOne)(r("id",e),t,i)},t.getElementsByTagName=function(e,t,i,s){return void 0===i&&(i=!0),void 0===s&&(s=1/0),(0,n.filter)(o.tag_name(e),t,i,s)},t.getElementsByTagType=function(e,t,i,s){return void 0===i&&(i=!0),void 0===s&&(s=1/0),(0,n.filter)(o.tag_type(e),t,i,s)}},1833:(e,t)=>{"use strict";function i(e){if(e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),e.parent){var t=e.parent.children;t.splice(t.lastIndexOf(e),1)}}Object.defineProperty(t,"__esModule",{value:!0}),t.prepend=t.prependChild=t.append=t.appendChild=t.replaceElement=t.removeElement=void 0,t.removeElement=i,t.replaceElement=function(e,t){var i=t.prev=e.prev;i&&(i.next=t);var s=t.next=e.next;s&&(s.prev=t);var n=t.parent=e.parent;if(n){var o=n.children;o[o.lastIndexOf(e)]=t}},t.appendChild=function(e,t){if(i(t),t.next=null,t.parent=e,e.children.push(t)>1){var s=e.children[e.children.length-2];s.next=t,t.prev=s}else t.prev=null},t.append=function(e,t){i(t);var s=e.parent,n=e.next;if(t.next=n,t.prev=e,e.next=t,t.parent=s,n){if(n.prev=t,s){var o=s.children;o.splice(o.lastIndexOf(n),0,t)}}else s&&s.children.push(t)},t.prependChild=function(e,t){if(i(t),t.parent=e,t.prev=null,1!==e.children.unshift(t)){var s=e.children[1];s.prev=t,t.next=s}else t.next=null},t.prepend=function(e,t){i(t);var s=e.parent;if(s){var n=s.children;n.splice(n.indexOf(e),0,t)}e.prev&&(e.prev.next=t),t.parent=s,t.prev=e.prev,t.next=e,e.prev=t}},7062:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findAll=t.existsOne=t.findOne=t.findOneChild=t.find=t.filter=void 0;var s=i(1363);function n(e,t,i,o){for(var r=[],a=0,l=t;a<l.length;a++){var c=l[a];if(e(c)&&(r.push(c),--o<=0))break;if(i&&(0,s.hasChildren)(c)&&c.children.length>0){var h=n(e,c.children,i,o);if(r.push.apply(r,h),(o-=h.length)<=0)break}}return r}t.filter=function(e,t,i,s){return void 0===i&&(i=!0),void 0===s&&(s=1/0),Array.isArray(t)||(t=[t]),n(e,t,i,s)},t.find=n,t.findOneChild=function(e,t){return t.find(e)},t.findOne=function e(t,i,n){void 0===n&&(n=!0);for(var o=null,r=0;r<i.length&&!o;r++){var a=i[r];(0,s.isTag)(a)&&(t(a)?o=a:n&&a.children.length>0&&(o=e(t,a.children)))}return o},t.existsOne=function e(t,i){return i.some((function(i){return(0,s.isTag)(i)&&(t(i)||i.children.length>0&&e(t,i.children))}))},t.findAll=function(e,t){for(var i,n,o=[],r=t.filter(s.isTag);n=r.shift();){var a=null===(i=n.children)||void 0===i?void 0:i.filter(s.isTag);a&&a.length>0&&r.unshift.apply(r,a),e(n)&&o.push(n)}return o}},3633:function(e,t,i){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.innerText=t.textContent=t.getText=t.getInnerHTML=t.getOuterHTML=void 0;var n=i(1363),o=s(i(1671)),r=i(7304);function a(e,t){return(0,o.default)(e,t)}t.getOuterHTML=a,t.getInnerHTML=function(e,t){return(0,n.hasChildren)(e)?e.children.map((function(e){return a(e,t)})).join(""):""},t.getText=function e(t){return Array.isArray(t)?t.map(e).join(""):(0,n.isTag)(t)?"br"===t.name?"\n":e(t.children):(0,n.isCDATA)(t)?e(t.children):(0,n.isText)(t)?t.data:""},t.textContent=function e(t){return Array.isArray(t)?t.map(e).join(""):(0,n.hasChildren)(t)&&!(0,n.isComment)(t)?e(t.children):(0,n.isText)(t)?t.data:""},t.innerText=function e(t){return Array.isArray(t)?t.map(e).join(""):(0,n.hasChildren)(t)&&(t.type===r.ElementType.Tag||(0,n.isCDATA)(t))?e(t.children):(0,n.isText)(t)?t.data:""}},6530:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.prevElementSibling=t.nextElementSibling=t.getName=t.hasAttrib=t.getAttributeValue=t.getSiblings=t.getParent=t.getChildren=void 0;var s=i(1363),n=[];function o(e){var t;return null!==(t=e.children)&&void 0!==t?t:n}function r(e){return e.parent||null}t.getChildren=o,t.getParent=r,t.getSiblings=function(e){var t=r(e);if(null!=t)return o(t);for(var i=[e],s=e.prev,n=e.next;null!=s;)i.unshift(s),s=s.prev;for(;null!=n;)i.push(n),n=n.next;return i},t.getAttributeValue=function(e,t){var i;return null===(i=e.attribs)||void 0===i?void 0:i[t]},t.hasAttrib=function(e,t){return null!=e.attribs&&Object.prototype.hasOwnProperty.call(e.attribs,t)&&null!=e.attribs[t]},t.getName=function(e){return e.name},t.nextElementSibling=function(e){for(var t=e.next;null!==t&&!(0,s.isTag)(t);)t=t.next;return t},t.prevElementSibling=function(e){for(var t=e.prev;null!==t&&!(0,s.isTag)(t);)t=t.prev;return t}},6347:function(e,t,i){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.decodeHTML=t.decodeHTMLStrict=t.decodeXML=void 0;var n=s(i(9323)),o=s(i(9591)),r=s(i(2586)),a=s(i(8271)),l=/&(?:[a-zA-Z0-9]+|#[xX][\da-fA-F]+|#\d+);/g;function c(e){var t=d(e);return function(e){return String(e).replace(l,t)}}t.decodeXML=c(r.default),t.decodeHTMLStrict=c(n.default);var h=function(e,t){return e<t?1:-1};function d(e){return function(t){if("#"===t.charAt(1)){var i=t.charAt(2);return"X"===i||"x"===i?a.default(parseInt(t.substr(3),16)):a.default(parseInt(t.substr(2),10))}return e[t.slice(1,-1)]||t}}t.decodeHTML=function(){for(var e=Object.keys(o.default).sort(h),t=Object.keys(n.default).sort(h),i=0,s=0;i<t.length;i++)e[s]===t[i]?(t[i]+=";?",s++):t[i]+=";";var r=new RegExp("&(?:"+t.join("|")+"|#[xX][\\da-fA-F]+;?|#\\d+;?)","g"),a=d(n.default);function l(e){return";"!==e.substr(-1)&&(e+=";"),a(e)}return function(e){return String(e).replace(r,l)}}()},8271:function(e,t,i){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var n=s(i(3600)),o=String.fromCodePoint||function(e){var t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|1023&e),t+String.fromCharCode(e)};t.default=function(e){return e>=55296&&e<=57343||e>1114111?"\ufffd":(e in n.default&&(e=n.default[e]),o(e))}},3393:function(e,t,i){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.escapeUTF8=t.escape=t.encodeNonAsciiHTML=t.encodeHTML=t.encodeXML=void 0;var n=h(s(i(2586)).default),o=d(n);t.encodeXML=g(n);var r,a,l=h(s(i(9323)).default),c=d(l);function h(e){return Object.keys(e).sort().reduce((function(t,i){return t[e[i]]="&"+i+";",t}),{})}function d(e){for(var t=[],i=[],s=0,n=Object.keys(e);s<n.length;s++){var o=n[s];1===o.length?t.push("\\"+o):i.push(o)}t.sort();for(var r=0;r<t.length-1;r++){for(var a=r;a<t.length-1&&t[a].charCodeAt(1)+1===t[a+1].charCodeAt(1);)a+=1;var l=1+a-r;l<3||t.splice(r,l,t[r]+"-"+t[a])}return i.unshift("["+t.join("")+"]"),new RegExp(i.join("|"),"g")}t.encodeHTML=(r=l,a=c,function(e){return e.replace(a,(function(e){return r[e]})).replace(u,p)}),t.encodeNonAsciiHTML=g(l);var u=/(?:[\x80-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/g,m=null!=String.prototype.codePointAt?function(e){return e.codePointAt(0)}:function(e){return 1024*(e.charCodeAt(0)-55296)+e.charCodeAt(1)-56320+65536};function p(e){return"&#x"+(e.length>1?m(e):e.charCodeAt(0)).toString(16).toUpperCase()+";"}var f=new RegExp(o.source+"|"+u.source,"g");function g(e){return function(t){return t.replace(f,(function(t){return e[t]||p(t)}))}}t.escape=function(e){return e.replace(f,p)},t.escapeUTF8=function(e){return e.replace(o,p)}},7531:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decodeXMLStrict=t.decodeHTML5Strict=t.decodeHTML4Strict=t.decodeHTML5=t.decodeHTML4=t.decodeHTMLStrict=t.decodeHTML=t.decodeXML=t.encodeHTML5=t.encodeHTML4=t.escapeUTF8=t.escape=t.encodeNonAsciiHTML=t.encodeHTML=t.encodeXML=t.encode=t.decodeStrict=t.decode=void 0;var s=i(6347),n=i(3393);t.decode=function(e,t){return(!t||t<=0?s.decodeXML:s.decodeHTML)(e)},t.decodeStrict=function(e,t){return(!t||t<=0?s.decodeXML:s.decodeHTMLStrict)(e)},t.encode=function(e,t){return(!t||t<=0?n.encodeXML:n.encodeHTML)(e)};var o=i(3393);Object.defineProperty(t,"encodeXML",{enumerable:!0,get:function(){return o.encodeXML}}),Object.defineProperty(t,"encodeHTML",{enumerable:!0,get:function(){return o.encodeHTML}}),Object.defineProperty(t,"encodeNonAsciiHTML",{enumerable:!0,get:function(){return o.encodeNonAsciiHTML}}),Object.defineProperty(t,"escape",{enumerable:!0,get:function(){return o.escape}}),Object.defineProperty(t,"escapeUTF8",{enumerable:!0,get:function(){return o.escapeUTF8}}),Object.defineProperty(t,"encodeHTML4",{enumerable:!0,get:function(){return o.encodeHTML}}),Object.defineProperty(t,"encodeHTML5",{enumerable:!0,get:function(){return o.encodeHTML}});var r=i(6347);Object.defineProperty(t,"decodeXML",{enumerable:!0,get:function(){return r.decodeXML}}),Object.defineProperty(t,"decodeHTML",{enumerable:!0,get:function(){return r.decodeHTML}}),Object.defineProperty(t,"decodeHTMLStrict",{enumerable:!0,get:function(){return r.decodeHTMLStrict}}),Object.defineProperty(t,"decodeHTML4",{enumerable:!0,get:function(){return r.decodeHTML}}),Object.defineProperty(t,"decodeHTML5",{enumerable:!0,get:function(){return r.decodeHTML}}),Object.defineProperty(t,"decodeHTML4Strict",{enumerable:!0,get:function(){return r.decodeHTMLStrict}}),Object.defineProperty(t,"decodeHTML5Strict",{enumerable:!0,get:function(){return r.decodeHTMLStrict}}),Object.defineProperty(t,"decodeXMLStrict",{enumerable:!0,get:function(){return r.decodeXML}})},2240:e=>{"use strict";e.exports=e=>{if("string"!=typeof e)throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}},2369:function(e,t,i){"use strict";var s,n=this&&this.__extends||(s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),o=this&&this.__createBinding||(Object.create?function(e,t,i,s){void 0===s&&(s=i),Object.defineProperty(e,s,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,s){void 0===s&&(s=i),e[s]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&o(t,e,i);return r(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.parseFeed=t.FeedHandler=void 0;var c,h,d=l(i(1363)),u=a(i(5511)),m=i(8168);!function(e){e[e.image=0]="image",e[e.audio=1]="audio",e[e.video=2]="video",e[e.document=3]="document",e[e.executable=4]="executable"}(c||(c={})),function(e){e[e.sample=0]="sample",e[e.full=1]="full",e[e.nonstop=2]="nonstop"}(h||(h={}));var p=function(e){function t(t,i){return"object"==typeof t&&(i=t=void 0),e.call(this,t,i)||this}return n(t,e),t.prototype.onend=function(){var e,t,i=w(_,this.dom);if(i){var s={};if("feed"===i.name){var n=i.children;s.type="atom",y(s,"id","id",n),y(s,"title","title",n);var o=v("href",w("link",n));o&&(s.link=o),y(s,"description","subtitle",n),(r=b("updated",n))&&(s.updated=new Date(r)),y(s,"author","email",n,!0),s.items=g("entry",n).map((function(e){var t={},i=e.children;y(t,"id","id",i),y(t,"title","title",i);var s=v("href",w("link",i));s&&(t.link=s);var n=b("summary",i)||b("content",i);n&&(t.description=n);var o=b("updated",i);return o&&(t.pubDate=new Date(o)),t.media=f(i),t}))}else{var r;n=null!==(t=null===(e=w("channel",i.children))||void 0===e?void 0:e.children)&&void 0!==t?t:[],s.type=i.name.substr(0,3),s.id="",y(s,"title","title",n),y(s,"link","link",n),y(s,"description","description",n),(r=b("lastBuildDate",n))&&(s.updated=new Date(r)),y(s,"author","managingEditor",n,!0),s.items=g("item",i.children).map((function(e){var t={},i=e.children;y(t,"id","guid",i),y(t,"title","title",i),y(t,"link","link",i),y(t,"description","description",i);var s=b("pubDate",i);return s&&(t.pubDate=new Date(s)),t.media=f(i),t}))}this.feed=s,this.handleCallback(null)}else this.handleCallback(new Error("couldn't find root of feed"))},t}(d.default);function f(e){return g("media:content",e).map((function(e){var t={medium:e.attribs.medium,isDefault:!!e.attribs.isDefault};return e.attribs.url&&(t.url=e.attribs.url),e.attribs.fileSize&&(t.fileSize=parseInt(e.attribs.fileSize,10)),e.attribs.type&&(t.type=e.attribs.type),e.attribs.expression&&(t.expression=e.attribs.expression),e.attribs.bitrate&&(t.bitrate=parseInt(e.attribs.bitrate,10)),e.attribs.framerate&&(t.framerate=parseInt(e.attribs.framerate,10)),e.attribs.samplingrate&&(t.samplingrate=parseInt(e.attribs.samplingrate,10)),e.attribs.channels&&(t.channels=parseInt(e.attribs.channels,10)),e.attribs.duration&&(t.duration=parseInt(e.attribs.duration,10)),e.attribs.height&&(t.height=parseInt(e.attribs.height,10)),e.attribs.width&&(t.width=parseInt(e.attribs.width,10)),e.attribs.lang&&(t.lang=e.attribs.lang),t}))}function g(e,t){return u.getElementsByTagName(e,t,!0)}function w(e,t){return u.getElementsByTagName(e,t,!0,1)[0]}function b(e,t,i){return void 0===i&&(i=!1),u.getText(u.getElementsByTagName(e,t,i,1)).trim()}function v(e,t){return t?t.attribs[e]:null}function y(e,t,i,s,n){void 0===n&&(n=!1);var o=b(i,s,n);o&&(e[t]=o)}function _(e){return"rss"===e||"feed"===e||"rdf:RDF"===e}t.FeedHandler=p,t.parseFeed=function(e,t){void 0===t&&(t={xmlMode:!0});var i=new p(t);return new m.Parser(i,t).end(e),i.feed}},8168:function(e,t,i){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Parser=void 0;var n=s(i(6506)),o=new Set(["input","option","optgroup","select","button","datalist","textarea"]),r=new Set(["p"]),a={tr:new Set(["tr","th","td"]),th:new Set(["th"]),td:new Set(["thead","th","td"]),body:new Set(["head","link","script"]),li:new Set(["li"]),p:r,h1:r,h2:r,h3:r,h4:r,h5:r,h6:r,select:o,input:o,output:o,button:o,datalist:o,textarea:o,option:new Set(["option"]),optgroup:new Set(["optgroup","option"]),dd:new Set(["dt","dd"]),dt:new Set(["dt","dd"]),address:r,article:r,aside:r,blockquote:r,details:r,div:r,dl:r,fieldset:r,figcaption:r,figure:r,footer:r,form:r,header:r,hr:r,main:r,nav:r,ol:r,pre:r,section:r,table:r,ul:r,rt:new Set(["rt","rp"]),rp:new Set(["rt","rp"]),tbody:new Set(["thead","tbody"]),tfoot:new Set(["thead","tbody"])},l=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]),c=new Set(["math","svg"]),h=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignObject","desc","title"]),d=/\s|\//,u=function(){function e(e,t){var i,s,o,r,a;void 0===t&&(t={}),this.startIndex=0,this.endIndex=null,this.tagname="",this.attribname="",this.attribvalue="",this.attribs=null,this.stack=[],this.foreignContext=[],this.options=t,this.cbs=null!=e?e:{},this.lowerCaseTagNames=null!==(i=t.lowerCaseTags)&&void 0!==i?i:!t.xmlMode,this.lowerCaseAttributeNames=null!==(s=t.lowerCaseAttributeNames)&&void 0!==s?s:!t.xmlMode,this.tokenizer=new(null!==(o=t.Tokenizer)&&void 0!==o?o:n.default)(this.options,this),null===(a=(r=this.cbs).onparserinit)||void 0===a||a.call(r,this)}return e.prototype.updatePosition=function(e){null===this.endIndex?this.tokenizer.sectionStart<=e?this.startIndex=0:this.startIndex=this.tokenizer.sectionStart-e:this.startIndex=this.endIndex+1,this.endIndex=this.tokenizer.getAbsoluteIndex()},e.prototype.ontext=function(e){var t,i;this.updatePosition(1),this.endIndex--,null===(i=(t=this.cbs).ontext)||void 0===i||i.call(t,e)},e.prototype.onopentagname=function(e){var t,i;if(this.lowerCaseTagNames&&(e=e.toLowerCase()),this.tagname=e,!this.options.xmlMode&&Object.prototype.hasOwnProperty.call(a,e))for(var s=void 0;this.stack.length>0&&a[e].has(s=this.stack[this.stack.length-1]);)this.onclosetag(s);!this.options.xmlMode&&l.has(e)||(this.stack.push(e),c.has(e)?this.foreignContext.push(!0):h.has(e)&&this.foreignContext.push(!1)),null===(i=(t=this.cbs).onopentagname)||void 0===i||i.call(t,e),this.cbs.onopentag&&(this.attribs={})},e.prototype.onopentagend=function(){var e,t;this.updatePosition(1),this.attribs&&(null===(t=(e=this.cbs).onopentag)||void 0===t||t.call(e,this.tagname,this.attribs),this.attribs=null),!this.options.xmlMode&&this.cbs.onclosetag&&l.has(this.tagname)&&this.cbs.onclosetag(this.tagname),this.tagname=""},e.prototype.onclosetag=function(e){if(this.updatePosition(1),this.lowerCaseTagNames&&(e=e.toLowerCase()),(c.has(e)||h.has(e))&&this.foreignContext.pop(),!this.stack.length||!this.options.xmlMode&&l.has(e))this.options.xmlMode||"br"!==e&&"p"!==e||(this.onopentagname(e),this.closeCurrentTag());else{var t=this.stack.lastIndexOf(e);if(-1!==t)if(this.cbs.onclosetag)for(t=this.stack.length-t;t--;)this.cbs.onclosetag(this.stack.pop());else this.stack.length=t;else"p"!==e||this.options.xmlMode||(this.onopentagname(e),this.closeCurrentTag())}},e.prototype.onselfclosingtag=function(){this.options.xmlMode||this.options.recognizeSelfClosing||this.foreignContext[this.foreignContext.length-1]?this.closeCurrentTag():this.onopentagend()},e.prototype.closeCurrentTag=function(){var e,t,i=this.tagname;this.onopentagend(),this.stack[this.stack.length-1]===i&&(null===(t=(e=this.cbs).onclosetag)||void 0===t||t.call(e,i),this.stack.pop())},e.prototype.onattribname=function(e){this.lowerCaseAttributeNames&&(e=e.toLowerCase()),this.attribname=e},e.prototype.onattribdata=function(e){this.attribvalue+=e},e.prototype.onattribend=function(e){var t,i;null===(i=(t=this.cbs).onattribute)||void 0===i||i.call(t,this.attribname,this.attribvalue,e),this.attribs&&!Object.prototype.hasOwnProperty.call(this.attribs,this.attribname)&&(this.attribs[this.attribname]=this.attribvalue),this.attribname="",this.attribvalue=""},e.prototype.getInstructionName=function(e){var t=e.search(d),i=t<0?e:e.substr(0,t);return this.lowerCaseTagNames&&(i=i.toLowerCase()),i},e.prototype.ondeclaration=function(e){if(this.cbs.onprocessinginstruction){var t=this.getInstructionName(e);this.cbs.onprocessinginstruction("!"+t,"!"+e)}},e.prototype.onprocessinginstruction=function(e){if(this.cbs.onprocessinginstruction){var t=this.getInstructionName(e);this.cbs.onprocessinginstruction("?"+t,"?"+e)}},e.prototype.oncomment=function(e){var t,i,s,n;this.updatePosition(4),null===(i=(t=this.cbs).oncomment)||void 0===i||i.call(t,e),null===(n=(s=this.cbs).oncommentend)||void 0===n||n.call(s)},e.prototype.oncdata=function(e){var t,i,s,n,o,r;this.updatePosition(1),this.options.xmlMode||this.options.recognizeCDATA?(null===(i=(t=this.cbs).oncdatastart)||void 0===i||i.call(t),null===(n=(s=this.cbs).ontext)||void 0===n||n.call(s,e),null===(r=(o=this.cbs).oncdataend)||void 0===r||r.call(o)):this.oncomment("[CDATA["+e+"]]")},e.prototype.onerror=function(e){var t,i;null===(i=(t=this.cbs).onerror)||void 0===i||i.call(t,e)},e.prototype.onend=function(){var e,t;if(this.cbs.onclosetag)for(var i=this.stack.length;i>0;this.cbs.onclosetag(this.stack[--i]));null===(t=(e=this.cbs).onend)||void 0===t||t.call(e)},e.prototype.reset=function(){var e,t,i,s;null===(t=(e=this.cbs).onreset)||void 0===t||t.call(e),this.tokenizer.reset(),this.tagname="",this.attribname="",this.attribs=null,this.stack=[],null===(s=(i=this.cbs).onparserinit)||void 0===s||s.call(i,this)},e.prototype.parseComplete=function(e){this.reset(),this.end(e)},e.prototype.write=function(e){this.tokenizer.write(e)},e.prototype.end=function(e){this.tokenizer.end(e)},e.prototype.pause=function(){this.tokenizer.pause()},e.prototype.resume=function(){this.tokenizer.resume()},e.prototype.parseChunk=function(e){this.write(e)},e.prototype.done=function(e){this.end(e)},e}();t.Parser=u},6506:function(e,t,i){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var n=s(i(8271)),o=s(i(9323)),r=s(i(9591)),a=s(i(2586));function l(e){return" "===e||"\n"===e||"\t"===e||"\f"===e||"\r"===e}function c(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"}function h(e,t,i){var s=e.toLowerCase();return e===s?function(e,n){n===s?e._state=t:(e._state=i,e._index--)}:function(n,o){o===s||o===e?n._state=t:(n._state=i,n._index--)}}function d(e,t){var i=e.toLowerCase();return function(s,n){n===i||n===e?s._state=t:(s._state=3,s._index--)}}var u=h("C",24,16),m=h("D",25,16),p=h("A",26,16),f=h("T",27,16),g=h("A",28,16),w=d("R",35),b=d("I",36),v=d("P",37),y=d("T",38),_=h("R",40,1),k=h("I",41,1),A=h("P",42,1),x=h("T",43,1),C=d("Y",45),E=d("L",46),T=d("E",47),S=h("Y",49,1),P=h("L",50,1),O=h("E",51,1),I=d("I",54),R=d("T",55),z=d("L",56),M=d("E",57),N=h("I",58,1),D=h("T",59,1),V=h("L",60,1),B=h("E",61,1),L=h("#",63,64),F=h("X",66,65),j=function(){function e(e,t){var i;this._state=1,this.buffer="",this.sectionStart=0,this._index=0,this.bufferOffset=0,this.baseState=1,this.special=1,this.running=!0,this.ended=!1,this.cbs=t,this.xmlMode=!!(null==e?void 0:e.xmlMode),this.decodeEntities=null===(i=null==e?void 0:e.decodeEntities)||void 0===i||i}return e.prototype.reset=function(){this._state=1,this.buffer="",this.sectionStart=0,this._index=0,this.bufferOffset=0,this.baseState=1,this.special=1,this.running=!0,this.ended=!1},e.prototype.write=function(e){this.ended&&this.cbs.onerror(Error(".write() after done!")),this.buffer+=e,this.parse()},e.prototype.end=function(e){this.ended&&this.cbs.onerror(Error(".end() after done!")),e&&this.write(e),this.ended=!0,this.running&&this.finish()},e.prototype.pause=function(){this.running=!1},e.prototype.resume=function(){this.running=!0,this._index<this.buffer.length&&this.parse(),this.ended&&this.finish()},e.prototype.getAbsoluteIndex=function(){return this.bufferOffset+this._index},e.prototype.stateText=function(e){"<"===e?(this._index>this.sectionStart&&this.cbs.ontext(this.getSection()),this._state=2,this.sectionStart=this._index):!this.decodeEntities||"&"!==e||1!==this.special&&4!==this.special||(this._index>this.sectionStart&&this.cbs.ontext(this.getSection()),this.baseState=1,this._state=62,this.sectionStart=this._index)},e.prototype.isTagStartChar=function(e){return c(e)||this.xmlMode&&!l(e)&&"/"!==e&&">"!==e},e.prototype.stateBeforeTagName=function(e){"/"===e?this._state=5:"<"===e?(this.cbs.ontext(this.getSection()),this.sectionStart=this._index):">"===e||1!==this.special||l(e)?this._state=1:"!"===e?(this._state=15,this.sectionStart=this._index+1):"?"===e?(this._state=17,this.sectionStart=this._index+1):this.isTagStartChar(e)?(this._state=this.xmlMode||"s"!==e&&"S"!==e?this.xmlMode||"t"!==e&&"T"!==e?3:52:32,this.sectionStart=this._index):this._state=1},e.prototype.stateInTagName=function(e){("/"===e||">"===e||l(e))&&(this.emitToken("onopentagname"),this._state=8,this._index--)},e.prototype.stateBeforeClosingTagName=function(e){l(e)||(">"===e?this._state=1:1!==this.special?4===this.special||"s"!==e&&"S"!==e?4!==this.special||"t"!==e&&"T"!==e?(this._state=1,this._index--):this._state=53:this._state=33:this.isTagStartChar(e)?(this._state=6,this.sectionStart=this._index):(this._state=20,this.sectionStart=this._index))},e.prototype.stateInClosingTagName=function(e){(">"===e||l(e))&&(this.emitToken("onclosetag"),this._state=7,this._index--)},e.prototype.stateAfterClosingTagName=function(e){">"===e&&(this._state=1,this.sectionStart=this._index+1)},e.prototype.stateBeforeAttributeName=function(e){">"===e?(this.cbs.onopentagend(),this._state=1,this.sectionStart=this._index+1):"/"===e?this._state=4:l(e)||(this._state=9,this.sectionStart=this._index)},e.prototype.stateInSelfClosingTag=function(e){">"===e?(this.cbs.onselfclosingtag(),this._state=1,this.sectionStart=this._index+1,this.special=1):l(e)||(this._state=8,this._index--)},e.prototype.stateInAttributeName=function(e){("="===e||"/"===e||">"===e||l(e))&&(this.cbs.onattribname(this.getSection()),this.sectionStart=-1,this._state=10,this._index--)},e.prototype.stateAfterAttributeName=function(e){"="===e?this._state=11:"/"===e||">"===e?(this.cbs.onattribend(void 0),this._state=8,this._index--):l(e)||(this.cbs.onattribend(void 0),this._state=9,this.sectionStart=this._index)},e.prototype.stateBeforeAttributeValue=function(e){'"'===e?(this._state=12,this.sectionStart=this._index+1):"'"===e?(this._state=13,this.sectionStart=this._index+1):l(e)||(this._state=14,this.sectionStart=this._index,this._index--)},e.prototype.handleInAttributeValue=function(e,t){e===t?(this.emitToken("onattribdata"),this.cbs.onattribend(t),this._state=8):this.decodeEntities&&"&"===e&&(this.emitToken("onattribdata"),this.baseState=this._state,this._state=62,this.sectionStart=this._index)},e.prototype.stateInAttributeValueDoubleQuotes=function(e){this.handleInAttributeValue(e,'"')},e.prototype.stateInAttributeValueSingleQuotes=function(e){this.handleInAttributeValue(e,"'")},e.prototype.stateInAttributeValueNoQuotes=function(e){l(e)||">"===e?(this.emitToken("onattribdata"),this.cbs.onattribend(null),this._state=8,this._index--):this.decodeEntities&&"&"===e&&(this.emitToken("onattribdata"),this.baseState=this._state,this._state=62,this.sectionStart=this._index)},e.prototype.stateBeforeDeclaration=function(e){this._state="["===e?23:"-"===e?18:16},e.prototype.stateInDeclaration=function(e){">"===e&&(this.cbs.ondeclaration(this.getSection()),this._state=1,this.sectionStart=this._index+1)},e.prototype.stateInProcessingInstruction=function(e){">"===e&&(this.cbs.onprocessinginstruction(this.getSection()),this._state=1,this.sectionStart=this._index+1)},e.prototype.stateBeforeComment=function(e){"-"===e?(this._state=19,this.sectionStart=this._index+1):this._state=16},e.prototype.stateInComment=function(e){"-"===e&&(this._state=21)},e.prototype.stateInSpecialComment=function(e){">"===e&&(this.cbs.oncomment(this.buffer.substring(this.sectionStart,this._index)),this._state=1,this.sectionStart=this._index+1)},e.prototype.stateAfterComment1=function(e){this._state="-"===e?22:19},e.prototype.stateAfterComment2=function(e){">"===e?(this.cbs.oncomment(this.buffer.substring(this.sectionStart,this._index-2)),this._state=1,this.sectionStart=this._index+1):"-"!==e&&(this._state=19)},e.prototype.stateBeforeCdata6=function(e){"["===e?(this._state=29,this.sectionStart=this._index+1):(this._state=16,this._index--)},e.prototype.stateInCdata=function(e){"]"===e&&(this._state=30)},e.prototype.stateAfterCdata1=function(e){this._state="]"===e?31:29},e.prototype.stateAfterCdata2=function(e){">"===e?(this.cbs.oncdata(this.buffer.substring(this.sectionStart,this._index-2)),this._state=1,this.sectionStart=this._index+1):"]"!==e&&(this._state=29)},e.prototype.stateBeforeSpecialS=function(e){"c"===e||"C"===e?this._state=34:"t"===e||"T"===e?this._state=44:(this._state=3,this._index--)},e.prototype.stateBeforeSpecialSEnd=function(e){2!==this.special||"c"!==e&&"C"!==e?3!==this.special||"t"!==e&&"T"!==e?this._state=1:this._state=48:this._state=39},e.prototype.stateBeforeSpecialLast=function(e,t){("/"===e||">"===e||l(e))&&(this.special=t),this._state=3,this._index--},e.prototype.stateAfterSpecialLast=function(e,t){">"===e||l(e)?(this.special=1,this._state=6,this.sectionStart=this._index-t,this._index--):this._state=1},e.prototype.parseFixedEntity=function(e){if(void 0===e&&(e=this.xmlMode?a.default:o.default),this.sectionStart+1<this._index){var t=this.buffer.substring(this.sectionStart+1,this._index);Object.prototype.hasOwnProperty.call(e,t)&&(this.emitPartial(e[t]),this.sectionStart=this._index+1)}},e.prototype.parseLegacyEntity=function(){for(var e=this.sectionStart+1,t=Math.min(this._index-e,6);t>=2;){var i=this.buffer.substr(e,t);if(Object.prototype.hasOwnProperty.call(r.default,i))return this.emitPartial(r.default[i]),void(this.sectionStart+=t+1);t--}},e.prototype.stateInNamedEntity=function(e){";"===e?(this.parseFixedEntity(),1===this.baseState&&this.sectionStart+1<this._index&&!this.xmlMode&&this.parseLegacyEntity(),this._state=this.baseState):(e<"0"||e>"9")&&!c(e)&&(this.xmlMode||this.sectionStart+1===this._index||(1!==this.baseState?"="!==e&&this.parseFixedEntity(r.default):this.parseLegacyEntity()),this._state=this.baseState,this._index--)},e.prototype.decodeNumericEntity=function(e,t,i){var s=this.sectionStart+e;if(s!==this._index){var o=this.buffer.substring(s,this._index),r=parseInt(o,t);this.emitPartial(n.default(r)),this.sectionStart=i?this._index+1:this._index}this._state=this.baseState},e.prototype.stateInNumericEntity=function(e){";"===e?this.decodeNumericEntity(2,10,!0):(e<"0"||e>"9")&&(this.xmlMode?this._state=this.baseState:this.decodeNumericEntity(2,10,!1),this._index--)},e.prototype.stateInHexEntity=function(e){";"===e?this.decodeNumericEntity(3,16,!0):(e<"a"||e>"f")&&(e<"A"||e>"F")&&(e<"0"||e>"9")&&(this.xmlMode?this._state=this.baseState:this.decodeNumericEntity(3,16,!1),this._index--)},e.prototype.cleanup=function(){this.sectionStart<0?(this.buffer="",this.bufferOffset+=this._index,this._index=0):this.running&&(1===this._state?(this.sectionStart!==this._index&&this.cbs.ontext(this.buffer.substr(this.sectionStart)),this.buffer="",this.bufferOffset+=this._index,this._index=0):this.sectionStart===this._index?(this.buffer="",this.bufferOffset+=this._index,this._index=0):(this.buffer=this.buffer.substr(this.sectionStart),this._index-=this.sectionStart,this.bufferOffset+=this.sectionStart),this.sectionStart=0)},e.prototype.parse=function(){for(;this._index<this.buffer.length&&this.running;){var e=this.buffer.charAt(this._index);1===this._state?this.stateText(e):12===this._state?this.stateInAttributeValueDoubleQuotes(e):9===this._state?this.stateInAttributeName(e):19===this._state?this.stateInComment(e):20===this._state?this.stateInSpecialComment(e):8===this._state?this.stateBeforeAttributeName(e):3===this._state?this.stateInTagName(e):6===this._state?this.stateInClosingTagName(e):2===this._state?this.stateBeforeTagName(e):10===this._state?this.stateAfterAttributeName(e):13===this._state?this.stateInAttributeValueSingleQuotes(e):11===this._state?this.stateBeforeAttributeValue(e):5===this._state?this.stateBeforeClosingTagName(e):7===this._state?this.stateAfterClosingTagName(e):32===this._state?this.stateBeforeSpecialS(e):21===this._state?this.stateAfterComment1(e):14===this._state?this.stateInAttributeValueNoQuotes(e):4===this._state?this.stateInSelfClosingTag(e):16===this._state?this.stateInDeclaration(e):15===this._state?this.stateBeforeDeclaration(e):22===this._state?this.stateAfterComment2(e):18===this._state?this.stateBeforeComment(e):33===this._state?this.stateBeforeSpecialSEnd(e):53===this._state?N(this,e):39===this._state?_(this,e):40===this._state?k(this,e):41===this._state?A(this,e):34===this._state?w(this,e):35===this._state?b(this,e):36===this._state?v(this,e):37===this._state?y(this,e):38===this._state?this.stateBeforeSpecialLast(e,2):42===this._state?x(this,e):43===this._state?this.stateAfterSpecialLast(e,6):44===this._state?C(this,e):29===this._state?this.stateInCdata(e):45===this._state?E(this,e):46===this._state?T(this,e):47===this._state?this.stateBeforeSpecialLast(e,3):48===this._state?S(this,e):49===this._state?P(this,e):50===this._state?O(this,e):51===this._state?this.stateAfterSpecialLast(e,5):52===this._state?I(this,e):54===this._state?R(this,e):55===this._state?z(this,e):56===this._state?M(this,e):57===this._state?this.stateBeforeSpecialLast(e,4):58===this._state?D(this,e):59===this._state?V(this,e):60===this._state?B(this,e):61===this._state?this.stateAfterSpecialLast(e,5):17===this._state?this.stateInProcessingInstruction(e):64===this._state?this.stateInNamedEntity(e):23===this._state?u(this,e):62===this._state?L(this,e):24===this._state?m(this,e):25===this._state?p(this,e):30===this._state?this.stateAfterCdata1(e):31===this._state?this.stateAfterCdata2(e):26===this._state?f(this,e):27===this._state?g(this,e):28===this._state?this.stateBeforeCdata6(e):66===this._state?this.stateInHexEntity(e):65===this._state?this.stateInNumericEntity(e):63===this._state?F(this,e):this.cbs.onerror(Error("unknown _state"),this._state),this._index++}this.cleanup()},e.prototype.finish=function(){this.sectionStart<this._index&&this.handleTrailingData(),this.cbs.onend()},e.prototype.handleTrailingData=function(){var e=this.buffer.substr(this.sectionStart);29===this._state||30===this._state||31===this._state?this.cbs.oncdata(e):19===this._state||21===this._state||22===this._state?this.cbs.oncomment(e):64!==this._state||this.xmlMode?65!==this._state||this.xmlMode?66!==this._state||this.xmlMode?3!==this._state&&8!==this._state&&11!==this._state&&10!==this._state&&9!==this._state&&13!==this._state&&12!==this._state&&14!==this._state&&6!==this._state&&this.cbs.ontext(e):(this.decodeNumericEntity(3,16,!1),this.sectionStart<this._index&&(this._state=this.baseState,this.handleTrailingData())):(this.decodeNumericEntity(2,10,!1),this.sectionStart<this._index&&(this._state=this.baseState,this.handleTrailingData())):(this.parseLegacyEntity(),this.sectionStart<this._index&&(this._state=this.baseState,this.handleTrailingData()))},e.prototype.getSection=function(){return this.buffer.substring(this.sectionStart,this._index)},e.prototype.emitToken=function(e){this.cbs[e](this.getSection()),this.sectionStart=-1},e.prototype.emitPartial=function(e){1!==this.baseState?this.cbs.onattribdata(e):this.cbs.ontext(e)},e}();t.default=j},6124:function(e,t,i){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,i,s){void 0===s&&(s=i),Object.defineProperty(e,s,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,s){void 0===s&&(s=i),e[s]=t[i]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&s(t,e,i);return n(t,e),t},r=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||s(t,e,i)},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.RssHandler=t.DefaultHandler=t.DomUtils=t.ElementType=t.Tokenizer=t.createDomStream=t.parseDOM=t.parseDocument=t.DomHandler=t.Parser=void 0;var l=i(8168);Object.defineProperty(t,"Parser",{enumerable:!0,get:function(){return l.Parser}});var c=i(1363);function h(e,t){var i=new c.DomHandler(void 0,t);return new l.Parser(i,t).end(e),i.root}Object.defineProperty(t,"DomHandler",{enumerable:!0,get:function(){return c.DomHandler}}),Object.defineProperty(t,"DefaultHandler",{enumerable:!0,get:function(){return c.DomHandler}}),t.parseDocument=h,t.parseDOM=function(e,t){return h(e,t).children},t.createDomStream=function(e,t,i){var s=new c.DomHandler(e,t,i);return new l.Parser(s,t)};var d=i(6506);Object.defineProperty(t,"Tokenizer",{enumerable:!0,get:function(){return a(d).default}});var u=o(i(7304));t.ElementType=u,r(i(2369),t),t.DomUtils=o(i(5511));var m=i(2369);Object.defineProperty(t,"RssHandler",{enumerable:!0,get:function(){return m.FeedHandler}})},2134:function(e,t){var i,s,n;s=[],void 0===(n="function"==typeof(i=function(){return function(e){function t(e){return" "===e||"\t"===e||"\n"===e||"\f"===e||"\r"===e}function i(t){var i,s=t.exec(e.substring(f));if(s)return i=s[0],f+=i.length,i}for(var s,n,o,r,a,l=e.length,c=/^[ \t\n\r\u000c]+/,h=/^[, \t\n\r\u000c]+/,d=/^[^ \t\n\r\u000c]+/,u=/[,]+$/,m=/^\d+$/,p=/^-?(?:[0-9]+|[0-9]*\.[0-9]+)(?:[eE][+-]?[0-9]+)?$/,f=0,g=[];;){if(i(h),f>=l)return g;s=i(d),n=[],","===s.slice(-1)?(s=s.replace(u,""),b()):w()}function w(){for(i(c),o="",r="in descriptor";;){if(a=e.charAt(f),"in descriptor"===r)if(t(a))o&&(n.push(o),o="",r="after descriptor");else{if(","===a)return f+=1,o&&n.push(o),void b();if("("===a)o+=a,r="in parens";else{if(""===a)return o&&n.push(o),void b();o+=a}}else if("in parens"===r)if(")"===a)o+=a,r="in descriptor";else{if(""===a)return n.push(o),void b();o+=a}else if("after descriptor"===r)if(t(a));else{if(""===a)return void b();r="in descriptor",f-=1}f+=1}}function b(){var t,i,o,r,a,l,c,h,d,u=!1,f={};for(r=0;r<n.length;r++)l=(a=n[r])[a.length-1],c=a.substring(0,a.length-1),h=parseInt(c,10),d=parseFloat(c),m.test(c)&&"w"===l?((t||i)&&(u=!0),0===h?u=!0:t=h):p.test(c)&&"x"===l?((t||i||o)&&(u=!0),d<0?u=!0:i=d):m.test(c)&&"h"===l?((o||i)&&(u=!0),0===h?u=!0:o=h):u=!0;u?console&&console.log&&console.log("Invalid srcset descriptor found in '"+e+"' at '"+a+"'."):(f.url=s,t&&(f.w=t),i&&(f.d=i),o&&(f.h=o),g.push(f))}}})?i.apply(t,s):i)||(e.exports=n)},8799:e=>{var t=String,i=function(){return{isColorSupported:!1,reset:t,bold:t,dim:t,italic:t,underline:t,inverse:t,hidden:t,strikethrough:t,black:t,red:t,green:t,yellow:t,blue:t,magenta:t,cyan:t,white:t,gray:t,bgBlack:t,bgRed:t,bgGreen:t,bgYellow:t,bgBlue:t,bgMagenta:t,bgCyan:t,bgWhite:t}};e.exports=i(),e.exports.createColors=i},8940:(e,t,i)=>{"use strict";let s=i(1204);class n extends s{constructor(e){super(e),this.type="atrule"}append(...e){return this.proxyOf.nodes||(this.nodes=[]),super.append(...e)}prepend(...e){return this.proxyOf.nodes||(this.nodes=[]),super.prepend(...e)}}e.exports=n,n.default=n,s.registerAtRule(n)},3102:(e,t,i)=>{"use strict";let s=i(4343);class n extends s{constructor(e){super(e),this.type="comment"}}e.exports=n,n.default=n},1204:(e,t,i)=>{"use strict";let s,n,o,{isClean:r,my:a}=i(5506),l=i(6417),c=i(3102),h=i(4343);function d(e){return e.map((e=>(e.nodes&&(e.nodes=d(e.nodes)),delete e.source,e)))}function u(e){if(e[r]=!1,e.proxyOf.nodes)for(let t of e.proxyOf.nodes)u(t)}class m extends h{push(e){return e.parent=this,this.proxyOf.nodes.push(e),this}each(e){if(!this.proxyOf.nodes)return;let t,i,s=this.getIterator();for(;this.indexes[s]<this.proxyOf.nodes.length&&(t=this.indexes[s],i=e(this.proxyOf.nodes[t],t),!1!==i);)this.indexes[s]+=1;return delete this.indexes[s],i}walk(e){return this.each(((t,i)=>{let s;try{s=e(t,i)}catch(e){throw t.addToError(e)}return!1!==s&&t.walk&&(s=t.walk(e)),s}))}walkDecls(e,t){return t?e instanceof RegExp?this.walk(((i,s)=>{if("decl"===i.type&&e.test(i.prop))return t(i,s)})):this.walk(((i,s)=>{if("decl"===i.type&&i.prop===e)return t(i,s)})):(t=e,this.walk(((e,i)=>{if("decl"===e.type)return t(e,i)})))}walkRules(e,t){return t?e instanceof RegExp?this.walk(((i,s)=>{if("rule"===i.type&&e.test(i.selector))return t(i,s)})):this.walk(((i,s)=>{if("rule"===i.type&&i.selector===e)return t(i,s)})):(t=e,this.walk(((e,i)=>{if("rule"===e.type)return t(e,i)})))}walkAtRules(e,t){return t?e instanceof RegExp?this.walk(((i,s)=>{if("atrule"===i.type&&e.test(i.name))return t(i,s)})):this.walk(((i,s)=>{if("atrule"===i.type&&i.name===e)return t(i,s)})):(t=e,this.walk(((e,i)=>{if("atrule"===e.type)return t(e,i)})))}walkComments(e){return this.walk(((t,i)=>{if("comment"===t.type)return e(t,i)}))}append(...e){for(let t of e){let e=this.normalize(t,this.last);for(let t of e)this.proxyOf.nodes.push(t)}return this.markDirty(),this}prepend(...e){e=e.reverse();for(let t of e){let e=this.normalize(t,this.first,"prepend").reverse();for(let t of e)this.proxyOf.nodes.unshift(t);for(let t in this.indexes)this.indexes[t]=this.indexes[t]+e.length}return this.markDirty(),this}cleanRaws(e){if(super.cleanRaws(e),this.nodes)for(let t of this.nodes)t.cleanRaws(e)}insertBefore(e,t){let i,s=0===(e=this.index(e))&&"prepend",n=this.normalize(t,this.proxyOf.nodes[e],s).reverse();for(let o of n)this.proxyOf.nodes.splice(e,0,o);for(let o in this.indexes)i=this.indexes[o],e<=i&&(this.indexes[o]=i+n.length);return this.markDirty(),this}insertAfter(e,t){e=this.index(e);let i,s=this.normalize(t,this.proxyOf.nodes[e]).reverse();for(let n of s)this.proxyOf.nodes.splice(e+1,0,n);for(let n in this.indexes)i=this.indexes[n],e<i&&(this.indexes[n]=i+s.length);return this.markDirty(),this}removeChild(e){let t;e=this.index(e),this.proxyOf.nodes[e].parent=void 0,this.proxyOf.nodes.splice(e,1);for(let i in this.indexes)t=this.indexes[i],t>=e&&(this.indexes[i]=t-1);return this.markDirty(),this}removeAll(){for(let e of this.proxyOf.nodes)e.parent=void 0;return this.proxyOf.nodes=[],this.markDirty(),this}replaceValues(e,t,i){return i||(i=t,t={}),this.walkDecls((s=>{t.props&&!t.props.includes(s.prop)||t.fast&&!s.value.includes(t.fast)||(s.value=s.value.replace(e,i))})),this.markDirty(),this}every(e){return this.nodes.every(e)}some(e){return this.nodes.some(e)}index(e){return"number"==typeof e?e:(e.proxyOf&&(e=e.proxyOf),this.proxyOf.nodes.indexOf(e))}get first(){if(this.proxyOf.nodes)return this.proxyOf.nodes[0]}get last(){if(this.proxyOf.nodes)return this.proxyOf.nodes[this.proxyOf.nodes.length-1]}normalize(e,t){if("string"==typeof e)e=d(s(e).nodes);else if(Array.isArray(e)){e=e.slice(0);for(let t of e)t.parent&&t.parent.removeChild(t,"ignore")}else if("root"===e.type&&"document"!==this.type){e=e.nodes.slice(0);for(let t of e)t.parent&&t.parent.removeChild(t,"ignore")}else if(e.type)e=[e];else if(e.prop){if(void 0===e.value)throw new Error("Value field is missed in node creation");"string"!=typeof e.value&&(e.value=String(e.value)),e=[new l(e)]}else if(e.selector)e=[new n(e)];else if(e.name)e=[new o(e)];else{if(!e.text)throw new Error("Unknown node type in node creation");e=[new c(e)]}return e.map((e=>(e[a]||m.rebuild(e),(e=e.proxyOf).parent&&e.parent.removeChild(e),e[r]&&u(e),void 0===e.raws.before&&t&&void 0!==t.raws.before&&(e.raws.before=t.raws.before.replace(/\S/g,"")),e.parent=this,e)))}getProxyProcessor(){return{set:(e,t,i)=>(e[t]===i||(e[t]=i,"name"!==t&&"params"!==t&&"selector"!==t||e.markDirty()),!0),get:(e,t)=>"proxyOf"===t?e:e[t]?"each"===t||"string"==typeof t&&t.startsWith("walk")?(...i)=>e[t](...i.map((e=>"function"==typeof e?(t,i)=>e(t.toProxy(),i):e))):"every"===t||"some"===t?i=>e[t](((e,...t)=>i(e.toProxy(),...t))):"root"===t?()=>e.root().toProxy():"nodes"===t?e.nodes.map((e=>e.toProxy())):"first"===t||"last"===t?e[t].toProxy():e[t]:e[t]}}getIterator(){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach+=1;let e=this.lastEach;return this.indexes[e]=0,e}}m.registerParse=e=>{s=e},m.registerRule=e=>{n=e},m.registerAtRule=e=>{o=e},e.exports=m,m.default=m,m.rebuild=e=>{"atrule"===e.type?Object.setPrototypeOf(e,o.prototype):"rule"===e.type?Object.setPrototypeOf(e,n.prototype):"decl"===e.type?Object.setPrototypeOf(e,l.prototype):"comment"===e.type&&Object.setPrototypeOf(e,c.prototype),e[a]=!0,e.nodes&&e.nodes.forEach((e=>{m.rebuild(e)}))}},1667:(e,t,i)=>{"use strict";let s=i(8799),n=i(2868);class o extends Error{constructor(e,t,i,s,n,r){super(e),this.name="CssSyntaxError",this.reason=e,n&&(this.file=n),s&&(this.source=s),r&&(this.plugin=r),void 0!==t&&void 0!==i&&(this.line=t,this.column=i),this.setMessage(),Error.captureStackTrace&&Error.captureStackTrace(this,o)}setMessage(){this.message=this.plugin?this.plugin+": ":"",this.message+=this.file?this.file:"<css input>",void 0!==this.line&&(this.message+=":"+this.line+":"+this.column),this.message+=": "+this.reason}showSourceCode(e){if(!this.source)return"";let t=this.source;null==e&&(e=s.isColorSupported),n&&e&&(t=n(t));let i,o,r=t.split(/\r?\n/),a=Math.max(this.line-3,0),l=Math.min(this.line+2,r.length),c=String(l).length;if(e){let{bold:e,red:t,gray:n}=s.createColors(!0);i=i=>e(t(i)),o=e=>n(e)}else i=o=e=>e;return r.slice(a,l).map(((e,t)=>{let s=a+1+t,n=" "+(" "+s).slice(-c)+" | ";if(s===this.line){let t=o(n.replace(/\d/g," "))+e.slice(0,this.column-1).replace(/[^\t]/g," ");return i(">")+o(n)+e+"\n "+t+i("^")}return" "+o(n)+e})).join("\n")}toString(){let e=this.showSourceCode();return e&&(e="\n\n"+e+"\n"),this.name+": "+this.message+e}}e.exports=o,o.default=o},6417:(e,t,i)=>{"use strict";function s(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function n(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?s(Object(i),!0).forEach((function(t){o(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function o(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let r=i(4343);class a extends r{constructor(e){e&&void 0!==e.value&&"string"!=typeof e.value&&(e=n(n({},e),{},{value:String(e.value)})),super(e),this.type="decl"}get variable(){return this.prop.startsWith("--")||"$"===this.prop[0]}}e.exports=a,a.default=a},7083:(e,t,i)=>{"use strict";function s(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function n(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let o,r,a=i(1204);class l extends a{constructor(e){super(function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?s(Object(i),!0).forEach((function(t){n(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({type:"document"},e)),this.nodes||(this.nodes=[])}toResult(e={}){return new o(new r,this,e).stringify()}}l.registerLazyResult=e=>{o=e},l.registerProcessor=e=>{r=e},e.exports=l,l.default=l},9295:(e,t,i)=>{"use strict";const s=["inputs"],n=["inputId"];function o(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function r(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?o(Object(i),!0).forEach((function(t){a(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):o(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function a(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function l(e,t){if(null==e)return{};var i,s,n=function(e,t){if(null==e)return{};var i,s,n={},o=Object.keys(e);for(s=0;s<o.length;s++)i=o[s],t.indexOf(i)>=0||(n[i]=e[i]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(s=0;s<o.length;s++)i=o[s],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}let c=i(6417),h=i(3353),d=i(3102),u=i(8940),m=i(2993),p=i(7563),f=i(6621);function g(e,t){if(Array.isArray(e))return e.map((e=>g(e)));let{inputs:i}=e,o=l(e,s);if(i){t=[];for(let e of i){let i=r(r({},e),{},{__proto__:m.prototype});i.map&&(i.map=r(r({},i.map),{},{__proto__:h.prototype})),t.push(i)}}if(o.nodes&&(o.nodes=e.nodes.map((e=>g(e,t)))),o.source){let e=o.source,{inputId:i}=e,s=l(e,n);o.source=s,null!=i&&(o.source.input=t[i])}if("root"===o.type)return new p(o);if("decl"===o.type)return new c(o);if("rule"===o.type)return new f(o);if("comment"===o.type)return new d(o);if("atrule"===o.type)return new u(o);throw new Error("Unknown node type: "+e.type)}e.exports=g,g.default=g},2993:(e,t,i)=>{"use strict";function s(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function n(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let{SourceMapConsumer:o,SourceMapGenerator:r}=i(209),{fileURLToPath:a,pathToFileURL:l}=i(7414),{resolve:c,isAbsolute:h}=i(9830),{nanoid:d}=i(2961),u=i(2868),m=i(1667),p=i(3353),f=Symbol("fromOffsetCache"),g=Boolean(o&&r),w=Boolean(c&&h);class b{constructor(e,t={}){if(null==e||"object"==typeof e&&!e.toString)throw new Error(`PostCSS received ${e} instead of CSS string`);if(this.css=e.toString(),"\ufeff"===this.css[0]||"\ufffe"===this.css[0]?(this.hasBOM=!0,this.css=this.css.slice(1)):this.hasBOM=!1,t.from&&(!w||/^\w+:\/\//.test(t.from)||h(t.from)?this.file=t.from:this.file=c(t.from)),w&&g){let e=new p(this.css,t);if(e.text){this.map=e;let t=e.consumer().file;!this.file&&t&&(this.file=this.mapResolve(t))}}this.file||(this.id="<input css "+d(6)+">"),this.map&&(this.map.file=this.from)}fromOffset(e){let t,i;if(this[f])i=this[f];else{let e=this.css.split("\n");i=new Array(e.length);let t=0;for(let s=0,n=e.length;s<n;s++)i[s]=t,t+=e[s].length+1;this[f]=i}t=i[i.length-1];let s=0;if(e>=t)s=i.length-1;else{let t,n=i.length-2;for(;s<n;)if(t=s+(n-s>>1),e<i[t])n=t-1;else{if(!(e>=i[t+1])){s=t;break}s=t+1}}return{line:s+1,col:e-i[s]+1}}error(e,t,i,s={}){let n;if(!i){let e=this.fromOffset(t);t=e.line,i=e.col}let o=this.origin(t,i);return n=o?new m(e,o.line,o.column,o.source,o.file,s.plugin):new m(e,t,i,this.css,this.file,s.plugin),n.input={line:t,column:i,source:this.css},this.file&&(l&&(n.input.url=l(this.file).toString()),n.input.file=this.file),n}origin(e,t){if(!this.map)return!1;let i,s=this.map.consumer(),n=s.originalPositionFor({line:e,column:t});if(!n.source)return!1;i=h(n.source)?l(n.source):new URL(n.source,this.map.consumer().sourceRoot||l(this.map.mapFile));let o={url:i.toString(),line:n.line,column:n.column};if("file:"===i.protocol){if(!a)throw new Error("file: protocol is not available in this PostCSS build");o.file=a(i)}let r=s.sourceContentFor(n.source);return r&&(o.source=r),o}mapResolve(e){return/^\w+:\/\//.test(e)?e:c(this.map.consumer().sourceRoot||this.map.root||".",e)}get from(){return this.file||this.id}toJSON(){let e={};for(let t of["hasBOM","css","file","id"])null!=this[t]&&(e[t]=this[t]);return this.map&&(e.map=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?s(Object(i),!0).forEach((function(t){n(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({},this.map),e.map.consumerCache&&(e.map.consumerCache=void 0)),e}}e.exports=b,b.default=b,u&&u.registerInput&&u.registerInput(b)},6992:(e,t,i)=>{"use strict";function s(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function n(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?s(Object(i),!0).forEach((function(t){o(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function o(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let{isClean:r,my:a}=i(5506),l=i(8991),c=i(6157),h=i(1204),d=i(7083),u=(i(6574),i(6865)),m=i(7057),p=i(7563);const f={document:"Document",root:"Root",atrule:"AtRule",rule:"Rule",decl:"Declaration",comment:"Comment"},g={postcssPlugin:!0,prepare:!0,Once:!0,Document:!0,Root:!0,Declaration:!0,Rule:!0,AtRule:!0,Comment:!0,DeclarationExit:!0,RuleExit:!0,AtRuleExit:!0,CommentExit:!0,RootExit:!0,DocumentExit:!0,OnceExit:!0},w={postcssPlugin:!0,prepare:!0,Once:!0};function b(e){return"object"==typeof e&&"function"==typeof e.then}function v(e){let t=!1,i=f[e.type];return"decl"===e.type?t=e.prop.toLowerCase():"atrule"===e.type&&(t=e.name.toLowerCase()),t&&e.append?[i,i+"-"+t,0,i+"Exit",i+"Exit-"+t]:t?[i,i+"-"+t,i+"Exit",i+"Exit-"+t]:e.append?[i,0,i+"Exit"]:[i,i+"Exit"]}function y(e){let t;return t="document"===e.type?["Document",0,"DocumentExit"]:"root"===e.type?["Root",0,"RootExit"]:v(e),{node:e,events:t,eventIndex:0,visitors:[],visitorIndex:0,iterator:0}}function _(e){return e[r]=!1,e.nodes&&e.nodes.forEach((e=>_(e))),e}let k={};class A{constructor(e,t,i){let s;if(this.stringified=!1,this.processed=!1,"object"!=typeof t||null===t||"root"!==t.type&&"document"!==t.type)if(t instanceof A||t instanceof u)s=_(t.root),t.map&&(void 0===i.map&&(i.map={}),i.map.inline||(i.map.inline=!1),i.map.prev=t.map);else{let n=m;i.syntax&&(n=i.syntax.parse),i.parser&&(n=i.parser),n.parse&&(n=n.parse);try{s=n(t,i)}catch(e){this.processed=!0,this.error=e}s&&!s[a]&&h.rebuild(s)}else s=_(t);this.result=new u(e,s,i),this.helpers=n(n({},k),{},{result:this.result,postcss:k}),this.plugins=this.processor.plugins.map((e=>"object"==typeof e&&e.prepare?n(n({},e),e.prepare(this.result)):e))}get[Symbol.toStringTag](){return"LazyResult"}get processor(){return this.result.processor}get opts(){return this.result.opts}get css(){return this.stringify().css}get content(){return this.stringify().content}get map(){return this.stringify().map}get root(){return this.sync().root}get messages(){return this.sync().messages}warnings(){return this.sync().warnings()}toString(){return this.css}then(e,t){return this.async().then(e,t)}catch(e){return this.async().catch(e)}finally(e){return this.async().then(e,e)}async(){return this.error?Promise.reject(this.error):this.processed?Promise.resolve(this.result):(this.processing||(this.processing=this.runAsync()),this.processing)}sync(){if(this.error)throw this.error;if(this.processed)return this.result;if(this.processed=!0,this.processing)throw this.getAsyncError();for(let e of this.plugins)if(b(this.runOnRoot(e)))throw this.getAsyncError();if(this.prepareVisitors(),this.hasListener){let e=this.result.root;for(;!e[r];)e[r]=!0,this.walkSync(e);if(this.listeners.OnceExit)if("document"===e.type)for(let t of e.nodes)this.visitSync(this.listeners.OnceExit,t);else this.visitSync(this.listeners.OnceExit,e)}return this.result}stringify(){if(this.error)throw this.error;if(this.stringified)return this.result;this.stringified=!0,this.sync();let e=this.result.opts,t=c;e.syntax&&(t=e.syntax.stringify),e.stringifier&&(t=e.stringifier),t.stringify&&(t=t.stringify);let i=new l(t,this.result.root,this.result.opts).generate();return this.result.css=i[0],this.result.map=i[1],this.result}walkSync(e){e[r]=!0;let t=v(e);for(let i of t)if(0===i)e.nodes&&e.each((e=>{e[r]||this.walkSync(e)}));else{let t=this.listeners[i];if(t&&this.visitSync(t,e.toProxy()))return}}visitSync(e,t){for(let[i,s]of e){let n;this.result.lastPlugin=i;try{n=s(t,this.helpers)}catch(e){throw this.handleError(e,t.proxyOf)}if("root"!==t.type&&"document"!==t.type&&!t.parent)return!0;if(b(n))throw this.getAsyncError()}}runOnRoot(e){this.result.lastPlugin=e;try{if("object"==typeof e&&e.Once){if("document"===this.result.root.type){let t=this.result.root.nodes.map((t=>e.Once(t,this.helpers)));return b(t[0])?Promise.all(t):t}return e.Once(this.result.root,this.helpers)}if("function"==typeof e)return e(this.result.root,this.result)}catch(e){throw this.handleError(e)}}getAsyncError(){throw new Error("Use process(css).then(cb) to work with async plugins")}handleError(e,t){let i=this.result.lastPlugin;try{t&&t.addToError(e),this.error=e,"CssSyntaxError"!==e.name||e.plugin?i.postcssVersion:(e.plugin=i.postcssPlugin,e.setMessage())}catch(e){console&&console.error&&console.error(e)}return e}async runAsync(){this.plugin=0;for(let t=0;t<this.plugins.length;t++){let i=this.plugins[t],s=this.runOnRoot(i);if(b(s))try{await s}catch(e){throw this.handleError(e)}}if(this.prepareVisitors(),this.hasListener){let t=this.result.root;for(;!t[r];){t[r]=!0;let i=[y(t)];for(;i.length>0;){let t=this.visitTick(i);if(b(t))try{await t}catch(e){let s=i[i.length-1].node;throw this.handleError(e,s)}}}if(this.listeners.OnceExit)for(let[i,s]of this.listeners.OnceExit){this.result.lastPlugin=i;try{if("document"===t.type){let e=t.nodes.map((e=>s(e,this.helpers)));await Promise.all(e)}else await s(t,this.helpers)}catch(e){throw this.handleError(e)}}}return this.processed=!0,this.stringify()}prepareVisitors(){this.listeners={};let e=(e,t,i)=>{this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push([e,i])};for(let t of this.plugins)if("object"==typeof t)for(let i in t){if(!g[i]&&/^[A-Z]/.test(i))throw new Error(`Unknown event ${i} in ${t.postcssPlugin}. Try to update PostCSS (${this.processor.version} now).`);if(!w[i])if("object"==typeof t[i])for(let s in t[i])e(t,"*"===s?i:i+"-"+s.toLowerCase(),t[i][s]);else"function"==typeof t[i]&&e(t,i,t[i])}this.hasListener=Object.keys(this.listeners).length>0}visitTick(e){let t=e[e.length-1],{node:i,visitors:s}=t;if("root"!==i.type&&"document"!==i.type&&!i.parent)return void e.pop();if(s.length>0&&t.visitorIndex<s.length){let[n,o]=s[t.visitorIndex];t.visitorIndex+=1,t.visitorIndex===s.length&&(t.visitors=[],t.visitorIndex=0),this.result.lastPlugin=n;try{return o(i.toProxy(),this.helpers)}catch(e){throw this.handleError(e,i)}}if(0!==t.iterator){let s,n=t.iterator;for(;s=i.nodes[i.indexes[n]];)if(i.indexes[n]+=1,!s[r])return s[r]=!0,void e.push(y(s));t.iterator=0,delete i.indexes[n]}let n=t.events;for(;t.eventIndex<n.length;){let e=n[t.eventIndex];if(t.eventIndex+=1,0===e)return void(i.nodes&&i.nodes.length&&(i[r]=!0,t.iterator=i.getIterator()));if(this.listeners[e])return void(t.visitors=this.listeners[e])}e.pop()}}A.registerPostcss=e=>{k=e},e.exports=A,A.default=A,p.registerLazyResult(A),d.registerLazyResult(A)},6136:e=>{"use strict";let t={split(e,t,i){let s=[],n="",o=!1,r=0,a=!1,l=!1;for(let c of e)l?l=!1:"\\"===c?l=!0:a?c===a&&(a=!1):'"'===c||"'"===c?a=c:"("===c?r+=1:")"===c?r>0&&(r-=1):0===r&&t.includes(c)&&(o=!0),o?(""!==n&&s.push(n.trim()),n="",o=!1):n+=c;return(i||""!==n)&&s.push(n.trim()),s},space:e=>t.split(e,[" ","\n","\t"]),comma:e=>t.split(e,[","],!0)};e.exports=t,t.default=t},8991:(e,t,i)=>{"use strict";let{SourceMapConsumer:n,SourceMapGenerator:o}=i(209),{dirname:r,resolve:a,relative:l,sep:c}=i(9830),{pathToFileURL:h}=i(7414),d=Boolean(n&&o),u=Boolean(r&&a&&l&&c);e.exports=class{constructor(e,t,i){this.stringify=e,this.mapOpts=i.map||{},this.root=t,this.opts=i}isMap(){return void 0!==this.opts.map?!!this.opts.map:this.previous().length>0}previous(){return this.previousMaps||(this.previousMaps=[],this.root.walk((e=>{if(e.source&&e.source.input.map){let t=e.source.input.map;this.previousMaps.includes(t)||this.previousMaps.push(t)}}))),this.previousMaps}isInline(){if(void 0!==this.mapOpts.inline)return this.mapOpts.inline;let e=this.mapOpts.annotation;return(void 0===e||!0===e)&&(!this.previous().length||this.previous().some((e=>e.inline)))}isSourcesContent(){return void 0!==this.mapOpts.sourcesContent?this.mapOpts.sourcesContent:!this.previous().length||this.previous().some((e=>e.withContent()))}clearAnnotation(){if(!1===this.mapOpts.annotation)return;let e;for(let t=this.root.nodes.length-1;t>=0;t--)e=this.root.nodes[t],"comment"===e.type&&0===e.text.indexOf("# sourceMappingURL=")&&this.root.removeChild(t)}setSourcesContent(){let e={};this.root.walk((t=>{if(t.source){let i=t.source.input.from;i&&!e[i]&&(e[i]=!0,this.map.setSourceContent(this.toUrl(this.path(i)),t.source.input.css))}}))}applyPrevMaps(){for(let e of this.previous()){let t,i=this.toUrl(this.path(e.file)),s=e.root||r(e.file);!1===this.mapOpts.sourcesContent?(t=new n(e.text),t.sourcesContent&&(t.sourcesContent=t.sourcesContent.map((()=>null)))):t=e.consumer(),this.map.applySourceMap(t,i,this.toUrl(this.path(s)))}}isAnnotation(){return!!this.isInline()||(void 0!==this.mapOpts.annotation?this.mapOpts.annotation:!this.previous().length||this.previous().some((e=>e.annotation)))}toBase64(e){return s?s.from(e).toString("base64"):window.btoa(unescape(encodeURIComponent(e)))}addAnnotation(){let e;e=this.isInline()?"data:application/json;base64,"+this.toBase64(this.map.toString()):"string"==typeof this.mapOpts.annotation?this.mapOpts.annotation:"function"==typeof this.mapOpts.annotation?this.mapOpts.annotation(this.opts.to,this.root):this.outputFile()+".map";let t="\n";this.css.includes("\r\n")&&(t="\r\n"),this.css+=t+"/*# sourceMappingURL="+e+" */"}outputFile(){return this.opts.to?this.path(this.opts.to):this.opts.from?this.path(this.opts.from):"to.css"}generateMap(){return this.generateString(),this.isSourcesContent()&&this.setSourcesContent(),this.previous().length>0&&this.applyPrevMaps(),this.isAnnotation()&&this.addAnnotation(),this.isInline()?[this.css]:[this.css,this.map]}path(e){if(0===e.indexOf("<"))return e;if(/^\w+:\/\//.test(e))return e;if(this.mapOpts.absolute)return e;let t=this.opts.to?r(this.opts.to):".";return"string"==typeof this.mapOpts.annotation&&(t=r(a(t,this.mapOpts.annotation))),l(t,e)}toUrl(e){return"\\"===c&&(e=e.replace(/\\/g,"/")),encodeURI(e).replace(/[#?]/g,encodeURIComponent)}sourcePath(e){if(this.mapOpts.from)return this.toUrl(this.mapOpts.from);if(this.mapOpts.absolute){if(h)return h(e.source.input.from).toString();throw new Error("`map.absolute` option is not available in this PostCSS build")}return this.toUrl(this.path(e.source.input.from))}generateString(){this.css="",this.map=new o({file:this.outputFile()});let e,t,i=1,s=1,n="<no source>",r={source:"",generated:{line:0,column:0},original:{line:0,column:0}};this.stringify(this.root,((o,a,l)=>{if(this.css+=o,a&&"end"!==l&&(r.generated.line=i,r.generated.column=s-1,a.source&&a.source.start?(r.source=this.sourcePath(a),r.original.line=a.source.start.line,r.original.column=a.source.start.column-1,this.map.addMapping(r)):(r.source=n,r.original.line=1,r.original.column=0,this.map.addMapping(r))),e=o.match(/\n/g),e?(i+=e.length,t=o.lastIndexOf("\n"),s=o.length-t):s+=o.length,a&&"start"!==l){let e=a.parent||{raws:{}};("decl"!==a.type||a!==e.last||e.raws.semicolon)&&(a.source&&a.source.end?(r.source=this.sourcePath(a),r.original.line=a.source.end.line,r.original.column=a.source.end.column-1,r.generated.line=i,r.generated.column=s-2,this.map.addMapping(r)):(r.source=n,r.original.line=1,r.original.column=0,r.generated.line=i,r.generated.column=s-1,this.map.addMapping(r)))}}))}generate(){if(this.clearAnnotation(),u&&d&&this.isMap())return this.generateMap();let e="";return this.stringify(this.root,(t=>{e+=t})),[e]}}},4343:(e,t,i)=>{"use strict";let{isClean:s,my:n}=i(5506),o=i(1667),r=i(5701),a=i(6157);function l(e,t){let i=new e.constructor;for(let s in e){if(!Object.prototype.hasOwnProperty.call(e,s))continue;if("proxyCache"===s)continue;let n=e[s],o=typeof n;"parent"===s&&"object"===o?t&&(i[s]=t):"source"===s?i[s]=n:Array.isArray(n)?i[s]=n.map((e=>l(e,i))):("object"===o&&null!==n&&(n=l(n)),i[s]=n)}return i}class c{constructor(e={}){this.raws={},this[s]=!1,this[n]=!0;for(let t in e)if("nodes"===t){this.nodes=[];for(let i of e[t])"function"==typeof i.clone?this.append(i.clone()):this.append(i)}else this[t]=e[t]}error(e,t={}){if(this.source){let i=this.positionBy(t);return this.source.input.error(e,i.line,i.column,t)}return new o(e)}warn(e,t,i){let s={node:this};for(let n in i)s[n]=i[n];return e.warn(t,s)}remove(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this}toString(e=a){e.stringify&&(e=e.stringify);let t="";return e(this,(e=>{t+=e})),t}assign(e={}){for(let t in e)this[t]=e[t];return this}clone(e={}){let t=l(this);for(let i in e)t[i]=e[i];return t}cloneBefore(e={}){let t=this.clone(e);return this.parent.insertBefore(this,t),t}cloneAfter(e={}){let t=this.clone(e);return this.parent.insertAfter(this,t),t}replaceWith(...e){if(this.parent){let t=this,i=!1;for(let s of e)s===this?i=!0:i?(this.parent.insertAfter(t,s),t=s):this.parent.insertBefore(t,s);i||this.remove()}return this}next(){if(!this.parent)return;let e=this.parent.index(this);return this.parent.nodes[e+1]}prev(){if(!this.parent)return;let e=this.parent.index(this);return this.parent.nodes[e-1]}before(e){return this.parent.insertBefore(this,e),this}after(e){return this.parent.insertAfter(this,e),this}root(){let e=this;for(;e.parent&&"document"!==e.parent.type;)e=e.parent;return e}raw(e,t){return(new r).raw(this,e,t)}cleanRaws(e){delete this.raws.before,delete this.raws.after,e||delete this.raws.between}toJSON(e,t){let i={},s=null==t;t=t||new Map;let n=0;for(let o in this){if(!Object.prototype.hasOwnProperty.call(this,o))continue;if("parent"===o||"proxyCache"===o)continue;let e=this[o];if(Array.isArray(e))i[o]=e.map((e=>"object"==typeof e&&e.toJSON?e.toJSON(null,t):e));else if("object"==typeof e&&e.toJSON)i[o]=e.toJSON(null,t);else if("source"===o){let s=t.get(e.input);null==s&&(s=n,t.set(e.input,n),n++),i[o]={inputId:s,start:e.start,end:e.end}}else i[o]=e}return s&&(i.inputs=[...t.keys()].map((e=>e.toJSON()))),i}positionInside(e){let t=this.toString(),i=this.source.start.column,s=this.source.start.line;for(let n=0;n<e;n++)"\n"===t[n]?(i=1,s+=1):i+=1;return{line:s,column:i}}positionBy(e){let t=this.source.start;if(e.index)t=this.positionInside(e.index);else if(e.word){let i=this.toString().indexOf(e.word);-1!==i&&(t=this.positionInside(i))}return t}getProxyProcessor(){return{set:(e,t,i)=>(e[t]===i||(e[t]=i,"prop"!==t&&"value"!==t&&"name"!==t&&"params"!==t&&"important"!==t&&"text"!==t||e.markDirty()),!0),get:(e,t)=>"proxyOf"===t?e:"root"===t?()=>e.root().toProxy():e[t]}}toProxy(){return this.proxyCache||(this.proxyCache=new Proxy(this,this.getProxyProcessor())),this.proxyCache}addToError(e){if(e.postcssNode=this,e.stack&&this.source&&/\n\s{4}at /.test(e.stack)){let t=this.source;e.stack=e.stack.replace(/\n\s{4}at /,`$&${t.input.from}:${t.start.line}:${t.start.column}$&`)}return e}markDirty(){if(this[s]){this[s]=!1;let e=this;for(;e=e.parent;)e[s]=!1}}get proxyOf(){return this}}e.exports=c,c.default=c},7057:(e,t,i)=>{"use strict";let s=i(1204),n=i(7116),o=i(2993);function r(e,t){let i=new o(e,t),s=new n(i);try{s.parse()}catch(e){throw e}return s.root}e.exports=r,r.default=r,s.registerParse(r)},7116:(e,t,i)=>{"use strict";let s=i(6417),n=i(1157),o=i(3102),r=i(8940),a=i(7563),l=i(6621);e.exports=class{constructor(e){this.input=e,this.root=new a,this.current=this.root,this.spaces="",this.semicolon=!1,this.customProperty=!1,this.createTokenizer(),this.root.source={input:e,start:{offset:0,line:1,column:1}}}createTokenizer(){this.tokenizer=n(this.input)}parse(){let e;for(;!this.tokenizer.endOfFile();)switch(e=this.tokenizer.nextToken(),e[0]){case"space":this.spaces+=e[1];break;case";":this.freeSemicolon(e);break;case"}":this.end(e);break;case"comment":this.comment(e);break;case"at-word":this.atrule(e);break;case"{":this.emptyRule(e);break;default:this.other(e)}this.endFile()}comment(e){let t=new o;this.init(t,e[2]),t.source.end=this.getPosition(e[3]||e[2]);let i=e[1].slice(2,-2);if(/^\s*$/.test(i))t.text="",t.raws.left=i,t.raws.right="";else{let e=i.match(/^(\s*)([^]*\S)(\s*)$/);t.text=e[2],t.raws.left=e[1],t.raws.right=e[3]}}emptyRule(e){let t=new l;this.init(t,e[2]),t.selector="",t.raws.between="",this.current=t}other(e){let t=!1,i=null,s=!1,n=null,o=[],r=e[1].startsWith("--"),a=[],l=e;for(;l;){if(i=l[0],a.push(l),"("===i||"["===i)n||(n=l),o.push("("===i?")":"]");else if(r&&s&&"{"===i)n||(n=l),o.push("}");else if(0===o.length){if(";"===i){if(s)return void this.decl(a,r);break}if("{"===i)return void this.rule(a);if("}"===i){this.tokenizer.back(a.pop()),t=!0;break}":"===i&&(s=!0)}else i===o[o.length-1]&&(o.pop(),0===o.length&&(n=null));l=this.tokenizer.nextToken()}if(this.tokenizer.endOfFile()&&(t=!0),o.length>0&&this.unclosedBracket(n),t&&s){for(;a.length&&(l=a[a.length-1][0],"space"===l||"comment"===l);)this.tokenizer.back(a.pop());this.decl(a,r)}else this.unknownWord(a)}rule(e){e.pop();let t=new l;this.init(t,e[0][2]),t.raws.between=this.spacesAndCommentsFromEnd(e),this.raw(t,"selector",e),this.current=t}decl(e,t){let i=new s;this.init(i,e[0][2]);let n,o=e[e.length-1];for(";"===o[0]&&(this.semicolon=!0,e.pop()),i.source.end=this.getPosition(o[3]||o[2]);"word"!==e[0][0];)1===e.length&&this.unknownWord(e),i.raws.before+=e.shift()[1];for(i.source.start=this.getPosition(e[0][2]),i.prop="";e.length;){let t=e[0][0];if(":"===t||"space"===t||"comment"===t)break;i.prop+=e.shift()[1]}for(i.raws.between="";e.length;){if(n=e.shift(),":"===n[0]){i.raws.between+=n[1];break}"word"===n[0]&&/\w/.test(n[1])&&this.unknownWord([n]),i.raws.between+=n[1]}"_"!==i.prop[0]&&"*"!==i.prop[0]||(i.raws.before+=i.prop[0],i.prop=i.prop.slice(1));let r=this.spacesAndCommentsFromStart(e);this.precheckMissedSemicolon(e);for(let s=e.length-1;s>=0;s--){if(n=e[s],"!important"===n[1].toLowerCase()){i.important=!0;let t=this.stringFrom(e,s);t=this.spacesFromEnd(e)+t," !important"!==t&&(i.raws.important=t);break}if("important"===n[1].toLowerCase()){let t=e.slice(0),n="";for(let e=s;e>0;e--){let i=t[e][0];if(0===n.trim().indexOf("!")&&"space"!==i)break;n=t.pop()[1]+n}0===n.trim().indexOf("!")&&(i.important=!0,i.raws.important=n,e=t)}if("space"!==n[0]&&"comment"!==n[0])break}let a=e.some((e=>"space"!==e[0]&&"comment"!==e[0]));this.raw(i,"value",e),a?i.raws.between+=r:i.value=r+i.value,i.value.includes(":")&&!t&&this.checkMissedSemicolon(e)}atrule(e){let t,i,s,n=new r;n.name=e[1].slice(1),""===n.name&&this.unnamedAtrule(n,e),this.init(n,e[2]);let o=!1,a=!1,l=[],c=[];for(;!this.tokenizer.endOfFile();){if(t=(e=this.tokenizer.nextToken())[0],"("===t||"["===t?c.push("("===t?")":"]"):"{"===t&&c.length>0?c.push("}"):t===c[c.length-1]&&c.pop(),0===c.length){if(";"===t){n.source.end=this.getPosition(e[2]),this.semicolon=!0;break}if("{"===t){a=!0;break}if("}"===t){if(l.length>0){for(s=l.length-1,i=l[s];i&&"space"===i[0];)i=l[--s];i&&(n.source.end=this.getPosition(i[3]||i[2]))}this.end(e);break}l.push(e)}else l.push(e);if(this.tokenizer.endOfFile()){o=!0;break}}n.raws.between=this.spacesAndCommentsFromEnd(l),l.length?(n.raws.afterName=this.spacesAndCommentsFromStart(l),this.raw(n,"params",l),o&&(e=l[l.length-1],n.source.end=this.getPosition(e[3]||e[2]),this.spaces=n.raws.between,n.raws.between="")):(n.raws.afterName="",n.params=""),a&&(n.nodes=[],this.current=n)}end(e){this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.semicolon=!1,this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.spaces="",this.current.parent?(this.current.source.end=this.getPosition(e[2]),this.current=this.current.parent):this.unexpectedClose(e)}endFile(){this.current.parent&&this.unclosedBlock(),this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.current.raws.after=(this.current.raws.after||"")+this.spaces}freeSemicolon(e){if(this.spaces+=e[1],this.current.nodes){let e=this.current.nodes[this.current.nodes.length-1];e&&"rule"===e.type&&!e.raws.ownSemicolon&&(e.raws.ownSemicolon=this.spaces,this.spaces="")}}getPosition(e){let t=this.input.fromOffset(e);return{offset:e,line:t.line,column:t.col}}init(e,t){this.current.push(e),e.source={start:this.getPosition(t),input:this.input},e.raws.before=this.spaces,this.spaces="","comment"!==e.type&&(this.semicolon=!1)}raw(e,t,i){let s,n,o,r,a=i.length,l="",c=!0,h=/^([#.|])?(\w)+/i;for(let d=0;d<a;d+=1)s=i[d],n=s[0],"comment"!==n||"rule"!==e.type?"comment"===n||"space"===n&&d===a-1?c=!1:l+=s[1]:(r=i[d-1],o=i[d+1],"space"!==r[0]&&"space"!==o[0]&&h.test(r[1])&&h.test(o[1])?l+=s[1]:c=!1);if(!c){let s=i.reduce(((e,t)=>e+t[1]),"");e.raws[t]={value:l,raw:s}}e[t]=l}spacesAndCommentsFromEnd(e){let t,i="";for(;e.length&&(t=e[e.length-1][0],"space"===t||"comment"===t);)i=e.pop()[1]+i;return i}spacesAndCommentsFromStart(e){let t,i="";for(;e.length&&(t=e[0][0],"space"===t||"comment"===t);)i+=e.shift()[1];return i}spacesFromEnd(e){let t,i="";for(;e.length&&(t=e[e.length-1][0],"space"===t);)i=e.pop()[1]+i;return i}stringFrom(e,t){let i="";for(let s=t;s<e.length;s++)i+=e[s][1];return e.splice(t,e.length-t),i}colon(e){let t,i,s,n=0;for(let[o,r]of e.entries()){if(t=r,i=t[0],"("===i&&(n+=1),")"===i&&(n-=1),0===n&&":"===i){if(s){if("word"===s[0]&&"progid"===s[1])continue;return o}this.doubleColon(t)}s=t}return!1}unclosedBracket(e){throw this.input.error("Unclosed bracket",e[2])}unknownWord(e){throw this.input.error("Unknown word",e[0][2])}unexpectedClose(e){throw this.input.error("Unexpected }",e[2])}unclosedBlock(){let e=this.current.source.start;throw this.input.error("Unclosed block",e.line,e.column)}doubleColon(e){throw this.input.error("Double colon",e[2])}unnamedAtrule(e,t){throw this.input.error("At-rule without name",t[2])}precheckMissedSemicolon(){}checkMissedSemicolon(e){let t=this.colon(e);if(!1===t)return;let i,s=0;for(let n=t-1;n>=0&&(i=e[n],"space"===i[0]||(s+=1,2!==s));n--);throw this.input.error("Missed semicolon","word"===i[0]?i[3]+1:i[2])}}},7866:(e,t,i)=>{"use strict";let s=i(1667),o=i(6417),r=i(6992),a=i(1204),l=i(9429),c=i(6157),h=i(9295),d=i(7083),u=i(1662),m=i(3102),p=i(8940),f=i(6865),g=i(2993),w=i(7057),b=i(6136),v=i(6621),y=i(7563),_=i(4343);function k(...e){return 1===e.length&&Array.isArray(e[0])&&(e=e[0]),new l(e)}k.plugin=function(e,t){function i(...i){let s=t(...i);return s.postcssPlugin=e,s.postcssVersion=(new l).version,s}let s;return console&&console.warn&&(console.warn(e+": postcss.plugin was deprecated. Migration guide:\nhttps://evilmartians.com/chronicles/postcss-8-plugin-migration"),n.env.LANG&&n.env.LANG.startsWith("cn")&&console.warn(e+": \u91cc\u9762 postcss.plugin \u88ab\u5f03\u7528. \u8fc1\u79fb\u6307\u5357:\nhttps://www.w3ctech.com/topic/2226")),Object.defineProperty(i,"postcss",{get:()=>(s||(s=i()),s)}),i.process=function(e,t,s){return k([i(s)]).process(e,t)},i},k.stringify=c,k.parse=w,k.fromJSON=h,k.list=b,k.comment=e=>new m(e),k.atRule=e=>new p(e),k.decl=e=>new o(e),k.rule=e=>new v(e),k.root=e=>new y(e),k.document=e=>new d(e),k.CssSyntaxError=s,k.Declaration=o,k.Container=a,k.Document=d,k.Comment=m,k.Warning=u,k.AtRule=p,k.Result=f,k.Input=g,k.Rule=v,k.Root=y,k.Node=_,r.registerPostcss(k),e.exports=k,k.default=k},3353:(e,t,i)=>{"use strict";let{SourceMapConsumer:n,SourceMapGenerator:o}=i(209),{existsSync:r,readFileSync:a}=i(4777),{dirname:l,join:c}=i(9830);class h{constructor(e,t){if(!1===t.map)return;this.loadAnnotation(e),this.inline=this.startWith(this.annotation,"data:");let i=t.map?t.map.prev:void 0,s=this.loadMap(t.from,i);!this.mapFile&&t.from&&(this.mapFile=t.from),this.mapFile&&(this.root=l(this.mapFile)),s&&(this.text=s)}consumer(){return this.consumerCache||(this.consumerCache=new n(this.text)),this.consumerCache}withContent(){return!!(this.consumer().sourcesContent&&this.consumer().sourcesContent.length>0)}startWith(e,t){return!!e&&e.substr(0,t.length)===t}getAnnotationURL(e){return e.replace(/^\/\*\s*# sourceMappingURL=/,"").trim()}loadAnnotation(e){let t=e.match(/\/\*\s*# sourceMappingURL=/gm);if(!t)return;let i=e.lastIndexOf(t.pop()),s=e.indexOf("*/",i);i>-1&&s>-1&&(this.annotation=this.getAnnotationURL(e.substring(i,s)))}decodeInline(e){if(/^data:application\/json;charset=utf-?8,/.test(e)||/^data:application\/json,/.test(e))return decodeURIComponent(e.substr(RegExp.lastMatch.length));if(/^data:application\/json;charset=utf-?8;base64,/.test(e)||/^data:application\/json;base64,/.test(e))return t=e.substr(RegExp.lastMatch.length),s?s.from(t,"base64").toString():window.atob(t);var t;let i=e.match(/data:application\/json;([^,]+),/)[1];throw new Error("Unsupported source map encoding "+i)}loadFile(e){if(this.root=l(e),r(e))return this.mapFile=e,a(e,"utf-8").toString().trim()}loadMap(e,t){if(!1===t)return!1;if(t){if("string"==typeof t)return t;if("function"!=typeof t){if(t instanceof n)return o.fromSourceMap(t).toString();if(t instanceof o)return t.toString();if(this.isMap(t))return JSON.stringify(t);throw new Error("Unsupported previous source map format: "+t.toString())}{let i=t(e);if(i){let e=this.loadFile(i);if(!e)throw new Error("Unable to load previous source map: "+i.toString());return e}}}else{if(this.inline)return this.decodeInline(this.annotation);if(this.annotation){let t=this.annotation;return e&&(t=c(l(e),t)),this.loadFile(t)}}}isMap(e){return"object"==typeof e&&("string"==typeof e.mappings||"string"==typeof e._mappings||Array.isArray(e.sections))}}e.exports=h,h.default=h},9429:(e,t,i)=>{"use strict";let s=i(6992),n=i(7083),o=i(7563);class r{constructor(e=[]){this.version="8.3.11",this.plugins=this.normalize(e)}use(e){return this.plugins=this.plugins.concat(this.normalize([e])),this}process(e,t={}){return 0!==this.plugins.length||void 0!==t.parser||void 0!==t.stringifier||void 0!==t.syntax||t.hideNothingWarning,new s(this,e,t)}normalize(e){let t=[];for(let i of e)if(!0===i.postcss?i=i():i.postcss&&(i=i.postcss),"object"==typeof i&&Array.isArray(i.plugins))t=t.concat(i.plugins);else if("object"==typeof i&&i.postcssPlugin)t.push(i);else if("function"==typeof i)t.push(i);else if("object"!=typeof i||!i.parse&&!i.stringify)throw new Error(i+" is not a PostCSS plugin");return t}}e.exports=r,r.default=r,o.registerProcessor(r),n.registerProcessor(r)},6865:(e,t,i)=>{"use strict";let s=i(1662);class n{constructor(e,t,i){this.processor=e,this.messages=[],this.root=t,this.opts=i,this.css=void 0,this.map=void 0}toString(){return this.css}warn(e,t={}){t.plugin||this.lastPlugin&&this.lastPlugin.postcssPlugin&&(t.plugin=this.lastPlugin.postcssPlugin);let i=new s(e,t);return this.messages.push(i),i}warnings(){return this.messages.filter((e=>"warning"===e.type))}get content(){return this.css}}e.exports=n,n.default=n},7563:(e,t,i)=>{"use strict";let s,n,o=i(1204);class r extends o{constructor(e){super(e),this.type="root",this.nodes||(this.nodes=[])}removeChild(e,t){let i=this.index(e);return!t&&0===i&&this.nodes.length>1&&(this.nodes[1].raws.before=this.nodes[i].raws.before),super.removeChild(e)}normalize(e,t,i){let s=super.normalize(e);if(t)if("prepend"===i)this.nodes.length>1?t.raws.before=this.nodes[1].raws.before:delete t.raws.before;else if(this.first!==t)for(let n of s)n.raws.before=t.raws.before;return s}toResult(e={}){return new s(new n,this,e).stringify()}}r.registerLazyResult=e=>{s=e},r.registerProcessor=e=>{n=e},e.exports=r,r.default=r},6621:(e,t,i)=>{"use strict";let s=i(1204),n=i(6136);class o extends s{constructor(e){super(e),this.type="rule",this.nodes||(this.nodes=[])}get selectors(){return n.comma(this.selector)}set selectors(e){let t=this.selector?this.selector.match(/,\s*/):null,i=t?t[0]:","+this.raw("between","beforeOpen");this.selector=e.join(i)}}e.exports=o,o.default=o,s.registerRule(o)},5701:e=>{"use strict";const t={colon:": ",indent:"    ",beforeDecl:"\n",beforeRule:"\n",beforeOpen:" ",beforeClose:"\n",beforeComment:"\n",after:"\n",emptyBody:"",commentLeft:" ",commentRight:" ",semicolon:!1};e.exports=class{constructor(e){this.builder=e}stringify(e,t){if(!this[e.type])throw new Error("Unknown AST node type "+e.type+". Maybe you need to change PostCSS stringifier.");this[e.type](e,t)}document(e){this.body(e)}root(e){this.body(e),e.raws.after&&this.builder(e.raws.after)}comment(e){let t=this.raw(e,"left","commentLeft"),i=this.raw(e,"right","commentRight");this.builder("/*"+t+e.text+i+"*/",e)}decl(e,t){let i=this.raw(e,"between","colon"),s=e.prop+i+this.rawValue(e,"value");e.important&&(s+=e.raws.important||" !important"),t&&(s+=";"),this.builder(s,e)}rule(e){this.block(e,this.rawValue(e,"selector")),e.raws.ownSemicolon&&this.builder(e.raws.ownSemicolon,e,"end")}atrule(e,t){let i="@"+e.name,s=e.params?this.rawValue(e,"params"):"";if(void 0!==e.raws.afterName?i+=e.raws.afterName:s&&(i+=" "),e.nodes)this.block(e,i+s);else{let n=(e.raws.between||"")+(t?";":"");this.builder(i+s+n,e)}}body(e){let t=e.nodes.length-1;for(;t>0&&"comment"===e.nodes[t].type;)t-=1;let i=this.raw(e,"semicolon");for(let s=0;s<e.nodes.length;s++){let n=e.nodes[s],o=this.raw(n,"before");o&&this.builder(o),this.stringify(n,t!==s||i)}}block(e,t){let i,s=this.raw(e,"between","beforeOpen");this.builder(t+s+"{",e,"start"),e.nodes&&e.nodes.length?(this.body(e),i=this.raw(e,"after")):i=this.raw(e,"after","emptyBody"),i&&this.builder(i),this.builder("}",e,"end")}raw(e,i,s){let n;if(s||(s=i),i&&(n=e.raws[i],void 0!==n))return n;let o=e.parent;if("before"===s){if(!o||"root"===o.type&&o.first===e)return"";if(o&&"document"===o.type)return""}if(!o)return t[s];let r=e.root();if(r.rawCache||(r.rawCache={}),void 0!==r.rawCache[s])return r.rawCache[s];if("before"===s||"after"===s)return this.beforeAfter(e,s);{let t="raw"+((a=s)[0].toUpperCase()+a.slice(1));this[t]?n=this[t](r,e):r.walk((e=>{if(n=e.raws[i],void 0!==n)return!1}))}var a;return void 0===n&&(n=t[s]),r.rawCache[s]=n,n}rawSemicolon(e){let t;return e.walk((e=>{if(e.nodes&&e.nodes.length&&"decl"===e.last.type&&(t=e.raws.semicolon,void 0!==t))return!1})),t}rawEmptyBody(e){let t;return e.walk((e=>{if(e.nodes&&0===e.nodes.length&&(t=e.raws.after,void 0!==t))return!1})),t}rawIndent(e){if(e.raws.indent)return e.raws.indent;let t;return e.walk((i=>{let s=i.parent;if(s&&s!==e&&s.parent&&s.parent===e&&void 0!==i.raws.before){let e=i.raws.before.split("\n");return t=e[e.length-1],t=t.replace(/\S/g,""),!1}})),t}rawBeforeComment(e,t){let i;return e.walkComments((e=>{if(void 0!==e.raws.before)return i=e.raws.before,i.includes("\n")&&(i=i.replace(/[^\n]+$/,"")),!1})),void 0===i?i=this.raw(t,null,"beforeDecl"):i&&(i=i.replace(/\S/g,"")),i}rawBeforeDecl(e,t){let i;return e.walkDecls((e=>{if(void 0!==e.raws.before)return i=e.raws.before,i.includes("\n")&&(i=i.replace(/[^\n]+$/,"")),!1})),void 0===i?i=this.raw(t,null,"beforeRule"):i&&(i=i.replace(/\S/g,"")),i}rawBeforeRule(e){let t;return e.walk((i=>{if(i.nodes&&(i.parent!==e||e.first!==i)&&void 0!==i.raws.before)return t=i.raws.before,t.includes("\n")&&(t=t.replace(/[^\n]+$/,"")),!1})),t&&(t=t.replace(/\S/g,"")),t}rawBeforeClose(e){let t;return e.walk((e=>{if(e.nodes&&e.nodes.length>0&&void 0!==e.raws.after)return t=e.raws.after,t.includes("\n")&&(t=t.replace(/[^\n]+$/,"")),!1})),t&&(t=t.replace(/\S/g,"")),t}rawBeforeOpen(e){let t;return e.walk((e=>{if("decl"!==e.type&&(t=e.raws.between,void 0!==t))return!1})),t}rawColon(e){let t;return e.walkDecls((e=>{if(void 0!==e.raws.between)return t=e.raws.between.replace(/[^\s:]/g,""),!1})),t}beforeAfter(e,t){let i;i="decl"===e.type?this.raw(e,null,"beforeDecl"):"comment"===e.type?this.raw(e,null,"beforeComment"):"before"===t?this.raw(e,null,"beforeRule"):this.raw(e,null,"beforeClose");let s=e.parent,n=0;for(;s&&"root"!==s.type;)n+=1,s=s.parent;if(i.includes("\n")){let t=this.raw(e,null,"indent");if(t.length)for(let e=0;e<n;e++)i+=t}return i}rawValue(e,t){let i=e[t],s=e.raws[t];return s&&s.value===i?s.raw:i}}},6157:(e,t,i)=>{"use strict";let s=i(5701);function n(e,t){new s(t).stringify(e)}e.exports=n,n.default=n},5506:e=>{"use strict";e.exports.isClean=Symbol("isClean"),e.exports.my=Symbol("my")},1157:e=>{"use strict";const t="'".charCodeAt(0),i='"'.charCodeAt(0),s="\\".charCodeAt(0),n="/".charCodeAt(0),o="\n".charCodeAt(0),r=" ".charCodeAt(0),a="\f".charCodeAt(0),l="\t".charCodeAt(0),c="\r".charCodeAt(0),h="[".charCodeAt(0),d="]".charCodeAt(0),u="(".charCodeAt(0),m=")".charCodeAt(0),p="{".charCodeAt(0),f="}".charCodeAt(0),g=";".charCodeAt(0),w="*".charCodeAt(0),b=":".charCodeAt(0),v="@".charCodeAt(0),y=/[\t\n\f\r "#'()/;[\\\]{}]/g,_=/[\t\n\f\r !"#'():;@[\\\]{}]|\/(?=\*)/g,k=/.[\n"'(/\\]/,A=/[\da-f]/i;e.exports=function(e,x={}){let C,E,T,S,P,O,I,R,z,M,N=e.css.valueOf(),D=x.ignoreErrors,V=N.length,B=0,L=[],F=[];function j(t){throw e.error("Unclosed "+t,B)}return{back:function(e){F.push(e)},nextToken:function(e){if(F.length)return F.pop();if(B>=V)return;let x=!!e&&e.ignoreUnclosed;switch(C=N.charCodeAt(B),C){case o:case r:case l:case c:case a:E=B;do{E+=1,C=N.charCodeAt(E)}while(C===r||C===o||C===l||C===c||C===a);M=["space",N.slice(B,E)],B=E-1;break;case h:case d:case p:case f:case b:case g:case m:{let e=String.fromCharCode(C);M=[e,e,B];break}case u:if(R=L.length?L.pop()[1]:"",z=N.charCodeAt(B+1),"url"===R&&z!==t&&z!==i&&z!==r&&z!==o&&z!==l&&z!==a&&z!==c){E=B;do{if(O=!1,E=N.indexOf(")",E+1),-1===E){if(D||x){E=B;break}j("bracket")}for(I=E;N.charCodeAt(I-1)===s;)I-=1,O=!O}while(O);M=["brackets",N.slice(B,E+1),B,E],B=E}else E=N.indexOf(")",B+1),S=N.slice(B,E+1),-1===E||k.test(S)?M=["(","(",B]:(M=["brackets",S,B,E],B=E);break;case t:case i:T=C===t?"'":'"',E=B;do{if(O=!1,E=N.indexOf(T,E+1),-1===E){if(D||x){E=B+1;break}j("string")}for(I=E;N.charCodeAt(I-1)===s;)I-=1,O=!O}while(O);M=["string",N.slice(B,E+1),B,E],B=E;break;case v:y.lastIndex=B+1,y.test(N),E=0===y.lastIndex?N.length-1:y.lastIndex-2,M=["at-word",N.slice(B,E+1),B,E],B=E;break;case s:for(E=B,P=!0;N.charCodeAt(E+1)===s;)E+=1,P=!P;if(C=N.charCodeAt(E+1),P&&C!==n&&C!==r&&C!==o&&C!==l&&C!==c&&C!==a&&(E+=1,A.test(N.charAt(E)))){for(;A.test(N.charAt(E+1));)E+=1;N.charCodeAt(E+1)===r&&(E+=1)}M=["word",N.slice(B,E+1),B,E],B=E;break;default:C===n&&N.charCodeAt(B+1)===w?(E=N.indexOf("*/",B+2)+1,0===E&&(D||x?E=N.length:j("comment")),M=["comment",N.slice(B,E+1),B,E],B=E):(_.lastIndex=B+1,_.test(N),E=0===_.lastIndex?N.length-1:_.lastIndex-2,M=["word",N.slice(B,E+1),B,E],L.push(M),B=E)}return B++,M},endOfFile:function(){return 0===F.length&&B>=V},position:function(){return B}}}},6574:e=>{"use strict";let t={};e.exports=function(e){t[e]||(t[e]=!0,"undefined"!=typeof console&&console.warn&&console.warn(e))}},1662:e=>{"use strict";class t{constructor(e,t={}){if(this.type="warning",this.text=e,t.node&&t.node.source){let e=t.node.positionBy(t);this.line=e.line,this.column=e.column}for(let i in t)this[i]=t[i]}toString(){return this.node?this.node.error(this.text,{plugin:this.plugin,index:this.index,word:this.word}).message:this.plugin?this.plugin+": "+this.text:this.text}}e.exports=t,t.default=t},6482:(e,t,i)=>{const s=i(6124),n=i(2240),{isPlainObject:o}=i(426),r=i(4036),a=i(2134),{parse:l}=i(7866),c=["img","audio","video","picture","svg","object","map","iframe","embed"],h=["script","style"];function d(e,t){e&&Object.keys(e).forEach((function(i){t(e[i],i)}))}function u(e,t){return{}.hasOwnProperty.call(e,t)}function m(e,t){const i=[];return d(e,(function(e){t(e)&&i.push(e)})),i}e.exports=f;const p=/^[^\0\t\n\f\r /<=>]+$/;function f(e,t,i){if(null==e)return"";let w="",b="";function v(e,t){const i=this;this.tag=e,this.attribs=t||{},this.tagPosition=w.length,this.text="",this.mediaChildren=[],this.updateParentNodeText=function(){S.length&&(S[S.length-1].text+=i.text)},this.updateParentNodeMediaChildren=function(){S.length&&c.includes(this.tag)&&S[S.length-1].mediaChildren.push(this.tag)}}(t=Object.assign({},f.defaults,t)).parser=Object.assign({},g,t.parser),h.forEach((function(e){t.allowedTags&&t.allowedTags.indexOf(e)>-1&&!t.allowVulnerableTags&&console.warn(`\n\n\u26a0\ufe0f Your \`allowedTags\` option includes, \`${e}\`, which is inherently\nvulnerable to XSS attacks. Please remove it from \`allowedTags\`.\nOr, to disable this warning, add the \`allowVulnerableTags\` option\nand ensure you are accounting for this risk.\n\n`)}));const y=t.nonTextTags||["script","style","textarea","option"];let _,k;t.allowedAttributes&&(_={},k={},d(t.allowedAttributes,(function(e,t){_[t]=[];const i=[];e.forEach((function(e){"string"==typeof e&&e.indexOf("*")>=0?i.push(n(e).replace(/\\\*/g,".*")):_[t].push(e)})),i.length&&(k[t]=new RegExp("^("+i.join("|")+")$"))})));const A={},x={};d(t.allowedClasses,(function(e,t){_&&(u(_,t)||(_[t]=[]),_[t].push("class")),A[t]=[];const i=[];e.forEach((function(e){"string"==typeof e&&e.indexOf("*")>=0?i.push(n(e).replace(/\\\*/g,".*")):A[t].push(e)})),i.length&&(x[t]=new RegExp("^("+i.join("|")+")$"))}));const C={};let E,T,S,P,O,I,R;d(t.transformTags,(function(e,t){let i;"function"==typeof e?i=e:"string"==typeof e&&(i=f.simpleTransform(e)),"*"===t?E=i:C[t]=i}));let z=!1;N();const M=new s.Parser({onopentag:function(e,i){if(t.enforceHtmlBoundary&&"html"===e&&N(),I)return void R++;const s=new v(e,i);S.push(s);let n=!1;const c=!!s.text;let h;if(u(C,e)&&(h=C[e](e,i),s.attribs=i=h.attribs,void 0!==h.text&&(s.innerText=h.text),e!==h.tagName&&(s.name=e=h.tagName,O[T]=h.tagName)),E&&(h=E(e,i),s.attribs=i=h.attribs,e!==h.tagName&&(s.name=e=h.tagName,O[T]=h.tagName)),(t.allowedTags&&-1===t.allowedTags.indexOf(e)||"recursiveEscape"===t.disallowedTagsMode&&!function(e){for(const t in e)if(u(e,t))return!1;return!0}(P)||null!=t.nestingLimit&&T>=t.nestingLimit)&&(n=!0,P[T]=!0,"discard"===t.disallowedTagsMode&&-1!==y.indexOf(e)&&(I=!0,R=1),P[T]=!0),T++,n){if("discard"===t.disallowedTagsMode)return;b=w,w=""}w+="<"+e,"script"===e&&(t.allowedScriptHostnames||t.allowedScriptDomains)&&(s.innerText=""),(!_||u(_,e)||_["*"])&&d(i,(function(i,n){if(!p.test(n))return void delete s.attribs[n];let c,h=!1;if(!_||u(_,e)&&-1!==_[e].indexOf(n)||_["*"]&&-1!==_["*"].indexOf(n)||u(k,e)&&k[e].test(n)||k["*"]&&k["*"].test(n))h=!0;else if(_&&_[e])for(const t of _[e])if(o(t)&&t.name&&t.name===n){h=!0;let e="";if(!0===t.multiple){const s=i.split(" ");for(const i of s)-1!==t.values.indexOf(i)&&(""===e?e=i:e+=" "+i)}else t.values.indexOf(i)>=0&&(e=i);i=e}if(h){if(-1!==t.allowedSchemesAppliedToAttributes.indexOf(n)&&V(e,i))return void delete s.attribs[n];if("script"===e&&"src"===n){let e=!0;try{const s=new URL(i);if(t.allowedScriptHostnames||t.allowedScriptDomains){const i=(t.allowedScriptHostnames||[]).find((function(e){return e===s.hostname})),n=(t.allowedScriptDomains||[]).find((function(e){return s.hostname===e||s.hostname.endsWith(`.${e}`)}));e=i||n}}catch(t){e=!1}if(!e)return void delete s.attribs[n]}if("iframe"===e&&"src"===n){let e=!0;try{if((i=i.replace(/^(\w+:)?\s*[\\/]\s*[\\/]/,"$1//")).startsWith("relative:"))throw new Error("relative: exploit attempt");let s="relative://relative-site";for(let e=0;e<100;e++)s+=`/${e}`;const n=new URL(i,s);if(n&&"relative-site"===n.hostname&&"relative:"===n.protocol)e=u(t,"allowIframeRelativeUrls")?t.allowIframeRelativeUrls:!t.allowedIframeHostnames&&!t.allowedIframeDomains;else if(t.allowedIframeHostnames||t.allowedIframeDomains){const i=(t.allowedIframeHostnames||[]).find((function(e){return e===n.hostname})),s=(t.allowedIframeDomains||[]).find((function(e){return n.hostname===e||n.hostname.endsWith(`.${e}`)}));e=i||s}}catch(t){e=!1}if(!e)return void delete s.attribs[n]}if("srcset"===n)try{if(c=a(i),c.forEach((function(e){V("srcset",e.url)&&(e.evil=!0)})),c=m(c,(function(e){return!e.evil})),!c.length)return void delete s.attribs[n];i=m(c,(function(e){return!e.evil})).map((function(e){if(!e.url)throw new Error("URL missing");return e.url+(e.w?` ${e.w}w`:"")+(e.h?` ${e.h}h`:"")+(e.d?` ${e.d}x`:"")})).join(", "),s.attribs[n]=i}catch(e){return void delete s.attribs[n]}if("class"===n){const t=A[e],o=A["*"],a=[x[e],x["*"]].filter((function(e){return e}));if(!(i=B(i,t&&o?r(t,o):t||o,a)).length)return void delete s.attribs[n]}if("style"===n)try{const o=function(e,t){if(!t)return e;const i=e.nodes[0];let s;return s=t[i.selector]&&t["*"]?r(t[i.selector],t["*"]):t[i.selector]||t["*"],s&&(e.nodes[0].nodes=i.nodes.reduce(function(e){return function(t,i){return u(e,i.prop)&&e[i.prop].some((function(e){return e.test(i.value)}))&&t.push(i),t}}(s),[])),e}(l(e+" {"+i+"}"),t.allowedStyles);if(0===(i=function(e){return e.nodes[0].nodes.reduce((function(e,t){return e.push(t.prop+":"+t.value),e}),[]).join(";")}(o)).length)return void delete s.attribs[n]}catch(e){return void delete s.attribs[n]}w+=" "+n,i&&i.length&&(w+='="'+D(i,!0)+'"')}else delete s.attribs[n]})),-1!==t.selfClosing.indexOf(e)?w+=" />":(w+=">",!s.innerText||c||t.textFilter||(w+=D(s.innerText),z=!0)),n&&(w=b+D(w),b="")},ontext:function(e){if(I)return;const i=S[S.length-1];let s;if(i&&(s=i.tag,e=void 0!==i.innerText?i.innerText:e),"discard"!==t.disallowedTagsMode||"script"!==s&&"style"!==s){const i=D(e,!1);t.textFilter&&!z?w+=t.textFilter(i,s):z||(w+=i)}else w+=e;S.length&&(S[S.length-1].text+=e)},onclosetag:function(e){if(I){if(R--,R)return;I=!1}const i=S.pop();if(!i)return;I=!!t.enforceHtmlBoundary&&"html"===e,T--;const s=P[T];if(s){if(delete P[T],"discard"===t.disallowedTagsMode)return void i.updateParentNodeText();b=w,w=""}O[T]&&(e=O[T],delete O[T]),t.exclusiveFilter&&t.exclusiveFilter(i)?w=w.substr(0,i.tagPosition):(i.updateParentNodeMediaChildren(),i.updateParentNodeText(),-1===t.selfClosing.indexOf(e)?(w+="</"+e+">",s&&(w=b+D(w),b="")):s&&(w=b,b=""))}},t.parser);return M.write(e),M.end(),w;function N(){w="",T=0,S=[],P={},O={},I=!1,R=0}function D(e,i){return"string"!=typeof e&&(e+=""),t.parser.decodeEntities&&(e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),i&&(e=e.replace(/"/g,"&quot;"))),e=e.replace(/&(?![a-zA-Z0-9#]{1,20};)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),i&&(e=e.replace(/"/g,"&quot;")),e}function V(e,i){const s=(i=(i=i.replace(/[\x00-\x20]+/g,"")).replace(/<!--.*?-->/g,"")).match(/^([a-zA-Z][a-zA-Z0-9.\-+]*):/);if(!s)return!!i.match(/^[/\\]{2}/)&&!t.allowProtocolRelative;const n=s[1].toLowerCase();return u(t.allowedSchemesByTag,e)?-1===t.allowedSchemesByTag[e].indexOf(n):!t.allowedSchemes||-1===t.allowedSchemes.indexOf(n)}function B(e,t,i){return t?(e=e.split(/\s+/)).filter((function(e){return-1!==t.indexOf(e)||i.some((function(t){return t.test(e)}))})).join(" "):e}}const g={decodeEntities:!0};f.defaults={allowedTags:["address","article","aside","footer","header","h1","h2","h3","h4","h5","h6","hgroup","main","nav","section","blockquote","dd","div","dl","dt","figcaption","figure","hr","li","main","ol","p","pre","ul","a","abbr","b","bdi","bdo","br","cite","code","data","dfn","em","i","kbd","mark","q","rb","rp","rt","rtc","ruby","s","samp","small","span","strong","sub","sup","time","u","var","wbr","caption","col","colgroup","table","tbody","td","tfoot","th","thead","tr"],disallowedTagsMode:"discard",allowedAttributes:{a:["href","name","target"],img:["src"]},selfClosing:["img","br","hr","area","base","basefont","input","link","meta"],allowedSchemes:["http","https","ftp","mailto","tel"],allowedSchemesByTag:{},allowedSchemesAppliedToAttributes:["href","src","cite"],allowProtocolRelative:!0,enforceHtmlBoundary:!1},f.simpleTransform=function(e,t,i){return i=void 0===i||i,t=t||{},function(s,n){let o;if(i)for(o in t)n[o]=t[o];else n=t;return{tagName:e,attribs:n}}}},426:(e,t)=>{"use strict";function i(e){return"[object Object]"===Object.prototype.toString.call(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.isPlainObject=function(e){var t,s;return!1!==i(e)&&(void 0===(t=e.constructor)||!1!==i(s=t.prototype)&&!1!==s.hasOwnProperty("isPrototypeOf"))}},2868:()=>{},4777:()=>{},9830:()=>{},209:()=>{},7414:()=>{},2961:e=>{e.exports={nanoid:(e=21)=>{let t="",i=e;for(;i--;)t+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[64*Math.random()|0];return t},customAlphabet:(e,t)=>()=>{let i="",s=t;for(;s--;)i+=e[Math.random()*e.length|0];return i}}},3600:e=>{"use strict";e.exports=JSON.parse('{"0":65533,"128":8364,"130":8218,"131":402,"132":8222,"133":8230,"134":8224,"135":8225,"136":710,"137":8240,"138":352,"139":8249,"140":338,"142":381,"145":8216,"146":8217,"147":8220,"148":8221,"149":8226,"150":8211,"151":8212,"152":732,"153":8482,"154":353,"155":8250,"156":339,"158":382,"159":376}')},9323:e=>{"use strict";e.exports=JSON.parse('{"Aacute":"\xc1","aacute":"\xe1","Abreve":"\u0102","abreve":"\u0103","ac":"\u223e","acd":"\u223f","acE":"\u223e\u0333","Acirc":"\xc2","acirc":"\xe2","acute":"\xb4","Acy":"\u0410","acy":"\u0430","AElig":"\xc6","aelig":"\xe6","af":"\u2061","Afr":"\ud835\udd04","afr":"\ud835\udd1e","Agrave":"\xc0","agrave":"\xe0","alefsym":"\u2135","aleph":"\u2135","Alpha":"\u0391","alpha":"\u03b1","Amacr":"\u0100","amacr":"\u0101","amalg":"\u2a3f","amp":"&","AMP":"&","andand":"\u2a55","And":"\u2a53","and":"\u2227","andd":"\u2a5c","andslope":"\u2a58","andv":"\u2a5a","ang":"\u2220","ange":"\u29a4","angle":"\u2220","angmsdaa":"\u29a8","angmsdab":"\u29a9","angmsdac":"\u29aa","angmsdad":"\u29ab","angmsdae":"\u29ac","angmsdaf":"\u29ad","angmsdag":"\u29ae","angmsdah":"\u29af","angmsd":"\u2221","angrt":"\u221f","angrtvb":"\u22be","angrtvbd":"\u299d","angsph":"\u2222","angst":"\xc5","angzarr":"\u237c","Aogon":"\u0104","aogon":"\u0105","Aopf":"\ud835\udd38","aopf":"\ud835\udd52","apacir":"\u2a6f","ap":"\u2248","apE":"\u2a70","ape":"\u224a","apid":"\u224b","apos":"\'","ApplyFunction":"\u2061","approx":"\u2248","approxeq":"\u224a","Aring":"\xc5","aring":"\xe5","Ascr":"\ud835\udc9c","ascr":"\ud835\udcb6","Assign":"\u2254","ast":"*","asymp":"\u2248","asympeq":"\u224d","Atilde":"\xc3","atilde":"\xe3","Auml":"\xc4","auml":"\xe4","awconint":"\u2233","awint":"\u2a11","backcong":"\u224c","backepsilon":"\u03f6","backprime":"\u2035","backsim":"\u223d","backsimeq":"\u22cd","Backslash":"\u2216","Barv":"\u2ae7","barvee":"\u22bd","barwed":"\u2305","Barwed":"\u2306","barwedge":"\u2305","bbrk":"\u23b5","bbrktbrk":"\u23b6","bcong":"\u224c","Bcy":"\u0411","bcy":"\u0431","bdquo":"\u201e","becaus":"\u2235","because":"\u2235","Because":"\u2235","bemptyv":"\u29b0","bepsi":"\u03f6","bernou":"\u212c","Bernoullis":"\u212c","Beta":"\u0392","beta":"\u03b2","beth":"\u2136","between":"\u226c","Bfr":"\ud835\udd05","bfr":"\ud835\udd1f","bigcap":"\u22c2","bigcirc":"\u25ef","bigcup":"\u22c3","bigodot":"\u2a00","bigoplus":"\u2a01","bigotimes":"\u2a02","bigsqcup":"\u2a06","bigstar":"\u2605","bigtriangledown":"\u25bd","bigtriangleup":"\u25b3","biguplus":"\u2a04","bigvee":"\u22c1","bigwedge":"\u22c0","bkarow":"\u290d","blacklozenge":"\u29eb","blacksquare":"\u25aa","blacktriangle":"\u25b4","blacktriangledown":"\u25be","blacktriangleleft":"\u25c2","blacktriangleright":"\u25b8","blank":"\u2423","blk12":"\u2592","blk14":"\u2591","blk34":"\u2593","block":"\u2588","bne":"=\u20e5","bnequiv":"\u2261\u20e5","bNot":"\u2aed","bnot":"\u2310","Bopf":"\ud835\udd39","bopf":"\ud835\udd53","bot":"\u22a5","bottom":"\u22a5","bowtie":"\u22c8","boxbox":"\u29c9","boxdl":"\u2510","boxdL":"\u2555","boxDl":"\u2556","boxDL":"\u2557","boxdr":"\u250c","boxdR":"\u2552","boxDr":"\u2553","boxDR":"\u2554","boxh":"\u2500","boxH":"\u2550","boxhd":"\u252c","boxHd":"\u2564","boxhD":"\u2565","boxHD":"\u2566","boxhu":"\u2534","boxHu":"\u2567","boxhU":"\u2568","boxHU":"\u2569","boxminus":"\u229f","boxplus":"\u229e","boxtimes":"\u22a0","boxul":"\u2518","boxuL":"\u255b","boxUl":"\u255c","boxUL":"\u255d","boxur":"\u2514","boxuR":"\u2558","boxUr":"\u2559","boxUR":"\u255a","boxv":"\u2502","boxV":"\u2551","boxvh":"\u253c","boxvH":"\u256a","boxVh":"\u256b","boxVH":"\u256c","boxvl":"\u2524","boxvL":"\u2561","boxVl":"\u2562","boxVL":"\u2563","boxvr":"\u251c","boxvR":"\u255e","boxVr":"\u255f","boxVR":"\u2560","bprime":"\u2035","breve":"\u02d8","Breve":"\u02d8","brvbar":"\xa6","bscr":"\ud835\udcb7","Bscr":"\u212c","bsemi":"\u204f","bsim":"\u223d","bsime":"\u22cd","bsolb":"\u29c5","bsol":"\\\\","bsolhsub":"\u27c8","bull":"\u2022","bullet":"\u2022","bump":"\u224e","bumpE":"\u2aae","bumpe":"\u224f","Bumpeq":"\u224e","bumpeq":"\u224f","Cacute":"\u0106","cacute":"\u0107","capand":"\u2a44","capbrcup":"\u2a49","capcap":"\u2a4b","cap":"\u2229","Cap":"\u22d2","capcup":"\u2a47","capdot":"\u2a40","CapitalDifferentialD":"\u2145","caps":"\u2229\ufe00","caret":"\u2041","caron":"\u02c7","Cayleys":"\u212d","ccaps":"\u2a4d","Ccaron":"\u010c","ccaron":"\u010d","Ccedil":"\xc7","ccedil":"\xe7","Ccirc":"\u0108","ccirc":"\u0109","Cconint":"\u2230","ccups":"\u2a4c","ccupssm":"\u2a50","Cdot":"\u010a","cdot":"\u010b","cedil":"\xb8","Cedilla":"\xb8","cemptyv":"\u29b2","cent":"\xa2","centerdot":"\xb7","CenterDot":"\xb7","cfr":"\ud835\udd20","Cfr":"\u212d","CHcy":"\u0427","chcy":"\u0447","check":"\u2713","checkmark":"\u2713","Chi":"\u03a7","chi":"\u03c7","circ":"\u02c6","circeq":"\u2257","circlearrowleft":"\u21ba","circlearrowright":"\u21bb","circledast":"\u229b","circledcirc":"\u229a","circleddash":"\u229d","CircleDot":"\u2299","circledR":"\xae","circledS":"\u24c8","CircleMinus":"\u2296","CirclePlus":"\u2295","CircleTimes":"\u2297","cir":"\u25cb","cirE":"\u29c3","cire":"\u2257","cirfnint":"\u2a10","cirmid":"\u2aef","cirscir":"\u29c2","ClockwiseContourIntegral":"\u2232","CloseCurlyDoubleQuote":"\u201d","CloseCurlyQuote":"\u2019","clubs":"\u2663","clubsuit":"\u2663","colon":":","Colon":"\u2237","Colone":"\u2a74","colone":"\u2254","coloneq":"\u2254","comma":",","commat":"@","comp":"\u2201","compfn":"\u2218","complement":"\u2201","complexes":"\u2102","cong":"\u2245","congdot":"\u2a6d","Congruent":"\u2261","conint":"\u222e","Conint":"\u222f","ContourIntegral":"\u222e","copf":"\ud835\udd54","Copf":"\u2102","coprod":"\u2210","Coproduct":"\u2210","copy":"\xa9","COPY":"\xa9","copysr":"\u2117","CounterClockwiseContourIntegral":"\u2233","crarr":"\u21b5","cross":"\u2717","Cross":"\u2a2f","Cscr":"\ud835\udc9e","cscr":"\ud835\udcb8","csub":"\u2acf","csube":"\u2ad1","csup":"\u2ad0","csupe":"\u2ad2","ctdot":"\u22ef","cudarrl":"\u2938","cudarrr":"\u2935","cuepr":"\u22de","cuesc":"\u22df","cularr":"\u21b6","cularrp":"\u293d","cupbrcap":"\u2a48","cupcap":"\u2a46","CupCap":"\u224d","cup":"\u222a","Cup":"\u22d3","cupcup":"\u2a4a","cupdot":"\u228d","cupor":"\u2a45","cups":"\u222a\ufe00","curarr":"\u21b7","curarrm":"\u293c","curlyeqprec":"\u22de","curlyeqsucc":"\u22df","curlyvee":"\u22ce","curlywedge":"\u22cf","curren":"\xa4","curvearrowleft":"\u21b6","curvearrowright":"\u21b7","cuvee":"\u22ce","cuwed":"\u22cf","cwconint":"\u2232","cwint":"\u2231","cylcty":"\u232d","dagger":"\u2020","Dagger":"\u2021","daleth":"\u2138","darr":"\u2193","Darr":"\u21a1","dArr":"\u21d3","dash":"\u2010","Dashv":"\u2ae4","dashv":"\u22a3","dbkarow":"\u290f","dblac":"\u02dd","Dcaron":"\u010e","dcaron":"\u010f","Dcy":"\u0414","dcy":"\u0434","ddagger":"\u2021","ddarr":"\u21ca","DD":"\u2145","dd":"\u2146","DDotrahd":"\u2911","ddotseq":"\u2a77","deg":"\xb0","Del":"\u2207","Delta":"\u0394","delta":"\u03b4","demptyv":"\u29b1","dfisht":"\u297f","Dfr":"\ud835\udd07","dfr":"\ud835\udd21","dHar":"\u2965","dharl":"\u21c3","dharr":"\u21c2","DiacriticalAcute":"\xb4","DiacriticalDot":"\u02d9","DiacriticalDoubleAcute":"\u02dd","DiacriticalGrave":"`","DiacriticalTilde":"\u02dc","diam":"\u22c4","diamond":"\u22c4","Diamond":"\u22c4","diamondsuit":"\u2666","diams":"\u2666","die":"\xa8","DifferentialD":"\u2146","digamma":"\u03dd","disin":"\u22f2","div":"\xf7","divide":"\xf7","divideontimes":"\u22c7","divonx":"\u22c7","DJcy":"\u0402","djcy":"\u0452","dlcorn":"\u231e","dlcrop":"\u230d","dollar":"$","Dopf":"\ud835\udd3b","dopf":"\ud835\udd55","Dot":"\xa8","dot":"\u02d9","DotDot":"\u20dc","doteq":"\u2250","doteqdot":"\u2251","DotEqual":"\u2250","dotminus":"\u2238","dotplus":"\u2214","dotsquare":"\u22a1","doublebarwedge":"\u2306","DoubleContourIntegral":"\u222f","DoubleDot":"\xa8","DoubleDownArrow":"\u21d3","DoubleLeftArrow":"\u21d0","DoubleLeftRightArrow":"\u21d4","DoubleLeftTee":"\u2ae4","DoubleLongLeftArrow":"\u27f8","DoubleLongLeftRightArrow":"\u27fa","DoubleLongRightArrow":"\u27f9","DoubleRightArrow":"\u21d2","DoubleRightTee":"\u22a8","DoubleUpArrow":"\u21d1","DoubleUpDownArrow":"\u21d5","DoubleVerticalBar":"\u2225","DownArrowBar":"\u2913","downarrow":"\u2193","DownArrow":"\u2193","Downarrow":"\u21d3","DownArrowUpArrow":"\u21f5","DownBreve":"\u0311","downdownarrows":"\u21ca","downharpoonleft":"\u21c3","downharpoonright":"\u21c2","DownLeftRightVector":"\u2950","DownLeftTeeVector":"\u295e","DownLeftVectorBar":"\u2956","DownLeftVector":"\u21bd","DownRightTeeVector":"\u295f","DownRightVectorBar":"\u2957","DownRightVector":"\u21c1","DownTeeArrow":"\u21a7","DownTee":"\u22a4","drbkarow":"\u2910","drcorn":"\u231f","drcrop":"\u230c","Dscr":"\ud835\udc9f","dscr":"\ud835\udcb9","DScy":"\u0405","dscy":"\u0455","dsol":"\u29f6","Dstrok":"\u0110","dstrok":"\u0111","dtdot":"\u22f1","dtri":"\u25bf","dtrif":"\u25be","duarr":"\u21f5","duhar":"\u296f","dwangle":"\u29a6","DZcy":"\u040f","dzcy":"\u045f","dzigrarr":"\u27ff","Eacute":"\xc9","eacute":"\xe9","easter":"\u2a6e","Ecaron":"\u011a","ecaron":"\u011b","Ecirc":"\xca","ecirc":"\xea","ecir":"\u2256","ecolon":"\u2255","Ecy":"\u042d","ecy":"\u044d","eDDot":"\u2a77","Edot":"\u0116","edot":"\u0117","eDot":"\u2251","ee":"\u2147","efDot":"\u2252","Efr":"\ud835\udd08","efr":"\ud835\udd22","eg":"\u2a9a","Egrave":"\xc8","egrave":"\xe8","egs":"\u2a96","egsdot":"\u2a98","el":"\u2a99","Element":"\u2208","elinters":"\u23e7","ell":"\u2113","els":"\u2a95","elsdot":"\u2a97","Emacr":"\u0112","emacr":"\u0113","empty":"\u2205","emptyset":"\u2205","EmptySmallSquare":"\u25fb","emptyv":"\u2205","EmptyVerySmallSquare":"\u25ab","emsp13":"\u2004","emsp14":"\u2005","emsp":"\u2003","ENG":"\u014a","eng":"\u014b","ensp":"\u2002","Eogon":"\u0118","eogon":"\u0119","Eopf":"\ud835\udd3c","eopf":"\ud835\udd56","epar":"\u22d5","eparsl":"\u29e3","eplus":"\u2a71","epsi":"\u03b5","Epsilon":"\u0395","epsilon":"\u03b5","epsiv":"\u03f5","eqcirc":"\u2256","eqcolon":"\u2255","eqsim":"\u2242","eqslantgtr":"\u2a96","eqslantless":"\u2a95","Equal":"\u2a75","equals":"=","EqualTilde":"\u2242","equest":"\u225f","Equilibrium":"\u21cc","equiv":"\u2261","equivDD":"\u2a78","eqvparsl":"\u29e5","erarr":"\u2971","erDot":"\u2253","escr":"\u212f","Escr":"\u2130","esdot":"\u2250","Esim":"\u2a73","esim":"\u2242","Eta":"\u0397","eta":"\u03b7","ETH":"\xd0","eth":"\xf0","Euml":"\xcb","euml":"\xeb","euro":"\u20ac","excl":"!","exist":"\u2203","Exists":"\u2203","expectation":"\u2130","exponentiale":"\u2147","ExponentialE":"\u2147","fallingdotseq":"\u2252","Fcy":"\u0424","fcy":"\u0444","female":"\u2640","ffilig":"\ufb03","fflig":"\ufb00","ffllig":"\ufb04","Ffr":"\ud835\udd09","ffr":"\ud835\udd23","filig":"\ufb01","FilledSmallSquare":"\u25fc","FilledVerySmallSquare":"\u25aa","fjlig":"fj","flat":"\u266d","fllig":"\ufb02","fltns":"\u25b1","fnof":"\u0192","Fopf":"\ud835\udd3d","fopf":"\ud835\udd57","forall":"\u2200","ForAll":"\u2200","fork":"\u22d4","forkv":"\u2ad9","Fouriertrf":"\u2131","fpartint":"\u2a0d","frac12":"\xbd","frac13":"\u2153","frac14":"\xbc","frac15":"\u2155","frac16":"\u2159","frac18":"\u215b","frac23":"\u2154","frac25":"\u2156","frac34":"\xbe","frac35":"\u2157","frac38":"\u215c","frac45":"\u2158","frac56":"\u215a","frac58":"\u215d","frac78":"\u215e","frasl":"\u2044","frown":"\u2322","fscr":"\ud835\udcbb","Fscr":"\u2131","gacute":"\u01f5","Gamma":"\u0393","gamma":"\u03b3","Gammad":"\u03dc","gammad":"\u03dd","gap":"\u2a86","Gbreve":"\u011e","gbreve":"\u011f","Gcedil":"\u0122","Gcirc":"\u011c","gcirc":"\u011d","Gcy":"\u0413","gcy":"\u0433","Gdot":"\u0120","gdot":"\u0121","ge":"\u2265","gE":"\u2267","gEl":"\u2a8c","gel":"\u22db","geq":"\u2265","geqq":"\u2267","geqslant":"\u2a7e","gescc":"\u2aa9","ges":"\u2a7e","gesdot":"\u2a80","gesdoto":"\u2a82","gesdotol":"\u2a84","gesl":"\u22db\ufe00","gesles":"\u2a94","Gfr":"\ud835\udd0a","gfr":"\ud835\udd24","gg":"\u226b","Gg":"\u22d9","ggg":"\u22d9","gimel":"\u2137","GJcy":"\u0403","gjcy":"\u0453","gla":"\u2aa5","gl":"\u2277","glE":"\u2a92","glj":"\u2aa4","gnap":"\u2a8a","gnapprox":"\u2a8a","gne":"\u2a88","gnE":"\u2269","gneq":"\u2a88","gneqq":"\u2269","gnsim":"\u22e7","Gopf":"\ud835\udd3e","gopf":"\ud835\udd58","grave":"`","GreaterEqual":"\u2265","GreaterEqualLess":"\u22db","GreaterFullEqual":"\u2267","GreaterGreater":"\u2aa2","GreaterLess":"\u2277","GreaterSlantEqual":"\u2a7e","GreaterTilde":"\u2273","Gscr":"\ud835\udca2","gscr":"\u210a","gsim":"\u2273","gsime":"\u2a8e","gsiml":"\u2a90","gtcc":"\u2aa7","gtcir":"\u2a7a","gt":">","GT":">","Gt":"\u226b","gtdot":"\u22d7","gtlPar":"\u2995","gtquest":"\u2a7c","gtrapprox":"\u2a86","gtrarr":"\u2978","gtrdot":"\u22d7","gtreqless":"\u22db","gtreqqless":"\u2a8c","gtrless":"\u2277","gtrsim":"\u2273","gvertneqq":"\u2269\ufe00","gvnE":"\u2269\ufe00","Hacek":"\u02c7","hairsp":"\u200a","half":"\xbd","hamilt":"\u210b","HARDcy":"\u042a","hardcy":"\u044a","harrcir":"\u2948","harr":"\u2194","hArr":"\u21d4","harrw":"\u21ad","Hat":"^","hbar":"\u210f","Hcirc":"\u0124","hcirc":"\u0125","hearts":"\u2665","heartsuit":"\u2665","hellip":"\u2026","hercon":"\u22b9","hfr":"\ud835\udd25","Hfr":"\u210c","HilbertSpace":"\u210b","hksearow":"\u2925","hkswarow":"\u2926","hoarr":"\u21ff","homtht":"\u223b","hookleftarrow":"\u21a9","hookrightarrow":"\u21aa","hopf":"\ud835\udd59","Hopf":"\u210d","horbar":"\u2015","HorizontalLine":"\u2500","hscr":"\ud835\udcbd","Hscr":"\u210b","hslash":"\u210f","Hstrok":"\u0126","hstrok":"\u0127","HumpDownHump":"\u224e","HumpEqual":"\u224f","hybull":"\u2043","hyphen":"\u2010","Iacute":"\xcd","iacute":"\xed","ic":"\u2063","Icirc":"\xce","icirc":"\xee","Icy":"\u0418","icy":"\u0438","Idot":"\u0130","IEcy":"\u0415","iecy":"\u0435","iexcl":"\xa1","iff":"\u21d4","ifr":"\ud835\udd26","Ifr":"\u2111","Igrave":"\xcc","igrave":"\xec","ii":"\u2148","iiiint":"\u2a0c","iiint":"\u222d","iinfin":"\u29dc","iiota":"\u2129","IJlig":"\u0132","ijlig":"\u0133","Imacr":"\u012a","imacr":"\u012b","image":"\u2111","ImaginaryI":"\u2148","imagline":"\u2110","imagpart":"\u2111","imath":"\u0131","Im":"\u2111","imof":"\u22b7","imped":"\u01b5","Implies":"\u21d2","incare":"\u2105","in":"\u2208","infin":"\u221e","infintie":"\u29dd","inodot":"\u0131","intcal":"\u22ba","int":"\u222b","Int":"\u222c","integers":"\u2124","Integral":"\u222b","intercal":"\u22ba","Intersection":"\u22c2","intlarhk":"\u2a17","intprod":"\u2a3c","InvisibleComma":"\u2063","InvisibleTimes":"\u2062","IOcy":"\u0401","iocy":"\u0451","Iogon":"\u012e","iogon":"\u012f","Iopf":"\ud835\udd40","iopf":"\ud835\udd5a","Iota":"\u0399","iota":"\u03b9","iprod":"\u2a3c","iquest":"\xbf","iscr":"\ud835\udcbe","Iscr":"\u2110","isin":"\u2208","isindot":"\u22f5","isinE":"\u22f9","isins":"\u22f4","isinsv":"\u22f3","isinv":"\u2208","it":"\u2062","Itilde":"\u0128","itilde":"\u0129","Iukcy":"\u0406","iukcy":"\u0456","Iuml":"\xcf","iuml":"\xef","Jcirc":"\u0134","jcirc":"\u0135","Jcy":"\u0419","jcy":"\u0439","Jfr":"\ud835\udd0d","jfr":"\ud835\udd27","jmath":"\u0237","Jopf":"\ud835\udd41","jopf":"\ud835\udd5b","Jscr":"\ud835\udca5","jscr":"\ud835\udcbf","Jsercy":"\u0408","jsercy":"\u0458","Jukcy":"\u0404","jukcy":"\u0454","Kappa":"\u039a","kappa":"\u03ba","kappav":"\u03f0","Kcedil":"\u0136","kcedil":"\u0137","Kcy":"\u041a","kcy":"\u043a","Kfr":"\ud835\udd0e","kfr":"\ud835\udd28","kgreen":"\u0138","KHcy":"\u0425","khcy":"\u0445","KJcy":"\u040c","kjcy":"\u045c","Kopf":"\ud835\udd42","kopf":"\ud835\udd5c","Kscr":"\ud835\udca6","kscr":"\ud835\udcc0","lAarr":"\u21da","Lacute":"\u0139","lacute":"\u013a","laemptyv":"\u29b4","lagran":"\u2112","Lambda":"\u039b","lambda":"\u03bb","lang":"\u27e8","Lang":"\u27ea","langd":"\u2991","langle":"\u27e8","lap":"\u2a85","Laplacetrf":"\u2112","laquo":"\xab","larrb":"\u21e4","larrbfs":"\u291f","larr":"\u2190","Larr":"\u219e","lArr":"\u21d0","larrfs":"\u291d","larrhk":"\u21a9","larrlp":"\u21ab","larrpl":"\u2939","larrsim":"\u2973","larrtl":"\u21a2","latail":"\u2919","lAtail":"\u291b","lat":"\u2aab","late":"\u2aad","lates":"\u2aad\ufe00","lbarr":"\u290c","lBarr":"\u290e","lbbrk":"\u2772","lbrace":"{","lbrack":"[","lbrke":"\u298b","lbrksld":"\u298f","lbrkslu":"\u298d","Lcaron":"\u013d","lcaron":"\u013e","Lcedil":"\u013b","lcedil":"\u013c","lceil":"\u2308","lcub":"{","Lcy":"\u041b","lcy":"\u043b","ldca":"\u2936","ldquo":"\u201c","ldquor":"\u201e","ldrdhar":"\u2967","ldrushar":"\u294b","ldsh":"\u21b2","le":"\u2264","lE":"\u2266","LeftAngleBracket":"\u27e8","LeftArrowBar":"\u21e4","leftarrow":"\u2190","LeftArrow":"\u2190","Leftarrow":"\u21d0","LeftArrowRightArrow":"\u21c6","leftarrowtail":"\u21a2","LeftCeiling":"\u2308","LeftDoubleBracket":"\u27e6","LeftDownTeeVector":"\u2961","LeftDownVectorBar":"\u2959","LeftDownVector":"\u21c3","LeftFloor":"\u230a","leftharpoondown":"\u21bd","leftharpoonup":"\u21bc","leftleftarrows":"\u21c7","leftrightarrow":"\u2194","LeftRightArrow":"\u2194","Leftrightarrow":"\u21d4","leftrightarrows":"\u21c6","leftrightharpoons":"\u21cb","leftrightsquigarrow":"\u21ad","LeftRightVector":"\u294e","LeftTeeArrow":"\u21a4","LeftTee":"\u22a3","LeftTeeVector":"\u295a","leftthreetimes":"\u22cb","LeftTriangleBar":"\u29cf","LeftTriangle":"\u22b2","LeftTriangleEqual":"\u22b4","LeftUpDownVector":"\u2951","LeftUpTeeVector":"\u2960","LeftUpVectorBar":"\u2958","LeftUpVector":"\u21bf","LeftVectorBar":"\u2952","LeftVector":"\u21bc","lEg":"\u2a8b","leg":"\u22da","leq":"\u2264","leqq":"\u2266","leqslant":"\u2a7d","lescc":"\u2aa8","les":"\u2a7d","lesdot":"\u2a7f","lesdoto":"\u2a81","lesdotor":"\u2a83","lesg":"\u22da\ufe00","lesges":"\u2a93","lessapprox":"\u2a85","lessdot":"\u22d6","lesseqgtr":"\u22da","lesseqqgtr":"\u2a8b","LessEqualGreater":"\u22da","LessFullEqual":"\u2266","LessGreater":"\u2276","lessgtr":"\u2276","LessLess":"\u2aa1","lesssim":"\u2272","LessSlantEqual":"\u2a7d","LessTilde":"\u2272","lfisht":"\u297c","lfloor":"\u230a","Lfr":"\ud835\udd0f","lfr":"\ud835\udd29","lg":"\u2276","lgE":"\u2a91","lHar":"\u2962","lhard":"\u21bd","lharu":"\u21bc","lharul":"\u296a","lhblk":"\u2584","LJcy":"\u0409","ljcy":"\u0459","llarr":"\u21c7","ll":"\u226a","Ll":"\u22d8","llcorner":"\u231e","Lleftarrow":"\u21da","llhard":"\u296b","lltri":"\u25fa","Lmidot":"\u013f","lmidot":"\u0140","lmoustache":"\u23b0","lmoust":"\u23b0","lnap":"\u2a89","lnapprox":"\u2a89","lne":"\u2a87","lnE":"\u2268","lneq":"\u2a87","lneqq":"\u2268","lnsim":"\u22e6","loang":"\u27ec","loarr":"\u21fd","lobrk":"\u27e6","longleftarrow":"\u27f5","LongLeftArrow":"\u27f5","Longleftarrow":"\u27f8","longleftrightarrow":"\u27f7","LongLeftRightArrow":"\u27f7","Longleftrightarrow":"\u27fa","longmapsto":"\u27fc","longrightarrow":"\u27f6","LongRightArrow":"\u27f6","Longrightarrow":"\u27f9","looparrowleft":"\u21ab","looparrowright":"\u21ac","lopar":"\u2985","Lopf":"\ud835\udd43","lopf":"\ud835\udd5d","loplus":"\u2a2d","lotimes":"\u2a34","lowast":"\u2217","lowbar":"_","LowerLeftArrow":"\u2199","LowerRightArrow":"\u2198","loz":"\u25ca","lozenge":"\u25ca","lozf":"\u29eb","lpar":"(","lparlt":"\u2993","lrarr":"\u21c6","lrcorner":"\u231f","lrhar":"\u21cb","lrhard":"\u296d","lrm":"\u200e","lrtri":"\u22bf","lsaquo":"\u2039","lscr":"\ud835\udcc1","Lscr":"\u2112","lsh":"\u21b0","Lsh":"\u21b0","lsim":"\u2272","lsime":"\u2a8d","lsimg":"\u2a8f","lsqb":"[","lsquo":"\u2018","lsquor":"\u201a","Lstrok":"\u0141","lstrok":"\u0142","ltcc":"\u2aa6","ltcir":"\u2a79","lt":"<","LT":"<","Lt":"\u226a","ltdot":"\u22d6","lthree":"\u22cb","ltimes":"\u22c9","ltlarr":"\u2976","ltquest":"\u2a7b","ltri":"\u25c3","ltrie":"\u22b4","ltrif":"\u25c2","ltrPar":"\u2996","lurdshar":"\u294a","luruhar":"\u2966","lvertneqq":"\u2268\ufe00","lvnE":"\u2268\ufe00","macr":"\xaf","male":"\u2642","malt":"\u2720","maltese":"\u2720","Map":"\u2905","map":"\u21a6","mapsto":"\u21a6","mapstodown":"\u21a7","mapstoleft":"\u21a4","mapstoup":"\u21a5","marker":"\u25ae","mcomma":"\u2a29","Mcy":"\u041c","mcy":"\u043c","mdash":"\u2014","mDDot":"\u223a","measuredangle":"\u2221","MediumSpace":"\u205f","Mellintrf":"\u2133","Mfr":"\ud835\udd10","mfr":"\ud835\udd2a","mho":"\u2127","micro":"\xb5","midast":"*","midcir":"\u2af0","mid":"\u2223","middot":"\xb7","minusb":"\u229f","minus":"\u2212","minusd":"\u2238","minusdu":"\u2a2a","MinusPlus":"\u2213","mlcp":"\u2adb","mldr":"\u2026","mnplus":"\u2213","models":"\u22a7","Mopf":"\ud835\udd44","mopf":"\ud835\udd5e","mp":"\u2213","mscr":"\ud835\udcc2","Mscr":"\u2133","mstpos":"\u223e","Mu":"\u039c","mu":"\u03bc","multimap":"\u22b8","mumap":"\u22b8","nabla":"\u2207","Nacute":"\u0143","nacute":"\u0144","nang":"\u2220\u20d2","nap":"\u2249","napE":"\u2a70\u0338","napid":"\u224b\u0338","napos":"\u0149","napprox":"\u2249","natural":"\u266e","naturals":"\u2115","natur":"\u266e","nbsp":"\xa0","nbump":"\u224e\u0338","nbumpe":"\u224f\u0338","ncap":"\u2a43","Ncaron":"\u0147","ncaron":"\u0148","Ncedil":"\u0145","ncedil":"\u0146","ncong":"\u2247","ncongdot":"\u2a6d\u0338","ncup":"\u2a42","Ncy":"\u041d","ncy":"\u043d","ndash":"\u2013","nearhk":"\u2924","nearr":"\u2197","neArr":"\u21d7","nearrow":"\u2197","ne":"\u2260","nedot":"\u2250\u0338","NegativeMediumSpace":"\u200b","NegativeThickSpace":"\u200b","NegativeThinSpace":"\u200b","NegativeVeryThinSpace":"\u200b","nequiv":"\u2262","nesear":"\u2928","nesim":"\u2242\u0338","NestedGreaterGreater":"\u226b","NestedLessLess":"\u226a","NewLine":"\\n","nexist":"\u2204","nexists":"\u2204","Nfr":"\ud835\udd11","nfr":"\ud835\udd2b","ngE":"\u2267\u0338","nge":"\u2271","ngeq":"\u2271","ngeqq":"\u2267\u0338","ngeqslant":"\u2a7e\u0338","nges":"\u2a7e\u0338","nGg":"\u22d9\u0338","ngsim":"\u2275","nGt":"\u226b\u20d2","ngt":"\u226f","ngtr":"\u226f","nGtv":"\u226b\u0338","nharr":"\u21ae","nhArr":"\u21ce","nhpar":"\u2af2","ni":"\u220b","nis":"\u22fc","nisd":"\u22fa","niv":"\u220b","NJcy":"\u040a","njcy":"\u045a","nlarr":"\u219a","nlArr":"\u21cd","nldr":"\u2025","nlE":"\u2266\u0338","nle":"\u2270","nleftarrow":"\u219a","nLeftarrow":"\u21cd","nleftrightarrow":"\u21ae","nLeftrightarrow":"\u21ce","nleq":"\u2270","nleqq":"\u2266\u0338","nleqslant":"\u2a7d\u0338","nles":"\u2a7d\u0338","nless":"\u226e","nLl":"\u22d8\u0338","nlsim":"\u2274","nLt":"\u226a\u20d2","nlt":"\u226e","nltri":"\u22ea","nltrie":"\u22ec","nLtv":"\u226a\u0338","nmid":"\u2224","NoBreak":"\u2060","NonBreakingSpace":"\xa0","nopf":"\ud835\udd5f","Nopf":"\u2115","Not":"\u2aec","not":"\xac","NotCongruent":"\u2262","NotCupCap":"\u226d","NotDoubleVerticalBar":"\u2226","NotElement":"\u2209","NotEqual":"\u2260","NotEqualTilde":"\u2242\u0338","NotExists":"\u2204","NotGreater":"\u226f","NotGreaterEqual":"\u2271","NotGreaterFullEqual":"\u2267\u0338","NotGreaterGreater":"\u226b\u0338","NotGreaterLess":"\u2279","NotGreaterSlantEqual":"\u2a7e\u0338","NotGreaterTilde":"\u2275","NotHumpDownHump":"\u224e\u0338","NotHumpEqual":"\u224f\u0338","notin":"\u2209","notindot":"\u22f5\u0338","notinE":"\u22f9\u0338","notinva":"\u2209","notinvb":"\u22f7","notinvc":"\u22f6","NotLeftTriangleBar":"\u29cf\u0338","NotLeftTriangle":"\u22ea","NotLeftTriangleEqual":"\u22ec","NotLess":"\u226e","NotLessEqual":"\u2270","NotLessGreater":"\u2278","NotLessLess":"\u226a\u0338","NotLessSlantEqual":"\u2a7d\u0338","NotLessTilde":"\u2274","NotNestedGreaterGreater":"\u2aa2\u0338","NotNestedLessLess":"\u2aa1\u0338","notni":"\u220c","notniva":"\u220c","notnivb":"\u22fe","notnivc":"\u22fd","NotPrecedes":"\u2280","NotPrecedesEqual":"\u2aaf\u0338","NotPrecedesSlantEqual":"\u22e0","NotReverseElement":"\u220c","NotRightTriangleBar":"\u29d0\u0338","NotRightTriangle":"\u22eb","NotRightTriangleEqual":"\u22ed","NotSquareSubset":"\u228f\u0338","NotSquareSubsetEqual":"\u22e2","NotSquareSuperset":"\u2290\u0338","NotSquareSupersetEqual":"\u22e3","NotSubset":"\u2282\u20d2","NotSubsetEqual":"\u2288","NotSucceeds":"\u2281","NotSucceedsEqual":"\u2ab0\u0338","NotSucceedsSlantEqual":"\u22e1","NotSucceedsTilde":"\u227f\u0338","NotSuperset":"\u2283\u20d2","NotSupersetEqual":"\u2289","NotTilde":"\u2241","NotTildeEqual":"\u2244","NotTildeFullEqual":"\u2247","NotTildeTilde":"\u2249","NotVerticalBar":"\u2224","nparallel":"\u2226","npar":"\u2226","nparsl":"\u2afd\u20e5","npart":"\u2202\u0338","npolint":"\u2a14","npr":"\u2280","nprcue":"\u22e0","nprec":"\u2280","npreceq":"\u2aaf\u0338","npre":"\u2aaf\u0338","nrarrc":"\u2933\u0338","nrarr":"\u219b","nrArr":"\u21cf","nrarrw":"\u219d\u0338","nrightarrow":"\u219b","nRightarrow":"\u21cf","nrtri":"\u22eb","nrtrie":"\u22ed","nsc":"\u2281","nsccue":"\u22e1","nsce":"\u2ab0\u0338","Nscr":"\ud835\udca9","nscr":"\ud835\udcc3","nshortmid":"\u2224","nshortparallel":"\u2226","nsim":"\u2241","nsime":"\u2244","nsimeq":"\u2244","nsmid":"\u2224","nspar":"\u2226","nsqsube":"\u22e2","nsqsupe":"\u22e3","nsub":"\u2284","nsubE":"\u2ac5\u0338","nsube":"\u2288","nsubset":"\u2282\u20d2","nsubseteq":"\u2288","nsubseteqq":"\u2ac5\u0338","nsucc":"\u2281","nsucceq":"\u2ab0\u0338","nsup":"\u2285","nsupE":"\u2ac6\u0338","nsupe":"\u2289","nsupset":"\u2283\u20d2","nsupseteq":"\u2289","nsupseteqq":"\u2ac6\u0338","ntgl":"\u2279","Ntilde":"\xd1","ntilde":"\xf1","ntlg":"\u2278","ntriangleleft":"\u22ea","ntrianglelefteq":"\u22ec","ntriangleright":"\u22eb","ntrianglerighteq":"\u22ed","Nu":"\u039d","nu":"\u03bd","num":"#","numero":"\u2116","numsp":"\u2007","nvap":"\u224d\u20d2","nvdash":"\u22ac","nvDash":"\u22ad","nVdash":"\u22ae","nVDash":"\u22af","nvge":"\u2265\u20d2","nvgt":">\u20d2","nvHarr":"\u2904","nvinfin":"\u29de","nvlArr":"\u2902","nvle":"\u2264\u20d2","nvlt":"<\u20d2","nvltrie":"\u22b4\u20d2","nvrArr":"\u2903","nvrtrie":"\u22b5\u20d2","nvsim":"\u223c\u20d2","nwarhk":"\u2923","nwarr":"\u2196","nwArr":"\u21d6","nwarrow":"\u2196","nwnear":"\u2927","Oacute":"\xd3","oacute":"\xf3","oast":"\u229b","Ocirc":"\xd4","ocirc":"\xf4","ocir":"\u229a","Ocy":"\u041e","ocy":"\u043e","odash":"\u229d","Odblac":"\u0150","odblac":"\u0151","odiv":"\u2a38","odot":"\u2299","odsold":"\u29bc","OElig":"\u0152","oelig":"\u0153","ofcir":"\u29bf","Ofr":"\ud835\udd12","ofr":"\ud835\udd2c","ogon":"\u02db","Ograve":"\xd2","ograve":"\xf2","ogt":"\u29c1","ohbar":"\u29b5","ohm":"\u03a9","oint":"\u222e","olarr":"\u21ba","olcir":"\u29be","olcross":"\u29bb","oline":"\u203e","olt":"\u29c0","Omacr":"\u014c","omacr":"\u014d","Omega":"\u03a9","omega":"\u03c9","Omicron":"\u039f","omicron":"\u03bf","omid":"\u29b6","ominus":"\u2296","Oopf":"\ud835\udd46","oopf":"\ud835\udd60","opar":"\u29b7","OpenCurlyDoubleQuote":"\u201c","OpenCurlyQuote":"\u2018","operp":"\u29b9","oplus":"\u2295","orarr":"\u21bb","Or":"\u2a54","or":"\u2228","ord":"\u2a5d","order":"\u2134","orderof":"\u2134","ordf":"\xaa","ordm":"\xba","origof":"\u22b6","oror":"\u2a56","orslope":"\u2a57","orv":"\u2a5b","oS":"\u24c8","Oscr":"\ud835\udcaa","oscr":"\u2134","Oslash":"\xd8","oslash":"\xf8","osol":"\u2298","Otilde":"\xd5","otilde":"\xf5","otimesas":"\u2a36","Otimes":"\u2a37","otimes":"\u2297","Ouml":"\xd6","ouml":"\xf6","ovbar":"\u233d","OverBar":"\u203e","OverBrace":"\u23de","OverBracket":"\u23b4","OverParenthesis":"\u23dc","para":"\xb6","parallel":"\u2225","par":"\u2225","parsim":"\u2af3","parsl":"\u2afd","part":"\u2202","PartialD":"\u2202","Pcy":"\u041f","pcy":"\u043f","percnt":"%","period":".","permil":"\u2030","perp":"\u22a5","pertenk":"\u2031","Pfr":"\ud835\udd13","pfr":"\ud835\udd2d","Phi":"\u03a6","phi":"\u03c6","phiv":"\u03d5","phmmat":"\u2133","phone":"\u260e","Pi":"\u03a0","pi":"\u03c0","pitchfork":"\u22d4","piv":"\u03d6","planck":"\u210f","planckh":"\u210e","plankv":"\u210f","plusacir":"\u2a23","plusb":"\u229e","pluscir":"\u2a22","plus":"+","plusdo":"\u2214","plusdu":"\u2a25","pluse":"\u2a72","PlusMinus":"\xb1","plusmn":"\xb1","plussim":"\u2a26","plustwo":"\u2a27","pm":"\xb1","Poincareplane":"\u210c","pointint":"\u2a15","popf":"\ud835\udd61","Popf":"\u2119","pound":"\xa3","prap":"\u2ab7","Pr":"\u2abb","pr":"\u227a","prcue":"\u227c","precapprox":"\u2ab7","prec":"\u227a","preccurlyeq":"\u227c","Precedes":"\u227a","PrecedesEqual":"\u2aaf","PrecedesSlantEqual":"\u227c","PrecedesTilde":"\u227e","preceq":"\u2aaf","precnapprox":"\u2ab9","precneqq":"\u2ab5","precnsim":"\u22e8","pre":"\u2aaf","prE":"\u2ab3","precsim":"\u227e","prime":"\u2032","Prime":"\u2033","primes":"\u2119","prnap":"\u2ab9","prnE":"\u2ab5","prnsim":"\u22e8","prod":"\u220f","Product":"\u220f","profalar":"\u232e","profline":"\u2312","profsurf":"\u2313","prop":"\u221d","Proportional":"\u221d","Proportion":"\u2237","propto":"\u221d","prsim":"\u227e","prurel":"\u22b0","Pscr":"\ud835\udcab","pscr":"\ud835\udcc5","Psi":"\u03a8","psi":"\u03c8","puncsp":"\u2008","Qfr":"\ud835\udd14","qfr":"\ud835\udd2e","qint":"\u2a0c","qopf":"\ud835\udd62","Qopf":"\u211a","qprime":"\u2057","Qscr":"\ud835\udcac","qscr":"\ud835\udcc6","quaternions":"\u210d","quatint":"\u2a16","quest":"?","questeq":"\u225f","quot":"\\"","QUOT":"\\"","rAarr":"\u21db","race":"\u223d\u0331","Racute":"\u0154","racute":"\u0155","radic":"\u221a","raemptyv":"\u29b3","rang":"\u27e9","Rang":"\u27eb","rangd":"\u2992","range":"\u29a5","rangle":"\u27e9","raquo":"\xbb","rarrap":"\u2975","rarrb":"\u21e5","rarrbfs":"\u2920","rarrc":"\u2933","rarr":"\u2192","Rarr":"\u21a0","rArr":"\u21d2","rarrfs":"\u291e","rarrhk":"\u21aa","rarrlp":"\u21ac","rarrpl":"\u2945","rarrsim":"\u2974","Rarrtl":"\u2916","rarrtl":"\u21a3","rarrw":"\u219d","ratail":"\u291a","rAtail":"\u291c","ratio":"\u2236","rationals":"\u211a","rbarr":"\u290d","rBarr":"\u290f","RBarr":"\u2910","rbbrk":"\u2773","rbrace":"}","rbrack":"]","rbrke":"\u298c","rbrksld":"\u298e","rbrkslu":"\u2990","Rcaron":"\u0158","rcaron":"\u0159","Rcedil":"\u0156","rcedil":"\u0157","rceil":"\u2309","rcub":"}","Rcy":"\u0420","rcy":"\u0440","rdca":"\u2937","rdldhar":"\u2969","rdquo":"\u201d","rdquor":"\u201d","rdsh":"\u21b3","real":"\u211c","realine":"\u211b","realpart":"\u211c","reals":"\u211d","Re":"\u211c","rect":"\u25ad","reg":"\xae","REG":"\xae","ReverseElement":"\u220b","ReverseEquilibrium":"\u21cb","ReverseUpEquilibrium":"\u296f","rfisht":"\u297d","rfloor":"\u230b","rfr":"\ud835\udd2f","Rfr":"\u211c","rHar":"\u2964","rhard":"\u21c1","rharu":"\u21c0","rharul":"\u296c","Rho":"\u03a1","rho":"\u03c1","rhov":"\u03f1","RightAngleBracket":"\u27e9","RightArrowBar":"\u21e5","rightarrow":"\u2192","RightArrow":"\u2192","Rightarrow":"\u21d2","RightArrowLeftArrow":"\u21c4","rightarrowtail":"\u21a3","RightCeiling":"\u2309","RightDoubleBracket":"\u27e7","RightDownTeeVector":"\u295d","RightDownVectorBar":"\u2955","RightDownVector":"\u21c2","RightFloor":"\u230b","rightharpoondown":"\u21c1","rightharpoonup":"\u21c0","rightleftarrows":"\u21c4","rightleftharpoons":"\u21cc","rightrightarrows":"\u21c9","rightsquigarrow":"\u219d","RightTeeArrow":"\u21a6","RightTee":"\u22a2","RightTeeVector":"\u295b","rightthreetimes":"\u22cc","RightTriangleBar":"\u29d0","RightTriangle":"\u22b3","RightTriangleEqual":"\u22b5","RightUpDownVector":"\u294f","RightUpTeeVector":"\u295c","RightUpVectorBar":"\u2954","RightUpVector":"\u21be","RightVectorBar":"\u2953","RightVector":"\u21c0","ring":"\u02da","risingdotseq":"\u2253","rlarr":"\u21c4","rlhar":"\u21cc","rlm":"\u200f","rmoustache":"\u23b1","rmoust":"\u23b1","rnmid":"\u2aee","roang":"\u27ed","roarr":"\u21fe","robrk":"\u27e7","ropar":"\u2986","ropf":"\ud835\udd63","Ropf":"\u211d","roplus":"\u2a2e","rotimes":"\u2a35","RoundImplies":"\u2970","rpar":")","rpargt":"\u2994","rppolint":"\u2a12","rrarr":"\u21c9","Rrightarrow":"\u21db","rsaquo":"\u203a","rscr":"\ud835\udcc7","Rscr":"\u211b","rsh":"\u21b1","Rsh":"\u21b1","rsqb":"]","rsquo":"\u2019","rsquor":"\u2019","rthree":"\u22cc","rtimes":"\u22ca","rtri":"\u25b9","rtrie":"\u22b5","rtrif":"\u25b8","rtriltri":"\u29ce","RuleDelayed":"\u29f4","ruluhar":"\u2968","rx":"\u211e","Sacute":"\u015a","sacute":"\u015b","sbquo":"\u201a","scap":"\u2ab8","Scaron":"\u0160","scaron":"\u0161","Sc":"\u2abc","sc":"\u227b","sccue":"\u227d","sce":"\u2ab0","scE":"\u2ab4","Scedil":"\u015e","scedil":"\u015f","Scirc":"\u015c","scirc":"\u015d","scnap":"\u2aba","scnE":"\u2ab6","scnsim":"\u22e9","scpolint":"\u2a13","scsim":"\u227f","Scy":"\u0421","scy":"\u0441","sdotb":"\u22a1","sdot":"\u22c5","sdote":"\u2a66","searhk":"\u2925","searr":"\u2198","seArr":"\u21d8","searrow":"\u2198","sect":"\xa7","semi":";","seswar":"\u2929","setminus":"\u2216","setmn":"\u2216","sext":"\u2736","Sfr":"\ud835\udd16","sfr":"\ud835\udd30","sfrown":"\u2322","sharp":"\u266f","SHCHcy":"\u0429","shchcy":"\u0449","SHcy":"\u0428","shcy":"\u0448","ShortDownArrow":"\u2193","ShortLeftArrow":"\u2190","shortmid":"\u2223","shortparallel":"\u2225","ShortRightArrow":"\u2192","ShortUpArrow":"\u2191","shy":"\xad","Sigma":"\u03a3","sigma":"\u03c3","sigmaf":"\u03c2","sigmav":"\u03c2","sim":"\u223c","simdot":"\u2a6a","sime":"\u2243","simeq":"\u2243","simg":"\u2a9e","simgE":"\u2aa0","siml":"\u2a9d","simlE":"\u2a9f","simne":"\u2246","simplus":"\u2a24","simrarr":"\u2972","slarr":"\u2190","SmallCircle":"\u2218","smallsetminus":"\u2216","smashp":"\u2a33","smeparsl":"\u29e4","smid":"\u2223","smile":"\u2323","smt":"\u2aaa","smte":"\u2aac","smtes":"\u2aac\ufe00","SOFTcy":"\u042c","softcy":"\u044c","solbar":"\u233f","solb":"\u29c4","sol":"/","Sopf":"\ud835\udd4a","sopf":"\ud835\udd64","spades":"\u2660","spadesuit":"\u2660","spar":"\u2225","sqcap":"\u2293","sqcaps":"\u2293\ufe00","sqcup":"\u2294","sqcups":"\u2294\ufe00","Sqrt":"\u221a","sqsub":"\u228f","sqsube":"\u2291","sqsubset":"\u228f","sqsubseteq":"\u2291","sqsup":"\u2290","sqsupe":"\u2292","sqsupset":"\u2290","sqsupseteq":"\u2292","square":"\u25a1","Square":"\u25a1","SquareIntersection":"\u2293","SquareSubset":"\u228f","SquareSubsetEqual":"\u2291","SquareSuperset":"\u2290","SquareSupersetEqual":"\u2292","SquareUnion":"\u2294","squarf":"\u25aa","squ":"\u25a1","squf":"\u25aa","srarr":"\u2192","Sscr":"\ud835\udcae","sscr":"\ud835\udcc8","ssetmn":"\u2216","ssmile":"\u2323","sstarf":"\u22c6","Star":"\u22c6","star":"\u2606","starf":"\u2605","straightepsilon":"\u03f5","straightphi":"\u03d5","strns":"\xaf","sub":"\u2282","Sub":"\u22d0","subdot":"\u2abd","subE":"\u2ac5","sube":"\u2286","subedot":"\u2ac3","submult":"\u2ac1","subnE":"\u2acb","subne":"\u228a","subplus":"\u2abf","subrarr":"\u2979","subset":"\u2282","Subset":"\u22d0","subseteq":"\u2286","subseteqq":"\u2ac5","SubsetEqual":"\u2286","subsetneq":"\u228a","subsetneqq":"\u2acb","subsim":"\u2ac7","subsub":"\u2ad5","subsup":"\u2ad3","succapprox":"\u2ab8","succ":"\u227b","succcurlyeq":"\u227d","Succeeds":"\u227b","SucceedsEqual":"\u2ab0","SucceedsSlantEqual":"\u227d","SucceedsTilde":"\u227f","succeq":"\u2ab0","succnapprox":"\u2aba","succneqq":"\u2ab6","succnsim":"\u22e9","succsim":"\u227f","SuchThat":"\u220b","sum":"\u2211","Sum":"\u2211","sung":"\u266a","sup1":"\xb9","sup2":"\xb2","sup3":"\xb3","sup":"\u2283","Sup":"\u22d1","supdot":"\u2abe","supdsub":"\u2ad8","supE":"\u2ac6","supe":"\u2287","supedot":"\u2ac4","Superset":"\u2283","SupersetEqual":"\u2287","suphsol":"\u27c9","suphsub":"\u2ad7","suplarr":"\u297b","supmult":"\u2ac2","supnE":"\u2acc","supne":"\u228b","supplus":"\u2ac0","supset":"\u2283","Supset":"\u22d1","supseteq":"\u2287","supseteqq":"\u2ac6","supsetneq":"\u228b","supsetneqq":"\u2acc","supsim":"\u2ac8","supsub":"\u2ad4","supsup":"\u2ad6","swarhk":"\u2926","swarr":"\u2199","swArr":"\u21d9","swarrow":"\u2199","swnwar":"\u292a","szlig":"\xdf","Tab":"\\t","target":"\u2316","Tau":"\u03a4","tau":"\u03c4","tbrk":"\u23b4","Tcaron":"\u0164","tcaron":"\u0165","Tcedil":"\u0162","tcedil":"\u0163","Tcy":"\u0422","tcy":"\u0442","tdot":"\u20db","telrec":"\u2315","Tfr":"\ud835\udd17","tfr":"\ud835\udd31","there4":"\u2234","therefore":"\u2234","Therefore":"\u2234","Theta":"\u0398","theta":"\u03b8","thetasym":"\u03d1","thetav":"\u03d1","thickapprox":"\u2248","thicksim":"\u223c","ThickSpace":"\u205f\u200a","ThinSpace":"\u2009","thinsp":"\u2009","thkap":"\u2248","thksim":"\u223c","THORN":"\xde","thorn":"\xfe","tilde":"\u02dc","Tilde":"\u223c","TildeEqual":"\u2243","TildeFullEqual":"\u2245","TildeTilde":"\u2248","timesbar":"\u2a31","timesb":"\u22a0","times":"\xd7","timesd":"\u2a30","tint":"\u222d","toea":"\u2928","topbot":"\u2336","topcir":"\u2af1","top":"\u22a4","Topf":"\ud835\udd4b","topf":"\ud835\udd65","topfork":"\u2ada","tosa":"\u2929","tprime":"\u2034","trade":"\u2122","TRADE":"\u2122","triangle":"\u25b5","triangledown":"\u25bf","triangleleft":"\u25c3","trianglelefteq":"\u22b4","triangleq":"\u225c","triangleright":"\u25b9","trianglerighteq":"\u22b5","tridot":"\u25ec","trie":"\u225c","triminus":"\u2a3a","TripleDot":"\u20db","triplus":"\u2a39","trisb":"\u29cd","tritime":"\u2a3b","trpezium":"\u23e2","Tscr":"\ud835\udcaf","tscr":"\ud835\udcc9","TScy":"\u0426","tscy":"\u0446","TSHcy":"\u040b","tshcy":"\u045b","Tstrok":"\u0166","tstrok":"\u0167","twixt":"\u226c","twoheadleftarrow":"\u219e","twoheadrightarrow":"\u21a0","Uacute":"\xda","uacute":"\xfa","uarr":"\u2191","Uarr":"\u219f","uArr":"\u21d1","Uarrocir":"\u2949","Ubrcy":"\u040e","ubrcy":"\u045e","Ubreve":"\u016c","ubreve":"\u016d","Ucirc":"\xdb","ucirc":"\xfb","Ucy":"\u0423","ucy":"\u0443","udarr":"\u21c5","Udblac":"\u0170","udblac":"\u0171","udhar":"\u296e","ufisht":"\u297e","Ufr":"\ud835\udd18","ufr":"\ud835\udd32","Ugrave":"\xd9","ugrave":"\xf9","uHar":"\u2963","uharl":"\u21bf","uharr":"\u21be","uhblk":"\u2580","ulcorn":"\u231c","ulcorner":"\u231c","ulcrop":"\u230f","ultri":"\u25f8","Umacr":"\u016a","umacr":"\u016b","uml":"\xa8","UnderBar":"_","UnderBrace":"\u23df","UnderBracket":"\u23b5","UnderParenthesis":"\u23dd","Union":"\u22c3","UnionPlus":"\u228e","Uogon":"\u0172","uogon":"\u0173","Uopf":"\ud835\udd4c","uopf":"\ud835\udd66","UpArrowBar":"\u2912","uparrow":"\u2191","UpArrow":"\u2191","Uparrow":"\u21d1","UpArrowDownArrow":"\u21c5","updownarrow":"\u2195","UpDownArrow":"\u2195","Updownarrow":"\u21d5","UpEquilibrium":"\u296e","upharpoonleft":"\u21bf","upharpoonright":"\u21be","uplus":"\u228e","UpperLeftArrow":"\u2196","UpperRightArrow":"\u2197","upsi":"\u03c5","Upsi":"\u03d2","upsih":"\u03d2","Upsilon":"\u03a5","upsilon":"\u03c5","UpTeeArrow":"\u21a5","UpTee":"\u22a5","upuparrows":"\u21c8","urcorn":"\u231d","urcorner":"\u231d","urcrop":"\u230e","Uring":"\u016e","uring":"\u016f","urtri":"\u25f9","Uscr":"\ud835\udcb0","uscr":"\ud835\udcca","utdot":"\u22f0","Utilde":"\u0168","utilde":"\u0169","utri":"\u25b5","utrif":"\u25b4","uuarr":"\u21c8","Uuml":"\xdc","uuml":"\xfc","uwangle":"\u29a7","vangrt":"\u299c","varepsilon":"\u03f5","varkappa":"\u03f0","varnothing":"\u2205","varphi":"\u03d5","varpi":"\u03d6","varpropto":"\u221d","varr":"\u2195","vArr":"\u21d5","varrho":"\u03f1","varsigma":"\u03c2","varsubsetneq":"\u228a\ufe00","varsubsetneqq":"\u2acb\ufe00","varsupsetneq":"\u228b\ufe00","varsupsetneqq":"\u2acc\ufe00","vartheta":"\u03d1","vartriangleleft":"\u22b2","vartriangleright":"\u22b3","vBar":"\u2ae8","Vbar":"\u2aeb","vBarv":"\u2ae9","Vcy":"\u0412","vcy":"\u0432","vdash":"\u22a2","vDash":"\u22a8","Vdash":"\u22a9","VDash":"\u22ab","Vdashl":"\u2ae6","veebar":"\u22bb","vee":"\u2228","Vee":"\u22c1","veeeq":"\u225a","vellip":"\u22ee","verbar":"|","Verbar":"\u2016","vert":"|","Vert":"\u2016","VerticalBar":"\u2223","VerticalLine":"|","VerticalSeparator":"\u2758","VerticalTilde":"\u2240","VeryThinSpace":"\u200a","Vfr":"\ud835\udd19","vfr":"\ud835\udd33","vltri":"\u22b2","vnsub":"\u2282\u20d2","vnsup":"\u2283\u20d2","Vopf":"\ud835\udd4d","vopf":"\ud835\udd67","vprop":"\u221d","vrtri":"\u22b3","Vscr":"\ud835\udcb1","vscr":"\ud835\udccb","vsubnE":"\u2acb\ufe00","vsubne":"\u228a\ufe00","vsupnE":"\u2acc\ufe00","vsupne":"\u228b\ufe00","Vvdash":"\u22aa","vzigzag":"\u299a","Wcirc":"\u0174","wcirc":"\u0175","wedbar":"\u2a5f","wedge":"\u2227","Wedge":"\u22c0","wedgeq":"\u2259","weierp":"\u2118","Wfr":"\ud835\udd1a","wfr":"\ud835\udd34","Wopf":"\ud835\udd4e","wopf":"\ud835\udd68","wp":"\u2118","wr":"\u2240","wreath":"\u2240","Wscr":"\ud835\udcb2","wscr":"\ud835\udccc","xcap":"\u22c2","xcirc":"\u25ef","xcup":"\u22c3","xdtri":"\u25bd","Xfr":"\ud835\udd1b","xfr":"\ud835\udd35","xharr":"\u27f7","xhArr":"\u27fa","Xi":"\u039e","xi":"\u03be","xlarr":"\u27f5","xlArr":"\u27f8","xmap":"\u27fc","xnis":"\u22fb","xodot":"\u2a00","Xopf":"\ud835\udd4f","xopf":"\ud835\udd69","xoplus":"\u2a01","xotime":"\u2a02","xrarr":"\u27f6","xrArr":"\u27f9","Xscr":"\ud835\udcb3","xscr":"\ud835\udccd","xsqcup":"\u2a06","xuplus":"\u2a04","xutri":"\u25b3","xvee":"\u22c1","xwedge":"\u22c0","Yacute":"\xdd","yacute":"\xfd","YAcy":"\u042f","yacy":"\u044f","Ycirc":"\u0176","ycirc":"\u0177","Ycy":"\u042b","ycy":"\u044b","yen":"\xa5","Yfr":"\ud835\udd1c","yfr":"\ud835\udd36","YIcy":"\u0407","yicy":"\u0457","Yopf":"\ud835\udd50","yopf":"\ud835\udd6a","Yscr":"\ud835\udcb4","yscr":"\ud835\udcce","YUcy":"\u042e","yucy":"\u044e","yuml":"\xff","Yuml":"\u0178","Zacute":"\u0179","zacute":"\u017a","Zcaron":"\u017d","zcaron":"\u017e","Zcy":"\u0417","zcy":"\u0437","Zdot":"\u017b","zdot":"\u017c","zeetrf":"\u2128","ZeroWidthSpace":"\u200b","Zeta":"\u0396","zeta":"\u03b6","zfr":"\ud835\udd37","Zfr":"\u2128","ZHcy":"\u0416","zhcy":"\u0436","zigrarr":"\u21dd","zopf":"\ud835\udd6b","Zopf":"\u2124","Zscr":"\ud835\udcb5","zscr":"\ud835\udccf","zwj":"\u200d","zwnj":"\u200c"}')},9591:e=>{"use strict";e.exports=JSON.parse('{"Aacute":"\xc1","aacute":"\xe1","Acirc":"\xc2","acirc":"\xe2","acute":"\xb4","AElig":"\xc6","aelig":"\xe6","Agrave":"\xc0","agrave":"\xe0","amp":"&","AMP":"&","Aring":"\xc5","aring":"\xe5","Atilde":"\xc3","atilde":"\xe3","Auml":"\xc4","auml":"\xe4","brvbar":"\xa6","Ccedil":"\xc7","ccedil":"\xe7","cedil":"\xb8","cent":"\xa2","copy":"\xa9","COPY":"\xa9","curren":"\xa4","deg":"\xb0","divide":"\xf7","Eacute":"\xc9","eacute":"\xe9","Ecirc":"\xca","ecirc":"\xea","Egrave":"\xc8","egrave":"\xe8","ETH":"\xd0","eth":"\xf0","Euml":"\xcb","euml":"\xeb","frac12":"\xbd","frac14":"\xbc","frac34":"\xbe","gt":">","GT":">","Iacute":"\xcd","iacute":"\xed","Icirc":"\xce","icirc":"\xee","iexcl":"\xa1","Igrave":"\xcc","igrave":"\xec","iquest":"\xbf","Iuml":"\xcf","iuml":"\xef","laquo":"\xab","lt":"<","LT":"<","macr":"\xaf","micro":"\xb5","middot":"\xb7","nbsp":"\xa0","not":"\xac","Ntilde":"\xd1","ntilde":"\xf1","Oacute":"\xd3","oacute":"\xf3","Ocirc":"\xd4","ocirc":"\xf4","Ograve":"\xd2","ograve":"\xf2","ordf":"\xaa","ordm":"\xba","Oslash":"\xd8","oslash":"\xf8","Otilde":"\xd5","otilde":"\xf5","Ouml":"\xd6","ouml":"\xf6","para":"\xb6","plusmn":"\xb1","pound":"\xa3","quot":"\\"","QUOT":"\\"","raquo":"\xbb","reg":"\xae","REG":"\xae","sect":"\xa7","shy":"\xad","sup1":"\xb9","sup2":"\xb2","sup3":"\xb3","szlig":"\xdf","THORN":"\xde","thorn":"\xfe","times":"\xd7","Uacute":"\xda","uacute":"\xfa","Ucirc":"\xdb","ucirc":"\xfb","Ugrave":"\xd9","ugrave":"\xf9","uml":"\xa8","Uuml":"\xdc","uuml":"\xfc","Yacute":"\xdd","yacute":"\xfd","yen":"\xa5","yuml":"\xff"}')},2586:e=>{"use strict";e.exports=JSON.parse('{"amp":"&","apos":"\'","gt":">","lt":"<","quot":"\\""}')}},r={};function a(e){var t=r[e];if(void 0!==t)return t.exports;var i=r[e]={exports:{}};return o[e].call(i.exports,i,i.exports,a),i.exports}a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var i in t)a.o(t,i)&&!a.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(o){if("object"==typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var l={};return(()=>{"use strict";a.r(l),a.d(l,{default:()=>s_});const s=function(){return function e(){e.called=!0}};class n{constructor(e,t){this.source=e,this.name=t,this.path=[],this.stop=s(),this.off=s()}}const o=new Array(256).fill().map(((e,t)=>("0"+t.toString(16)).slice(-2)));function r(){const e=4294967296*Math.random()>>>0,t=4294967296*Math.random()>>>0,i=4294967296*Math.random()>>>0,s=4294967296*Math.random()>>>0;return"e"+o[e>>0&255]+o[e>>8&255]+o[e>>16&255]+o[e>>24&255]+o[t>>0&255]+o[t>>8&255]+o[t>>16&255]+o[t>>24&255]+o[i>>0&255]+o[i>>8&255]+o[i>>16&255]+o[i>>24&255]+o[s>>0&255]+o[s>>8&255]+o[s>>16&255]+o[s>>24&255]}const c={get(e){return"number"!=typeof e?this[e]||this.normal:e},highest:1e5,high:1e3,normal:0,low:-1e3,lowest:-1e5};class h extends Error{constructor(e,t,i){super(`${e}${i?` ${JSON.stringify(i)}`:""}${u(e)}`),this.name="CKEditorError",this.context=t,this.data=i}is(e){return"CKEditorError"===e}static rethrowUnexpectedError(e,t){if(e.is&&e.is("CKEditorError"))throw e;const i=new h(e.message,t);throw i.stack=e.stack,i}}function d(e,t){console.warn(...m(e,t))}function u(e){return`\nRead more: https://ckeditor.com/docs/ckeditor5/latest/framework/guides/support/error-codes.html#error-${e}`}function m(e,t){const i=u(e);return t?[e,t,i]:[e,i]}const p="29.2.0",f="object"==typeof window?window:a.g;if(f.CKEDITOR_VERSION)throw new h("ckeditor-duplicated-modules",null);f.CKEDITOR_VERSION=p;const g=Symbol("listeningTo"),w=Symbol("emitterId"),b={on(e,t,i={}){this.listenTo(this,e,t,i)},once(e,t,i){let s=!1;this.listenTo(this,e,(function(e,...i){s||(s=!0,e.off(),t.call(this,e,...i))}),i)},off(e,t){this.stopListening(this,e,t)},listenTo(e,t,i,s={}){let n,o;this[g]||(this[g]={});const r=this[g];y(e)||v(e);const a=y(e);(n=r[a])||(n=r[a]={emitter:e,callbacks:{}}),(o=n.callbacks[t])||(o=n.callbacks[t]=[]),o.push(i),function(e,t,i,s,n){t._addEventListener?t._addEventListener(i,s,n):e._addEventListener.call(t,i,s,n)}(this,e,t,i,s)},stopListening(e,t,i){const s=this[g];let n=e&&y(e);const o=s&&n&&s[n],r=o&&t&&o.callbacks[t];if(!(!s||e&&!o||t&&!r))if(i)C(this,e,t,i),-1!==r.indexOf(i)&&(1===r.length?delete o.callbacks[t]:C(this,e,t,i));else if(r){for(;i=r.pop();)C(this,e,t,i);delete o.callbacks[t]}else if(o){for(t in o.callbacks)this.stopListening(e,t);delete s[n]}else{for(n in s)this.stopListening(s[n].emitter);delete this[g]}},fire(e,...t){try{const i=e instanceof n?e:new n(this,e),s=i.name;let o=A(this,s);if(i.path.push(this),o){const e=[i,...t];o=Array.from(o);for(let t=0;t<o.length&&(o[t].callback.apply(this,e),i.off.called&&(delete i.off.called,this._removeEventListener(s,o[t].callback)),!i.stop.called);t++);}if(this._delegations){const e=this._delegations.get(s),n=this._delegations.get("*");e&&x(e,i,t),n&&x(n,i,t)}return i.return}catch(e){h.rethrowUnexpectedError(e,this)}},delegate(...e){return{to:(t,i)=>{this._delegations||(this._delegations=new Map),e.forEach((e=>{const s=this._delegations.get(e);s?s.set(t,i):this._delegations.set(e,new Map([[t,i]]))}))}}},stopDelegating(e,t){if(this._delegations)if(e)if(t){const i=this._delegations.get(e);i&&i.delete(t)}else this._delegations.delete(e);else this._delegations.clear()},_addEventListener(e,t,i){!function(e,t){const i=_(e);if(i[t])return;let s=t,n=null;const o=[];for(;""!==s&&!i[s];)i[s]={callbacks:[],childEvents:[]},o.push(i[s]),n&&i[s].childEvents.push(n),n=s,s=s.substr(0,s.lastIndexOf(":"));if(""!==s){for(const e of o)e.callbacks=i[s].callbacks.slice();i[s].childEvents.push(n)}}(this,e);const s=k(this,e),n=c.get(i.priority),o={callback:t,priority:n};for(const r of s){let e=!1;for(let t=0;t<r.length;t++)if(r[t].priority<n){r.splice(t,0,o),e=!0;break}e||r.push(o)}},_removeEventListener(e,t){const i=k(this,e);for(const s of i)for(let e=0;e<s.length;e++)s[e].callback==t&&(s.splice(e,1),e--)}};function v(e,t){e[w]||(e[w]=t||r())}function y(e){return e[w]}function _(e){return e._events||Object.defineProperty(e,"_events",{value:{}}),e._events}function k(e,t){const i=_(e)[t];if(!i)return[];let s=[i.callbacks];for(let n=0;n<i.childEvents.length;n++){const t=k(e,i.childEvents[n]);s=s.concat(t)}return s}function A(e,t){let i;return e._events&&(i=e._events[t])&&i.callbacks.length?i.callbacks:t.indexOf(":")>-1?A(e,t.substr(0,t.lastIndexOf(":"))):null}function x(e,t,i){for(let[s,o]of e){o?"function"==typeof o&&(o=o(t.name)):o=t.name;const e=new n(t.source,o);e.path=[...t.path],s.fire(e,...i)}}function C(e,t,i,s){t._removeEventListener?t._removeEventListener(i,s):e._removeEventListener.call(t,i,s)}const E=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},T="object"==typeof i.g&&i.g&&i.g.Object===Object&&i.g;var S="object"==typeof self&&self&&self.Object===Object&&self;const P=T||S||Function("return this")(),O=P.Symbol;var I=Object.prototype,R=I.hasOwnProperty,z=I.toString,M=O?O.toStringTag:void 0;const N=function(e){var t=R.call(e,M),i=e[M];try{e[M]=void 0;var s=!0}catch(e){}var n=z.call(e);return s&&(t?e[M]=i:delete e[M]),n};var D=Object.prototype.toString;const V=function(e){return D.call(e)};var B=O?O.toStringTag:void 0;const L=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":B&&B in Object(e)?N(e):V(e)},F=function(e){if(!E(e))return!1;var t=L(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},j=P["__core-js_shared__"];var q=function(){var e=/[^.]+$/.exec(j&&j.keys&&j.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();const H=function(e){return!!q&&q in e};var $=Function.prototype.toString;const U=function(e){if(null!=e){try{return $.call(e)}catch(e){}try{return e+""}catch(e){}}return""};var W=/^\[object .+?Constructor\]$/,Z=Function.prototype,G=Object.prototype,K=Z.toString,J=G.hasOwnProperty,Y=RegExp("^"+K.call(J).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const Q=function(e){return!(!E(e)||H(e))&&(F(e)?Y:W).test(U(e))},X=function(e,t){return null==e?void 0:e[t]},ee=function(e,t){var i=X(e,t);return Q(i)?i:void 0},te=function(){try{var e=ee(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),ie=function(e,t,i){"__proto__"==t&&te?te(e,t,{configurable:!0,enumerable:!0,value:i,writable:!0}):e[t]=i},se=function(e,t){return e===t||e!=e&&t!=t};var ne=Object.prototype.hasOwnProperty;const oe=function(e,t,i){var s=e[t];ne.call(e,t)&&se(s,i)&&(void 0!==i||t in e)||ie(e,t,i)},re=function(e,t,i,s){var n=!i;i||(i={});for(var o=-1,r=t.length;++o<r;){var a=t[o],l=s?s(i[a],e[a],a,i,e):void 0;void 0===l&&(l=e[a]),n?ie(i,a,l):oe(i,a,l)}return i},ae=function(e){return e},le=function(e,t,i){switch(i.length){case 0:return e.call(t);case 1:return e.call(t,i[0]);case 2:return e.call(t,i[0],i[1]);case 3:return e.call(t,i[0],i[1],i[2])}return e.apply(t,i)};var ce=Math.max;const he=function(e,t,i){return t=ce(void 0===t?e.length-1:t,0),function(){for(var s=arguments,n=-1,o=ce(s.length-t,0),r=Array(o);++n<o;)r[n]=s[t+n];n=-1;for(var a=Array(t+1);++n<t;)a[n]=s[n];return a[t]=i(r),le(e,this,a)}},de=function(e){return function(){return e}},ue=te?function(e,t){return te(e,"toString",{configurable:!0,enumerable:!1,value:de(t),writable:!0})}:ae;var me=Date.now;const pe=function(e){var t=0,i=0;return function(){var s=me(),n=16-(s-i);if(i=s,n>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(ue),fe=function(e,t){return pe(he(e,t,ae),e+"")},ge=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},we=function(e){return null!=e&&ge(e.length)&&!F(e)};var be=/^(?:0|[1-9]\d*)$/;const ve=function(e,t){var i=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==i||"symbol"!=i&&be.test(e))&&e>-1&&e%1==0&&e<t},ye=function(e,t,i){if(!E(i))return!1;var s=typeof t;return!!("number"==s?we(i)&&ve(t,i.length):"string"==s&&t in i)&&se(i[t],e)},_e=function(e){return fe((function(t,i){var s=-1,n=i.length,o=n>1?i[n-1]:void 0,r=n>2?i[2]:void 0;for(o=e.length>3&&"function"==typeof o?(n--,o):void 0,r&&ye(i[0],i[1],r)&&(o=n<3?void 0:o,n=1),t=Object(t);++s<n;){var a=i[s];a&&e(t,a,s,o)}return t}))},ke=function(e,t){for(var i=-1,s=Array(e);++i<e;)s[i]=t(i);return s},Ae=function(e){return null!=e&&"object"==typeof e},xe=function(e){return Ae(e)&&"[object Arguments]"==L(e)};var Ce=Object.prototype,Ee=Ce.hasOwnProperty,Te=Ce.propertyIsEnumerable;const Se=xe(function(){return arguments}())?xe:function(e){return Ae(e)&&Ee.call(e,"callee")&&!Te.call(e,"callee")},Pe=Array.isArray,Oe=function(){return!1};var Ie=t&&!t.nodeType&&t,Re=Ie&&e&&!e.nodeType&&e,ze=Re&&Re.exports===Ie?P.Buffer:void 0;const Me=(ze?ze.isBuffer:void 0)||Oe;var Ne={};Ne["[object Float32Array]"]=Ne["[object Float64Array]"]=Ne["[object Int8Array]"]=Ne["[object Int16Array]"]=Ne["[object Int32Array]"]=Ne["[object Uint8Array]"]=Ne["[object Uint8ClampedArray]"]=Ne["[object Uint16Array]"]=Ne["[object Uint32Array]"]=!0,Ne["[object Arguments]"]=Ne["[object Array]"]=Ne["[object ArrayBuffer]"]=Ne["[object Boolean]"]=Ne["[object DataView]"]=Ne["[object Date]"]=Ne["[object Error]"]=Ne["[object Function]"]=Ne["[object Map]"]=Ne["[object Number]"]=Ne["[object Object]"]=Ne["[object RegExp]"]=Ne["[object Set]"]=Ne["[object String]"]=Ne["[object WeakMap]"]=!1;const De=function(e){return Ae(e)&&ge(e.length)&&!!Ne[L(e)]},Ve=function(e){return function(t){return e(t)}};var Be=t&&!t.nodeType&&t,Le=Be&&e&&!e.nodeType&&e,Fe=Le&&Le.exports===Be&&T.process;const je=function(){try{return Le&&Le.require&&Le.require("util").types||Fe&&Fe.binding&&Fe.binding("util")}catch(s){}}();var qe=je&&je.isTypedArray;const He=qe?Ve(qe):De;var $e=Object.prototype.hasOwnProperty;const Ue=function(e,t){var i=Pe(e),s=!i&&Se(e),n=!i&&!s&&Me(e),o=!i&&!s&&!n&&He(e),r=i||s||n||o,a=r?ke(e.length,String):[],l=a.length;for(var c in e)!t&&!$e.call(e,c)||r&&("length"==c||n&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||ve(c,l))||a.push(c);return a};var We=Object.prototype;const Ze=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||We)},Ge=function(e){var t=[];if(null!=e)for(var i in Object(e))t.push(i);return t};var Ke=Object.prototype.hasOwnProperty;const Je=function(e){if(!E(e))return Ge(e);var t=Ze(e),i=[];for(var s in e)("constructor"!=s||!t&&Ke.call(e,s))&&i.push(s);return i},Ye=function(e){return we(e)?Ue(e,!0):Je(e)},Qe=_e((function(e,t){re(t,Ye(t),e)})),Xe=Symbol("observableProperties"),et=Symbol("boundObservables"),tt=Symbol("boundProperties"),it=Symbol("decoratedMethods"),st=Symbol("decoratedOriginal"),nt={set(e,t){if(E(e))return void Object.keys(e).forEach((t=>{this.set(t,e[t])}),this);rt(this);const i=this[Xe];if(e in this&&!i.has(e))throw new h("observable-set-cannot-override",this);Object.defineProperty(this,e,{enumerable:!0,configurable:!0,get:()=>i.get(e),set(t){const s=i.get(e);let n=this.fire("set:"+e,e,t,s);void 0===n&&(n=t),s===n&&i.has(e)||(i.set(e,n),this.fire("change:"+e,e,n,s))}}),this[e]=t},bind(...e){if(!e.length||!ct(e))throw new h("observable-bind-wrong-properties",this);if(new Set(e).size!==e.length)throw new h("observable-bind-duplicate-properties",this);rt(this);const t=this[tt];e.forEach((e=>{if(t.has(e))throw new h("observable-bind-rebind",this)}));const i=new Map;return e.forEach((e=>{const s={property:e,to:[]};t.set(e,s),i.set(e,s)})),{to:at,toMany:lt,_observable:this,_bindProperties:e,_to:[],_bindings:i}},unbind(...e){if(!this[Xe])return;const t=this[tt],i=this[et];if(e.length){if(!ct(e))throw new h("observable-unbind-wrong-properties",this);e.forEach((e=>{const s=t.get(e);if(!s)return;let n,o,r,a;s.to.forEach((e=>{n=e[0],o=e[1],r=i.get(n),a=r[o],a.delete(s),a.size||delete r[o],Object.keys(r).length||(i.delete(n),this.stopListening(n,"change"))})),t.delete(e)}))}else i.forEach(((e,t)=>{this.stopListening(t,"change")})),i.clear(),t.clear()},decorate(e){const t=this[e];if(!t)throw new h("observablemixin-cannot-decorate-undefined",this,{object:this,methodName:e});this.on(e,((e,i)=>{e.return=t.apply(this,i)})),this[e]=function(...t){return this.fire(e,t)},this[e][st]=t,this[it]||(this[it]=[]),this[it].push(e)}};Qe(nt,b),nt.stopListening=function(e,t,i){if(!e&&this[it]){for(const e of this[it])this[e]=this[e][st];delete this[it]}b.stopListening.call(this,e,t,i)};const ot=nt;function rt(e){e[Xe]||(Object.defineProperty(e,Xe,{value:new Map}),Object.defineProperty(e,et,{value:new Map}),Object.defineProperty(e,tt,{value:new Map}))}function at(...e){const t=function(...e){if(!e.length)throw new h("observable-bind-to-parse-error",null);const t={to:[]};let i;return"function"==typeof e[e.length-1]&&(t.callback=e.pop()),e.forEach((e=>{if("string"==typeof e)i.properties.push(e);else{if("object"!=typeof e)throw new h("observable-bind-to-parse-error",null);i={observable:e,properties:[]},t.to.push(i)}})),t}(...e),i=Array.from(this._bindings.keys()),s=i.length;if(!t.callback&&t.to.length>1)throw new h("observable-bind-to-no-callback",this);if(s>1&&t.callback)throw new h("observable-bind-to-extra-callback",this);var n;t.to.forEach((e=>{if(e.properties.length&&e.properties.length!==s)throw new h("observable-bind-to-properties-length",this);e.properties.length||(e.properties=this._bindProperties)})),this._to=t.to,t.callback&&(this._bindings.get(i[0]).callback=t.callback),n=this._observable,this._to.forEach((e=>{const t=n[et];let i;t.get(e.observable)||n.listenTo(e.observable,"change",((s,o)=>{i=t.get(e.observable)[o],i&&i.forEach((e=>{ht(n,e.property)}))}))})),function(e){let t;e._bindings.forEach(((i,s)=>{e._to.forEach((n=>{t=n.properties[i.callback?0:e._bindProperties.indexOf(s)],i.to.push([n.observable,t]),function(e,t,i,s){const n=e[et],o=n.get(i),r=o||{};r[s]||(r[s]=new Set),r[s].add(t),o||n.set(i,r)}(e._observable,i,n.observable,t)}))}))}(this),this._bindProperties.forEach((e=>{ht(this._observable,e)}))}function lt(e,t,i){if(this._bindings.size>1)throw new h("observable-bind-to-many-not-one-binding",this);this.to(...function(e,t){const i=e.map((e=>[e,t]));return Array.prototype.concat.apply([],i)}(e,t),i)}function ct(e){return e.every((e=>"string"==typeof e))}function ht(e,t){const i=e[tt].get(t);let s;i.callback?s=i.callback.apply(e,i.to.map((e=>e[0][e[1]]))):(s=i.to[0],s=s[0][s[1]]),Object.prototype.hasOwnProperty.call(e,t)?e[t]=s:e.set(t,s)}function dt(e,...t){t.forEach((t=>{Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t)).forEach((i=>{if(i in e.prototype)return;const s=Object.getOwnPropertyDescriptor(t,i);s.enumerable=!1,Object.defineProperty(e.prototype,i,s)}))}))}class ut{constructor(e){this.editor=e,this.set("isEnabled",!0),this._disableStack=new Set}forceDisabled(e){this._disableStack.add(e),1==this._disableStack.size&&(this.on("set:isEnabled",mt,{priority:"highest"}),this.isEnabled=!1)}clearForceDisabled(e){this._disableStack.delete(e),0==this._disableStack.size&&(this.off("set:isEnabled",mt),this.isEnabled=!0)}destroy(){this.stopListening()}static get isContextPlugin(){return!1}}function mt(e){e.return=!1,e.stop()}dt(ut,ot);class pt{constructor(e){this.editor=e,this.set("value",void 0),this.set("isEnabled",!1),this._disableStack=new Set,this.decorate("execute"),this.listenTo(this.editor.model.document,"change",(()=>{this.refresh()})),this.on("execute",(e=>{this.isEnabled||e.stop()}),{priority:"high"}),this.listenTo(e,"change:isReadOnly",((e,t,i)=>{i?this.forceDisabled("readOnlyMode"):this.clearForceDisabled("readOnlyMode")}))}refresh(){this.isEnabled=!0}forceDisabled(e){this._disableStack.add(e),1==this._disableStack.size&&(this.on("set:isEnabled",ft,{priority:"highest"}),this.isEnabled=!1)}clearForceDisabled(e){this._disableStack.delete(e),0==this._disableStack.size&&(this.off("set:isEnabled",ft),this.refresh())}execute(){}destroy(){this.stopListening()}}function ft(e){e.return=!1,e.stop()}dt(pt,ot);class gt extends pt{constructor(e){super(e),this._childCommands=[]}refresh(){}execute(...e){const t=this._getFirstEnabledCommand();return null!=t&&t.execute(e)}registerChildCommand(e){this._childCommands.push(e),e.on("change:isEnabled",(()=>this._checkEnabled())),this._checkEnabled()}_checkEnabled(){this.isEnabled=!!this._getFirstEnabledCommand()}_getFirstEnabledCommand(){return this._childCommands.find((e=>e.isEnabled))}}const wt=function(e,t){return function(i){return e(t(i))}},bt=wt(Object.getPrototypeOf,Object);var vt=Function.prototype,yt=Object.prototype,_t=vt.toString,kt=yt.hasOwnProperty,At=_t.call(Object);const xt=function(e){if(!Ae(e)||"[object Object]"!=L(e))return!1;var t=bt(e);if(null===t)return!0;var i=kt.call(t,"constructor")&&t.constructor;return"function"==typeof i&&i instanceof i&&_t.call(i)==At},Ct=function(){this.__data__=[],this.size=0},Et=function(e,t){for(var i=e.length;i--;)if(se(e[i][0],t))return i;return-1};var Tt=Array.prototype.splice;const St=function(e){var t=this.__data__,i=Et(t,e);return!(i<0)&&(i==t.length-1?t.pop():Tt.call(t,i,1),--this.size,!0)},Pt=function(e){var t=this.__data__,i=Et(t,e);return i<0?void 0:t[i][1]},Ot=function(e){return Et(this.__data__,e)>-1},It=function(e,t){var i=this.__data__,s=Et(i,e);return s<0?(++this.size,i.push([e,t])):i[s][1]=t,this};function Rt(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var s=e[t];this.set(s[0],s[1])}}Rt.prototype.clear=Ct,Rt.prototype.delete=St,Rt.prototype.get=Pt,Rt.prototype.has=Ot,Rt.prototype.set=It;const zt=Rt,Mt=function(){this.__data__=new zt,this.size=0},Nt=function(e){var t=this.__data__,i=t.delete(e);return this.size=t.size,i},Dt=function(e){return this.__data__.get(e)},Vt=function(e){return this.__data__.has(e)},Bt=ee(P,"Map"),Lt=ee(Object,"create"),Ft=function(){this.__data__=Lt?Lt(null):{},this.size=0},jt=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t};var qt=Object.prototype.hasOwnProperty;const Ht=function(e){var t=this.__data__;if(Lt){var i=t[e];return"__lodash_hash_undefined__"===i?void 0:i}return qt.call(t,e)?t[e]:void 0};var $t=Object.prototype.hasOwnProperty;const Ut=function(e){var t=this.__data__;return Lt?void 0!==t[e]:$t.call(t,e)},Wt=function(e,t){var i=this.__data__;return this.size+=this.has(e)?0:1,i[e]=Lt&&void 0===t?"__lodash_hash_undefined__":t,this};function Zt(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var s=e[t];this.set(s[0],s[1])}}Zt.prototype.clear=Ft,Zt.prototype.delete=jt,Zt.prototype.get=Ht,Zt.prototype.has=Ut,Zt.prototype.set=Wt;const Gt=Zt,Kt=function(){this.size=0,this.__data__={hash:new Gt,map:new(Bt||zt),string:new Gt}},Jt=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e},Yt=function(e,t){var i=e.__data__;return Jt(t)?i["string"==typeof t?"string":"hash"]:i.map},Qt=function(e){var t=Yt(this,e).delete(e);return this.size-=t?1:0,t},Xt=function(e){return Yt(this,e).get(e)},ei=function(e){return Yt(this,e).has(e)},ti=function(e,t){var i=Yt(this,e),s=i.size;return i.set(e,t),this.size+=i.size==s?0:1,this};function ii(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var s=e[t];this.set(s[0],s[1])}}ii.prototype.clear=Kt,ii.prototype.delete=Qt,ii.prototype.get=Xt,ii.prototype.has=ei,ii.prototype.set=ti;const si=ii,ni=function(e,t){var i=this.__data__;if(i instanceof zt){var s=i.__data__;if(!Bt||s.length<199)return s.push([e,t]),this.size=++i.size,this;i=this.__data__=new si(s)}return i.set(e,t),this.size=i.size,this};function oi(e){var t=this.__data__=new zt(e);this.size=t.size}oi.prototype.clear=Mt,oi.prototype.delete=Nt,oi.prototype.get=Dt,oi.prototype.has=Vt,oi.prototype.set=ni;const ri=oi,ai=function(e,t){for(var i=-1,s=null==e?0:e.length;++i<s&&!1!==t(e[i],i,e););return e},li=wt(Object.keys,Object);var ci=Object.prototype.hasOwnProperty;const hi=function(e){if(!Ze(e))return li(e);var t=[];for(var i in Object(e))ci.call(e,i)&&"constructor"!=i&&t.push(i);return t},di=function(e){return we(e)?Ue(e):hi(e)},ui=function(e,t){return e&&re(t,di(t),e)},mi=function(e,t){return e&&re(t,Ye(t),e)};var pi=t&&!t.nodeType&&t,fi=pi&&e&&!e.nodeType&&e,gi=fi&&fi.exports===pi?P.Buffer:void 0,wi=gi?gi.allocUnsafe:void 0;const bi=function(e,t){if(t)return e.slice();var i=e.length,s=wi?wi(i):new e.constructor(i);return e.copy(s),s},vi=function(e,t){var i=-1,s=e.length;for(t||(t=Array(s));++i<s;)t[i]=e[i];return t},yi=function(e,t){for(var i=-1,s=null==e?0:e.length,n=0,o=[];++i<s;){var r=e[i];t(r,i,e)&&(o[n++]=r)}return o},_i=function(){return[]};var ki=Object.prototype.propertyIsEnumerable,Ai=Object.getOwnPropertySymbols;const xi=Ai?function(e){return null==e?[]:(e=Object(e),yi(Ai(e),(function(t){return ki.call(e,t)})))}:_i,Ci=function(e,t){return re(e,xi(e),t)},Ei=function(e,t){for(var i=-1,s=t.length,n=e.length;++i<s;)e[n+i]=t[i];return e},Ti=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)Ei(t,xi(e)),e=bt(e);return t}:_i,Si=function(e,t){return re(e,Ti(e),t)},Pi=function(e,t,i){var s=t(e);return Pe(e)?s:Ei(s,i(e))},Oi=function(e){return Pi(e,di,xi)},Ii=function(e){return Pi(e,Ye,Ti)},Ri=ee(P,"DataView"),zi=ee(P,"Promise"),Mi=ee(P,"Set"),Ni=ee(P,"WeakMap");var Di="[object Map]",Vi="[object Promise]",Bi="[object Set]",Li="[object WeakMap]",Fi="[object DataView]",ji=U(Ri),qi=U(Bt),Hi=U(zi),$i=U(Mi),Ui=U(Ni),Wi=L;(Ri&&Wi(new Ri(new ArrayBuffer(1)))!=Fi||Bt&&Wi(new Bt)!=Di||zi&&Wi(zi.resolve())!=Vi||Mi&&Wi(new Mi)!=Bi||Ni&&Wi(new Ni)!=Li)&&(Wi=function(e){var t=L(e),i="[object Object]"==t?e.constructor:void 0,s=i?U(i):"";if(s)switch(s){case ji:return Fi;case qi:return Di;case Hi:return Vi;case $i:return Bi;case Ui:return Li}return t});const Zi=Wi;var Gi=Object.prototype.hasOwnProperty;const Ki=function(e){var t=e.length,i=new e.constructor(t);return t&&"string"==typeof e[0]&&Gi.call(e,"index")&&(i.index=e.index,i.input=e.input),i},Ji=P.Uint8Array,Yi=function(e){var t=new e.constructor(e.byteLength);return new Ji(t).set(new Ji(e)),t},Qi=function(e,t){var i=t?Yi(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.byteLength)};var Xi=/\w*$/;const es=function(e){var t=new e.constructor(e.source,Xi.exec(e));return t.lastIndex=e.lastIndex,t};var ts=O?O.prototype:void 0,is=ts?ts.valueOf:void 0;const ss=function(e){return is?Object(is.call(e)):{}},ns=function(e,t){var i=t?Yi(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.length)},os=function(e,t,i){var s=e.constructor;switch(t){case"[object ArrayBuffer]":return Yi(e);case"[object Boolean]":case"[object Date]":return new s(+e);case"[object DataView]":return Qi(e,i);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return ns(e,i);case"[object Map]":case"[object Set]":return new s;case"[object Number]":case"[object String]":return new s(e);case"[object RegExp]":return es(e);case"[object Symbol]":return ss(e)}};var rs=Object.create;const as=function(){function e(){}return function(t){if(!E(t))return{};if(rs)return rs(t);e.prototype=t;var i=new e;return e.prototype=void 0,i}}(),ls=function(e){return"function"!=typeof e.constructor||Ze(e)?{}:as(bt(e))},cs=function(e){return Ae(e)&&"[object Map]"==Zi(e)};var hs=je&&je.isMap;const ds=hs?Ve(hs):cs,us=function(e){return Ae(e)&&"[object Set]"==Zi(e)};var ms=je&&je.isSet;const ps=ms?Ve(ms):us;var fs="[object Arguments]",gs="[object Function]",ws="[object Object]",bs={};bs[fs]=bs["[object Array]"]=bs["[object ArrayBuffer]"]=bs["[object DataView]"]=bs["[object Boolean]"]=bs["[object Date]"]=bs["[object Float32Array]"]=bs["[object Float64Array]"]=bs["[object Int8Array]"]=bs["[object Int16Array]"]=bs["[object Int32Array]"]=bs["[object Map]"]=bs["[object Number]"]=bs["[object Object]"]=bs["[object RegExp]"]=bs["[object Set]"]=bs["[object String]"]=bs["[object Symbol]"]=bs["[object Uint8Array]"]=bs["[object Uint8ClampedArray]"]=bs["[object Uint16Array]"]=bs["[object Uint32Array]"]=!0,bs["[object Error]"]=bs[gs]=bs["[object WeakMap]"]=!1;const vs=function e(t,i,s,n,o,r){var a,l=1&i,c=2&i,h=4&i;if(s&&(a=o?s(t,n,o,r):s(t)),void 0!==a)return a;if(!E(t))return t;var d=Pe(t);if(d){if(a=Ki(t),!l)return vi(t,a)}else{var u=Zi(t),m=u==gs||"[object GeneratorFunction]"==u;if(Me(t))return bi(t,l);if(u==ws||u==fs||m&&!o){if(a=c||m?{}:ls(t),!l)return c?Si(t,mi(a,t)):Ci(t,ui(a,t))}else{if(!bs[u])return o?t:{};a=os(t,u,l)}}r||(r=new ri);var p=r.get(t);if(p)return p;r.set(t,a),ps(t)?t.forEach((function(n){a.add(e(n,i,s,n,t,r))})):ds(t)&&t.forEach((function(n,o){a.set(o,e(n,i,s,o,t,r))}));var f=d?void 0:(h?c?Ii:Oi:c?Ye:di)(t);return ai(f||t,(function(n,o){f&&(n=t[o=n]),oe(a,o,e(n,i,s,o,t,r))})),a},ys=function(e,t){return vs(e,5,t="function"==typeof t?t:void 0)},_s=function(e){return Ae(e)&&1===e.nodeType&&!xt(e)};class ks{constructor(e,t){this._config={},t&&this.define(As(t)),e&&this._setObjectToTarget(this._config,e)}set(e,t){this._setToTarget(this._config,e,t)}define(e,t){this._setToTarget(this._config,e,t,!0)}get(e){return this._getFromSource(this._config,e)}*names(){for(const e of Object.keys(this._config))yield e}_setToTarget(e,t,i,s=!1){if(xt(t))return void this._setObjectToTarget(e,t,s);const n=t.split(".");t=n.pop();for(const o of n)xt(e[o])||(e[o]={}),e=e[o];if(xt(i))return xt(e[t])||(e[t]={}),e=e[t],void this._setObjectToTarget(e,i,s);s&&void 0!==e[t]||(e[t]=i)}_getFromSource(e,t){const i=t.split(".");t=i.pop();for(const s of i){if(!xt(e[s])){e=null;break}e=e[s]}return e?As(e[t]):void 0}_setObjectToTarget(e,t,i){Object.keys(t).forEach((s=>{this._setToTarget(e,s,t[s],i)}))}}function As(e){return ys(e,xs)}function xs(e){return _s(e)?e:void 0}function Cs(e){return!(!e||!e[Symbol.iterator])}class Es{constructor(e={},t={}){const i=Cs(e);if(i||(t=e),this._items=[],this._itemMap=new Map,this._idProperty=t.idProperty||"id",this._bindToExternalToInternalMap=new WeakMap,this._bindToInternalToExternalMap=new WeakMap,this._skippedIndexesFromExternal=[],i)for(const s of e)this._items.push(s),this._itemMap.set(this._getItemIdBeforeAdding(s),s)}get length(){return this._items.length}get first(){return this._items[0]||null}get last(){return this._items[this.length-1]||null}add(e,t){return this.addMany([e],t)}addMany(e,t){if(void 0===t)t=this._items.length;else if(t>this._items.length||t<0)throw new h("collection-add-item-invalid-index",this);for(let i=0;i<e.length;i++){const s=e[i],n=this._getItemIdBeforeAdding(s),o=t+i;this._items.splice(o,0,s),this._itemMap.set(n,s),this.fire("add",s,o)}return this.fire("change",{added:e,removed:[],index:t}),this}get(e){let t;if("string"==typeof e)t=this._itemMap.get(e);else{if("number"!=typeof e)throw new h("collection-get-invalid-arg",this);t=this._items[e]}return t||null}has(e){if("string"==typeof e)return this._itemMap.has(e);{const t=e[this._idProperty];return this._itemMap.has(t)}}getIndex(e){let t;return t="string"==typeof e?this._itemMap.get(e):e,this._items.indexOf(t)}remove(e){const[t,i]=this._remove(e);return this.fire("change",{added:[],removed:[t],index:i}),t}map(e,t){return this._items.map(e,t)}find(e,t){return this._items.find(e,t)}filter(e,t){return this._items.filter(e,t)}clear(){this._bindToCollection&&(this.stopListening(this._bindToCollection),this._bindToCollection=null);const e=Array.from(this._items);for(;this.length;)this._remove(0);this.fire("change",{added:[],removed:e,index:0})}bindTo(e){if(this._bindToCollection)throw new h("collection-bind-to-rebind",this);return this._bindToCollection=e,{as:e=>{this._setUpBindToBinding((t=>new e(t)))},using:e=>{"function"==typeof e?this._setUpBindToBinding((t=>e(t))):this._setUpBindToBinding((t=>t[e]))}}}_setUpBindToBinding(e){const t=this._bindToCollection,i=(i,s,n)=>{const o=t._bindToCollection==this,r=t._bindToInternalToExternalMap.get(s);if(o&&r)this._bindToExternalToInternalMap.set(s,r),this._bindToInternalToExternalMap.set(r,s);else{const i=e(s);if(!i)return void this._skippedIndexesFromExternal.push(n);let o=n;for(const e of this._skippedIndexesFromExternal)n>e&&o--;for(const e of t._skippedIndexesFromExternal)o>=e&&o++;this._bindToExternalToInternalMap.set(s,i),this._bindToInternalToExternalMap.set(i,s),this.add(i,o);for(let e=0;e<t._skippedIndexesFromExternal.length;e++)o<=t._skippedIndexesFromExternal[e]&&t._skippedIndexesFromExternal[e]++}};for(const s of t)i(0,s,t.getIndex(s));this.listenTo(t,"add",i),this.listenTo(t,"remove",((e,t,i)=>{const s=this._bindToExternalToInternalMap.get(t);s&&this.remove(s),this._skippedIndexesFromExternal=this._skippedIndexesFromExternal.reduce(((e,t)=>(i<t&&e.push(t-1),i>t&&e.push(t),e)),[])}))}_getItemIdBeforeAdding(e){const t=this._idProperty;let i;if(t in e){if(i=e[t],"string"!=typeof i)throw new h("collection-add-invalid-id",this);if(this.get(i))throw new h("collection-add-item-already-exists",this)}else e[t]=i=r();return i}_remove(e){let t,i,s,n=!1;const o=this._idProperty;if("string"==typeof e?(i=e,s=this._itemMap.get(i),n=!s,s&&(t=this._items.indexOf(s))):"number"==typeof e?(t=e,s=this._items[t],n=!s,s&&(i=s[o])):(s=e,i=s[o],t=this._items.indexOf(s),n=-1==t||!this._itemMap.get(i)),n)throw new h("collection-remove-404",this);this._items.splice(t,1),this._itemMap.delete(i);const r=this._bindToInternalToExternalMap.get(s);return this._bindToInternalToExternalMap.delete(s),this._bindToExternalToInternalMap.delete(r),this.fire("remove",s,t),[s,t]}[Symbol.iterator](){return this._items[Symbol.iterator]()}}dt(Es,b);class Ts{constructor(e,t=[],i=[]){this._context=e,this._plugins=new Map,this._availablePlugins=new Map;for(const s of t)s.pluginName&&this._availablePlugins.set(s.pluginName,s);this._contextPlugins=new Map;for(const[s,n]of i)this._contextPlugins.set(s,n),this._contextPlugins.set(n,s),s.pluginName&&this._availablePlugins.set(s.pluginName,s)}*[Symbol.iterator](){for(const e of this._plugins)"function"==typeof e[0]&&(yield e)}get(e){const t=this._plugins.get(e);if(!t){let t=e;throw"function"==typeof e&&(t=e.pluginName||e.name),new h("plugincollection-plugin-not-loaded",this._context,{plugin:t})}return t}has(e){return this._plugins.has(e)}init(e,t=[],i=[]){const s=this,n=this._context;!function e(t,i=new Set){t.forEach((t=>{a(t)&&(i.has(t)||(i.add(t),t.pluginName&&!s._availablePlugins.has(t.pluginName)&&s._availablePlugins.set(t.pluginName,t),t.requires&&e(t.requires,i)))}))}(e),u(e);const o=[...function e(t,i=new Set){return t.map((e=>a(e)?e:s._availablePlugins.get(e))).reduce(((t,s)=>i.has(s)?t:(i.add(s),s.requires&&(u(s.requires,s),e(s.requires,i).forEach((e=>t.add(e)))),t.add(s))),new Set)}(e.filter((e=>!c(e,t))))];!function(e,t){for(const i of t){if("function"!=typeof i)throw new h("plugincollection-replace-plugin-invalid-type",null,{pluginItem:i});const t=i.pluginName;if(!t)throw new h("plugincollection-replace-plugin-missing-name",null,{pluginItem:i});if(i.requires&&i.requires.length)throw new h("plugincollection-plugin-for-replacing-cannot-have-dependencies",null,{pluginName:t});const n=s._availablePlugins.get(t);if(!n)throw new h("plugincollection-plugin-for-replacing-not-exist",null,{pluginName:t});const o=e.indexOf(n);if(-1===o){if(s._contextPlugins.has(n))return;throw new h("plugincollection-plugin-for-replacing-not-loaded",null,{pluginName:t})}if(n.requires&&n.requires.length)throw new h("plugincollection-replaced-plugin-cannot-have-dependencies",null,{pluginName:t});e.splice(o,1,i),s._availablePlugins.set(t,i)}}(o,i);const r=function(e){return e.map((e=>{const t=s._contextPlugins.get(e)||new e(n);return s._add(e,t),t}))}(o);return m(r,"init").then((()=>m(r,"afterInit"))).then((()=>r));function a(e){return"function"==typeof e}function l(e){return a(e)&&e.isContextPlugin}function c(e,t){return t.some((t=>t===e||d(e)===t||d(t)===e))}function d(e){return a(e)?e.pluginName||e.name:e}function u(e,i=null){e.map((e=>a(e)?e:s._availablePlugins.get(e)||e)).forEach((e=>{!function(e,t){if(!a(e)){if(t)throw new h("plugincollection-soft-required",n,{missingPlugin:e,requiredBy:d(t)});throw new h("plugincollection-plugin-not-found",n,{plugin:e})}}(e,i),function(e,t){if(l(t)&&!l(e))throw new h("plugincollection-context-required",n,{plugin:d(e),requiredBy:d(t)})}(e,i),function(e,i){if(i&&c(e,t))throw new h("plugincollection-required",n,{plugin:d(e),requiredBy:d(i)})}(e,i)}))}function m(e,t){return e.reduce(((e,i)=>i[t]?s._contextPlugins.has(i)?e:e.then(i[t].bind(i)):e),Promise.resolve())}}destroy(){const e=[];for(const[,t]of this)"function"!=typeof t.destroy||this._contextPlugins.has(t)||e.push(t.destroy());return Promise.all(e)}_add(e,t){this._plugins.set(e,t);const i=e.pluginName;if(i){if(this._plugins.has(i))throw new h("plugincollection-plugin-name-conflict",null,{pluginName:i,plugin1:this._plugins.get(i).constructor,plugin2:e});this._plugins.set(i,t)}}}function Ss(e){return Array.isArray(e)?e:[e]}function Ps(e,t,i=1){if("number"!=typeof i)throw new h("translation-service-quantity-not-a-number",null,{quantity:i});const s=Object.keys(window.CKEDITOR_TRANSLATIONS).length;1===s&&(e=Object.keys(window.CKEDITOR_TRANSLATIONS)[0]);const n=t.id||t.string;if(0===s||!function(e,t){return!!window.CKEDITOR_TRANSLATIONS[e]&&!!window.CKEDITOR_TRANSLATIONS[e].dictionary[t]}(e,n))return 1!==i?t.plural:t.string;const o=window.CKEDITOR_TRANSLATIONS[e].dictionary,r=window.CKEDITOR_TRANSLATIONS[e].getPluralForm||(e=>1===e?0:1);if("string"==typeof o[n])return o[n];const a=Number(r(i));return o[n][a]}dt(Ts,b),window.CKEDITOR_TRANSLATIONS||(window.CKEDITOR_TRANSLATIONS={});const Os=["ar","ara","fa","per","fas","he","heb","ku","kur","ug","uig"];function Is(e){return Os.includes(e)?"rtl":"ltr"}class Rs{constructor(e={}){this.uiLanguage=e.uiLanguage||"en",this.contentLanguage=e.contentLanguage||this.uiLanguage,this.uiLanguageDirection=Is(this.uiLanguage),this.contentLanguageDirection=Is(this.contentLanguage),this.t=(e,t)=>this._t(e,t)}get language(){return console.warn("locale-deprecated-language-property: The Locale#language property has been deprecated and will be removed in the near future. Please use #uiLanguage and #contentLanguage properties instead."),this.uiLanguage}_t(e,t=[]){t=Ss(t),"string"==typeof e&&(e={string:e});const i=e.plural?t[0]:1;return function(e,t){return e.replace(/%(\d+)/g,((e,i)=>i<t.length?t[i]:e))}(Ps(this.uiLanguage,e,i),t)}}class zs{constructor(e){this.config=new ks(e,this.constructor.defaultConfig);const t=this.constructor.builtinPlugins;this.config.define("plugins",t),this.plugins=new Ts(this,t);const i=this.config.get("language")||{};this.locale=new Rs({uiLanguage:"string"==typeof i?i:i.ui,contentLanguage:this.config.get("language.content")}),this.t=this.locale.t,this.editors=new Es,this._contextOwner=null}initPlugins(){const e=this.config.get("plugins")||[],t=this.config.get("substitutePlugins")||[];for(const i of e.concat(t)){if("function"!=typeof i)throw new h("context-initplugins-constructor-only",null,{Plugin:i});if(!0!==i.isContextPlugin)throw new h("context-initplugins-invalid-plugin",null,{Plugin:i})}return this.plugins.init(e,[],t)}destroy(){return Promise.all(Array.from(this.editors,(e=>e.destroy()))).then((()=>this.plugins.destroy()))}_addEditor(e,t){if(this._contextOwner)throw new h("context-addeditor-private-context");this.editors.add(e),t&&(this._contextOwner=e)}_removeEditor(e){return this.editors.has(e)&&this.editors.remove(e),this._contextOwner===e?this.destroy():Promise.resolve()}_getEditorConfig(){const e={};for(const t of this.config.names())["plugins","removePlugins","extraPlugins"].includes(t)||(e[t]=this.config.get(t));return e}static create(e){return new Promise((t=>{const i=new this(e);t(i.initPlugins().then((()=>i)))}))}}class Ms{constructor(e){this.context=e}destroy(){this.stopListening()}static get isContextPlugin(){return!0}}function Ns(e,t){const i=Math.min(e.length,t.length);for(let s=0;s<i;s++)if(e[s]!=t[s])return s;return e.length==t.length?"same":e.length<t.length?"prefix":"extension"}dt(Ms,ot);const Ds=function(e){return vs(e,4)};class Vs{constructor(e){this.document=e,this.parent=null}get index(){let e;if(!this.parent)return null;if(-1==(e=this.parent.getChildIndex(this)))throw new h("view-node-not-found-in-parent",this);return e}get nextSibling(){const e=this.index;return null!==e&&this.parent.getChild(e+1)||null}get previousSibling(){const e=this.index;return null!==e&&this.parent.getChild(e-1)||null}get root(){let e=this;for(;e.parent;)e=e.parent;return e}isAttached(){return this.root.is("rootElement")}getPath(){const e=[];let t=this;for(;t.parent;)e.unshift(t.index),t=t.parent;return e}getAncestors(e={includeSelf:!1,parentFirst:!1}){const t=[];let i=e.includeSelf?this:this.parent;for(;i;)t[e.parentFirst?"push":"unshift"](i),i=i.parent;return t}getCommonAncestor(e,t={}){const i=this.getAncestors(t),s=e.getAncestors(t);let n=0;for(;i[n]==s[n]&&i[n];)n++;return 0===n?null:i[n-1]}isBefore(e){if(this==e)return!1;if(this.root!==e.root)return!1;const t=this.getPath(),i=e.getPath(),s=Ns(t,i);switch(s){case"prefix":return!0;case"extension":return!1;default:return t[s]<i[s]}}isAfter(e){return this!=e&&this.root===e.root&&!this.isBefore(e)}_remove(){this.parent._removeChildren(this.index)}_fireChange(e,t){this.fire("change:"+e,t),this.parent&&this.parent._fireChange(e,t)}toJSON(){const e=Ds(this);return delete e.parent,e}is(e){return"node"===e||"view:node"===e}}dt(Vs,b);class Bs extends Vs{constructor(e,t){super(e),this._textData=t}is(e){return"$text"===e||"view:$text"===e||"text"===e||"view:text"===e||"node"===e||"view:node"===e}get data(){return this._textData}get _data(){return this.data}set _data(e){this._fireChange("text",this),this._textData=e}isSimilar(e){return e instanceof Bs&&(this===e||this.data===e.data)}_clone(){return new Bs(this.document,this.data)}}class Ls{constructor(e,t,i){if(this.textNode=e,t<0||t>e.data.length)throw new h("view-textproxy-wrong-offsetintext",this);if(i<0||t+i>e.data.length)throw new h("view-textproxy-wrong-length",this);this.data=e.data.substring(t,t+i),this.offsetInText=t}get offsetSize(){return this.data.length}get isPartial(){return this.data.length!==this.textNode.data.length}get parent(){return this.textNode.parent}get root(){return this.textNode.root}get document(){return this.textNode.document}is(e){return"$textProxy"===e||"view:$textProxy"===e||"textProxy"===e||"view:textProxy"===e}getAncestors(e={includeSelf:!1,parentFirst:!1}){const t=[];let i=e.includeSelf?this.textNode:this.parent;for(;null!==i;)t[e.parentFirst?"push":"unshift"](i),i=i.parent;return t}}function Fs(e){return Cs(e)?new Map(e):function(e){const t=new Map;for(const i in e)t.set(i,e[i]);return t}(e)}class js{constructor(...e){this._patterns=[],this.add(...e)}add(...e){for(let t of e)("string"==typeof t||t instanceof RegExp)&&(t={name:t}),this._patterns.push(t)}match(...e){for(const t of e)for(const e of this._patterns){const i=qs(t,e);if(i)return{element:t,pattern:e,match:i}}return null}matchAll(...e){const t=[];for(const i of e)for(const e of this._patterns){const s=qs(i,e);s&&t.push({element:i,pattern:e,match:s})}return t.length>0?t:null}getElementName(){if(1!==this._patterns.length)return null;const e=this._patterns[0],t=e.name;return"function"==typeof e||!t||t instanceof RegExp?null:t}}function qs(e,t){if("function"==typeof t)return t(e);const i={};return t.name&&(i.name=function(e,t){return e instanceof RegExp?e.test(t):e===t}(t.name,e.name),!i.name)||t.attributes&&(i.attributes=function(e,t){const i=new Set(t.getAttributeKeys());return xt(e)?(void 0!==e.style&&d("matcher-pattern-deprecated-attributes-style-key",e),void 0!==e.class&&d("matcher-pattern-deprecated-attributes-class-key",e)):(i.delete("style"),i.delete("class")),Hs(e,i,(e=>t.getAttribute(e)))}(t.attributes,e),!i.attributes)?null:!(t.classes&&(i.classes=function(e,t){return Hs(e,t.getClassNames())}(t.classes,e),!i.classes))&&!(t.styles&&(i.styles=function(e,t){return Hs(e,t.getStyleNames(!0),(e=>t.getStyle(e)))}(t.styles,e),!i.styles))&&i}function Hs(e,t,i){const s=function(e){return Array.isArray(e)?e.map((e=>xt(e)?(void 0!==e.key&&void 0!==e.value||d("matcher-pattern-missing-key-or-value",e),[e.key,e.value]):[e,!0])):xt(e)?Object.entries(e):[[e,!0]]}(e),n=Array.from(t),o=[];return s.forEach((([e,t])=>{n.forEach((s=>{(function(e,t){return!0===e||e===t||e instanceof RegExp&&e.test(t)})(e,s)&&function(e,t,i){if(!0===e)return!0;const s=i(t);return e===s||e instanceof RegExp&&e.test(s)}(t,s,i)&&o.push(s)}))})),!s.length||o.length<s.length?null:o}const $s=function(e){return"symbol"==typeof e||Ae(e)&&"[object Symbol]"==L(e)};var Us=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ws=/^\w*$/;const Zs=function(e,t){if(Pe(e))return!1;var i=typeof e;return!("number"!=i&&"symbol"!=i&&"boolean"!=i&&null!=e&&!$s(e))||Ws.test(e)||!Us.test(e)||null!=t&&e in Object(t)};function Gs(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var i=function(){var s=arguments,n=t?t.apply(this,s):s[0],o=i.cache;if(o.has(n))return o.get(n);var r=e.apply(this,s);return i.cache=o.set(n,r)||o,r};return i.cache=new(Gs.Cache||si),i}Gs.Cache=si;const Ks=Gs;var Js=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ys=/\\(\\)?/g;const Qs=function(e){var t=Ks(e,(function(e){return 500===i.size&&i.clear(),e})),i=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Js,(function(e,i,s,n){t.push(s?n.replace(Ys,"$1"):i||e)})),t})),Xs=function(e,t){for(var i=-1,s=null==e?0:e.length,n=Array(s);++i<s;)n[i]=t(e[i],i,e);return n};var en=O?O.prototype:void 0,tn=en?en.toString:void 0;const sn=function e(t){if("string"==typeof t)return t;if(Pe(t))return Xs(t,e)+"";if($s(t))return tn?tn.call(t):"";var i=t+"";return"0"==i&&1/t==-1/0?"-0":i},nn=function(e){return null==e?"":sn(e)},on=function(e,t){return Pe(e)?e:Zs(e,t)?[e]:Qs(nn(e))},rn=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0},an=function(e){if("string"==typeof e||$s(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t},ln=function(e,t){for(var i=0,s=(t=on(t,e)).length;null!=e&&i<s;)e=e[an(t[i++])];return i&&i==s?e:void 0},cn=function(e,t,i){var s=-1,n=e.length;t<0&&(t=-t>n?0:n+t),(i=i>n?n:i)<0&&(i+=n),n=t>i?0:i-t>>>0,t>>>=0;for(var o=Array(n);++s<n;)o[s]=e[s+t];return o},hn=function(e,t){return t.length<2?e:ln(e,cn(t,0,-1))},dn=function(e,t){return t=on(t,e),null==(e=hn(e,t))||delete e[an(rn(t))]},un=function(e,t){return null==e||dn(e,t)},mn=function(e,t,i){var s=null==e?void 0:ln(e,t);return void 0===s?i:s},pn=function(e,t,i){(void 0!==i&&!se(e[t],i)||void 0===i&&!(t in e))&&ie(e,t,i)},fn=function(e){return function(t,i,s){for(var n=-1,o=Object(t),r=s(t),a=r.length;a--;){var l=r[e?a:++n];if(!1===i(o[l],l,o))break}return t}}(),gn=function(e){return Ae(e)&&we(e)},wn=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]},bn=function(e){return re(e,Ye(e))},vn=function(e,t,i,s,n,o,r){var a=wn(e,i),l=wn(t,i),c=r.get(l);if(c)pn(e,i,c);else{var h=o?o(a,l,i+"",e,t,r):void 0,d=void 0===h;if(d){var u=Pe(l),m=!u&&Me(l),p=!u&&!m&&He(l);h=l,u||m||p?Pe(a)?h=a:gn(a)?h=vi(a):m?(d=!1,h=bi(l,!0)):p?(d=!1,h=ns(l,!0)):h=[]:xt(l)||Se(l)?(h=a,Se(a)?h=bn(a):E(a)&&!F(a)||(h=ls(l))):d=!1}d&&(r.set(l,h),n(h,l,s,o,r),r.delete(l)),pn(e,i,h)}},yn=function e(t,i,s,n,o){t!==i&&fn(i,(function(r,a){if(o||(o=new ri),E(r))vn(t,i,a,s,e,n,o);else{var l=n?n(wn(t,a),r,a+"",t,i,o):void 0;void 0===l&&(l=r),pn(t,a,l)}}),Ye)},_n=_e((function(e,t,i){yn(e,t,i)})),kn=function(e,t,i,s){if(!E(e))return e;for(var n=-1,o=(t=on(t,e)).length,r=o-1,a=e;null!=a&&++n<o;){var l=an(t[n]),c=i;if("__proto__"===l||"constructor"===l||"prototype"===l)return e;if(n!=r){var h=a[l];void 0===(c=s?s(h,l,a):void 0)&&(c=E(h)?h:ve(t[n+1])?[]:{})}oe(a,l,c),a=a[l]}return e},An=function(e,t,i){return null==e?e:kn(e,t,i)};class xn{constructor(e){this._styles={},this._styleProcessor=e}get isEmpty(){const e=Object.entries(this._styles);return!Array.from(e).length}get size(){return this.isEmpty?0:this.getStyleNames().length}setTo(e){this.clear();const t=Array.from(function(e){let t=null,i=0,s=0,n=null;const o=new Map;if(""===e)return o;";"!=e.charAt(e.length-1)&&(e+=";");for(let r=0;r<e.length;r++){const a=e.charAt(r);if(null===t)switch(a){case":":n||(n=e.substr(i,r-i),s=r+1);break;case'"':case"'":t=a;break;case";":{const t=e.substr(s,r-s);n&&o.set(n.trim(),t.trim()),n=null,i=r+1;break}}else a===t&&(t=null)}return o}(e).entries());for(const[i,s]of t)this._styleProcessor.toNormalizedForm(i,s,this._styles)}has(e){if(this.isEmpty)return!1;const t=this._styleProcessor.getReducedForm(e,this._styles).find((([t])=>t===e));return Array.isArray(t)}set(e,t){if(E(e))for(const[i,s]of Object.entries(e))this._styleProcessor.toNormalizedForm(i,s,this._styles);else this._styleProcessor.toNormalizedForm(e,t,this._styles)}remove(e){const t=En(e);un(this._styles,t),delete this._styles[e],this._cleanEmptyObjectsOnPath(t)}getNormalized(e){return this._styleProcessor.getNormalized(e,this._styles)}toString(){return this.isEmpty?"":this._getStylesEntries().map((e=>e.join(":"))).sort().join(";")+";"}getAsString(e){if(this.isEmpty)return;if(this._styles[e]&&!E(this._styles[e]))return this._styles[e];const t=this._styleProcessor.getReducedForm(e,this._styles).find((([t])=>t===e));return Array.isArray(t)?t[1]:void 0}getStyleNames(e=!1){return this.isEmpty?[]:e?this._styleProcessor.getStyleNames(this._styles):this._getStylesEntries().map((([e])=>e))}clear(){this._styles={}}_getStylesEntries(){const e=[],t=Object.keys(this._styles);for(const i of t)e.push(...this._styleProcessor.getReducedForm(i,this._styles));return e}_cleanEmptyObjectsOnPath(e){const t=e.split(".");if(!(t.length>1))return;const i=t.splice(0,t.length-1).join("."),s=mn(this._styles,i);s&&!Array.from(Object.keys(s)).length&&this.remove(i)}}class Cn{constructor(){this._normalizers=new Map,this._extractors=new Map,this._reducers=new Map,this._consumables=new Map}toNormalizedForm(e,t,i){if(E(t))Tn(i,En(e),t);else if(this._normalizers.has(e)){const s=this._normalizers.get(e),{path:n,value:o}=s(t);Tn(i,n,o)}else Tn(i,e,t)}getNormalized(e,t){if(!e)return _n({},t);if(void 0!==t[e])return t[e];if(this._extractors.has(e)){const i=this._extractors.get(e);if("string"==typeof i)return mn(t,i);const s=i(e,t);if(s)return s}return mn(t,En(e))}getReducedForm(e,t){const i=this.getNormalized(e,t);return void 0===i?[]:this._reducers.has(e)?this._reducers.get(e)(i):[[e,i]]}getStyleNames(e){const t=Array.from(this._consumables.keys()).filter((t=>{const i=this.getNormalized(t,e);return i&&"object"==typeof i?Object.keys(i).length:i})),i=new Set([...t,...Object.keys(e)]);return Array.from(i.values())}getRelatedStyles(e){return this._consumables.get(e)||[]}setNormalizer(e,t){this._normalizers.set(e,t)}setExtractor(e,t){this._extractors.set(e,t)}setReducer(e,t){this._reducers.set(e,t)}setStyleRelation(e,t){this._mapStyleNames(e,t);for(const i of t)this._mapStyleNames(i,[e])}_mapStyleNames(e,t){this._consumables.has(e)||this._consumables.set(e,[]),this._consumables.get(e).push(...t)}}function En(e){return e.replace("-",".")}function Tn(e,t,i){let s=i;E(i)&&(s=_n({},mn(e,t),i)),An(e,t,s)}class Sn extends Vs{constructor(e,t,i,s){if(super(e),this.name=t,this._attrs=function(e){e=Fs(e);for(const[t,i]of e)null===i?e.delete(t):"string"!=typeof i&&e.set(t,String(i));return e}(i),this._children=[],s&&this._insertChild(0,s),this._classes=new Set,this._attrs.has("class")){const e=this._attrs.get("class");Pn(this._classes,e),this._attrs.delete("class")}this._styles=new xn(this.document.stylesProcessor),this._attrs.has("style")&&(this._styles.setTo(this._attrs.get("style")),this._attrs.delete("style")),this._customProperties=new Map,this._isAllowedInsideAttributeElement=!1}get childCount(){return this._children.length}get isEmpty(){return 0===this._children.length}get isAllowedInsideAttributeElement(){return this._isAllowedInsideAttributeElement}is(e,t=null){return t?t===this.name&&("element"===e||"view:element"===e):"element"===e||"view:element"===e||"node"===e||"view:node"===e}getChild(e){return this._children[e]}getChildIndex(e){return this._children.indexOf(e)}getChildren(){return this._children[Symbol.iterator]()}*getAttributeKeys(){this._classes.size>0&&(yield"class"),this._styles.isEmpty||(yield"style"),yield*this._attrs.keys()}*getAttributes(){yield*this._attrs.entries(),this._classes.size>0&&(yield["class",this.getAttribute("class")]),this._styles.isEmpty||(yield["style",this.getAttribute("style")])}getAttribute(e){if("class"==e)return this._classes.size>0?[...this._classes].join(" "):void 0;if("style"==e){const e=this._styles.toString();return""==e?void 0:e}return this._attrs.get(e)}hasAttribute(e){return"class"==e?this._classes.size>0:"style"==e?!this._styles.isEmpty:this._attrs.has(e)}isSimilar(e){if(!(e instanceof Sn))return!1;if(this===e)return!0;if(this.name!=e.name)return!1;if(this.isAllowedInsideAttributeElement!=e.isAllowedInsideAttributeElement)return!1;if(this._attrs.size!==e._attrs.size||this._classes.size!==e._classes.size||this._styles.size!==e._styles.size)return!1;for(const[t,i]of this._attrs)if(!e._attrs.has(t)||e._attrs.get(t)!==i)return!1;for(const t of this._classes)if(!e._classes.has(t))return!1;for(const t of this._styles.getStyleNames())if(!e._styles.has(t)||e._styles.getAsString(t)!==this._styles.getAsString(t))return!1;return!0}hasClass(...e){for(const t of e)if(!this._classes.has(t))return!1;return!0}getClassNames(){return this._classes.keys()}getStyle(e){return this._styles.getAsString(e)}getNormalizedStyle(e){return this._styles.getNormalized(e)}getStyleNames(e=!1){return this._styles.getStyleNames(e)}hasStyle(...e){for(const t of e)if(!this._styles.has(t))return!1;return!0}findAncestor(...e){const t=new js(...e);let i=this.parent;for(;i;){if(t.match(i))return i;i=i.parent}return null}getCustomProperty(e){return this._customProperties.get(e)}*getCustomProperties(){yield*this._customProperties.entries()}getIdentity(){const e=Array.from(this._classes).sort().join(","),t=this._styles.toString(),i=Array.from(this._attrs).map((e=>`${e[0]}="${e[1]}"`)).sort().join(" ");return this.name+(""==e?"":` class="${e}"`)+(t?` style="${t}"`:"")+(""==i?"":` ${i}`)}_clone(e=!1){const t=[];if(e)for(const s of this.getChildren())t.push(s._clone(e));const i=new this.constructor(this.document,this.name,this._attrs,t);return i._classes=new Set(this._classes),i._styles.set(this._styles.getNormalized()),i._customProperties=new Map(this._customProperties),i.getFillerOffset=this.getFillerOffset,i._isAllowedInsideAttributeElement=this.isAllowedInsideAttributeElement,i}_appendChild(e){return this._insertChild(this.childCount,e)}_insertChild(e,t){this._fireChange("children",this);let i=0;const s=function(e,t){return"string"==typeof t?[new Bs(e,t)]:(Cs(t)||(t=[t]),Array.from(t).map((t=>"string"==typeof t?new Bs(e,t):t instanceof Ls?new Bs(e,t.data):t)))}(this.document,t);for(const n of s)null!==n.parent&&n._remove(),n.parent=this,n.document=this.document,this._children.splice(e,0,n),e++,i++;return i}_removeChildren(e,t=1){this._fireChange("children",this);for(let i=e;i<e+t;i++)this._children[i].parent=null;return this._children.splice(e,t)}_setAttribute(e,t){t=String(t),this._fireChange("attributes",this),"class"==e?Pn(this._classes,t):"style"==e?this._styles.setTo(t):this._attrs.set(e,t)}_removeAttribute(e){return this._fireChange("attributes",this),"class"==e?this._classes.size>0&&(this._classes.clear(),!0):"style"==e?!this._styles.isEmpty&&(this._styles.clear(),!0):this._attrs.delete(e)}_addClass(e){this._fireChange("attributes",this);for(const t of Ss(e))this._classes.add(t)}_removeClass(e){this._fireChange("attributes",this);for(const t of Ss(e))this._classes.delete(t)}_setStyle(e,t){this._fireChange("attributes",this),this._styles.set(e,t)}_removeStyle(e){this._fireChange("attributes",this);for(const t of Ss(e))this._styles.remove(t)}_setCustomProperty(e,t){this._customProperties.set(e,t)}_removeCustomProperty(e){return this._customProperties.delete(e)}}function Pn(e,t){const i=t.split(/\s+/);e.clear(),i.forEach((t=>e.add(t)))}class On extends Sn{constructor(e,t,i,s){super(e,t,i,s),this.getFillerOffset=In}is(e,t=null){return t?t===this.name&&("containerElement"===e||"view:containerElement"===e||"element"===e||"view:element"===e):"containerElement"===e||"view:containerElement"===e||"element"===e||"view:element"===e||"node"===e||"view:node"===e}}function In(){const e=[...this.getChildren()],t=e[this.childCount-1];if(t&&t.is("element","br"))return this.childCount;for(const i of e)if(!i.is("uiElement"))return null;return this.childCount}class Rn extends On{constructor(e,t,i,s){super(e,t,i,s),this.set("isReadOnly",!1),this.set("isFocused",!1),this.bind("isReadOnly").to(e),this.bind("isFocused").to(e,"isFocused",(t=>t&&e.selection.editableElement==this)),this.listenTo(e.selection,"change",(()=>{this.isFocused=e.isFocused&&e.selection.editableElement==this}))}is(e,t=null){return t?t===this.name&&("editableElement"===e||"view:editableElement"===e||"containerElement"===e||"view:containerElement"===e||"element"===e||"view:element"===e):"editableElement"===e||"view:editableElement"===e||"containerElement"===e||"view:containerElement"===e||"element"===e||"view:element"===e||"node"===e||"view:node"===e}destroy(){this.stopListening()}}dt(Rn,ot);const zn=Symbol("rootName");class Mn extends Rn{constructor(e,t){super(e,t),this.rootName="main"}is(e,t=null){return t?t===this.name&&("rootElement"===e||"view:rootElement"===e||"editableElement"===e||"view:editableElement"===e||"containerElement"===e||"view:containerElement"===e||"element"===e||"view:element"===e):"rootElement"===e||"view:rootElement"===e||"editableElement"===e||"view:editableElement"===e||"containerElement"===e||"view:containerElement"===e||"element"===e||"view:element"===e||"node"===e||"view:node"===e}get rootName(){return this.getCustomProperty(zn)}set rootName(e){this._setCustomProperty(zn,e)}set _name(e){this.name=e}}class Nn{constructor(e={}){if(!e.boundaries&&!e.startPosition)throw new h("view-tree-walker-no-start-position",null);if(e.direction&&"forward"!=e.direction&&"backward"!=e.direction)throw new h("view-tree-walker-unknown-direction",e.startPosition,{direction:e.direction});this.boundaries=e.boundaries||null,e.startPosition?this.position=Dn._createAt(e.startPosition):this.position=Dn._createAt(e.boundaries["backward"==e.direction?"end":"start"]),this.direction=e.direction||"forward",this.singleCharacters=!!e.singleCharacters,this.shallow=!!e.shallow,this.ignoreElementEnd=!!e.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null}[Symbol.iterator](){return this}skip(e){let t,i,s;do{s=this.position,({done:t,value:i}=this.next())}while(!t&&e(i));t||(this.position=s)}next(){return"forward"==this.direction?this._next():this._previous()}_next(){let e=this.position.clone();const t=this.position,i=e.parent;if(null===i.parent&&e.offset===i.childCount)return{done:!0};if(i===this._boundaryEndParent&&e.offset==this.boundaries.end.offset)return{done:!0};let s;if(i instanceof Bs){if(e.isAtEnd)return this.position=Dn._createAfter(i),this._next();s=i.data[e.offset]}else s=i.getChild(e.offset);if(s instanceof Sn)return this.shallow?e.offset++:e=new Dn(s,0),this.position=e,this._formatReturnValue("elementStart",s,t,e,1);if(s instanceof Bs){if(this.singleCharacters)return e=new Dn(s,0),this.position=e,this._next();{let i,n=s.data.length;return s==this._boundaryEndParent?(n=this.boundaries.end.offset,i=new Ls(s,0,n),e=Dn._createAfter(i)):(i=new Ls(s,0,s.data.length),e.offset++),this.position=e,this._formatReturnValue("text",i,t,e,n)}}if("string"==typeof s){let s;s=this.singleCharacters?1:(i===this._boundaryEndParent?this.boundaries.end.offset:i.data.length)-e.offset;const n=new Ls(i,e.offset,s);return e.offset+=s,this.position=e,this._formatReturnValue("text",n,t,e,s)}return e=Dn._createAfter(i),this.position=e,this.ignoreElementEnd?this._next():this._formatReturnValue("elementEnd",i,t,e)}_previous(){let e=this.position.clone();const t=this.position,i=e.parent;if(null===i.parent&&0===e.offset)return{done:!0};if(i==this._boundaryStartParent&&e.offset==this.boundaries.start.offset)return{done:!0};let s;if(i instanceof Bs){if(e.isAtStart)return this.position=Dn._createBefore(i),this._previous();s=i.data[e.offset-1]}else s=i.getChild(e.offset-1);if(s instanceof Sn)return this.shallow?(e.offset--,this.position=e,this._formatReturnValue("elementStart",s,t,e,1)):(e=new Dn(s,s.childCount),this.position=e,this.ignoreElementEnd?this._previous():this._formatReturnValue("elementEnd",s,t,e));if(s instanceof Bs){if(this.singleCharacters)return e=new Dn(s,s.data.length),this.position=e,this._previous();{let i,n=s.data.length;if(s==this._boundaryStartParent){const t=this.boundaries.start.offset;i=new Ls(s,t,s.data.length-t),n=i.data.length,e=Dn._createBefore(i)}else i=new Ls(s,0,s.data.length),e.offset--;return this.position=e,this._formatReturnValue("text",i,t,e,n)}}if("string"==typeof s){let s;if(this.singleCharacters)s=1;else{const t=i===this._boundaryStartParent?this.boundaries.start.offset:0;s=e.offset-t}e.offset-=s;const n=new Ls(i,e.offset,s);return this.position=e,this._formatReturnValue("text",n,t,e,s)}return e=Dn._createBefore(i),this.position=e,this._formatReturnValue("elementStart",i,t,e,1)}_formatReturnValue(e,t,i,s,n){return t instanceof Ls&&(t.offsetInText+t.data.length==t.textNode.data.length&&("forward"!=this.direction||this.boundaries&&this.boundaries.end.isEqual(this.position)?i=Dn._createAfter(t.textNode):(s=Dn._createAfter(t.textNode),this.position=s)),0===t.offsetInText&&("backward"!=this.direction||this.boundaries&&this.boundaries.start.isEqual(this.position)?i=Dn._createBefore(t.textNode):(s=Dn._createBefore(t.textNode),this.position=s))),{done:!1,value:{type:e,item:t,previousPosition:i,nextPosition:s,length:n}}}}class Dn{constructor(e,t){this.parent=e,this.offset=t}get nodeAfter(){return this.parent.is("$text")?null:this.parent.getChild(this.offset)||null}get nodeBefore(){return this.parent.is("$text")?null:this.parent.getChild(this.offset-1)||null}get isAtStart(){return 0===this.offset}get isAtEnd(){const e=this.parent.is("$text")?this.parent.data.length:this.parent.childCount;return this.offset===e}get root(){return this.parent.root}get editableElement(){let e=this.parent;for(;!(e instanceof Rn);){if(!e.parent)return null;e=e.parent}return e}getShiftedBy(e){const t=Dn._createAt(this),i=t.offset+e;return t.offset=i<0?0:i,t}getLastMatchingPosition(e,t={}){t.startPosition=this;const i=new Nn(t);return i.skip(e),i.position}getAncestors(){return this.parent.is("documentFragment")?[this.parent]:this.parent.getAncestors({includeSelf:!0})}getCommonAncestor(e){const t=this.getAncestors(),i=e.getAncestors();let s=0;for(;t[s]==i[s]&&t[s];)s++;return 0===s?null:t[s-1]}is(e){return"position"===e||"view:position"===e}isEqual(e){return this.parent==e.parent&&this.offset==e.offset}isBefore(e){return"before"==this.compareWith(e)}isAfter(e){return"after"==this.compareWith(e)}compareWith(e){if(this.root!==e.root)return"different";if(this.isEqual(e))return"same";const t=this.parent.is("node")?this.parent.getPath():[],i=e.parent.is("node")?e.parent.getPath():[];t.push(this.offset),i.push(e.offset);const s=Ns(t,i);switch(s){case"prefix":return"before";case"extension":return"after";default:return t[s]<i[s]?"before":"after"}}getWalker(e={}){return e.startPosition=this,new Nn(e)}clone(){return new Dn(this.parent,this.offset)}static _createAt(e,t){if(e instanceof Dn)return new this(e.parent,e.offset);{const i=e;if("end"==t)t=i.is("$text")?i.data.length:i.childCount;else{if("before"==t)return this._createBefore(i);if("after"==t)return this._createAfter(i);if(0!==t&&!t)throw new h("view-createpositionat-offset-required",i)}return new Dn(i,t)}}static _createAfter(e){if(e.is("$textProxy"))return new Dn(e.textNode,e.offsetInText+e.data.length);if(!e.parent)throw new h("view-position-after-root",e,{root:e});return new Dn(e.parent,e.index+1)}static _createBefore(e){if(e.is("$textProxy"))return new Dn(e.textNode,e.offsetInText);if(!e.parent)throw new h("view-position-before-root",e,{root:e});return new Dn(e.parent,e.index)}}class Vn{constructor(e,t=null){this.start=e.clone(),this.end=t?t.clone():e.clone()}*[Symbol.iterator](){yield*new Nn({boundaries:this,ignoreElementEnd:!0})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){return this.start.parent===this.end.parent}get root(){return this.start.root}getEnlarged(){let e=this.start.getLastMatchingPosition(Bn,{direction:"backward"}),t=this.end.getLastMatchingPosition(Bn);return e.parent.is("$text")&&e.isAtStart&&(e=Dn._createBefore(e.parent)),t.parent.is("$text")&&t.isAtEnd&&(t=Dn._createAfter(t.parent)),new Vn(e,t)}getTrimmed(){let e=this.start.getLastMatchingPosition(Bn);if(e.isAfter(this.end)||e.isEqual(this.end))return new Vn(e,e);let t=this.end.getLastMatchingPosition(Bn,{direction:"backward"});const i=e.nodeAfter,s=t.nodeBefore;return i&&i.is("$text")&&(e=new Dn(i,0)),s&&s.is("$text")&&(t=new Dn(s,s.data.length)),new Vn(e,t)}isEqual(e){return this==e||this.start.isEqual(e.start)&&this.end.isEqual(e.end)}containsPosition(e){return e.isAfter(this.start)&&e.isBefore(this.end)}containsRange(e,t=!1){e.isCollapsed&&(t=!1);const i=this.containsPosition(e.start)||t&&this.start.isEqual(e.start),s=this.containsPosition(e.end)||t&&this.end.isEqual(e.end);return i&&s}getDifference(e){const t=[];return this.isIntersecting(e)?(this.containsPosition(e.start)&&t.push(new Vn(this.start,e.start)),this.containsPosition(e.end)&&t.push(new Vn(e.end,this.end))):t.push(this.clone()),t}getIntersection(e){if(this.isIntersecting(e)){let t=this.start,i=this.end;return this.containsPosition(e.start)&&(t=e.start),this.containsPosition(e.end)&&(i=e.end),new Vn(t,i)}return null}getWalker(e={}){return e.boundaries=this,new Nn(e)}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}getContainedElement(){if(this.isCollapsed)return null;let e=this.start.nodeAfter,t=this.end.nodeBefore;return this.start.parent.is("$text")&&this.start.isAtEnd&&this.start.parent.nextSibling&&(e=this.start.parent.nextSibling),this.end.parent.is("$text")&&this.end.isAtStart&&this.end.parent.previousSibling&&(t=this.end.parent.previousSibling),e&&e.is("element")&&e===t?e:null}clone(){return new Vn(this.start,this.end)}*getItems(e={}){e.boundaries=this,e.ignoreElementEnd=!0;const t=new Nn(e);for(const i of t)yield i.item}*getPositions(e={}){e.boundaries=this;const t=new Nn(e);yield t.position;for(const i of t)yield i.nextPosition}is(e){return"range"===e||"view:range"===e}isIntersecting(e){return this.start.isBefore(e.end)&&this.end.isAfter(e.start)}static _createFromParentsAndOffsets(e,t,i,s){return new this(new Dn(e,t),new Dn(i,s))}static _createFromPositionAndShift(e,t){const i=e,s=e.getShiftedBy(t);return t>0?new this(i,s):new this(s,i)}static _createIn(e){return this._createFromParentsAndOffsets(e,0,e,e.childCount)}static _createOn(e){const t=e.is("$textProxy")?e.offsetSize:1;return this._createFromPositionAndShift(Dn._createBefore(e),t)}}function Bn(e){return!(!e.item.is("attributeElement")&&!e.item.is("uiElement"))}function Ln(e){let t=0;for(const i of e)t++;return t}class Fn{constructor(e=null,t,i){this._ranges=[],this._lastRangeBackward=!1,this._isFake=!1,this._fakeSelectionLabel="",this.setTo(e,t,i)}get isFake(){return this._isFake}get fakeSelectionLabel(){return this._fakeSelectionLabel}get anchor(){if(!this._ranges.length)return null;const e=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?e.end:e.start).clone()}get focus(){if(!this._ranges.length)return null;const e=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?e.start:e.end).clone()}get isCollapsed(){return 1===this.rangeCount&&this._ranges[0].isCollapsed}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}get editableElement(){return this.anchor?this.anchor.editableElement:null}*getRanges(){for(const e of this._ranges)yield e.clone()}getFirstRange(){let e=null;for(const t of this._ranges)e&&!t.start.isBefore(e.start)||(e=t);return e?e.clone():null}getLastRange(){let e=null;for(const t of this._ranges)e&&!t.end.isAfter(e.end)||(e=t);return e?e.clone():null}getFirstPosition(){const e=this.getFirstRange();return e?e.start.clone():null}getLastPosition(){const e=this.getLastRange();return e?e.end.clone():null}isEqual(e){if(this.isFake!=e.isFake)return!1;if(this.isFake&&this.fakeSelectionLabel!=e.fakeSelectionLabel)return!1;if(this.rangeCount!=e.rangeCount)return!1;if(0===this.rangeCount)return!0;if(!this.anchor.isEqual(e.anchor)||!this.focus.isEqual(e.focus))return!1;for(const t of this._ranges){let i=!1;for(const s of e._ranges)if(t.isEqual(s)){i=!0;break}if(!i)return!1}return!0}isSimilar(e){if(this.isBackward!=e.isBackward)return!1;const t=Ln(this.getRanges());if(t!=Ln(e.getRanges()))return!1;if(0==t)return!0;for(let i of this.getRanges()){i=i.getTrimmed();let t=!1;for(let s of e.getRanges())if(s=s.getTrimmed(),i.start.isEqual(s.start)&&i.end.isEqual(s.end)){t=!0;break}if(!t)return!1}return!0}getSelectedElement(){return 1!==this.rangeCount?null:this.getFirstRange().getContainedElement()}setTo(e,t,i){if(null===e)this._setRanges([]),this._setFakeOptions(t);else if(e instanceof Fn||e instanceof jn)this._setRanges(e.getRanges(),e.isBackward),this._setFakeOptions({fake:e.isFake,label:e.fakeSelectionLabel});else if(e instanceof Vn)this._setRanges([e],t&&t.backward),this._setFakeOptions(t);else if(e instanceof Dn)this._setRanges([new Vn(e)]),this._setFakeOptions(t);else if(e instanceof Vs){const s=!!i&&!!i.backward;let n;if(void 0===t)throw new h("view-selection-setto-required-second-parameter",this);n="in"==t?Vn._createIn(e):"on"==t?Vn._createOn(e):new Vn(Dn._createAt(e,t)),this._setRanges([n],s),this._setFakeOptions(i)}else{if(!Cs(e))throw new h("view-selection-setto-not-selectable",this);this._setRanges(e,t&&t.backward),this._setFakeOptions(t)}this.fire("change")}setFocus(e,t){if(null===this.anchor)throw new h("view-selection-setfocus-no-ranges",this);const i=Dn._createAt(e,t);if("same"==i.compareWith(this.focus))return;const s=this.anchor;this._ranges.pop(),"before"==i.compareWith(s)?this._addRange(new Vn(i,s),!0):this._addRange(new Vn(s,i)),this.fire("change")}is(e){return"selection"===e||"view:selection"===e}_setRanges(e,t=!1){e=Array.from(e),this._ranges=[];for(const i of e)this._addRange(i);this._lastRangeBackward=!!t}_setFakeOptions(e={}){this._isFake=!!e.fake,this._fakeSelectionLabel=e.fake&&e.label||""}_addRange(e,t=!1){if(!(e instanceof Vn))throw new h("view-selection-add-range-not-range",this);this._pushRange(e),this._lastRangeBackward=!!t}_pushRange(e){for(const t of this._ranges)if(e.isIntersecting(t))throw new h("view-selection-range-intersects",this,{addedRange:e,intersectingRange:t});this._ranges.push(new Vn(e.start,e.end))}}dt(Fn,b);class jn{constructor(e=null,t,i){this._selection=new Fn,this._selection.delegate("change").to(this),this._selection.setTo(e,t,i)}get isFake(){return this._selection.isFake}get fakeSelectionLabel(){return this._selection.fakeSelectionLabel}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get isCollapsed(){return this._selection.isCollapsed}get rangeCount(){return this._selection.rangeCount}get isBackward(){return this._selection.isBackward}get editableElement(){return this._selection.editableElement}get _ranges(){return this._selection._ranges}*getRanges(){yield*this._selection.getRanges()}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getSelectedElement(){return this._selection.getSelectedElement()}isEqual(e){return this._selection.isEqual(e)}isSimilar(e){return this._selection.isSimilar(e)}is(e){return"selection"===e||"documentSelection"==e||"view:selection"==e||"view:documentSelection"==e}_setTo(e,t,i){this._selection.setTo(e,t,i)}_setFocus(e,t){this._selection.setFocus(e,t)}}dt(jn,b);class qn extends n{constructor(e,t,i){super(e,t),this.startRange=i,this._eventPhase="none",this._currentTarget=null}get eventPhase(){return this._eventPhase}get currentTarget(){return this._currentTarget}}const Hn=Symbol("bubbling contexts"),$n={fire(e,...t){try{const i=e instanceof n?e:new n(this,e),s=Gn(this);if(!s.size)return;if(Un(i,"capturing",this),Wn(s,"$capture",i,...t))return i.return;const o=i.startRange||this.selection.getFirstRange(),r=o?o.getContainedElement():null,a=!!r&&Boolean(Zn(s,r));let l=r||function(e){if(!e)return null;const t=e.start.parent,i=e.end.parent,s=t.getPath(),n=i.getPath();return s.length>n.length?t:i}(o);if(Un(i,"atTarget",l),!a){if(Wn(s,"$text",i,...t))return i.return;Un(i,"bubbling",l)}for(;l;){if(l.is("rootElement")){if(Wn(s,"$root",i,...t))return i.return}else if(l.is("element")&&Wn(s,l.name,i,...t))return i.return;if(Wn(s,l,i,...t))return i.return;l=l.parent,Un(i,"bubbling",l)}return Un(i,"bubbling",this),Wn(s,"$document",i,...t),i.return}catch(e){h.rethrowUnexpectedError(e,this)}},_addEventListener(e,t,i){const s=Ss(i.context||"$document"),n=Gn(this);for(const o of s){let s=n.get(o);s||(s=Object.create(b),n.set(o,s)),this.listenTo(s,e,t,i)}},_removeEventListener(e,t){const i=Gn(this);for(const s of i.values())this.stopListening(s,e,t)}};function Un(e,t,i){e instanceof qn&&(e._eventPhase=t,e._currentTarget=i)}function Wn(e,t,i,...s){const n="string"==typeof t?e.get(t):Zn(e,t);return!!n&&(n.fire(i,...s),i.stop.called)}function Zn(e,t){for(const[i,s]of e)if("function"==typeof i&&i(t))return s;return null}function Gn(e){return e[Hn]||(e[Hn]=new Map),e[Hn]}class Kn{constructor(e){this.selection=new jn,this.roots=new Es({idProperty:"rootName"}),this.stylesProcessor=e,this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("isComposing",!1),this._postFixers=new Set}getRoot(e="main"){return this.roots.get(e)}registerPostFixer(e){this._postFixers.add(e)}destroy(){this.roots.map((e=>e.destroy())),this.stopListening()}_callPostFixers(e){let t=!1;do{for(const i of this._postFixers)if(t=i(e),t)break}while(t)}}dt(Kn,$n),dt(Kn,ot);class Jn extends Sn{constructor(e,t,i,s){super(e,t,i,s),this.getFillerOffset=Yn,this._priority=10,this._id=null,this._clonesGroup=null}get priority(){return this._priority}get id(){return this._id}getElementsWithSameId(){if(null===this.id)throw new h("attribute-element-get-elements-with-same-id-no-id",this);return new Set(this._clonesGroup)}is(e,t=null){return t?t===this.name&&("attributeElement"===e||"view:attributeElement"===e||"element"===e||"view:element"===e):"attributeElement"===e||"view:attributeElement"===e||"element"===e||"view:element"===e||"node"===e||"view:node"===e}isSimilar(e){return null!==this.id||null!==e.id?this.id===e.id:super.isSimilar(e)&&this.priority==e.priority}_clone(e){const t=super._clone(e);return t._priority=this._priority,t._id=this._id,t}}function Yn(){if(Qn(this))return null;let e=this.parent;for(;e&&e.is("attributeElement");){if(Qn(e)>1)return null;e=e.parent}return!e||Qn(e)>1?null:this.childCount}function Qn(e){return Array.from(e.getChildren()).filter((e=>!e.is("uiElement"))).length}Jn.DEFAULT_PRIORITY=10;class Xn extends Sn{constructor(e,t,i,s){super(e,t,i,s),this._isAllowedInsideAttributeElement=!0,this.getFillerOffset=eo}is(e,t=null){return t?t===this.name&&("emptyElement"===e||"view:emptyElement"===e||"element"===e||"view:element"===e):"emptyElement"===e||"view:emptyElement"===e||"element"===e||"view:element"===e||"node"===e||"view:node"===e}_insertChild(e,t){if(t&&(t instanceof Vs||Array.from(t).length>0))throw new h("view-emptyelement-cannot-add",[this,t])}}function eo(){return null}const to=navigator.userAgent.toLowerCase(),io={isMac:function(e){return e.indexOf("macintosh")>-1}(to),isGecko:function(e){return!!e.match(/gecko\/\d+/)}(to),isSafari:function(e){return e.indexOf(" applewebkit/")>-1&&-1===e.indexOf("chrome")}(to),isAndroid:function(e){return e.indexOf("android")>-1}(to),isBlink:function(e){return e.indexOf("chrome/")>-1&&e.indexOf("edge/")<0}(to),features:{isRegExpUnicodePropertySupported:function(){let e=!1;try{e=0==="\u0107".search(new RegExp("[\\p{L}]","u"))}catch(e){}return e}()}},so={ctrl:"\u2303",cmd:"\u2318",alt:"\u2325",shift:"\u21e7"},no={ctrl:"Ctrl+",alt:"Alt+",shift:"Shift+"},oo=function(){const e={arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,backspace:8,delete:46,enter:13,space:32,esc:27,tab:9,ctrl:1114112,shift:2228224,alt:4456448,cmd:8912896};for(let t=65;t<=90;t++)e[String.fromCharCode(t).toLowerCase()]=t;for(let t=48;t<=57;t++)e[t-48]=t;for(let t=112;t<=123;t++)e["f"+(t-111)]=t;return e}(),ro=Object.fromEntries(Object.entries(oo).map((([e,t])=>[t,e.charAt(0).toUpperCase()+e.slice(1)])));function ao(e){let t;if("string"==typeof e){if(t=oo[e.toLowerCase()],!t)throw new h("keyboard-unknown-key",null,{key:e})}else t=e.keyCode+(e.altKey?oo.alt:0)+(e.ctrlKey?oo.ctrl:0)+(e.shiftKey?oo.shift:0)+(e.metaKey?oo.cmd:0);return t}function lo(e){return"string"==typeof e&&(e=function(e){return e.split("+").map((e=>e.trim()))}(e)),e.map((e=>"string"==typeof e?function(e){if(e.endsWith("!"))return ao(e.slice(0,-1));const t=ao(e);return io.isMac&&t==oo.ctrl?oo.cmd:t}(e):e)).reduce(((e,t)=>t+e),0)}function co(e){let t=lo(e);return Object.entries(io.isMac?so:no).reduce(((e,[i,s])=>(0!=(t&oo[i])&&(t&=~oo[i],e+=s),e)),"")+(t?ro[t]:"")}function ho(e,t){const i="ltr"===t;switch(e){case oo.arrowleft:return i?"left":"right";case oo.arrowright:return i?"right":"left";case oo.arrowup:return"up";case oo.arrowdown:return"down"}}function uo(e,t){const i=ho(e,t);return"down"===i||"right"===i}class mo extends Sn{constructor(e,t,i,s){super(e,t,i,s),this._isAllowedInsideAttributeElement=!0,this.getFillerOffset=fo}is(e,t=null){return t?t===this.name&&("uiElement"===e||"view:uiElement"===e||"element"===e||"view:element"===e):"uiElement"===e||"view:uiElement"===e||"element"===e||"view:element"===e||"node"===e||"view:node"===e}_insertChild(e,t){if(t&&(t instanceof Vs||Array.from(t).length>0))throw new h("view-uielement-cannot-add",this)}render(e){return this.toDomElement(e)}toDomElement(e){const t=e.createElement(this.name);for(const i of this.getAttributeKeys())t.setAttribute(i,this.getAttribute(i));return t}}function po(e){e.document.on("arrowKey",((t,i)=>function(e,t,i){if(t.keyCode==oo.arrowright){const e=t.domTarget.ownerDocument.defaultView.getSelection(),s=1==e.rangeCount&&e.getRangeAt(0).collapsed;if(s||t.shiftKey){const t=e.focusNode,n=e.focusOffset,o=i.domPositionToView(t,n);if(null===o)return;let r=!1;const a=o.getLastMatchingPosition((e=>(e.item.is("uiElement")&&(r=!0),!(!e.item.is("uiElement")&&!e.item.is("attributeElement")))));if(r){const t=i.viewPositionToDom(a);s?e.collapse(t.parent,t.offset):e.extend(t.parent,t.offset)}}}}(0,i,e.domConverter)),{priority:"low"})}function fo(){return null}class go extends Sn{constructor(e,t,i,s){super(e,t,i,s),this._isAllowedInsideAttributeElement=!0,this.getFillerOffset=wo}is(e,t=null){return t?t===this.name&&("rawElement"===e||"view:rawElement"===e||"element"===e||"view:element"===e):"rawElement"===e||"view:rawElement"===e||e===this.name||e==="view:"+this.name||"element"===e||"view:element"===e||"node"===e||"view:node"===e}_insertChild(e,t){if(t&&(t instanceof Vs||Array.from(t).length>0))throw new h("view-rawelement-cannot-add",[this,t])}}function wo(){return null}class bo{constructor(e,t){this.document=e,this._children=[],t&&this._insertChild(0,t)}[Symbol.iterator](){return this._children[Symbol.iterator]()}get childCount(){return this._children.length}get isEmpty(){return 0===this.childCount}get root(){return this}get parent(){return null}is(e){return"documentFragment"===e||"view:documentFragment"===e}_appendChild(e){return this._insertChild(this.childCount,e)}getChild(e){return this._children[e]}getChildIndex(e){return this._children.indexOf(e)}getChildren(){return this._children[Symbol.iterator]()}_insertChild(e,t){this._fireChange("children",this);let i=0;const s=function(e,t){return"string"==typeof t?[new Bs(e,t)]:(Cs(t)||(t=[t]),Array.from(t).map((t=>"string"==typeof t?new Bs(e,t):t instanceof Ls?new Bs(e,t.data):t)))}(this.document,t);for(const n of s)null!==n.parent&&n._remove(),n.parent=this,this._children.splice(e,0,n),e++,i++;return i}_removeChildren(e,t=1){this._fireChange("children",this);for(let i=e;i<e+t;i++)this._children[i].parent=null;return this._children.splice(e,t)}_fireChange(e,t){this.fire("change:"+e,t)}}dt(bo,b);class vo{constructor(e){this.document=e,this._cloneGroups=new Map}setSelection(e,t,i){this.document.selection._setTo(e,t,i)}setSelectionFocus(e,t){this.document.selection._setFocus(e,t)}createDocumentFragment(e){return new bo(this.document,e)}createText(e){return new Bs(this.document,e)}createAttributeElement(e,t,i={}){const s=new Jn(this.document,e,t);return"number"==typeof i.priority&&(s._priority=i.priority),i.id&&(s._id=i.id),s}createContainerElement(e,t,i={}){const s=new On(this.document,e,t);return void 0!==i.isAllowedInsideAttributeElement&&(s._isAllowedInsideAttributeElement=i.isAllowedInsideAttributeElement),s}createEditableElement(e,t){const i=new Rn(this.document,e,t);return i._document=this.document,i}createEmptyElement(e,t,i={}){const s=new Xn(this.document,e,t);return void 0!==i.isAllowedInsideAttributeElement&&(s._isAllowedInsideAttributeElement=i.isAllowedInsideAttributeElement),s}createUIElement(e,t,i,s={}){const n=new mo(this.document,e,t);return i&&(n.render=i),void 0!==s.isAllowedInsideAttributeElement&&(n._isAllowedInsideAttributeElement=s.isAllowedInsideAttributeElement),n}createRawElement(e,t,i,s={}){const n=new go(this.document,e,t);return n.render=i||(()=>{}),void 0!==s.isAllowedInsideAttributeElement&&(n._isAllowedInsideAttributeElement=s.isAllowedInsideAttributeElement),n}setAttribute(e,t,i){i._setAttribute(e,t)}removeAttribute(e,t){t._removeAttribute(e)}addClass(e,t){t._addClass(e)}removeClass(e,t){t._removeClass(e)}setStyle(e,t,i){xt(e)&&void 0===i&&(i=t),i._setStyle(e,t)}removeStyle(e,t){t._removeStyle(e)}setCustomProperty(e,t,i){i._setCustomProperty(e,t)}removeCustomProperty(e,t){return t._removeCustomProperty(e)}breakAttributes(e){return e instanceof Dn?this._breakAttributes(e):this._breakAttributesRange(e)}breakContainer(e){const t=e.parent;if(!t.is("containerElement"))throw new h("view-writer-break-non-container-element",this.document);if(!t.parent)throw new h("view-writer-break-root",this.document);if(e.isAtStart)return Dn._createBefore(t);if(!e.isAtEnd){const i=t._clone(!1);this.insert(Dn._createAfter(t),i);const s=new Vn(e,Dn._createAt(t,"end")),n=new Dn(i,0);this.move(s,n)}return Dn._createAfter(t)}mergeAttributes(e){const t=e.offset,i=e.parent;if(i.is("$text"))return e;if(i.is("attributeElement")&&0===i.childCount){const e=i.parent,t=i.index;return i._remove(),this._removeFromClonedElementsGroup(i),this.mergeAttributes(new Dn(e,t))}const s=i.getChild(t-1),n=i.getChild(t);if(!s||!n)return e;if(s.is("$text")&&n.is("$text"))return xo(s,n);if(s.is("attributeElement")&&n.is("attributeElement")&&s.isSimilar(n)){const e=s.childCount;return s._appendChild(n.getChildren()),n._remove(),this._removeFromClonedElementsGroup(n),this.mergeAttributes(new Dn(s,e))}return e}mergeContainers(e){const t=e.nodeBefore,i=e.nodeAfter;if(!(t&&i&&t.is("containerElement")&&i.is("containerElement")))throw new h("view-writer-merge-containers-invalid-position",this.document);const s=t.getChild(t.childCount-1),n=s instanceof Bs?Dn._createAt(s,"end"):Dn._createAt(t,"end");return this.move(Vn._createIn(i),Dn._createAt(t,"end")),this.remove(Vn._createOn(i)),n}insert(e,t){Co(t=Cs(t)?[...t]:[t],this.document);const i=t.reduce(((e,t)=>{const i=e[e.length-1],s=!(t.is("uiElement")&&t.isAllowedInsideAttributeElement);return i&&i.breakAttributes==s?i.nodes.push(t):e.push({breakAttributes:s,nodes:[t]}),e}),[]);let s=null,n=e;for(const{nodes:o,breakAttributes:r}of i){const e=this._insertNodes(n,o,r);s||(s=e.start),n=e.end}return s?new Vn(s,n):new Vn(e)}remove(e){const t=e instanceof Vn?e:Vn._createOn(e);if(So(t,this.document),t.isCollapsed)return new bo(this.document);const{start:i,end:s}=this._breakAttributesRange(t,!0),n=i.parent,o=s.offset-i.offset,r=n._removeChildren(i.offset,o);for(const l of r)this._removeFromClonedElementsGroup(l);const a=this.mergeAttributes(i);return t.start=a,t.end=a.clone(),new bo(this.document,r)}clear(e,t){So(e,this.document);const i=e.getWalker({direction:"backward",ignoreElementEnd:!0});for(const s of i){const i=s.item;let n;if(i.is("element")&&t.isSimilar(i))n=Vn._createOn(i);else if(!s.nextPosition.isAfter(e.start)&&i.is("$textProxy")){const e=i.getAncestors().find((e=>e.is("element")&&t.isSimilar(e)));e&&(n=Vn._createIn(e))}n&&(n.end.isAfter(e.end)&&(n.end=e.end),n.start.isBefore(e.start)&&(n.start=e.start),this.remove(n))}}move(e,t){let i;if(t.isAfter(e.end)){const s=(t=this._breakAttributes(t,!0)).parent,n=s.childCount;e=this._breakAttributesRange(e,!0),i=this.remove(e),t.offset+=s.childCount-n}else i=this.remove(e);return this.insert(t,i)}wrap(e,t){if(!(t instanceof Jn))throw new h("view-writer-wrap-invalid-attribute",this.document);if(So(e,this.document),e.isCollapsed){let s=e.start;s.parent.is("element")&&(i=s.parent,!Array.from(i.getChildren()).some((e=>!e.is("uiElement"))))&&(s=s.getLastMatchingPosition((e=>e.item.is("uiElement")))),s=this._wrapPosition(s,t);const n=this.document.selection;return n.isCollapsed&&n.getFirstPosition().isEqual(e.start)&&this.setSelection(s),new Vn(s)}return this._wrapRange(e,t);var i}unwrap(e,t){if(!(t instanceof Jn))throw new h("view-writer-unwrap-invalid-attribute",this.document);if(So(e,this.document),e.isCollapsed)return e;const{start:i,end:s}=this._breakAttributesRange(e,!0),n=i.parent,o=this._unwrapChildren(n,i.offset,s.offset,t),r=this.mergeAttributes(o.start);r.isEqual(o.start)||o.end.offset--;const a=this.mergeAttributes(o.end);return new Vn(r,a)}rename(e,t){const i=new On(this.document,e,t.getAttributes());return this.insert(Dn._createAfter(t),i),this.move(Vn._createIn(t),Dn._createAt(i,0)),this.remove(Vn._createOn(t)),i}clearClonedElementsGroup(e){this._cloneGroups.delete(e)}createPositionAt(e,t){return Dn._createAt(e,t)}createPositionAfter(e){return Dn._createAfter(e)}createPositionBefore(e){return Dn._createBefore(e)}createRange(e,t){return new Vn(e,t)}createRangeOn(e){return Vn._createOn(e)}createRangeIn(e){return Vn._createIn(e)}createSelection(e,t,i){return new Fn(e,t,i)}_insertNodes(e,t,i){let s,n;if(s=i?yo(e):e.parent.is("$text")?e.parent.parent:e.parent,!s)throw new h("view-writer-invalid-position-container",this.document);n=i?this._breakAttributes(e,!0):e.parent.is("$text")?Ao(e):e;const o=s._insertChild(n.offset,t);for(const c of t)this._addToClonedElementsGroup(c);const r=n.getShiftedBy(o),a=this.mergeAttributes(n);a.isEqual(n)||r.offset--;const l=this.mergeAttributes(r);return new Vn(a,l)}_wrapChildren(e,t,i,s){let n=t;const o=[];for(;n<i;){const t=e.getChild(n),i=t.is("$text"),r=t.is("attributeElement"),a=t.isAllowedInsideAttributeElement;if(r&&this._wrapAttributeElement(s,t))o.push(new Dn(e,n));else if(i||a||r&&_o(s,t)){const i=s._clone();t._remove(),i._appendChild(t),e._insertChild(n,i),this._addToClonedElementsGroup(i),o.push(new Dn(e,n))}else r&&this._wrapChildren(t,0,t.childCount,s);n++}let r=0;for(const a of o)a.offset-=r,a.offset!=t&&(this.mergeAttributes(a).isEqual(a)||(r++,i--));return Vn._createFromParentsAndOffsets(e,t,e,i)}_unwrapChildren(e,t,i,s){let n=t;const o=[];for(;n<i;){const t=e.getChild(n);if(t.is("attributeElement"))if(t.isSimilar(s)){const s=t.getChildren(),r=t.childCount;t._remove(),e._insertChild(n,s),this._removeFromClonedElementsGroup(t),o.push(new Dn(e,n),new Dn(e,n+r)),n+=r,i+=r-1}else this._unwrapAttributeElement(s,t)?(o.push(new Dn(e,n),new Dn(e,n+1)),n++):(this._unwrapChildren(t,0,t.childCount,s),n++);else n++}let r=0;for(const a of o)a.offset-=r,a.offset!=t&&a.offset!=i&&(this.mergeAttributes(a).isEqual(a)||(r++,i--));return Vn._createFromParentsAndOffsets(e,t,e,i)}_wrapRange(e,t){const{start:i,end:s}=this._breakAttributesRange(e,!0),n=i.parent,o=this._wrapChildren(n,i.offset,s.offset,t),r=this.mergeAttributes(o.start);r.isEqual(o.start)||o.end.offset--;const a=this.mergeAttributes(o.end);return new Vn(r,a)}_wrapPosition(e,t){if(t.isSimilar(e.parent))return ko(e.clone());e.parent.is("$text")&&(e=Ao(e));const i=this.createAttributeElement();i._priority=Number.POSITIVE_INFINITY,i.isSimilar=()=>!1,e.parent._insertChild(e.offset,i);const s=new Vn(e,e.getShiftedBy(1));this.wrap(s,t);const n=new Dn(i.parent,i.index);i._remove();const o=n.nodeBefore,r=n.nodeAfter;return o instanceof Bs&&r instanceof Bs?xo(o,r):ko(n)}_wrapAttributeElement(e,t){if(!Po(e,t))return!1;if(e.name!==t.name||e.priority!==t.priority)return!1;for(const i of e.getAttributeKeys())if("class"!==i&&"style"!==i&&t.hasAttribute(i)&&t.getAttribute(i)!==e.getAttribute(i))return!1;for(const i of e.getStyleNames())if(t.hasStyle(i)&&t.getStyle(i)!==e.getStyle(i))return!1;for(const i of e.getAttributeKeys())"class"!==i&&"style"!==i&&(t.hasAttribute(i)||this.setAttribute(i,e.getAttribute(i),t));for(const i of e.getStyleNames())t.hasStyle(i)||this.setStyle(i,e.getStyle(i),t);for(const i of e.getClassNames())t.hasClass(i)||this.addClass(i,t);return!0}_unwrapAttributeElement(e,t){if(!Po(e,t))return!1;if(e.name!==t.name||e.priority!==t.priority)return!1;for(const i of e.getAttributeKeys())if("class"!==i&&"style"!==i&&(!t.hasAttribute(i)||t.getAttribute(i)!==e.getAttribute(i)))return!1;if(!t.hasClass(...e.getClassNames()))return!1;for(const i of e.getStyleNames())if(!t.hasStyle(i)||t.getStyle(i)!==e.getStyle(i))return!1;for(const i of e.getAttributeKeys())"class"!==i&&"style"!==i&&this.removeAttribute(i,t);return this.removeClass(Array.from(e.getClassNames()),t),this.removeStyle(Array.from(e.getStyleNames()),t),!0}_breakAttributesRange(e,t=!1){const i=e.start,s=e.end;if(So(e,this.document),e.isCollapsed){const i=this._breakAttributes(e.start,t);return new Vn(i,i)}const n=this._breakAttributes(s,t),o=n.parent.childCount,r=this._breakAttributes(i,t);return n.offset+=n.parent.childCount-o,new Vn(r,n)}_breakAttributes(e,t=!1){const i=e.offset,s=e.parent;if(e.parent.is("emptyElement"))throw new h("view-writer-cannot-break-empty-element",this.document);if(e.parent.is("uiElement"))throw new h("view-writer-cannot-break-ui-element",this.document);if(e.parent.is("rawElement"))throw new h("view-writer-cannot-break-raw-element",this.document);if(!t&&s.is("$text")&&To(s.parent))return e.clone();if(To(s))return e.clone();if(s.is("$text"))return this._breakAttributes(Ao(e),t);if(i==s.childCount){const e=new Dn(s.parent,s.index+1);return this._breakAttributes(e,t)}if(0===i){const e=new Dn(s.parent,s.index);return this._breakAttributes(e,t)}{const e=s.index+1,n=s._clone();s.parent._insertChild(e,n),this._addToClonedElementsGroup(n);const o=s.childCount-i,r=s._removeChildren(i,o);n._appendChild(r);const a=new Dn(s.parent,e);return this._breakAttributes(a,t)}}_addToClonedElementsGroup(e){if(!e.root.is("rootElement"))return;if(e.is("element"))for(const s of e.getChildren())this._addToClonedElementsGroup(s);const t=e.id;if(!t)return;let i=this._cloneGroups.get(t);i||(i=new Set,this._cloneGroups.set(t,i)),i.add(e),e._clonesGroup=i}_removeFromClonedElementsGroup(e){if(e.is("element"))for(const s of e.getChildren())this._removeFromClonedElementsGroup(s);const t=e.id;if(!t)return;const i=this._cloneGroups.get(t);i&&i.delete(e)}}function yo(e){let t=e.parent;for(;!To(t);){if(!t)return;t=t.parent}return t}function _o(e,t){return e.priority<t.priority||!(e.priority>t.priority)&&e.getIdentity()<t.getIdentity()}function ko(e){const t=e.nodeBefore;if(t&&t.is("$text"))return new Dn(t,t.data.length);const i=e.nodeAfter;return i&&i.is("$text")?new Dn(i,0):e}function Ao(e){if(e.offset==e.parent.data.length)return new Dn(e.parent.parent,e.parent.index+1);if(0===e.offset)return new Dn(e.parent.parent,e.parent.index);const t=e.parent.data.slice(e.offset);return e.parent._data=e.parent.data.slice(0,e.offset),e.parent.parent._insertChild(e.parent.index+1,new Bs(e.root.document,t)),new Dn(e.parent.parent,e.parent.index+1)}function xo(e,t){const i=e.data.length;return e._data+=t.data,t._remove(),new Dn(e,i)}function Co(e,t){for(const i of e){if(!Eo.some((e=>i instanceof e)))throw new h("view-writer-insert-invalid-node-type",t);i.is("$text")||Co(i.getChildren(),t)}}const Eo=[Bs,Jn,On,Xn,go,mo];function To(e){return e&&(e.is("containerElement")||e.is("documentFragment"))}function So(e,t){const i=yo(e.start),s=yo(e.end);if(!i||!s||i!==s)throw new h("view-writer-invalid-range-container",t)}function Po(e,t){return null===e.id&&null===t.id}function Oo(e){return"[object Text]"==Object.prototype.toString.call(e)}const Io=e=>e.createTextNode("\xa0"),Ro=e=>{const t=e.createElement("span");return t.dataset.ckeFiller=!0,t.innerHTML="\xa0",t},zo=e=>{const t=e.createElement("br");return t.dataset.ckeFiller=!0,t},Mo="\u2060".repeat(7);function No(e){return Oo(e)&&e.data.substr(0,7)===Mo}function Do(e){return 7==e.data.length&&No(e)}function Vo(e){return No(e)?e.data.slice(7):e.data}function Bo(e,t){if(t.keyCode==oo.arrowleft){const e=t.domTarget.ownerDocument.defaultView.getSelection();if(1==e.rangeCount&&e.getRangeAt(0).collapsed){const t=e.getRangeAt(0).startContainer,i=e.getRangeAt(0).startOffset;No(t)&&i<=7&&e.collapse(t,0)}}}function Lo(e,t,i,s=!1){i=i||function(e,t){return e===t},Array.isArray(e)||(e=Array.prototype.slice.call(e)),Array.isArray(t)||(t=Array.prototype.slice.call(t));const n=function(e,t,i){const s=Fo(e,t,i);if(-1===s)return{firstIndex:-1,lastIndexOld:-1,lastIndexNew:-1};const n=Fo(jo(e,s),jo(t,s),i);return{firstIndex:s,lastIndexOld:e.length-n,lastIndexNew:t.length-n}}(e,t,i);return s?function(e,t){const{firstIndex:i,lastIndexOld:s,lastIndexNew:n}=e;if(-1===i)return Array(t).fill("equal");let o=[];return i>0&&(o=o.concat(Array(i).fill("equal"))),n-i>0&&(o=o.concat(Array(n-i).fill("insert"))),s-i>0&&(o=o.concat(Array(s-i).fill("delete"))),n<t&&(o=o.concat(Array(t-n).fill("equal"))),o}(n,t.length):function(e,t){const i=[],{firstIndex:s,lastIndexOld:n,lastIndexNew:o}=t;return o-s>0&&i.push({index:s,type:"insert",values:e.slice(s,o)}),n-s>0&&i.push({index:s+(o-s),type:"delete",howMany:n-s}),i}(t,n)}function Fo(e,t,i){for(let s=0;s<Math.max(e.length,t.length);s++)if(void 0===e[s]||void 0===t[s]||!i(e[s],t[s]))return s;return-1}function jo(e,t){return e.slice(t).reverse()}function qo(e,t,i){i=i||function(e,t){return e===t};const s=e.length,n=t.length;if(s>200||n>200||s+n>300)return qo.fastDiff(e,t,i,!0);let o,r;if(n<s){const i=e;e=t,t=i,o="delete",r="insert"}else o="insert",r="delete";const a=e.length,l=t.length,c=l-a,h={},d={};function u(s){const n=(void 0!==d[s-1]?d[s-1]:-1)+1,c=void 0!==d[s+1]?d[s+1]:-1,u=n>c?-1:1;h[s+u]&&(h[s]=h[s+u].slice(0)),h[s]||(h[s]=[]),h[s].push(n>c?o:r);let m=Math.max(n,c),p=m-s;for(;p<a&&m<l&&i(e[p],t[m]);)p++,m++,h[s].push("equal");return m}let m,p=0;do{for(m=-p;m<c;m++)d[m]=u(m);for(m=c+p;m>c;m--)d[m]=u(m);d[c]=u(c),p++}while(d[c]!==l);return h[c].slice(1)}function Ho(e,t,i){e.insertBefore(i,e.childNodes[t]||null)}function $o(e){const t=e.parentNode;t&&t.removeChild(e)}function Uo(e){if(e){if(e.defaultView)return e instanceof e.defaultView.Document;if(e.ownerDocument&&e.ownerDocument.defaultView)return e instanceof e.ownerDocument.defaultView.Node}return!1}qo.fastDiff=Lo;class Wo{constructor(e,t){this.domDocuments=new Set,this.domConverter=e,this.markedAttributes=new Set,this.markedChildren=new Set,this.markedTexts=new Set,this.selection=t,this.isFocused=!1,this._inlineFiller=null,this._fakeSelectionContainer=null}markToSync(e,t){if("text"===e)this.domConverter.mapViewToDom(t.parent)&&this.markedTexts.add(t);else{if(!this.domConverter.mapViewToDom(t))return;if("attributes"===e)this.markedAttributes.add(t);else{if("children"!==e)throw new h("view-renderer-unknown-type",this);this.markedChildren.add(t)}}}render(){let e;for(const t of this.markedChildren)this._updateChildrenMappings(t);this._inlineFiller&&!this._isSelectionInInlineFiller()&&this._removeInlineFiller(),this._inlineFiller?e=this._getInlineFillerPosition():this._needsInlineFillerAtSelection()&&(e=this.selection.getFirstPosition(),this.markedChildren.add(e.parent));for(const t of this.markedAttributes)this._updateAttrs(t);for(const t of this.markedChildren)this._updateChildren(t,{inlineFillerPosition:e});for(const t of this.markedTexts)!this.markedChildren.has(t.parent)&&this.domConverter.mapViewToDom(t.parent)&&this._updateText(t,{inlineFillerPosition:e});if(e){const t=this.domConverter.viewPositionToDom(e),i=t.parent.ownerDocument;No(t.parent)?this._inlineFiller=t.parent:this._inlineFiller=Zo(i,t.parent,t.offset)}else this._inlineFiller=null;this._updateFocus(),this._updateSelection(),this.markedTexts.clear(),this.markedAttributes.clear(),this.markedChildren.clear()}_updateChildrenMappings(e){const t=this.domConverter.mapViewToDom(e);if(!t)return;const i=Array.from(this.domConverter.mapViewToDom(e).childNodes),s=Array.from(this.domConverter.viewChildrenToDom(e,t.ownerDocument,{withChildren:!1})),n=this._diffNodeLists(i,s),o=this._findReplaceActions(n,i,s);if(-1!==o.indexOf("replace")){const t={equal:0,insert:0,delete:0};for(const n of o)if("replace"===n){const n=t.equal+t.insert,o=t.equal+t.delete,r=e.getChild(n);!r||r.is("uiElement")||r.is("rawElement")||this._updateElementMappings(r,i[o]),$o(s[n]),t.equal++}else t[n]++}}_updateElementMappings(e,t){this.domConverter.unbindDomElement(t),this.domConverter.bindElements(t,e),this.markedChildren.add(e),this.markedAttributes.add(e)}_getInlineFillerPosition(){const e=this.selection.getFirstPosition();return e.parent.is("$text")?Dn._createBefore(this.selection.getFirstPosition().parent):e}_isSelectionInInlineFiller(){if(1!=this.selection.rangeCount||!this.selection.isCollapsed)return!1;const e=this.selection.getFirstPosition(),t=this.domConverter.viewPositionToDom(e);return!!(t&&Oo(t.parent)&&No(t.parent))}_removeInlineFiller(){const e=this._inlineFiller;if(!No(e))throw new h("view-renderer-filler-was-lost",this);Do(e)?e.parentNode.removeChild(e):e.data=e.data.substr(7),this._inlineFiller=null}_needsInlineFillerAtSelection(){if(1!=this.selection.rangeCount||!this.selection.isCollapsed)return!1;const e=this.selection.getFirstPosition(),t=e.parent,i=e.offset;if(!this.domConverter.mapViewToDom(t.root))return!1;if(!t.is("element"))return!1;if(!function(e){if("false"==e.getAttribute("contenteditable"))return!1;const t=e.findAncestor((e=>e.hasAttribute("contenteditable")));return!t||"true"==t.getAttribute("contenteditable")}(t))return!1;if(i===t.getFillerOffset())return!1;const s=e.nodeBefore,n=e.nodeAfter;return!(s instanceof Bs||n instanceof Bs)}_updateText(e,t){const i=this.domConverter.findCorrespondingDomText(e),s=this.domConverter.viewToDom(e,i.ownerDocument),n=i.data;let o=s.data;const r=t.inlineFillerPosition;if(r&&r.parent==e.parent&&r.offset==e.index&&(o=Mo+o),n!=o){const e=Lo(n,o);for(const t of e)"insert"===t.type?i.insertData(t.index,t.values.join("")):i.deleteData(t.index,t.howMany)}}_updateAttrs(e){const t=this.domConverter.mapViewToDom(e);if(!t)return;const i=Array.from(t.attributes).map((e=>e.name)),s=e.getAttributeKeys();for(const n of s)t.setAttribute(n,e.getAttribute(n));for(const n of i)e.hasAttribute(n)||t.removeAttribute(n)}_updateChildren(e,t){const i=this.domConverter.mapViewToDom(e);if(!i)return;const s=t.inlineFillerPosition,n=this.domConverter.mapViewToDom(e).childNodes,o=Array.from(this.domConverter.viewChildrenToDom(e,i.ownerDocument,{bind:!0,inlineFillerPosition:s}));s&&s.parent===e&&Zo(i.ownerDocument,o,s.offset);const r=this._diffNodeLists(n,o);let a=0;const l=new Set;for(const c of r)"delete"===c?(l.add(n[a]),$o(n[a])):"equal"===c&&a++;a=0;for(const c of r)"insert"===c?(Ho(i,a,o[a]),a++):"equal"===c&&(this._markDescendantTextToSync(this.domConverter.domToView(o[a])),a++);for(const c of l)c.parentNode||this.domConverter.unbindDomElement(c)}_diffNodeLists(e,t){return qo(e=function(e,t){const i=Array.from(e);return 0!=i.length&&t?(i[i.length-1]==t&&i.pop(),i):i}(e,this._fakeSelectionContainer),t,Ko.bind(null,this.domConverter))}_findReplaceActions(e,t,i){if(-1===e.indexOf("insert")||-1===e.indexOf("delete"))return e;let s=[],n=[],o=[];const r={equal:0,insert:0,delete:0};for(const a of e)"insert"===a?o.push(i[r.equal+r.insert]):"delete"===a?n.push(t[r.equal+r.delete]):(s=s.concat(qo(n,o,Go).map((e=>"equal"===e?"replace":e))),s.push("equal"),n=[],o=[]),r[a]++;return s.concat(qo(n,o,Go).map((e=>"equal"===e?"replace":e)))}_markDescendantTextToSync(e){if(e)if(e.is("$text"))this.markedTexts.add(e);else if(e.is("element"))for(const t of e.getChildren())this._markDescendantTextToSync(t)}_updateSelection(){if(0===this.selection.rangeCount)return this._removeDomSelection(),void this._removeFakeSelection();const e=this.domConverter.mapViewToDom(this.selection.editableElement);this.isFocused&&e&&(this.selection.isFake?this._updateFakeSelection(e):(this._removeFakeSelection(),this._updateDomSelection(e)))}_updateFakeSelection(e){const t=e.ownerDocument;this._fakeSelectionContainer||(this._fakeSelectionContainer=function(e){const t=e.createElement("div");return t.className="ck-fake-selection-container",Object.assign(t.style,{position:"fixed",top:0,left:"-9999px",width:"42px"}),t.textContent="\xa0",t}(t));const i=this._fakeSelectionContainer;if(this.domConverter.bindFakeSelection(i,this.selection),!this._fakeSelectionNeedsUpdate(e))return;i.parentElement&&i.parentElement==e||e.appendChild(i),i.textContent=this.selection.fakeSelectionLabel||"\xa0";const s=t.getSelection(),n=t.createRange();s.removeAllRanges(),n.selectNodeContents(i),s.addRange(n)}_updateDomSelection(e){const t=e.ownerDocument.defaultView.getSelection();if(!this._domSelectionNeedsUpdate(t))return;const i=this.domConverter.viewPositionToDom(this.selection.anchor),s=this.domConverter.viewPositionToDom(this.selection.focus);t.collapse(i.parent,i.offset),t.extend(s.parent,s.offset),io.isGecko&&function(e,t){const i=e.parent;if(i.nodeType!=Node.ELEMENT_NODE||e.offset!=i.childNodes.length-1)return;const s=i.childNodes[e.offset];s&&"BR"==s.tagName&&t.addRange(t.getRangeAt(0))}(s,t)}_domSelectionNeedsUpdate(e){if(!this.domConverter.isDomSelectionCorrect(e))return!0;const t=e&&this.domConverter.domSelectionToView(e);return(!t||!this.selection.isEqual(t))&&!(!this.selection.isCollapsed&&this.selection.isSimilar(t))}_fakeSelectionNeedsUpdate(e){const t=this._fakeSelectionContainer,i=e.ownerDocument.getSelection();return!t||t.parentElement!==e||i.anchorNode!==t&&!t.contains(i.anchorNode)||t.textContent!==this.selection.fakeSelectionLabel}_removeDomSelection(){for(const e of this.domDocuments)if(e.getSelection().rangeCount){const t=e.activeElement,i=this.domConverter.mapDomToView(t);t&&i&&e.getSelection().removeAllRanges()}}_removeFakeSelection(){const e=this._fakeSelectionContainer;e&&e.remove()}_updateFocus(){if(this.isFocused){const e=this.selection.editableElement;e&&this.domConverter.focus(e)}}}function Zo(e,t,i){const s=t instanceof Array?t:t.childNodes,n=s[i];if(Oo(n))return n.data=Mo+n.data,n;{const n=e.createTextNode(Mo);return Array.isArray(t)?s.splice(i,0,n):Ho(t,i,n),n}}function Go(e,t){return Uo(e)&&Uo(t)&&!Oo(e)&&!Oo(t)&&e.nodeType!==Node.COMMENT_NODE&&t.nodeType!==Node.COMMENT_NODE&&e.tagName.toLowerCase()===t.tagName.toLowerCase()}function Ko(e,t,i){return t===i||(Oo(t)&&Oo(i)?t.data===i.data:!(!e.isBlockFiller(t)||!e.isBlockFiller(i)))}dt(Wo,ot);const Jo={window:window,document:document};function Yo(e){let t=0;for(;e.previousSibling;)e=e.previousSibling,t++;return t}function Qo(e){const t=[];for(;e&&e.nodeType!=Node.DOCUMENT_NODE;)t.unshift(e),e=e.parentNode;return t}const Xo=zo(document),er=Io(document),tr=Ro(document);class ir{constructor(e,t={}){this.document=e,this.blockFillerMode=t.blockFillerMode||"br",this.preElements=["pre"],this.blockElements=["address","article","aside","blockquote","caption","center","dd","details","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","legend","li","main","menu","nav","ol","p","pre","section","summary","table","tbody","td","tfoot","th","thead","tr","ul"],this.inlineObjectElements=["object","iframe","input","button","textarea","select","option","video","embed","audio","img","canvas"],this._domToViewMapping=new WeakMap,this._viewToDomMapping=new WeakMap,this._fakeSelectionMapping=new WeakMap,this._rawContentElementMatcher=new js,this._encounteredRawContentDomNodes=new WeakSet}bindFakeSelection(e,t){this._fakeSelectionMapping.set(e,new Fn(t))}fakeSelectionToView(e){return this._fakeSelectionMapping.get(e)}bindElements(e,t){this._domToViewMapping.set(e,t),this._viewToDomMapping.set(t,e)}unbindDomElement(e){const t=this._domToViewMapping.get(e);if(t){this._domToViewMapping.delete(e),this._viewToDomMapping.delete(t);for(const t of e.childNodes)this.unbindDomElement(t)}}bindDocumentFragments(e,t){this._domToViewMapping.set(e,t),this._viewToDomMapping.set(t,e)}viewToDom(e,t,i={}){if(e.is("$text")){const i=this._processDataFromViewText(e);return t.createTextNode(i)}{if(this.mapViewToDom(e))return this.mapViewToDom(e);let s;if(e.is("documentFragment"))s=t.createDocumentFragment(),i.bind&&this.bindDocumentFragments(s,e);else{if(e.is("uiElement"))return s="$comment"===e.name?t.createComment(e.getCustomProperty("$rawContent")):e.render(t),i.bind&&this.bindElements(s,e),s;s=e.hasAttribute("xmlns")?t.createElementNS(e.getAttribute("xmlns"),e.name):t.createElement(e.name),e.is("rawElement")&&e.render(s),i.bind&&this.bindElements(s,e);for(const t of e.getAttributeKeys())s.setAttribute(t,e.getAttribute(t))}if(!1!==i.withChildren)for(const n of this.viewChildrenToDom(e,t,i))s.appendChild(n);return s}}*viewChildrenToDom(e,t,i={}){const s=e.getFillerOffset&&e.getFillerOffset();let n=0;for(const o of e.getChildren())s===n&&(yield this._getBlockFiller(t)),yield this.viewToDom(o,t,i),n++;s===n&&(yield this._getBlockFiller(t))}viewRangeToDom(e){const t=this.viewPositionToDom(e.start),i=this.viewPositionToDom(e.end),s=document.createRange();return s.setStart(t.parent,t.offset),s.setEnd(i.parent,i.offset),s}viewPositionToDom(e){const t=e.parent;if(t.is("$text")){const i=this.findCorrespondingDomText(t);if(!i)return null;let s=e.offset;return No(i)&&(s+=7),{parent:i,offset:s}}{let i,s,n;if(0===e.offset){if(i=this.mapViewToDom(t),!i)return null;n=i.childNodes[0]}else{const t=e.nodeBefore;if(s=t.is("$text")?this.findCorrespondingDomText(t):this.mapViewToDom(e.nodeBefore),!s)return null;i=s.parentNode,n=s.nextSibling}return Oo(n)&&No(n)?{parent:n,offset:7}:{parent:i,offset:s?Yo(s)+1:0}}}domToView(e,t={}){if(this.isBlockFiller(e))return null;const i=this.getHostViewElement(e);if(i)return i;if(this.isComment(e)&&t.skipComments)return null;if(Oo(e)){if(Do(e))return null;{const t=this._processDataFromDomText(e);return""===t?null:new Bs(this.document,t)}}{if(this.mapDomToView(e))return this.mapDomToView(e);let i;if(this.isDocumentFragment(e))i=new bo(this.document),t.bind&&this.bindDocumentFragments(e,i);else{i=this._createViewElement(e,t),t.bind&&this.bindElements(e,i);const s=e.attributes;if(s)for(let e=s.length-1;e>=0;e--)i._setAttribute(s[e].name,s[e].value);if(this._isViewElementWithRawContent(i,t)||this.isComment(e)){const t=this.isComment(e)?e.data:e.innerHTML;return i._setCustomProperty("$rawContent",t),this._encounteredRawContentDomNodes.add(e),i}}if(!1!==t.withChildren)for(const s of this.domChildrenToView(e,t))i._appendChild(s);return i}}*domChildrenToView(e,t={}){for(let i=0;i<e.childNodes.length;i++){const s=e.childNodes[i],n=this.domToView(s,t);null!==n&&(yield n)}}domSelectionToView(e){if(1===e.rangeCount){let t=e.getRangeAt(0).startContainer;Oo(t)&&(t=t.parentNode);const i=this.fakeSelectionToView(t);if(i)return i}const t=this.isDomSelectionBackward(e),i=[];for(let s=0;s<e.rangeCount;s++){const t=e.getRangeAt(s),n=this.domRangeToView(t);n&&i.push(n)}return new Fn(i,{backward:t})}domRangeToView(e){const t=this.domPositionToView(e.startContainer,e.startOffset),i=this.domPositionToView(e.endContainer,e.endOffset);return t&&i?new Vn(t,i):null}domPositionToView(e,t){if(this.isBlockFiller(e))return this.domPositionToView(e.parentNode,Yo(e));const i=this.mapDomToView(e);if(i&&(i.is("uiElement")||i.is("rawElement")))return Dn._createBefore(i);if(Oo(e)){if(Do(e))return this.domPositionToView(e.parentNode,Yo(e));const i=this.findCorrespondingViewText(e);let s=t;return i?(No(e)&&(s-=7,s=s<0?0:s),new Dn(i,s)):null}if(0===t){const t=this.mapDomToView(e);if(t)return new Dn(t,0)}else{const i=e.childNodes[t-1],s=Oo(i)?this.findCorrespondingViewText(i):this.mapDomToView(i);if(s&&s.parent)return new Dn(s.parent,s.index+1)}return null}mapDomToView(e){return this.getHostViewElement(e)||this._domToViewMapping.get(e)}findCorrespondingViewText(e){if(Do(e))return null;const t=this.getHostViewElement(e);if(t)return t;const i=e.previousSibling;if(i){if(!this.isElement(i))return null;const e=this.mapDomToView(i);if(e)return e.nextSibling instanceof Bs?e.nextSibling:null}else{const t=this.mapDomToView(e.parentNode);if(t){const e=t.getChild(0);return e instanceof Bs?e:null}}return null}mapViewToDom(e){return this._viewToDomMapping.get(e)}findCorrespondingDomText(e){const t=e.previousSibling;return t&&this.mapViewToDom(t)?this.mapViewToDom(t).nextSibling:!t&&e.parent&&this.mapViewToDom(e.parent)?this.mapViewToDom(e.parent).childNodes[0]:null}focus(e){const t=this.mapViewToDom(e);if(t&&t.ownerDocument.activeElement!==t){const{scrollX:e,scrollY:i}=Jo.window,s=[];sr(t,(e=>{const{scrollLeft:t,scrollTop:i}=e;s.push([t,i])})),t.focus(),sr(t,(e=>{const[t,i]=s.shift();e.scrollLeft=t,e.scrollTop=i})),Jo.window.scrollTo(e,i)}}isElement(e){return e&&e.nodeType==Node.ELEMENT_NODE}isDocumentFragment(e){return e&&e.nodeType==Node.DOCUMENT_FRAGMENT_NODE}isComment(e){return e&&e.nodeType==Node.COMMENT_NODE}isBlockFiller(e){return"br"==this.blockFillerMode?e.isEqualNode(Xo):!("BR"!==e.tagName||!nr(e,this.blockElements)||1!==e.parentNode.childNodes.length)||e.isEqualNode(tr)||function(e,t){return e.isEqualNode(er)&&nr(e,t)&&1===e.parentNode.childNodes.length}(e,this.blockElements)}isDomSelectionBackward(e){if(e.isCollapsed)return!1;const t=document.createRange();t.setStart(e.anchorNode,e.anchorOffset),t.setEnd(e.focusNode,e.focusOffset);const i=t.collapsed;return t.detach(),i}getHostViewElement(e){const t=Qo(e);for(t.pop();t.length;){const e=t.pop(),i=this._domToViewMapping.get(e);if(i&&(i.is("uiElement")||i.is("rawElement")))return i}return null}isDomSelectionCorrect(e){return this._isDomSelectionPositionCorrect(e.anchorNode,e.anchorOffset)&&this._isDomSelectionPositionCorrect(e.focusNode,e.focusOffset)}registerRawContentMatcher(e){this._rawContentElementMatcher.add(e)}_getBlockFiller(e){switch(this.blockFillerMode){case"nbsp":return Io(e);case"markedNbsp":return Ro(e);case"br":return zo(e)}}_isDomSelectionPositionCorrect(e,t){if(Oo(e)&&No(e)&&t<7)return!1;if(this.isElement(e)&&No(e.childNodes[t]))return!1;const i=this.mapDomToView(e);return!i||!i.is("uiElement")&&!i.is("rawElement")}_processDataFromViewText(e){let t=e.data;if(e.getAncestors().some((e=>this.preElements.includes(e.name))))return t;if(" "==t.charAt(0)){const i=this._getTouchingInlineViewNode(e,!1);!(i&&i.is("$textProxy")&&this._nodeEndsWithSpace(i))&&i||(t="\xa0"+t.substr(1))}if(" "==t.charAt(t.length-1)){const i=this._getTouchingInlineViewNode(e,!0),s=i&&i.is("$textProxy")&&" "==i.data.charAt(0);" "!=t.charAt(t.length-2)&&i&&!s||(t=t.substr(0,t.length-1)+"\xa0")}return t.replace(/ {2}/g," \xa0")}_nodeEndsWithSpace(e){if(e.getAncestors().some((e=>this.preElements.includes(e.name))))return!1;const t=this._processDataFromViewText(e);return" "==t.charAt(t.length-1)}_processDataFromDomText(e){let t=e.data;if(function(e,t){return Qo(e).some((e=>e.tagName&&t.includes(e.tagName.toLowerCase())))}(e,this.preElements))return Vo(e);t=t.replace(/[ \n\t\r]{1,}/g," ");const i=this._getTouchingInlineDomNode(e,!1),s=this._getTouchingInlineDomNode(e,!0),n=this._checkShouldLeftTrimDomText(e,i),o=this._checkShouldRightTrimDomText(e,s);n&&(t=t.replace(/^ /,"")),o&&(t=t.replace(/ $/,"")),t=Vo(new Text(t)),t=t.replace(/ \u00A0/g,"  ");const r=s&&this.isElement(s)&&"BR"!=s.tagName,a=s&&Oo(s)&&" "==s.data.charAt(0);return(/( |\u00A0)\u00A0$/.test(t)||!s||r||a)&&(t=t.replace(/\u00A0$/," ")),(n||i&&this.isElement(i)&&"BR"!=i.tagName)&&(t=t.replace(/^\u00A0/," ")),t}_checkShouldLeftTrimDomText(e,t){return!t||(this.isElement(t)?"BR"===t.tagName:!this._encounteredRawContentDomNodes.has(e.previousSibling)&&/[^\S\u00A0]/.test(t.data.charAt(t.data.length-1)))}_checkShouldRightTrimDomText(e,t){return!t&&!No(e)}_getTouchingInlineViewNode(e,t){const i=new Nn({startPosition:t?Dn._createAfter(e):Dn._createBefore(e),direction:t?"forward":"backward"});for(const s of i){if(s.item.is("element")&&this.inlineObjectElements.includes(s.item.name))return s.item;if(s.item.is("containerElement"))return null;if(s.item.is("element","br"))return null;if(s.item.is("$textProxy"))return s.item}return null}_getTouchingInlineDomNode(e,t){if(!e.parentNode)return null;const i=t?"firstChild":"lastChild",s=t?"nextSibling":"previousSibling";let n=!0;do{if(!n&&e[i]?e=e[i]:e[s]?(e=e[s],n=!1):(e=e.parentNode,n=!0),!e||this._isBlockElement(e))return null}while(!Oo(e)&&"BR"!=e.tagName&&!this._isInlineObjectElement(e));return e}_isBlockElement(e){return this.isElement(e)&&this.blockElements.includes(e.tagName.toLowerCase())}_isInlineObjectElement(e){return this.isElement(e)&&this.inlineObjectElements.includes(e.tagName.toLowerCase())}_createViewElement(e,t){if(this.isComment(e))return new mo(this.document,"$comment");const i=t.keepOriginalCase?e.tagName:e.tagName.toLowerCase();return new Sn(this.document,i)}_isViewElementWithRawContent(e,t){return!1!==t.withChildren&&this._rawContentElementMatcher.match(e)}}function sr(e,t){for(;e&&e!=Jo.document;)t(e),e=e.parentNode}function nr(e,t){const i=e.parentNode;return i&&i.tagName&&t.includes(i.tagName.toLowerCase())}function or(e){const t=Object.prototype.toString.apply(e);return"[object Window]"==t||"[object global]"==t}const rr=Qe({},b,{listenTo(e,...t){if(Uo(e)||or(e)){const i=this._getProxyEmitter(e)||new ar(e);i.attach(...t),e=i}b.listenTo.call(this,e,...t)},stopListening(e,t,i){if(Uo(e)||or(e)){const t=this._getProxyEmitter(e);if(!t)return;e=t}b.stopListening.call(this,e,t,i),e instanceof ar&&e.detach(t)},_getProxyEmitter(e){return t=this,i=lr(e),t[g]&&t[g][i]?t[g][i].emitter:null;var t,i}});class ar{constructor(e){v(this,lr(e)),this._domNode=e}}function lr(e){return e["data-ck-expando"]||(e["data-ck-expando"]=r())}Qe(ar.prototype,b,{attach(e,t,i={}){if(this._domListeners&&this._domListeners[e])return;const s={capture:!!i.useCapture,passive:!!i.usePassive},n=this._createDomListener(e,s);this._domNode.addEventListener(e,n,s),this._domListeners||(this._domListeners={}),this._domListeners[e]=n},detach(e){let t;!this._domListeners[e]||(t=this._events[e])&&t.callbacks.length||this._domListeners[e].removeListener()},_createDomListener(e,t){const i=t=>{this.fire(e,t)};return i.removeListener=()=>{this._domNode.removeEventListener(e,i,t),delete this._domListeners[e]},i}});class cr{constructor(e){this.view=e,this.document=e.document,this.isEnabled=!1}enable(){this.isEnabled=!0}disable(){this.isEnabled=!1}destroy(){this.disable(),this.stopListening()}checkShouldIgnoreEventFromTarget(e){return e&&3===e.nodeType&&(e=e.parentNode),!(!e||1!==e.nodeType)&&e.matches("[data-cke-ignore-events], [data-cke-ignore-events] *")}}dt(cr,rr);const hr=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},dr=function(e){return this.__data__.has(e)};function ur(e){var t=-1,i=null==e?0:e.length;for(this.__data__=new si;++t<i;)this.add(e[t])}ur.prototype.add=ur.prototype.push=hr,ur.prototype.has=dr;const mr=ur,pr=function(e,t){for(var i=-1,s=null==e?0:e.length;++i<s;)if(t(e[i],i,e))return!0;return!1},fr=function(e,t){return e.has(t)},gr=function(e,t,i,s,n,o){var r=1&i,a=e.length,l=t.length;if(a!=l&&!(r&&l>a))return!1;var c=o.get(e),h=o.get(t);if(c&&h)return c==t&&h==e;var d=-1,u=!0,m=2&i?new mr:void 0;for(o.set(e,t),o.set(t,e);++d<a;){var p=e[d],f=t[d];if(s)var g=r?s(f,p,d,t,e,o):s(p,f,d,e,t,o);if(void 0!==g){if(g)continue;u=!1;break}if(m){if(!pr(t,(function(e,t){if(!fr(m,t)&&(p===e||n(p,e,i,s,o)))return m.push(t)}))){u=!1;break}}else if(p!==f&&!n(p,f,i,s,o)){u=!1;break}}return o.delete(e),o.delete(t),u},wr=function(e){var t=-1,i=Array(e.size);return e.forEach((function(e,s){i[++t]=[s,e]})),i},br=function(e){var t=-1,i=Array(e.size);return e.forEach((function(e){i[++t]=e})),i};var vr=O?O.prototype:void 0,yr=vr?vr.valueOf:void 0;const _r=function(e,t,i,s,n,o,r){switch(i){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!o(new Ji(e),new Ji(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return se(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var a=wr;case"[object Set]":var l=1&s;if(a||(a=br),e.size!=t.size&&!l)return!1;var c=r.get(e);if(c)return c==t;s|=2,r.set(e,t);var h=gr(a(e),a(t),s,n,o,r);return r.delete(e),h;case"[object Symbol]":if(yr)return yr.call(e)==yr.call(t)}return!1};var kr=Object.prototype.hasOwnProperty;const Ar=function(e,t,i,s,n,o){var r=1&i,a=Oi(e),l=a.length;if(l!=Oi(t).length&&!r)return!1;for(var c=l;c--;){var h=a[c];if(!(r?h in t:kr.call(t,h)))return!1}var d=o.get(e),u=o.get(t);if(d&&u)return d==t&&u==e;var m=!0;o.set(e,t),o.set(t,e);for(var p=r;++c<l;){var f=e[h=a[c]],g=t[h];if(s)var w=r?s(g,f,h,t,e,o):s(f,g,h,e,t,o);if(!(void 0===w?f===g||n(f,g,i,s,o):w)){m=!1;break}p||(p="constructor"==h)}if(m&&!p){var b=e.constructor,v=t.constructor;b==v||!("constructor"in e)||!("constructor"in t)||"function"==typeof b&&b instanceof b&&"function"==typeof v&&v instanceof v||(m=!1)}return o.delete(e),o.delete(t),m};var xr="[object Arguments]",Cr="[object Array]",Er="[object Object]",Tr=Object.prototype.hasOwnProperty;const Sr=function(e,t,i,s,n,o){var r=Pe(e),a=Pe(t),l=r?Cr:Zi(e),c=a?Cr:Zi(t),h=(l=l==xr?Er:l)==Er,d=(c=c==xr?Er:c)==Er,u=l==c;if(u&&Me(e)){if(!Me(t))return!1;r=!0,h=!1}if(u&&!h)return o||(o=new ri),r||He(e)?gr(e,t,i,s,n,o):_r(e,t,l,i,s,n,o);if(!(1&i)){var m=h&&Tr.call(e,"__wrapped__"),p=d&&Tr.call(t,"__wrapped__");if(m||p){var f=m?e.value():e,g=p?t.value():t;return o||(o=new ri),n(f,g,i,s,o)}}return!!u&&(o||(o=new ri),Ar(e,t,i,s,n,o))},Pr=function e(t,i,s,n,o){return t===i||(null==t||null==i||!Ae(t)&&!Ae(i)?t!=t&&i!=i:Sr(t,i,s,n,e,o))},Or=function(e,t,i){var s=(i="function"==typeof i?i:void 0)?i(e,t):void 0;return void 0===s?Pr(e,t,void 0,i):!!s};class Ir extends cr{constructor(e){super(e),this._config={childList:!0,characterData:!0,characterDataOldValue:!0,subtree:!0},this.domConverter=e.domConverter,this.renderer=e._renderer,this._domElements=[],this._mutationObserver=new window.MutationObserver(this._onMutations.bind(this))}flush(){this._onMutations(this._mutationObserver.takeRecords())}observe(e){this._domElements.push(e),this.isEnabled&&this._mutationObserver.observe(e,this._config)}enable(){super.enable();for(const e of this._domElements)this._mutationObserver.observe(e,this._config)}disable(){super.disable(),this._mutationObserver.disconnect()}destroy(){super.destroy(),this._mutationObserver.disconnect()}_onMutations(e){if(0===e.length)return;const t=this.domConverter,i=new Map,s=new Set;for(const l of e)if("childList"===l.type){const e=t.mapDomToView(l.target);if(e&&(e.is("uiElement")||e.is("rawElement")))continue;e&&!this._isBogusBrMutation(l)&&s.add(e)}for(const l of e){const e=t.mapDomToView(l.target);if((!e||!e.is("uiElement")&&!e.is("rawElement"))&&"characterData"===l.type){const e=t.findCorrespondingViewText(l.target);e&&!s.has(e.parent)?i.set(e,{type:"text",oldText:e.data,newText:Vo(l.target),node:e}):!e&&No(l.target)&&s.add(t.mapDomToView(l.target.parentNode))}}const n=[];for(const l of i.values())this.renderer.markToSync("text",l.node),n.push(l);for(const l of s){const e=t.mapViewToDom(l),i=Array.from(l.getChildren()),s=Array.from(t.domChildrenToView(e,{withChildren:!1}));Or(i,s,a)||(this.renderer.markToSync("children",l),n.push({type:"children",oldChildren:i,newChildren:s,node:l}))}const o=e[0].target.ownerDocument.getSelection();let r=null;if(o&&o.anchorNode){const e=t.domPositionToView(o.anchorNode,o.anchorOffset),i=t.domPositionToView(o.focusNode,o.focusOffset);e&&i&&(r=new Fn(e),r.setFocus(i))}function a(e,t){if(!Array.isArray(e))return e===t||!(!e.is("$text")||!t.is("$text"))&&e.data===t.data}n.length&&(this.document.fire("mutations",n,r),this.view.forceRender())}_isBogusBrMutation(e){let t=null;return null===e.nextSibling&&0===e.removedNodes.length&&1==e.addedNodes.length&&(t=this.domConverter.domToView(e.addedNodes[0],{withChildren:!1})),t&&t.is("element","br")}}class Rr{constructor(e,t,i){this.view=e,this.document=e.document,this.domEvent=t,this.domTarget=t.target,Qe(this,i)}get target(){return this.view.domConverter.mapDomToView(this.domTarget)}preventDefault(){this.domEvent.preventDefault()}stopPropagation(){this.domEvent.stopPropagation()}}class zr extends cr{constructor(e){super(e),this.useCapture=!1}observe(e){("string"==typeof this.domEventType?[this.domEventType]:this.domEventType).forEach((t=>{this.listenTo(e,t,((e,t)=>{this.isEnabled&&!this.checkShouldIgnoreEventFromTarget(t.target)&&this.onDomEvent(t)}),{useCapture:this.useCapture})}))}fire(e,t,i){this.isEnabled&&this.document.fire(e,new Rr(this.view,t,i))}}class Mr extends zr{constructor(e){super(e),this.domEventType=["keydown","keyup"]}onDomEvent(e){this.fire(e.type,e,{keyCode:e.keyCode,altKey:e.altKey,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,metaKey:e.metaKey,get keystroke(){return ao(this)}})}}const Nr=function(){return P.Date.now()};var Dr=/\s/;const Vr=function(e){for(var t=e.length;t--&&Dr.test(e.charAt(t)););return t};var Br=/^\s+/;const Lr=function(e){return e?e.slice(0,Vr(e)+1).replace(Br,""):e};var Fr=/^[-+]0x[0-9a-f]+$/i,jr=/^0b[01]+$/i,qr=/^0o[0-7]+$/i,Hr=parseInt;const $r=function(e){if("number"==typeof e)return e;if($s(e))return NaN;if(E(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=E(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Lr(e);var i=jr.test(e);return i||qr.test(e)?Hr(e.slice(2),i?2:8):Fr.test(e)?NaN:+e};var Ur=Math.max,Wr=Math.min;const Zr=function(e,t,i){var s,n,o,r,a,l,c=0,h=!1,d=!1,u=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function m(t){var i=s,o=n;return s=n=void 0,c=t,r=e.apply(o,i)}function p(e){return c=e,a=setTimeout(g,t),h?m(e):r}function f(e){var i=e-l;return void 0===l||i>=t||i<0||d&&e-c>=o}function g(){var e=Nr();if(f(e))return w(e);a=setTimeout(g,function(e){var i=t-(e-l);return d?Wr(i,o-(e-c)):i}(e))}function w(e){return a=void 0,u&&s?m(e):(s=n=void 0,r)}function b(){var e=Nr(),i=f(e);if(s=arguments,n=this,l=e,i){if(void 0===a)return p(l);if(d)return clearTimeout(a),a=setTimeout(g,t),m(l)}return void 0===a&&(a=setTimeout(g,t)),r}return t=$r(t)||0,E(i)&&(h=!!i.leading,o=(d="maxWait"in i)?Ur($r(i.maxWait)||0,t):o,u="trailing"in i?!!i.trailing:u),b.cancel=function(){void 0!==a&&clearTimeout(a),c=0,s=l=n=a=void 0},b.flush=function(){return void 0===a?r:w(Nr())},b};class Gr extends cr{constructor(e){super(e),this._fireSelectionChangeDoneDebounced=Zr((e=>this.document.fire("selectionChangeDone",e)),200)}observe(){const e=this.document;e.on("arrowKey",((t,i)=>{e.selection.isFake&&this.isEnabled&&i.preventDefault()}),{context:"$capture"}),e.on("arrowKey",((t,i)=>{e.selection.isFake&&this.isEnabled&&this._handleSelectionMove(i.keyCode)}),{priority:"lowest"})}destroy(){super.destroy(),this._fireSelectionChangeDoneDebounced.cancel()}_handleSelectionMove(e){const t=this.document.selection,i=new Fn(t.getRanges(),{backward:t.isBackward,fake:!1});e!=oo.arrowleft&&e!=oo.arrowup||i.setTo(i.getFirstPosition()),e!=oo.arrowright&&e!=oo.arrowdown||i.setTo(i.getLastPosition());const s={oldSelection:t,newSelection:i,domSelection:null};this.document.fire("selectionChange",s),this._fireSelectionChangeDoneDebounced(s)}}class Kr extends cr{constructor(e){super(e),this.mutationObserver=e.getObserver(Ir),this.selection=this.document.selection,this.domConverter=e.domConverter,this._documents=new WeakSet,this._fireSelectionChangeDoneDebounced=Zr((e=>this.document.fire("selectionChangeDone",e)),200),this._clearInfiniteLoopInterval=setInterval((()=>this._clearInfiniteLoop()),1e3),this._loopbackCounter=0}observe(e){const t=e.ownerDocument;this._documents.has(t)||(this.listenTo(t,"selectionchange",((e,i)=>{this._handleSelectionChange(i,t)})),this._documents.add(t))}destroy(){super.destroy(),clearInterval(this._clearInfiniteLoopInterval),this._fireSelectionChangeDoneDebounced.cancel()}_handleSelectionChange(e,t){if(!this.isEnabled)return;const i=t.defaultView.getSelection();if(this.checkShouldIgnoreEventFromTarget(i.anchorNode))return;this.mutationObserver.flush();const s=this.domConverter.domSelectionToView(i);if(0!=s.rangeCount){if(this.view.hasDomSelection=!0,!(this.selection.isEqual(s)&&this.domConverter.isDomSelectionCorrect(i)||++this._loopbackCounter>60))if(this.selection.isSimilar(s))this.view.forceRender();else{const e={oldSelection:this.selection,newSelection:s,domSelection:i};this.document.fire("selectionChange",e),this._fireSelectionChangeDoneDebounced(e)}}else this.view.hasDomSelection=!1}_clearInfiniteLoop(){this._loopbackCounter=0}}class Jr extends zr{constructor(e){super(e),this.domEventType=["focus","blur"],this.useCapture=!0;const t=this.document;t.on("focus",(()=>{t.isFocused=!0,this._renderTimeoutId=setTimeout((()=>e.change((()=>{}))),50)})),t.on("blur",((i,s)=>{const n=t.selection.editableElement;null!==n&&n!==s.target||(t.isFocused=!1,e.change((()=>{})))}))}onDomEvent(e){this.fire(e.type,e)}destroy(){this._renderTimeoutId&&clearTimeout(this._renderTimeoutId),super.destroy()}}class Yr extends zr{constructor(e){super(e),this.domEventType=["compositionstart","compositionupdate","compositionend"];const t=this.document;t.on("compositionstart",(()=>{t.isComposing=!0})),t.on("compositionend",(()=>{t.isComposing=!1}))}onDomEvent(e){this.fire(e.type,e)}}class Qr extends zr{constructor(e){super(e),this.domEventType=["beforeinput"]}onDomEvent(e){this.fire(e.type,e)}}function Xr(e){return"[object Range]"==Object.prototype.toString.apply(e)}function ea(e){const t=e.ownerDocument.defaultView.getComputedStyle(e);return{top:parseInt(t.borderTopWidth,10),right:parseInt(t.borderRightWidth,10),bottom:parseInt(t.borderBottomWidth,10),left:parseInt(t.borderLeftWidth,10)}}const ta=["top","right","bottom","left","width","height"];class ia{constructor(e){const t=Xr(e);if(Object.defineProperty(this,"_source",{value:e._source||e,writable:!0,enumerable:!1}),_s(e)||t)if(t){const t=ia.getDomRangeRects(e);sa(this,ia.getBoundingRect(t))}else sa(this,e.getBoundingClientRect());else if(or(e)){const{innerWidth:t,innerHeight:i}=e;sa(this,{top:0,right:t,bottom:i,left:0,width:t,height:i})}else sa(this,e)}clone(){return new ia(this)}moveTo(e,t){return this.top=t,this.right=e+this.width,this.bottom=t+this.height,this.left=e,this}moveBy(e,t){return this.top+=t,this.right+=e,this.left+=e,this.bottom+=t,this}getIntersection(e){const t={top:Math.max(this.top,e.top),right:Math.min(this.right,e.right),bottom:Math.min(this.bottom,e.bottom),left:Math.max(this.left,e.left)};return t.width=t.right-t.left,t.height=t.bottom-t.top,t.width<0||t.height<0?null:new ia(t)}getIntersectionArea(e){const t=this.getIntersection(e);return t?t.getArea():0}getArea(){return this.width*this.height}getVisible(){const e=this._source;let t=this.clone();if(!na(e)){let i=e.parentNode||e.commonAncestorContainer;for(;i&&!na(i);){const e=new ia(i),s=t.getIntersection(e);if(!s)return null;s.getArea()<t.getArea()&&(t=s),i=i.parentNode}}return t}isEqual(e){for(const t of ta)if(this[t]!==e[t])return!1;return!0}contains(e){const t=this.getIntersection(e);return!(!t||!t.isEqual(e))}excludeScrollbarsAndBorders(){const e=this._source;let t,i,s;if(or(e))t=e.innerWidth-e.document.documentElement.clientWidth,i=e.innerHeight-e.document.documentElement.clientHeight,s=e.getComputedStyle(e.document.documentElement).direction;else{const n=ea(this._source);t=e.offsetWidth-e.clientWidth-n.left-n.right,i=e.offsetHeight-e.clientHeight-n.top-n.bottom,s=e.ownerDocument.defaultView.getComputedStyle(e).direction,this.left+=n.left,this.top+=n.top,this.right-=n.right,this.bottom-=n.bottom,this.width=this.right-this.left,this.height=this.bottom-this.top}return this.width-=t,"ltr"===s?this.right-=t:this.left+=t,this.height-=i,this.bottom-=i,this}static getDomRangeRects(e){const t=[],i=Array.from(e.getClientRects());if(i.length)for(const s of i)t.push(new ia(s));else{let i=e.startContainer;Oo(i)&&(i=i.parentNode);const s=new ia(i.getBoundingClientRect());s.right=s.left,s.width=0,t.push(s)}return t}static getBoundingRect(e){const t={left:Number.POSITIVE_INFINITY,top:Number.POSITIVE_INFINITY,right:Number.NEGATIVE_INFINITY,bottom:Number.NEGATIVE_INFINITY};let i=0;for(const s of e)i++,t.left=Math.min(t.left,s.left),t.top=Math.min(t.top,s.top),t.right=Math.max(t.right,s.right),t.bottom=Math.max(t.bottom,s.bottom);return 0==i?null:(t.width=t.right-t.left,t.height=t.bottom-t.top,new ia(t))}}function sa(e,t){for(const i of ta)e[i]=t[i]}function na(e){return!!_s(e)&&e===e.ownerDocument.body}class oa{constructor(e,t){oa._observerInstance||oa._createObserver(),this._element=e,this._callback=t,oa._addElementCallback(e,t),oa._observerInstance.observe(e)}destroy(){oa._deleteElementCallback(this._element,this._callback)}static _addElementCallback(e,t){oa._elementCallbacks||(oa._elementCallbacks=new Map);let i=oa._elementCallbacks.get(e);i||(i=new Set,oa._elementCallbacks.set(e,i)),i.add(t)}static _deleteElementCallback(e,t){const i=oa._getElementCallbacks(e);i&&(i.delete(t),i.size||(oa._elementCallbacks.delete(e),oa._observerInstance.unobserve(e))),oa._elementCallbacks&&!oa._elementCallbacks.size&&(oa._observerInstance=null,oa._elementCallbacks=null)}static _getElementCallbacks(e){return oa._elementCallbacks?oa._elementCallbacks.get(e):null}static _createObserver(){let e;e="function"==typeof Jo.window.ResizeObserver?Jo.window.ResizeObserver:ra,oa._observerInstance=new e((e=>{for(const t of e){const e=oa._getElementCallbacks(t.target);if(e)for(const i of e)i(t)}}))}}oa._observerInstance=null,oa._elementCallbacks=null;class ra{constructor(e){this._callback=e,this._elements=new Set,this._previousRects=new Map,this._periodicCheckTimeout=null}observe(e){this._elements.add(e),this._checkElementRectsAndExecuteCallback(),1===this._elements.size&&this._startPeriodicCheck()}unobserve(e){this._elements.delete(e),this._previousRects.delete(e),this._elements.size||this._stopPeriodicCheck()}_startPeriodicCheck(){const e=()=>{this._checkElementRectsAndExecuteCallback(),this._periodicCheckTimeout=setTimeout(e,100)};this.listenTo(Jo.window,"resize",(()=>{this._checkElementRectsAndExecuteCallback()})),this._periodicCheckTimeout=setTimeout(e,100)}_stopPeriodicCheck(){clearTimeout(this._periodicCheckTimeout),this.stopListening(),this._previousRects.clear()}_checkElementRectsAndExecuteCallback(){const e=[];for(const t of this._elements)this._hasRectChanged(t)&&e.push({target:t,contentRect:this._previousRects.get(t)});e.length&&this._callback(e)}_hasRectChanged(e){if(!e.ownerDocument.body.contains(e))return!1;const t=new ia(e),i=this._previousRects.get(e),s=!i||!i.isEqual(t);return this._previousRects.set(e,t),s}}function aa(e,t){e instanceof HTMLTextAreaElement&&(e.value=t),e.innerHTML=t}function la(e){const t=e.next();return t.done?null:t.value}dt(ra,rr);class ca{constructor(){this.set("isFocused",!1),this.set("focusedElement",null),this._elements=new Set,this._nextEventLoopTimeout=null}add(e){if(this._elements.has(e))throw new h("focustracker-add-element-already-exist",this);this.listenTo(e,"focus",(()=>this._focus(e)),{useCapture:!0}),this.listenTo(e,"blur",(()=>this._blur()),{useCapture:!0}),this._elements.add(e)}remove(e){e===this.focusedElement&&this._blur(e),this._elements.has(e)&&(this.stopListening(e),this._elements.delete(e))}destroy(){this.stopListening()}_focus(e){clearTimeout(this._nextEventLoopTimeout),this.focusedElement=e,this.isFocused=!0}_blur(){clearTimeout(this._nextEventLoopTimeout),this._nextEventLoopTimeout=setTimeout((()=>{this.focusedElement=null,this.isFocused=!1}),0)}}dt(ca,rr),dt(ca,ot);class ha{constructor(){this._listener=Object.create(rr)}listenTo(e){this._listener.listenTo(e,"keydown",((e,t)=>{this._listener.fire("_keydown:"+ao(t),t)}))}set(e,t,i={}){const s=lo(e),n=i.priority;this._listener.listenTo(this._listener,"_keydown:"+s,((e,i)=>{t(i,(()=>{i.preventDefault(),i.stopPropagation(),e.stop()})),e.return=!0}),{priority:n})}press(e){return!!this._listener.fire("_keydown:"+ao(e),e)}destroy(){this._listener.stopListening()}}class da extends cr{constructor(e){super(e),this.document.on("keydown",((e,t)=>{if(this.isEnabled&&((i=t.keyCode)==oo.arrowright||i==oo.arrowleft||i==oo.arrowup||i==oo.arrowdown)){const i=new qn(this.document,"arrowKey",this.document.selection.getFirstRange());this.document.fire(i,t),i.stop.called&&e.stop()}var i}))}observe(){}}function ua({target:e,viewportOffset:t=0}){const i=va(e);let s=i,n=null;for(;s;){let o;o=ya(s==i?e:n),pa(o,(()=>_a(e,s)));const r=_a(e,s);if(ma(s,r,t),s.parent!=s){if(n=s.frameElement,s=s.parent,!n)return}else s=null}}function ma(e,t,i){const s=t.clone().moveBy(0,i),n=t.clone().moveBy(0,-i),o=new ia(e).excludeScrollbarsAndBorders();if(![n,s].every((e=>o.contains(e)))){let{scrollX:r,scrollY:a}=e;ga(n,o)?a-=o.top-t.top+i:fa(s,o)&&(a+=t.bottom-o.bottom+i),wa(t,o)?r-=o.left-t.left+i:ba(t,o)&&(r+=t.right-o.right+i),e.scrollTo(r,a)}}function pa(e,t){const i=va(e);let s,n;for(;e!=i.document.body;)n=t(),s=new ia(e).excludeScrollbarsAndBorders(),s.contains(n)||(ga(n,s)?e.scrollTop-=s.top-n.top:fa(n,s)&&(e.scrollTop+=n.bottom-s.bottom),wa(n,s)?e.scrollLeft-=s.left-n.left:ba(n,s)&&(e.scrollLeft+=n.right-s.right)),e=e.parentNode}function fa(e,t){return e.bottom>t.bottom}function ga(e,t){return e.top<t.top}function wa(e,t){return e.left<t.left}function ba(e,t){return e.right>t.right}function va(e){return Xr(e)?e.startContainer.ownerDocument.defaultView:e.ownerDocument.defaultView}function ya(e){if(Xr(e)){let t=e.commonAncestorContainer;return Oo(t)&&(t=t.parentNode),t}return e.parentNode}function _a(e,t){const i=va(e),s=new ia(e);if(i===t)return s;{let e=i;for(;e!=t;){const t=e.frameElement,i=new ia(t).excludeScrollbarsAndBorders();s.moveBy(i.left,i.top),e=e.parent}}return s}Object.assign({},{scrollViewportToShowTarget:ua,scrollAncestorsToShowTarget:function(e){pa(ya(e),(()=>new ia(e)))}});class ka{constructor(e){this.document=new Kn(e),this.domConverter=new ir(this.document),this.domRoots=new Map,this.set("isRenderingInProgress",!1),this.set("hasDomSelection",!1),this._renderer=new Wo(this.domConverter,this.document.selection),this._renderer.bind("isFocused").to(this.document),this._initialDomRootAttributes=new WeakMap,this._observers=new Map,this._ongoingChange=!1,this._postFixersInProgress=!1,this._renderingDisabled=!1,this._hasChangedSinceTheLastRendering=!1,this._writer=new vo(this.document),this.addObserver(Ir),this.addObserver(Kr),this.addObserver(Jr),this.addObserver(Mr),this.addObserver(Gr),this.addObserver(Yr),this.addObserver(da),io.isAndroid&&this.addObserver(Qr),this.document.on("arrowKey",Bo,{priority:"low"}),po(this),this.on("render",(()=>{this._render(),this.document.fire("layoutChanged"),this._hasChangedSinceTheLastRendering=!1})),this.listenTo(this.document.selection,"change",(()=>{this._hasChangedSinceTheLastRendering=!0})),this.listenTo(this.document,"change:isFocused",(()=>{this._hasChangedSinceTheLastRendering=!0}))}attachDomRoot(e,t="main"){const i=this.document.getRoot(t);i._name=e.tagName.toLowerCase();const s={};for(const{name:o,value:r}of Array.from(e.attributes))s[o]=r,"class"===o?this._writer.addClass(r.split(" "),i):this._writer.setAttribute(o,r,i);this._initialDomRootAttributes.set(e,s);const n=()=>{this._writer.setAttribute("contenteditable",!i.isReadOnly,i),i.isReadOnly?this._writer.addClass("ck-read-only",i):this._writer.removeClass("ck-read-only",i)};n(),this.domRoots.set(t,e),this.domConverter.bindElements(e,i),this._renderer.markToSync("children",i),this._renderer.markToSync("attributes",i),this._renderer.domDocuments.add(e.ownerDocument),i.on("change:children",((e,t)=>this._renderer.markToSync("children",t))),i.on("change:attributes",((e,t)=>this._renderer.markToSync("attributes",t))),i.on("change:text",((e,t)=>this._renderer.markToSync("text",t))),i.on("change:isReadOnly",(()=>this.change(n))),i.on("change",(()=>{this._hasChangedSinceTheLastRendering=!0}));for(const o of this._observers.values())o.observe(e,t)}detachDomRoot(e){const t=this.domRoots.get(e);Array.from(t.attributes).forEach((({name:e})=>t.removeAttribute(e)));const i=this._initialDomRootAttributes.get(t);for(const s in i)t.setAttribute(s,i[s]);this.domRoots.delete(e),this.domConverter.unbindDomElement(t)}getDomRoot(e="main"){return this.domRoots.get(e)}addObserver(e){let t=this._observers.get(e);if(t)return t;t=new e(this),this._observers.set(e,t);for(const[i,s]of this.domRoots)t.observe(s,i);return t.enable(),t}getObserver(e){return this._observers.get(e)}disableObservers(){for(const e of this._observers.values())e.disable()}enableObservers(){for(const e of this._observers.values())e.enable()}scrollToTheSelection(){const e=this.document.selection.getFirstRange();e&&ua({target:this.domConverter.viewRangeToDom(e),viewportOffset:20})}focus(){if(!this.document.isFocused){const e=this.document.selection.editableElement;e&&(this.domConverter.focus(e),this.forceRender())}}change(e){if(this.isRenderingInProgress||this._postFixersInProgress)throw new h("cannot-change-view-tree",this);try{if(this._ongoingChange)return e(this._writer);this._ongoingChange=!0;const t=e(this._writer);return this._ongoingChange=!1,!this._renderingDisabled&&this._hasChangedSinceTheLastRendering&&(this._postFixersInProgress=!0,this.document._callPostFixers(this._writer),this._postFixersInProgress=!1,this.fire("render")),t}catch(e){h.rethrowUnexpectedError(e,this)}}forceRender(){this._hasChangedSinceTheLastRendering=!0,this.change((()=>{}))}destroy(){for(const e of this._observers.values())e.destroy();this.document.destroy(),this.stopListening()}createPositionAt(e,t){return Dn._createAt(e,t)}createPositionAfter(e){return Dn._createAfter(e)}createPositionBefore(e){return Dn._createBefore(e)}createRange(e,t){return new Vn(e,t)}createRangeOn(e){return Vn._createOn(e)}createRangeIn(e){return Vn._createIn(e)}createSelection(e,t,i){return new Fn(e,t,i)}_disableRendering(e){this._renderingDisabled=e,0==e&&this.change((()=>{}))}_render(){this.isRenderingInProgress=!0,this.disableObservers(),this._renderer.render(),this.enableObservers(),this.isRenderingInProgress=!1}}dt(ka,ot);class Aa{constructor(e){this.parent=null,this._attrs=Fs(e)}get index(){let e;if(!this.parent)return null;if(null===(e=this.parent.getChildIndex(this)))throw new h("model-node-not-found-in-parent",this);return e}get startOffset(){let e;if(!this.parent)return null;if(null===(e=this.parent.getChildStartOffset(this)))throw new h("model-node-not-found-in-parent",this);return e}get offsetSize(){return 1}get endOffset(){return this.parent?this.startOffset+this.offsetSize:null}get nextSibling(){const e=this.index;return null!==e&&this.parent.getChild(e+1)||null}get previousSibling(){const e=this.index;return null!==e&&this.parent.getChild(e-1)||null}get root(){let e=this;for(;e.parent;)e=e.parent;return e}isAttached(){return this.root.is("rootElement")}getPath(){const e=[];let t=this;for(;t.parent;)e.unshift(t.startOffset),t=t.parent;return e}getAncestors(e={includeSelf:!1,parentFirst:!1}){const t=[];let i=e.includeSelf?this:this.parent;for(;i;)t[e.parentFirst?"push":"unshift"](i),i=i.parent;return t}getCommonAncestor(e,t={}){const i=this.getAncestors(t),s=e.getAncestors(t);let n=0;for(;i[n]==s[n]&&i[n];)n++;return 0===n?null:i[n-1]}isBefore(e){if(this==e)return!1;if(this.root!==e.root)return!1;const t=this.getPath(),i=e.getPath(),s=Ns(t,i);switch(s){case"prefix":return!0;case"extension":return!1;default:return t[s]<i[s]}}isAfter(e){return this!=e&&this.root===e.root&&!this.isBefore(e)}hasAttribute(e){return this._attrs.has(e)}getAttribute(e){return this._attrs.get(e)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}toJSON(){const e={};return this._attrs.size&&(e.attributes=Array.from(this._attrs).reduce(((e,t)=>(e[t[0]]=t[1],e)),{})),e}is(e){return"node"===e||"model:node"===e}_clone(){return new Aa(this._attrs)}_remove(){this.parent._removeChildren(this.index)}_setAttribute(e,t){this._attrs.set(e,t)}_setAttributesTo(e){this._attrs=Fs(e)}_removeAttribute(e){return this._attrs.delete(e)}_clearAttributes(){this._attrs.clear()}}class xa extends Aa{constructor(e,t){super(t),this._data=e||""}get offsetSize(){return this.data.length}get data(){return this._data}is(e){return"$text"===e||"model:$text"===e||"text"===e||"model:text"===e||"node"===e||"model:node"===e}toJSON(){const e=super.toJSON();return e.data=this.data,e}_clone(){return new xa(this.data,this.getAttributes())}static fromJSON(e){return new xa(e.data,e.attributes)}}class Ca{constructor(e,t,i){if(this.textNode=e,t<0||t>e.offsetSize)throw new h("model-textproxy-wrong-offsetintext",this);if(i<0||t+i>e.offsetSize)throw new h("model-textproxy-wrong-length",this);this.data=e.data.substring(t,t+i),this.offsetInText=t}get startOffset(){return null!==this.textNode.startOffset?this.textNode.startOffset+this.offsetInText:null}get offsetSize(){return this.data.length}get endOffset(){return null!==this.startOffset?this.startOffset+this.offsetSize:null}get isPartial(){return this.offsetSize!==this.textNode.offsetSize}get parent(){return this.textNode.parent}get root(){return this.textNode.root}is(e){return"$textProxy"===e||"model:$textProxy"===e||"textProxy"===e||"model:textProxy"===e}getPath(){const e=this.textNode.getPath();return e.length>0&&(e[e.length-1]+=this.offsetInText),e}getAncestors(e={includeSelf:!1,parentFirst:!1}){const t=[];let i=e.includeSelf?this:this.parent;for(;i;)t[e.parentFirst?"push":"unshift"](i),i=i.parent;return t}hasAttribute(e){return this.textNode.hasAttribute(e)}getAttribute(e){return this.textNode.getAttribute(e)}getAttributes(){return this.textNode.getAttributes()}getAttributeKeys(){return this.textNode.getAttributeKeys()}}class Ea{constructor(e){this._nodes=[],e&&this._insertNodes(0,e)}[Symbol.iterator](){return this._nodes[Symbol.iterator]()}get length(){return this._nodes.length}get maxOffset(){return this._nodes.reduce(((e,t)=>e+t.offsetSize),0)}getNode(e){return this._nodes[e]||null}getNodeIndex(e){const t=this._nodes.indexOf(e);return-1==t?null:t}getNodeStartOffset(e){const t=this.getNodeIndex(e);return null===t?null:this._nodes.slice(0,t).reduce(((e,t)=>e+t.offsetSize),0)}indexToOffset(e){if(e==this._nodes.length)return this.maxOffset;const t=this._nodes[e];if(!t)throw new h("model-nodelist-index-out-of-bounds",this);return this.getNodeStartOffset(t)}offsetToIndex(e){let t=0;for(const i of this._nodes){if(e>=t&&e<t+i.offsetSize)return this.getNodeIndex(i);t+=i.offsetSize}if(t!=e)throw new h("model-nodelist-offset-out-of-bounds",this,{offset:e,nodeList:this});return this.length}_insertNodes(e,t){for(const i of t)if(!(i instanceof Aa))throw new h("model-nodelist-insertnodes-not-node",this);this._nodes.splice(e,0,...t)}_removeNodes(e,t=1){return this._nodes.splice(e,t)}toJSON(){return this._nodes.map((e=>e.toJSON()))}}class Ta extends Aa{constructor(e,t,i){super(t),this.name=e,this._children=new Ea,i&&this._insertChild(0,i)}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return 0===this.childCount}is(e,t=null){return t?t===this.name&&("element"===e||"model:element"===e):"element"===e||"model:element"===e||"node"===e||"model:node"===e}getChild(e){return this._children.getNode(e)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(e){return this._children.getNodeIndex(e)}getChildStartOffset(e){return this._children.getNodeStartOffset(e)}offsetToIndex(e){return this._children.offsetToIndex(e)}getNodeByPath(e){let t=this;for(const i of e)t=t.getChild(t.offsetToIndex(i));return t}findAncestor(e,t={includeSelf:!1}){let i=t.includeSelf?this:this.parent;for(;i;){if(i.name===e)return i;i=i.parent}return null}toJSON(){const e=super.toJSON();if(e.name=this.name,this._children.length>0){e.children=[];for(const t of this._children)e.children.push(t.toJSON())}return e}_clone(e=!1){const t=e?Array.from(this._children).map((e=>e._clone(!0))):null;return new Ta(this.name,this.getAttributes(),t)}_appendChild(e){this._insertChild(this.childCount,e)}_insertChild(e,t){const i=function(e){return"string"==typeof e?[new xa(e)]:(Cs(e)||(e=[e]),Array.from(e).map((e=>"string"==typeof e?new xa(e):e instanceof Ca?new xa(e.data,e.getAttributes()):e)))}(t);for(const s of i)null!==s.parent&&s._remove(),s.parent=this;this._children._insertNodes(e,i)}_removeChildren(e,t=1){const i=this._children._removeNodes(e,t);for(const s of i)s.parent=null;return i}static fromJSON(e){let t=null;if(e.children){t=[];for(const i of e.children)i.name?t.push(Ta.fromJSON(i)):t.push(xa.fromJSON(i))}return new Ta(e.name,e.attributes,t)}}class Sa{constructor(e={}){if(!e.boundaries&&!e.startPosition)throw new h("model-tree-walker-no-start-position",null);const t=e.direction||"forward";if("forward"!=t&&"backward"!=t)throw new h("model-tree-walker-unknown-direction",e,{direction:t});this.direction=t,this.boundaries=e.boundaries||null,e.startPosition?this.position=e.startPosition.clone():this.position=Oa._createAt(this.boundaries["backward"==this.direction?"end":"start"]),this.position.stickiness="toNone",this.singleCharacters=!!e.singleCharacters,this.shallow=!!e.shallow,this.ignoreElementEnd=!!e.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null,this._visitedParent=this.position.parent}[Symbol.iterator](){return this}skip(e){let t,i,s,n;do{s=this.position,n=this._visitedParent,({done:t,value:i}=this.next())}while(!t&&e(i));t||(this.position=s,this._visitedParent=n)}next(){return"forward"==this.direction?this._next():this._previous()}_next(){const e=this.position,t=this.position.clone(),i=this._visitedParent;if(null===i.parent&&t.offset===i.maxOffset)return{done:!0};if(i===this._boundaryEndParent&&t.offset==this.boundaries.end.offset)return{done:!0};const s=t.parent,n=Ia(t,s),o=n||Ra(t,s,n);if(o instanceof Ta)return this.shallow?t.offset++:(t.path.push(0),this._visitedParent=o),this.position=t,Pa("elementStart",o,e,t,1);if(o instanceof xa){let s;if(this.singleCharacters)s=1;else{let e=o.endOffset;this._boundaryEndParent==i&&this.boundaries.end.offset<e&&(e=this.boundaries.end.offset),s=e-t.offset}const n=t.offset-o.startOffset,r=new Ca(o,n,s);return t.offset+=s,this.position=t,Pa("text",r,e,t,s)}return t.path.pop(),t.offset++,this.position=t,this._visitedParent=i.parent,this.ignoreElementEnd?this._next():Pa("elementEnd",i,e,t)}_previous(){const e=this.position,t=this.position.clone(),i=this._visitedParent;if(null===i.parent&&0===t.offset)return{done:!0};if(i==this._boundaryStartParent&&t.offset==this.boundaries.start.offset)return{done:!0};const s=t.parent,n=Ia(t,s),o=n||za(t,s,n);if(o instanceof Ta)return t.offset--,this.shallow?(this.position=t,Pa("elementStart",o,e,t,1)):(t.path.push(o.maxOffset),this.position=t,this._visitedParent=o,this.ignoreElementEnd?this._previous():Pa("elementEnd",o,e,t));if(o instanceof xa){let s;if(this.singleCharacters)s=1;else{let e=o.startOffset;this._boundaryStartParent==i&&this.boundaries.start.offset>e&&(e=this.boundaries.start.offset),s=t.offset-e}const n=t.offset-o.startOffset,r=new Ca(o,n-s,s);return t.offset-=s,this.position=t,Pa("text",r,e,t,s)}return t.path.pop(),this.position=t,this._visitedParent=i.parent,Pa("elementStart",i,e,t,1)}}function Pa(e,t,i,s,n){return{done:!1,value:{type:e,item:t,previousPosition:i,nextPosition:s,length:n}}}class Oa{constructor(e,t,i="toNone"){if(!e.is("element")&&!e.is("documentFragment"))throw new h("model-position-root-invalid",e);if(!(t instanceof Array)||0===t.length)throw new h("model-position-path-incorrect-format",e,{path:t});e.is("rootElement")?t=t.slice():(t=[...e.getPath(),...t],e=e.root),this.root=e,this.path=t,this.stickiness=i}get offset(){return this.path[this.path.length-1]}set offset(e){this.path[this.path.length-1]=e}get parent(){let e=this.root;for(let t=0;t<this.path.length-1;t++)if(e=e.getChild(e.offsetToIndex(this.path[t])),!e)throw new h("model-position-path-incorrect",this,{position:this});if(e.is("$text"))throw new h("model-position-path-incorrect",this,{position:this});return e}get index(){return this.parent.offsetToIndex(this.offset)}get textNode(){return Ia(this,this.parent)}get nodeAfter(){const e=this.parent;return Ra(this,e,Ia(this,e))}get nodeBefore(){const e=this.parent;return za(this,e,Ia(this,e))}get isAtStart(){return 0===this.offset}get isAtEnd(){return this.offset==this.parent.maxOffset}compareWith(e){if(this.root!=e.root)return"different";const t=Ns(this.path,e.path);switch(t){case"same":return"same";case"prefix":return"before";case"extension":return"after";default:return this.path[t]<e.path[t]?"before":"after"}}getLastMatchingPosition(e,t={}){t.startPosition=this;const i=new Sa(t);return i.skip(e),i.position}getParentPath(){return this.path.slice(0,-1)}getAncestors(){const e=this.parent;return e.is("documentFragment")?[e]:e.getAncestors({includeSelf:!0})}findAncestor(e){const t=this.parent;return t.is("element")?t.findAncestor(e,{includeSelf:!0}):null}getCommonPath(e){if(this.root!=e.root)return[];const t=Ns(this.path,e.path),i="string"==typeof t?Math.min(this.path.length,e.path.length):t;return this.path.slice(0,i)}getCommonAncestor(e){const t=this.getAncestors(),i=e.getAncestors();let s=0;for(;t[s]==i[s]&&t[s];)s++;return 0===s?null:t[s-1]}getShiftedBy(e){const t=this.clone(),i=t.offset+e;return t.offset=i<0?0:i,t}isAfter(e){return"after"==this.compareWith(e)}isBefore(e){return"before"==this.compareWith(e)}isEqual(e){return"same"==this.compareWith(e)}isTouching(e){let t=null,i=null;switch(this.compareWith(e)){case"same":return!0;case"before":t=Oa._createAt(this),i=Oa._createAt(e);break;case"after":t=Oa._createAt(e),i=Oa._createAt(this);break;default:return!1}let s=t.parent;for(;t.path.length+i.path.length;){if(t.isEqual(i))return!0;if(t.path.length>i.path.length){if(t.offset!==s.maxOffset)return!1;t.path=t.path.slice(0,-1),s=s.parent,t.offset++}else{if(0!==i.offset)return!1;i.path=i.path.slice(0,-1)}}}is(e){return"position"===e||"model:position"===e}hasSameParentAs(e){return this.root===e.root&&"same"==Ns(this.getParentPath(),e.getParentPath())}getTransformedByOperation(e){let t;switch(e.type){case"insert":t=this._getTransformedByInsertOperation(e);break;case"move":case"remove":case"reinsert":t=this._getTransformedByMoveOperation(e);break;case"split":t=this._getTransformedBySplitOperation(e);break;case"merge":t=this._getTransformedByMergeOperation(e);break;default:t=Oa._createAt(this)}return t}_getTransformedByInsertOperation(e){return this._getTransformedByInsertion(e.position,e.howMany)}_getTransformedByMoveOperation(e){return this._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany)}_getTransformedBySplitOperation(e){const t=e.movedRange;return t.containsPosition(this)||t.start.isEqual(this)&&"toNext"==this.stickiness?this._getCombined(e.splitPosition,e.moveTargetPosition):e.graveyardPosition?this._getTransformedByMove(e.graveyardPosition,e.insertionPosition,1):this._getTransformedByInsertion(e.insertionPosition,1)}_getTransformedByMergeOperation(e){const t=e.movedRange;let i;return t.containsPosition(this)||t.start.isEqual(this)?(i=this._getCombined(e.sourcePosition,e.targetPosition),e.sourcePosition.isBefore(e.targetPosition)&&(i=i._getTransformedByDeletion(e.deletionPosition,1))):i=this.isEqual(e.deletionPosition)?Oa._createAt(e.deletionPosition):this._getTransformedByMove(e.deletionPosition,e.graveyardPosition,1),i}_getTransformedByDeletion(e,t){const i=Oa._createAt(this);if(this.root!=e.root)return i;if("same"==Ns(e.getParentPath(),this.getParentPath())){if(e.offset<this.offset){if(e.offset+t>this.offset)return null;i.offset-=t}}else if("prefix"==Ns(e.getParentPath(),this.getParentPath())){const s=e.path.length-1;if(e.offset<=this.path[s]){if(e.offset+t>this.path[s])return null;i.path[s]-=t}}return i}_getTransformedByInsertion(e,t){const i=Oa._createAt(this);if(this.root!=e.root)return i;if("same"==Ns(e.getParentPath(),this.getParentPath()))(e.offset<this.offset||e.offset==this.offset&&"toPrevious"!=this.stickiness)&&(i.offset+=t);else if("prefix"==Ns(e.getParentPath(),this.getParentPath())){const s=e.path.length-1;e.offset<=this.path[s]&&(i.path[s]+=t)}return i}_getTransformedByMove(e,t,i){if(t=t._getTransformedByDeletion(e,i),e.isEqual(t))return Oa._createAt(this);const s=this._getTransformedByDeletion(e,i);return null===s||e.isEqual(this)&&"toNext"==this.stickiness||e.getShiftedBy(i).isEqual(this)&&"toPrevious"==this.stickiness?this._getCombined(e,t):s._getTransformedByInsertion(t,i)}_getCombined(e,t){const i=e.path.length-1,s=Oa._createAt(t);return s.stickiness=this.stickiness,s.offset=s.offset+this.path[i]-e.offset,s.path=[...s.path,...this.path.slice(i+1)],s}toJSON(){return{root:this.root.toJSON(),path:Array.from(this.path),stickiness:this.stickiness}}clone(){return new this.constructor(this.root,this.path,this.stickiness)}static _createAt(e,t,i="toNone"){if(e instanceof Oa)return new Oa(e.root,e.path,e.stickiness);{const s=e;if("end"==t)t=s.maxOffset;else{if("before"==t)return this._createBefore(s,i);if("after"==t)return this._createAfter(s,i);if(0!==t&&!t)throw new h("model-createpositionat-offset-required",[this,e])}if(!s.is("element")&&!s.is("documentFragment"))throw new h("model-position-parent-incorrect",[this,e]);const n=s.getPath();return n.push(t),new this(s.root,n,i)}}static _createAfter(e,t){if(!e.parent)throw new h("model-position-after-root",[this,e],{root:e});return this._createAt(e.parent,e.endOffset,t)}static _createBefore(e,t){if(!e.parent)throw new h("model-position-before-root",e,{root:e});return this._createAt(e.parent,e.startOffset,t)}static fromJSON(e,t){if("$graveyard"===e.root){const i=new Oa(t.graveyard,e.path);return i.stickiness=e.stickiness,i}if(!t.getRoot(e.root))throw new h("model-position-fromjson-no-root",t,{rootName:e.root});return new Oa(t.getRoot(e.root),e.path,e.stickiness)}}function Ia(e,t){const i=t.getChild(t.offsetToIndex(e.offset));return i&&i.is("$text")&&i.startOffset<e.offset?i:null}function Ra(e,t,i){return null!==i?null:t.getChild(t.offsetToIndex(e.offset))}function za(e,t,i){return null!==i?null:t.getChild(t.offsetToIndex(e.offset)-1)}class Ma{constructor(e,t=null){this.start=Oa._createAt(e),this.end=t?Oa._createAt(t):Oa._createAt(e),this.start.stickiness=this.isCollapsed?"toNone":"toNext",this.end.stickiness=this.isCollapsed?"toNone":"toPrevious"}*[Symbol.iterator](){yield*new Sa({boundaries:this,ignoreElementEnd:!0})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){return"same"==Ns(this.start.getParentPath(),this.end.getParentPath())}get root(){return this.start.root}containsPosition(e){return e.isAfter(this.start)&&e.isBefore(this.end)}containsRange(e,t=!1){e.isCollapsed&&(t=!1);const i=this.containsPosition(e.start)||t&&this.start.isEqual(e.start),s=this.containsPosition(e.end)||t&&this.end.isEqual(e.end);return i&&s}containsItem(e){const t=Oa._createBefore(e);return this.containsPosition(t)||this.start.isEqual(t)}is(e){return"range"===e||"model:range"===e}isEqual(e){return this.start.isEqual(e.start)&&this.end.isEqual(e.end)}isIntersecting(e){return this.start.isBefore(e.end)&&this.end.isAfter(e.start)}getDifference(e){const t=[];return this.isIntersecting(e)?(this.containsPosition(e.start)&&t.push(new Ma(this.start,e.start)),this.containsPosition(e.end)&&t.push(new Ma(e.end,this.end))):t.push(new Ma(this.start,this.end)),t}getIntersection(e){if(this.isIntersecting(e)){let t=this.start,i=this.end;return this.containsPosition(e.start)&&(t=e.start),this.containsPosition(e.end)&&(i=e.end),new Ma(t,i)}return null}getJoined(e,t=!1){let i=this.isIntersecting(e);if(i||(i=this.start.isBefore(e.start)?t?this.end.isTouching(e.start):this.end.isEqual(e.start):t?e.end.isTouching(this.start):e.end.isEqual(this.start)),!i)return null;let s=this.start,n=this.end;return e.start.isBefore(s)&&(s=e.start),e.end.isAfter(n)&&(n=e.end),new Ma(s,n)}getMinimalFlatRanges(){const e=[],t=this.start.getCommonPath(this.end).length,i=Oa._createAt(this.start);let s=i.parent;for(;i.path.length>t+1;){const t=s.maxOffset-i.offset;0!==t&&e.push(new Ma(i,i.getShiftedBy(t))),i.path=i.path.slice(0,-1),i.offset++,s=s.parent}for(;i.path.length<=this.end.path.length;){const t=this.end.path[i.path.length-1],s=t-i.offset;0!==s&&e.push(new Ma(i,i.getShiftedBy(s))),i.offset=t,i.path.push(0)}return e}getWalker(e={}){return e.boundaries=this,new Sa(e)}*getItems(e={}){e.boundaries=this,e.ignoreElementEnd=!0;const t=new Sa(e);for(const i of t)yield i.item}*getPositions(e={}){e.boundaries=this;const t=new Sa(e);yield t.position;for(const i of t)yield i.nextPosition}getTransformedByOperation(e){switch(e.type){case"insert":return this._getTransformedByInsertOperation(e);case"move":case"remove":case"reinsert":return this._getTransformedByMoveOperation(e);case"split":return[this._getTransformedBySplitOperation(e)];case"merge":return[this._getTransformedByMergeOperation(e)]}return[new Ma(this.start,this.end)]}getTransformedByOperations(e){const t=[new Ma(this.start,this.end)];for(const i of e)for(let e=0;e<t.length;e++){const s=t[e].getTransformedByOperation(i);t.splice(e,1,...s),e+=s.length-1}for(let i=0;i<t.length;i++){const e=t[i];for(let s=i+1;s<t.length;s++){const i=t[s];(e.containsRange(i)||i.containsRange(e)||e.isEqual(i))&&t.splice(s,1)}}return t}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}getContainedElement(){if(this.isCollapsed)return null;const e=this.start.nodeAfter,t=this.end.nodeBefore;return e&&e.is("element")&&e===t?e:null}toJSON(){return{start:this.start.toJSON(),end:this.end.toJSON()}}clone(){return new this.constructor(this.start,this.end)}_getTransformedByInsertOperation(e,t=!1){return this._getTransformedByInsertion(e.position,e.howMany,t)}_getTransformedByMoveOperation(e,t=!1){const i=e.sourcePosition,s=e.howMany,n=e.targetPosition;return this._getTransformedByMove(i,n,s,t)}_getTransformedBySplitOperation(e){const t=this.start._getTransformedBySplitOperation(e);let i=this.end._getTransformedBySplitOperation(e);return this.end.isEqual(e.insertionPosition)&&(i=this.end.getShiftedBy(1)),t.root!=i.root&&(i=this.end.getShiftedBy(-1)),new Ma(t,i)}_getTransformedByMergeOperation(e){if(this.start.isEqual(e.targetPosition)&&this.end.isEqual(e.deletionPosition))return new Ma(this.start);let t=this.start._getTransformedByMergeOperation(e),i=this.end._getTransformedByMergeOperation(e);return t.root!=i.root&&(i=this.end.getShiftedBy(-1)),t.isAfter(i)?(e.sourcePosition.isBefore(e.targetPosition)?(t=Oa._createAt(i),t.offset=0):(e.deletionPosition.isEqual(t)||(i=e.deletionPosition),t=e.targetPosition),new Ma(t,i)):new Ma(t,i)}_getTransformedByInsertion(e,t,i=!1){if(i&&this.containsPosition(e))return[new Ma(this.start,e),new Ma(e.getShiftedBy(t),this.end._getTransformedByInsertion(e,t))];{const i=new Ma(this.start,this.end);return i.start=i.start._getTransformedByInsertion(e,t),i.end=i.end._getTransformedByInsertion(e,t),[i]}}_getTransformedByMove(e,t,i,s=!1){if(this.isCollapsed){const s=this.start._getTransformedByMove(e,t,i);return[new Ma(s)]}const n=Ma._createFromPositionAndShift(e,i),o=t._getTransformedByDeletion(e,i);if(this.containsPosition(t)&&!s&&(n.containsPosition(this.start)||n.containsPosition(this.end))){const s=this.start._getTransformedByMove(e,t,i),n=this.end._getTransformedByMove(e,t,i);return[new Ma(s,n)]}let r;const a=this.getDifference(n);let l=null;const c=this.getIntersection(n);if(1==a.length?l=new Ma(a[0].start._getTransformedByDeletion(e,i),a[0].end._getTransformedByDeletion(e,i)):2==a.length&&(l=new Ma(this.start,this.end._getTransformedByDeletion(e,i))),r=l?l._getTransformedByInsertion(o,i,null!==c||s):[],c){const e=new Ma(c.start._getCombined(n.start,o),c.end._getCombined(n.start,o));2==r.length?r.splice(1,0,e):r.push(e)}return r}_getTransformedByDeletion(e,t){let i=this.start._getTransformedByDeletion(e,t),s=this.end._getTransformedByDeletion(e,t);return null==i&&null==s?null:(null==i&&(i=e),null==s&&(s=e),new Ma(i,s))}static _createFromPositionAndShift(e,t){const i=e,s=e.getShiftedBy(t);return t>0?new this(i,s):new this(s,i)}static _createIn(e){return new this(Oa._createAt(e,0),Oa._createAt(e,e.maxOffset))}static _createOn(e){return this._createFromPositionAndShift(Oa._createBefore(e),e.offsetSize)}static _createFromRanges(e){if(0===e.length)throw new h("range-create-from-ranges-empty-array",null);if(1==e.length)return e[0].clone();const t=e[0];e.sort(((e,t)=>e.start.isAfter(t.start)?1:-1));const i=e.indexOf(t),s=new this(t.start,t.end);if(i>0)for(let n=i-1;e[n].end.isEqual(s.start);n++)s.start=Oa._createAt(e[n].start);for(let n=i+1;n<e.length&&e[n].start.isEqual(s.end);n++)s.end=Oa._createAt(e[n].end);return s}static fromJSON(e,t){return new this(Oa.fromJSON(e.start,t),Oa.fromJSON(e.end,t))}}class Na{constructor(){this._modelToViewMapping=new WeakMap,this._viewToModelMapping=new WeakMap,this._viewToModelLengthCallbacks=new Map,this._markerNameToElements=new Map,this._elementToMarkerNames=new Map,this._unboundMarkerNames=new Set,this.on("modelToViewPosition",((e,t)=>{if(t.viewPosition)return;const i=this._modelToViewMapping.get(t.modelPosition.parent);t.viewPosition=this.findPositionIn(i,t.modelPosition.offset)}),{priority:"low"}),this.on("viewToModelPosition",((e,t)=>{if(t.modelPosition)return;const i=this.findMappedViewAncestor(t.viewPosition),s=this._viewToModelMapping.get(i),n=this._toModelOffset(t.viewPosition.parent,t.viewPosition.offset,i);t.modelPosition=Oa._createAt(s,n)}),{priority:"low"})}bindElements(e,t){this._modelToViewMapping.set(e,t),this._viewToModelMapping.set(t,e)}unbindViewElement(e){const t=this.toModelElement(e);if(this._viewToModelMapping.delete(e),this._elementToMarkerNames.has(e))for(const i of this._elementToMarkerNames.get(e))this._unboundMarkerNames.add(i);this._modelToViewMapping.get(t)==e&&this._modelToViewMapping.delete(t)}unbindModelElement(e){const t=this.toViewElement(e);this._modelToViewMapping.delete(e),this._viewToModelMapping.get(t)==e&&this._viewToModelMapping.delete(t)}bindElementToMarker(e,t){const i=this._markerNameToElements.get(t)||new Set;i.add(e);const s=this._elementToMarkerNames.get(e)||new Set;s.add(t),this._markerNameToElements.set(t,i),this._elementToMarkerNames.set(e,s)}unbindElementFromMarkerName(e,t){const i=this._markerNameToElements.get(t);i&&(i.delete(e),0==i.size&&this._markerNameToElements.delete(t));const s=this._elementToMarkerNames.get(e);s&&(s.delete(t),0==s.size&&this._elementToMarkerNames.delete(e))}flushUnboundMarkerNames(){const e=Array.from(this._unboundMarkerNames);return this._unboundMarkerNames.clear(),e}clearBindings(){this._modelToViewMapping=new WeakMap,this._viewToModelMapping=new WeakMap,this._markerNameToElements=new Map,this._elementToMarkerNames=new Map,this._unboundMarkerNames=new Set}toModelElement(e){return this._viewToModelMapping.get(e)}toViewElement(e){return this._modelToViewMapping.get(e)}toModelRange(e){return new Ma(this.toModelPosition(e.start),this.toModelPosition(e.end))}toViewRange(e){return new Vn(this.toViewPosition(e.start),this.toViewPosition(e.end))}toModelPosition(e){const t={viewPosition:e,mapper:this};return this.fire("viewToModelPosition",t),t.modelPosition}toViewPosition(e,t={isPhantom:!1}){const i={modelPosition:e,mapper:this,isPhantom:t.isPhantom};return this.fire("modelToViewPosition",i),i.viewPosition}markerNameToElements(e){const t=this._markerNameToElements.get(e);if(!t)return null;const i=new Set;for(const s of t)if(s.is("attributeElement"))for(const e of s.getElementsWithSameId())i.add(e);else i.add(s);return i}registerViewToModelLength(e,t){this._viewToModelLengthCallbacks.set(e,t)}findMappedViewAncestor(e){let t=e.parent;for(;!this._viewToModelMapping.has(t);)t=t.parent;return t}_toModelOffset(e,t,i){if(i!=e)return this._toModelOffset(e.parent,e.index,i)+this._toModelOffset(e,t,e);if(e.is("$text"))return t;let s=0;for(let n=0;n<t;n++)s+=this.getModelLength(e.getChild(n));return s}getModelLength(e){if(this._viewToModelLengthCallbacks.get(e.name))return this._viewToModelLengthCallbacks.get(e.name)(e);if(this._viewToModelMapping.has(e))return 1;if(e.is("$text"))return e.data.length;if(e.is("uiElement"))return 0;{let t=0;for(const i of e.getChildren())t+=this.getModelLength(i);return t}}findPositionIn(e,t){let i,s=0,n=0,o=0;if(e.is("$text"))return new Dn(e,t);for(;n<t;)i=e.getChild(o),s=this.getModelLength(i),n+=s,o++;return n==t?this._moveViewPositionToTextNode(new Dn(e,o)):this.findPositionIn(i,t-(n-s))}_moveViewPositionToTextNode(e){const t=e.nodeBefore,i=e.nodeAfter;return t instanceof Bs?new Dn(t,t.data.length):i instanceof Bs?new Dn(i,0):e}}dt(Na,b);class Da{constructor(){this._consumable=new Map,this._textProxyRegistry=new Map}add(e,t){t=Va(t),e instanceof Ca&&(e=this._getSymbolForTextProxy(e)),this._consumable.has(e)||this._consumable.set(e,new Map),this._consumable.get(e).set(t,!0)}consume(e,t){return t=Va(t),e instanceof Ca&&(e=this._getSymbolForTextProxy(e)),!!this.test(e,t)&&(this._consumable.get(e).set(t,!1),!0)}test(e,t){t=Va(t),e instanceof Ca&&(e=this._getSymbolForTextProxy(e));const i=this._consumable.get(e);if(void 0===i)return null;const s=i.get(t);return void 0===s?null:s}revert(e,t){t=Va(t),e instanceof Ca&&(e=this._getSymbolForTextProxy(e));const i=this.test(e,t);return!1===i?(this._consumable.get(e).set(t,!0),!0):!0!==i&&null}_getSymbolForTextProxy(e){let t=null;const i=this._textProxyRegistry.get(e.startOffset);if(i){const s=i.get(e.endOffset);s&&(t=s.get(e.parent))}return t||(t=this._addSymbolForTextProxy(e.startOffset,e.endOffset,e.parent)),t}_addSymbolForTextProxy(e,t,i){const s=Symbol("textProxySymbol");let n,o;return n=this._textProxyRegistry.get(e),n||(n=new Map,this._textProxyRegistry.set(e,n)),o=n.get(t),o||(o=new Map,n.set(t,o)),o.set(i,s),s}}function Va(e){const t=e.split(":");return"addMarker"==t[0]||"removeMarker"==t[0]?e:t.length>1?t[0]+":"+t[1]:t[0]}class Ba{constructor(e){this.conversionApi=Object.assign({dispatcher:this},e),this._reconversionEventsMapping=new Map}convertChanges(e,t,i){for(const n of e.getMarkersToRemove())this.convertMarkerRemove(n.name,n.range,i);const s=this._mapChangesWithAutomaticReconversion(e);for(const n of s)"insert"===n.type?this.convertInsert(Ma._createFromPositionAndShift(n.position,n.length),i):"remove"===n.type?this.convertRemove(n.position,n.length,n.name,i):"reconvert"===n.type?this.reconvertElement(n.element,i):this.convertAttribute(n.range,n.attributeKey,n.attributeOldValue,n.attributeNewValue,i);for(const n of this.conversionApi.mapper.flushUnboundMarkerNames()){const e=t.get(n).getRange();this.convertMarkerRemove(n,e,i),this.convertMarkerAdd(n,e,i)}for(const n of e.getMarkersToAdd())this.convertMarkerAdd(n.name,n.range,i)}convertInsert(e,t){this.conversionApi.writer=t,this.conversionApi.consumable=this._createInsertConsumable(e);for(const i of Array.from(e).map(Fa))this._convertInsertWithAttributes(i);this._clearConversionApi()}convertRemove(e,t,i,s){this.conversionApi.writer=s,this.fire("remove:"+i,{position:e,length:t},this.conversionApi),this._clearConversionApi()}convertAttribute(e,t,i,s,n){this.conversionApi.writer=n,this.conversionApi.consumable=this._createConsumableForRange(e,`attribute:${t}`);for(const o of e){const e={item:o.item,range:Ma._createFromPositionAndShift(o.previousPosition,o.length),attributeKey:t,attributeOldValue:i,attributeNewValue:s};this._testAndFire(`attribute:${t}`,e)}this._clearConversionApi()}reconvertElement(e,t){const i=Ma._createOn(e);this.conversionApi.writer=t,this.conversionApi.consumable=this._createInsertConsumable(i);const s=this.conversionApi.mapper,n=s.toViewElement(e);t.remove(n),this._convertInsertWithAttributes({item:e,range:i});const o=s.toViewElement(e);for(const r of Ma._createIn(e)){const{item:e}=r,i=ja(e,s);i?i.root!==o.root&&t.move(t.createRangeOn(i),s.toViewPosition(Oa._createBefore(e))):this._convertInsertWithAttributes(Fa(r))}s.unbindViewElement(n),this._clearConversionApi()}convertSelection(e,t,i){const s=Array.from(t.getMarkersAtPosition(e.getFirstPosition()));if(this.conversionApi.writer=i,this.conversionApi.consumable=this._createSelectionConsumable(e,s),this.fire("selection",{selection:e},this.conversionApi),e.isCollapsed){for(const t of s){const i=t.getRange();if(!La(e.getFirstPosition(),t,this.conversionApi.mapper))continue;const s={item:e,markerName:t.name,markerRange:i};this.conversionApi.consumable.test(e,"addMarker:"+t.name)&&this.fire("addMarker:"+t.name,s,this.conversionApi)}for(const t of e.getAttributeKeys()){const i={item:e,range:e.getFirstRange(),attributeKey:t,attributeOldValue:null,attributeNewValue:e.getAttribute(t)};this.conversionApi.consumable.test(e,"attribute:"+i.attributeKey)&&this.fire("attribute:"+i.attributeKey+":$text",i,this.conversionApi)}this._clearConversionApi()}else this._clearConversionApi()}convertMarkerAdd(e,t,i){if("$graveyard"==t.root.rootName)return;this.conversionApi.writer=i;const s="addMarker:"+e,n=new Da;if(n.add(t,s),this.conversionApi.consumable=n,this.fire(s,{markerName:e,markerRange:t},this.conversionApi),n.test(t,s)){this.conversionApi.consumable=this._createConsumableForRange(t,s);for(const i of t.getItems()){if(!this.conversionApi.consumable.test(i,s))continue;const n={item:i,range:Ma._createOn(i),markerName:e,markerRange:t};this.fire(s,n,this.conversionApi)}this._clearConversionApi()}else this._clearConversionApi()}convertMarkerRemove(e,t,i){"$graveyard"!=t.root.rootName&&(this.conversionApi.writer=i,this.fire("removeMarker:"+e,{markerName:e,markerRange:t},this.conversionApi),this._clearConversionApi())}_mapReconversionTriggerEvent(e,t){this._reconversionEventsMapping.set(t,e)}_createInsertConsumable(e){const t=new Da;for(const i of e){const e=i.item;t.add(e,"insert");for(const i of e.getAttributeKeys())t.add(e,"attribute:"+i)}return t}_createConsumableForRange(e,t){const i=new Da;for(const s of e.getItems())i.add(s,t);return i}_createSelectionConsumable(e,t){const i=new Da;i.add(e,"selection");for(const s of t)i.add(e,"addMarker:"+s.name);for(const s of e.getAttributeKeys())i.add(e,"attribute:"+s);return i}_testAndFire(e,t){this.conversionApi.consumable.test(t.item,e)&&this.fire(function(e,t){return`${e}:${t.item.name||"$text"}`}(e,t),t,this.conversionApi)}_clearConversionApi(){delete this.conversionApi.writer,delete this.conversionApi.consumable}_convertInsertWithAttributes(e){this._testAndFire("insert",e);for(const t of e.item.getAttributeKeys())e.attributeKey=t,e.attributeOldValue=null,e.attributeNewValue=e.item.getAttribute(t),this._testAndFire(`attribute:${t}`,e)}_mapChangesWithAutomaticReconversion(e){const t=new Set,i=[];for(const s of e.getChanges()){const e=s.position||s.range.start,n=e.parent;if(Ia(e,n)){i.push(s);continue}const o="attribute"===s.type?Ra(e,n,null):n;if(o.is("$text")){i.push(s);continue}let r;if(r="attribute"===s.type?`attribute:${s.attributeKey}:${o.name}`:`${s.type}:${s.name}`,this._isReconvertTriggerEvent(r,o.name)){if(t.has(o))continue;t.add(o),i.push({type:"reconvert",element:o})}else i.push(s)}return i}_isReconvertTriggerEvent(e,t){return this._reconversionEventsMapping.get(e)===t}}function La(e,t,i){const s=t.getRange(),n=Array.from(e.getAncestors());return n.shift(),n.reverse(),!n.some((e=>{if(s.containsItem(e))return!!i.toViewElement(e).getCustomProperty("addHighlight")}))}function Fa(e){return{item:e.item,range:Ma._createFromPositionAndShift(e.previousPosition,e.length)}}function ja(e,t){if(e.is("textProxy")){const i=t.toViewPosition(Oa._createBefore(e)).parent;return i.is("$text")?i:null}return t.toViewElement(e)}dt(Ba,b);class qa{constructor(e,t,i){this._lastRangeBackward=!1,this._ranges=[],this._attrs=new Map,e&&this.setTo(e,t,i)}get anchor(){if(this._ranges.length>0){const e=this._ranges[this._ranges.length-1];return this._lastRangeBackward?e.end:e.start}return null}get focus(){if(this._ranges.length>0){const e=this._ranges[this._ranges.length-1];return this._lastRangeBackward?e.start:e.end}return null}get isCollapsed(){return 1===this._ranges.length&&this._ranges[0].isCollapsed}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}isEqual(e){if(this.rangeCount!=e.rangeCount)return!1;if(0===this.rangeCount)return!0;if(!this.anchor.isEqual(e.anchor)||!this.focus.isEqual(e.focus))return!1;for(const t of this._ranges){let i=!1;for(const s of e._ranges)if(t.isEqual(s)){i=!0;break}if(!i)return!1}return!0}*getRanges(){for(const e of this._ranges)yield new Ma(e.start,e.end)}getFirstRange(){let e=null;for(const t of this._ranges)e&&!t.start.isBefore(e.start)||(e=t);return e?new Ma(e.start,e.end):null}getLastRange(){let e=null;for(const t of this._ranges)e&&!t.end.isAfter(e.end)||(e=t);return e?new Ma(e.start,e.end):null}getFirstPosition(){const e=this.getFirstRange();return e?e.start.clone():null}getLastPosition(){const e=this.getLastRange();return e?e.end.clone():null}setTo(e,t,i){if(null===e)this._setRanges([]);else if(e instanceof qa)this._setRanges(e.getRanges(),e.isBackward);else if(e&&"function"==typeof e.getRanges)this._setRanges(e.getRanges(),e.isBackward);else if(e instanceof Ma)this._setRanges([e],!!t&&!!t.backward);else if(e instanceof Oa)this._setRanges([new Ma(e)]);else if(e instanceof Aa){const s=!!i&&!!i.backward;let n;if("in"==t)n=Ma._createIn(e);else if("on"==t)n=Ma._createOn(e);else{if(void 0===t)throw new h("model-selection-setto-required-second-parameter",[this,e]);n=new Ma(Oa._createAt(e,t))}this._setRanges([n],s)}else{if(!Cs(e))throw new h("model-selection-setto-not-selectable",[this,e]);this._setRanges(e,t&&!!t.backward)}}_setRanges(e,t=!1){const i=(e=Array.from(e)).some((t=>{if(!(t instanceof Ma))throw new h("model-selection-set-ranges-not-range",[this,e]);return this._ranges.every((e=>!e.isEqual(t)))}));if(e.length!==this._ranges.length||i){this._removeAllRanges();for(const t of e)this._pushRange(t);this._lastRangeBackward=!!t,this.fire("change:range",{directChange:!0})}}setFocus(e,t){if(null===this.anchor)throw new h("model-selection-setfocus-no-ranges",[this,e]);const i=Oa._createAt(e,t);if("same"==i.compareWith(this.focus))return;const s=this.anchor;this._ranges.length&&this._popRange(),"before"==i.compareWith(s)?(this._pushRange(new Ma(i,s)),this._lastRangeBackward=!0):(this._pushRange(new Ma(s,i)),this._lastRangeBackward=!1),this.fire("change:range",{directChange:!0})}getAttribute(e){return this._attrs.get(e)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}hasAttribute(e){return this._attrs.has(e)}removeAttribute(e){this.hasAttribute(e)&&(this._attrs.delete(e),this.fire("change:attribute",{attributeKeys:[e],directChange:!0}))}setAttribute(e,t){this.getAttribute(e)!==t&&(this._attrs.set(e,t),this.fire("change:attribute",{attributeKeys:[e],directChange:!0}))}getSelectedElement(){return 1!==this.rangeCount?null:this.getFirstRange().getContainedElement()}is(e){return"selection"===e||"model:selection"===e}*getSelectedBlocks(){const e=new WeakSet;for(const t of this.getRanges()){const i=Ua(t.start,e);i&&Wa(i,t)&&(yield i);for(const n of t.getWalker()){const i=n.item;"elementEnd"==n.type&&$a(i,e,t)&&(yield i)}const s=Ua(t.end,e);s&&!t.end.isTouching(Oa._createAt(s,0))&&Wa(s,t)&&(yield s)}}containsEntireContent(e=this.anchor.root){const t=Oa._createAt(e,0),i=Oa._createAt(e,"end");return t.isTouching(this.getFirstPosition())&&i.isTouching(this.getLastPosition())}_pushRange(e){this._checkRange(e),this._ranges.push(new Ma(e.start,e.end))}_checkRange(e){for(let t=0;t<this._ranges.length;t++)if(e.isIntersecting(this._ranges[t]))throw new h("model-selection-range-intersects",[this,e],{addedRange:e,intersectingRange:this._ranges[t]})}_removeAllRanges(){for(;this._ranges.length>0;)this._popRange()}_popRange(){this._ranges.pop()}}function Ha(e,t){return!t.has(e)&&(t.add(e),e.root.document.model.schema.isBlock(e)&&e.parent)}function $a(e,t,i){return Ha(e,t)&&Wa(e,i)}function Ua(e,t){const i=e.parent.root.document.model.schema,s=e.parent.getAncestors({parentFirst:!0,includeSelf:!0});let n=!1;const o=s.find((e=>!n&&(n=i.isLimit(e),!n&&Ha(e,t))));return s.forEach((e=>t.add(e))),o}function Wa(e,t){const i=function(e){const t=e.root.document.model.schema;let i=e.parent;for(;i;){if(t.isBlock(i))return i;i=i.parent}}(e);return!i||!t.containsRange(Ma._createOn(i),!0)}dt(qa,b);class Za extends Ma{constructor(e,t){super(e,t),Ga.call(this)}detach(){this.stopListening()}is(e){return"liveRange"===e||"model:liveRange"===e||"range"==e||"model:range"===e}toRange(){return new Ma(this.start,this.end)}static fromRange(e){return new Za(e.start,e.end)}}function Ga(){this.listenTo(this.root.document.model,"applyOperation",((e,t)=>{const i=t[0];i.isDocumentOperation&&Ka.call(this,i)}),{priority:"low"})}function Ka(e){const t=this.getTransformedByOperation(e),i=Ma._createFromRanges(t),s=!i.isEqual(this),n=function(e,t){switch(t.type){case"insert":return e.containsPosition(t.position);case"move":case"remove":case"reinsert":case"merge":return e.containsPosition(t.sourcePosition)||e.start.isEqual(t.sourcePosition)||e.containsPosition(t.targetPosition);case"split":return e.containsPosition(t.splitPosition)||e.containsPosition(t.insertionPosition)}return!1}(this,e);let o=null;if(s){"$graveyard"==i.root.rootName&&(o="remove"==e.type?e.sourcePosition:e.deletionPosition);const t=this.toRange();this.start=i.start,this.end=i.end,this.fire("change:range",t,{deletionPosition:o})}else n&&this.fire("change:content",this.toRange(),{deletionPosition:o})}dt(Za,b);const Ja="selection:";class Ya{constructor(e){this._selection=new Qa(e),this._selection.delegate("change:range").to(this),this._selection.delegate("change:attribute").to(this),this._selection.delegate("change:marker").to(this)}get isCollapsed(){return this._selection.isCollapsed}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get rangeCount(){return this._selection.rangeCount}get hasOwnRange(){return this._selection.hasOwnRange}get isBackward(){return this._selection.isBackward}get isGravityOverridden(){return this._selection.isGravityOverridden}get markers(){return this._selection.markers}get _ranges(){return this._selection._ranges}getRanges(){return this._selection.getRanges()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getSelectedBlocks(){return this._selection.getSelectedBlocks()}getSelectedElement(){return this._selection.getSelectedElement()}containsEntireContent(e){return this._selection.containsEntireContent(e)}destroy(){this._selection.destroy()}getAttributeKeys(){return this._selection.getAttributeKeys()}getAttributes(){return this._selection.getAttributes()}getAttribute(e){return this._selection.getAttribute(e)}hasAttribute(e){return this._selection.hasAttribute(e)}refresh(){this._selection._updateMarkers(),this._selection._updateAttributes(!1)}observeMarkers(e){this._selection.observeMarkers(e)}is(e){return"selection"===e||"model:selection"==e||"documentSelection"==e||"model:documentSelection"==e}_setFocus(e,t){this._selection.setFocus(e,t)}_setTo(e,t,i){this._selection.setTo(e,t,i)}_setAttribute(e,t){this._selection.setAttribute(e,t)}_removeAttribute(e){this._selection.removeAttribute(e)}_getStoredAttributes(){return this._selection._getStoredAttributes()}_overrideGravity(){return this._selection.overrideGravity()}_restoreGravity(e){this._selection.restoreGravity(e)}static _getStoreAttributeKey(e){return Ja+e}static _isStoreAttributeKey(e){return e.startsWith(Ja)}}dt(Ya,b);class Qa extends qa{constructor(e){super(),this.markers=new Es({idProperty:"name"}),this._model=e.model,this._document=e,this._attributePriority=new Map,this._selectionRestorePosition=null,this._hasChangedRange=!1,this._overriddenGravityRegister=new Set,this._observedMarkers=new Set,this.listenTo(this._model,"applyOperation",((e,t)=>{const i=t[0];i.isDocumentOperation&&"marker"!=i.type&&"rename"!=i.type&&"noop"!=i.type&&(0==this._ranges.length&&this._selectionRestorePosition&&this._fixGraveyardSelection(this._selectionRestorePosition),this._selectionRestorePosition=null,this._hasChangedRange&&(this._hasChangedRange=!1,this.fire("change:range",{directChange:!1})))}),{priority:"lowest"}),this.on("change:range",(()=>{for(const e of this.getRanges())if(!this._document._validateSelectionRange(e))throw new h("document-selection-wrong-position",this,{range:e})})),this.listenTo(this._model.markers,"update",((e,t,i,s)=>{this._updateMarker(t,s)})),this.listenTo(this._document,"change",((e,t)=>{!function(e,t){const i=e.document.differ;for(const s of i.getChanges()){if("insert"!=s.type)continue;const i=s.position.parent;s.length===i.maxOffset&&e.enqueueChange(t,(e=>{const t=Array.from(i.getAttributeKeys()).filter((e=>e.startsWith(Ja)));for(const s of t)e.removeAttribute(s,i)}))}}(this._model,t)}))}get isCollapsed(){return 0===this._ranges.length?this._document._getDefaultRange().isCollapsed:super.isCollapsed}get anchor(){return super.anchor||this._document._getDefaultRange().start}get focus(){return super.focus||this._document._getDefaultRange().end}get rangeCount(){return this._ranges.length?this._ranges.length:1}get hasOwnRange(){return this._ranges.length>0}get isGravityOverridden(){return!!this._overriddenGravityRegister.size}destroy(){for(let e=0;e<this._ranges.length;e++)this._ranges[e].detach();this.stopListening()}*getRanges(){this._ranges.length?yield*super.getRanges():yield this._document._getDefaultRange()}getFirstRange(){return super.getFirstRange()||this._document._getDefaultRange()}getLastRange(){return super.getLastRange()||this._document._getDefaultRange()}setTo(e,t,i){super.setTo(e,t,i),this._updateAttributes(!0),this._updateMarkers()}setFocus(e,t){super.setFocus(e,t),this._updateAttributes(!0),this._updateMarkers()}setAttribute(e,t){if(this._setAttribute(e,t)){const t=[e];this.fire("change:attribute",{attributeKeys:t,directChange:!0})}}removeAttribute(e){if(this._removeAttribute(e)){const t=[e];this.fire("change:attribute",{attributeKeys:t,directChange:!0})}}overrideGravity(){const e=r();return this._overriddenGravityRegister.add(e),1===this._overriddenGravityRegister.size&&this._updateAttributes(!0),e}restoreGravity(e){if(!this._overriddenGravityRegister.has(e))throw new h("document-selection-gravity-wrong-restore",this,{uid:e});this._overriddenGravityRegister.delete(e),this.isGravityOverridden||this._updateAttributes(!0)}observeMarkers(e){this._observedMarkers.add(e),this._updateMarkers()}_popRange(){this._ranges.pop().detach()}_pushRange(e){const t=this._prepareRange(e);t&&this._ranges.push(t)}_prepareRange(e){if(this._checkRange(e),e.root==this._document.graveyard)return;const t=Za.fromRange(e);return t.on("change:range",((e,i,s)=>{if(this._hasChangedRange=!0,t.root==this._document.graveyard){this._selectionRestorePosition=s.deletionPosition;const e=this._ranges.indexOf(t);this._ranges.splice(e,1),t.detach()}})),t}_updateMarkers(){if(!this._observedMarkers.size)return;const e=[];let t=!1;for(const s of this._model.markers){const t=s.name.split(":",1)[0];if(!this._observedMarkers.has(t))continue;const i=s.getRange();for(const n of this.getRanges())i.containsRange(n,!n.isCollapsed)&&e.push(s)}const i=Array.from(this.markers);for(const s of e)this.markers.has(s)||(this.markers.add(s),t=!0);for(const s of Array.from(this.markers))e.includes(s)||(this.markers.remove(s),t=!0);t&&this.fire("change:marker",{oldMarkers:i,directChange:!1})}_updateMarker(e,t){const i=e.name.split(":",1)[0];if(!this._observedMarkers.has(i))return;let s=!1;const n=Array.from(this.markers),o=this.markers.has(e);if(t){let i=!1;for(const e of this.getRanges())if(t.containsRange(e,!e.isCollapsed)){i=!0;break}i&&!o?(this.markers.add(e),s=!0):!i&&o&&(this.markers.remove(e),s=!0)}else o&&(this.markers.remove(e),s=!0);s&&this.fire("change:marker",{oldMarkers:n,directChange:!1})}_updateAttributes(e){const t=Fs(this._getSurroundingAttributes()),i=Fs(this.getAttributes());if(e)this._attributePriority=new Map,this._attrs=new Map;else for(const[n,o]of this._attributePriority)"low"==o&&(this._attrs.delete(n),this._attributePriority.delete(n));this._setAttributesTo(t);const s=[];for(const[n,o]of this.getAttributes())i.has(n)&&i.get(n)===o||s.push(n);for(const[n]of i)this.hasAttribute(n)||s.push(n);s.length>0&&this.fire("change:attribute",{attributeKeys:s,directChange:!1})}_setAttribute(e,t,i=!0){const s=i?"normal":"low";return("low"!=s||"normal"!=this._attributePriority.get(e))&&super.getAttribute(e)!==t&&(this._attrs.set(e,t),this._attributePriority.set(e,s),!0)}_removeAttribute(e,t=!0){const i=t?"normal":"low";return("low"!=i||"normal"!=this._attributePriority.get(e))&&(this._attributePriority.set(e,i),!!super.hasAttribute(e)&&(this._attrs.delete(e),!0))}_setAttributesTo(e){const t=new Set;for(const[i,s]of this.getAttributes())e.get(i)!==s&&this._removeAttribute(i,!1);for(const[i,s]of e)this._setAttribute(i,s,!1)&&t.add(i);return t}*_getStoredAttributes(){const e=this.getFirstPosition().parent;if(this.isCollapsed&&e.isEmpty)for(const t of e.getAttributeKeys())if(t.startsWith(Ja)){const i=t.substr(Ja.length);yield[i,e.getAttribute(t)]}}_getSurroundingAttributes(){const e=this.getFirstPosition(),t=this._model.schema;let i=null;if(this.isCollapsed){const s=e.textNode?e.textNode:e.nodeBefore,n=e.textNode?e.textNode:e.nodeAfter;if(this.isGravityOverridden||(i=Xa(s)),i||(i=Xa(n)),!this.isGravityOverridden&&!i){let e=s;for(;e&&!t.isInline(e)&&!i;)e=e.previousSibling,i=Xa(e)}if(!i){let e=n;for(;e&&!t.isInline(e)&&!i;)e=e.nextSibling,i=Xa(e)}i||(i=this._getStoredAttributes())}else{const e=this.getFirstRange();for(const s of e){if(s.item.is("element")&&t.isObject(s.item))break;if("text"==s.type){i=s.item.getAttributes();break}}}return i}_fixGraveyardSelection(e){const t=this._model.schema.getNearestSelectionRange(e);t&&this._pushRange(t)}}function Xa(e){return e instanceof Ca||e instanceof xa?e.getAttributes():null}class el{constructor(e){this._dispatchers=e}add(e){for(const t of this._dispatchers)e(t);return this}}const tl=function(e){return vs(e,5)};class il extends el{elementToElement(e){return this.add(function(e){return(e=tl(e)).view=ol(e.view,"container"),t=>{var i;if(t.on("insert:"+e.model,(i=e.view,(e,t,s)=>{const n=i(t.item,s);if(!n)return;if(!s.consumable.consume(t.item,"insert"))return;const o=s.mapper.toViewPosition(t.range.start);s.mapper.bindElements(t.item,n),s.writer.insert(o,n)}),{priority:e.converterPriority||"normal"}),e.triggerBy){if(e.triggerBy.attributes)for(const i of e.triggerBy.attributes)t._mapReconversionTriggerEvent(e.model,`attribute:${i}:${e.model}`);if(e.triggerBy.children)for(const i of e.triggerBy.children)t._mapReconversionTriggerEvent(e.model,`insert:${i}`),t._mapReconversionTriggerEvent(e.model,`remove:${i}`)}}}(e))}attributeToElement(e){return this.add(function(e){let t="attribute:"+((e=tl(e)).model.key?e.model.key:e.model);if(e.model.name&&(t+=":"+e.model.name),e.model.values)for(const s of e.model.values)e.view[s]=ol(e.view[s],"attribute");else e.view=ol(e.view,"attribute");const i=rl(e);return s=>{s.on(t,function(e){return(t,i,s)=>{const n=e(i.attributeOldValue,s),o=e(i.attributeNewValue,s);if(!n&&!o)return;if(!s.consumable.consume(i.item,t.name))return;const r=s.writer,a=r.document.selection;if(i.item instanceof qa||i.item instanceof Ya)r.wrap(a.getFirstRange(),o);else{let e=s.mapper.toViewRange(i.range);null!==i.attributeOldValue&&n&&(e=r.unwrap(e,n)),null!==i.attributeNewValue&&o&&r.wrap(e,o)}}}(i),{priority:e.converterPriority||"normal"})}}(e))}attributeToAttribute(e){return this.add(function(e){let t="attribute:"+((e=tl(e)).model.key?e.model.key:e.model);if(e.model.name&&(t+=":"+e.model.name),e.model.values)for(const s of e.model.values)e.view[s]=al(e.view[s]);else e.view=al(e.view);const i=rl(e);return s=>{var n;s.on(t,(n=i,(e,t,i)=>{const s=n(t.attributeOldValue,i),o=n(t.attributeNewValue,i);if(!s&&!o)return;if(!i.consumable.consume(t.item,e.name))return;const r=i.mapper.toViewElement(t.item),a=i.writer;if(!r)throw new h("conversion-attribute-to-attribute-on-text",[t,i]);if(null!==t.attributeOldValue&&s)if("class"==s.key){const e=Ss(s.value);for(const t of e)a.removeClass(t,r)}else if("style"==s.key){const e=Object.keys(s.value);for(const t of e)a.removeStyle(t,r)}else a.removeAttribute(s.key,r);if(null!==t.attributeNewValue&&o)if("class"==o.key){const e=Ss(o.value);for(const t of e)a.addClass(t,r)}else if("style"==o.key){const e=Object.keys(o.value);for(const t of e)a.setStyle(t,o.value[t],r)}else a.setAttribute(o.key,o.value,r)}),{priority:e.converterPriority||"normal"})}}(e))}markerToElement(e){return this.add(function(e){return(e=tl(e)).view=ol(e.view,"ui"),t=>{var i;t.on("addMarker:"+e.model,(i=e.view,(e,t,s)=>{t.isOpening=!0;const n=i(t,s);t.isOpening=!1;const o=i(t,s);if(!n||!o)return;const r=t.markerRange;if(r.isCollapsed&&!s.consumable.consume(r,e.name))return;for(const i of r)if(!s.consumable.consume(i.item,e.name))return;const a=s.mapper,l=s.writer;l.insert(a.toViewPosition(r.start),n),s.mapper.bindElementToMarker(n,t.markerName),r.isCollapsed||(l.insert(a.toViewPosition(r.end),o),s.mapper.bindElementToMarker(o,t.markerName)),e.stop()}),{priority:e.converterPriority||"normal"}),t.on("removeMarker:"+e.model,(e.view,(e,t,i)=>{const s=i.mapper.markerNameToElements(t.markerName);if(s){for(const e of s)i.mapper.unbindElementFromMarkerName(e,t.markerName),i.writer.clear(i.writer.createRangeOn(e),e);i.writer.clearClonedElementsGroup(t.markerName),e.stop()}}),{priority:e.converterPriority||"normal"})}}(e))}markerToHighlight(e){return this.add(function(e){return t=>{var i;t.on("addMarker:"+e.model,(i=e.view,(e,t,s)=>{if(!t.item)return;if(!(t.item instanceof qa||t.item instanceof Ya||t.item.is("$textProxy")))return;const n=ll(i,t,s);if(!n)return;if(!s.consumable.consume(t.item,e.name))return;const o=s.writer,r=sl(o,n),a=o.document.selection;if(t.item instanceof qa||t.item instanceof Ya)o.wrap(a.getFirstRange(),r,a);else{const e=s.mapper.toViewRange(t.range),i=o.wrap(e,r);for(const n of i.getItems())if(n.is("attributeElement")&&n.isSimilar(r)){s.mapper.bindElementToMarker(n,t.markerName);break}}}),{priority:e.converterPriority||"normal"}),t.on("addMarker:"+e.model,function(e){return(t,i,s)=>{if(!i.item)return;if(!(i.item instanceof Ta))return;const n=ll(e,i,s);if(!n)return;if(!s.consumable.test(i.item,t.name))return;const o=s.mapper.toViewElement(i.item);if(o&&o.getCustomProperty("addHighlight")){s.consumable.consume(i.item,t.name);for(const e of Ma._createIn(i.item))s.consumable.consume(e.item,t.name);o.getCustomProperty("addHighlight")(o,n,s.writer),s.mapper.bindElementToMarker(o,i.markerName)}}}(e.view),{priority:e.converterPriority||"normal"}),t.on("removeMarker:"+e.model,function(e){return(t,i,s)=>{if(i.markerRange.isCollapsed)return;const n=ll(e,i,s);if(!n)return;const o=sl(s.writer,n),r=s.mapper.markerNameToElements(i.markerName);if(r){for(const e of r)s.mapper.unbindElementFromMarkerName(e,i.markerName),e.is("attributeElement")?s.writer.unwrap(s.writer.createRangeOn(e),o):e.getCustomProperty("removeHighlight")(e,n.id,s.writer);s.writer.clearClonedElementsGroup(i.markerName),t.stop()}}}(e.view),{priority:e.converterPriority||"normal"})}}(e))}markerToData(e){return this.add(function(e){const t=(e=tl(e)).model;return e.view||(e.view=i=>({group:t,name:i.substr(e.model.length+1)})),i=>{var s;i.on("addMarker:"+t,(s=e.view,(e,t,i)=>{const n=s(t.markerName,i);if(!n)return;const o=t.markerRange;i.consumable.consume(o,e.name)&&(nl(o,!1,i,t,n),nl(o,!0,i,t,n),e.stop())}),{priority:e.converterPriority||"normal"}),i.on("removeMarker:"+t,function(e){return(t,i,s)=>{const n=e(i.markerName,s);if(!n)return;const o=s.mapper.markerNameToElements(i.markerName);if(o){for(const e of o)s.mapper.unbindElementFromMarkerName(e,i.markerName),e.is("containerElement")?(r(`data-${n.group}-start-before`,e),r(`data-${n.group}-start-after`,e),r(`data-${n.group}-end-before`,e),r(`data-${n.group}-end-after`,e)):s.writer.clear(s.writer.createRangeOn(e),e);s.writer.clearClonedElementsGroup(i.markerName),t.stop()}function r(e,t){if(t.hasAttribute(e)){const i=new Set(t.getAttribute(e).split(","));i.delete(n.name),0==i.size?s.writer.removeAttribute(e,t):s.writer.setAttribute(e,Array.from(i).join(","),t)}}}}(e.view),{priority:e.converterPriority||"normal"})}}(e))}}function sl(e,t){const i=e.createAttributeElement("span",t.attributes);return t.classes&&i._addClass(t.classes),"number"==typeof t.priority&&(i._priority=t.priority),i._id=t.id,i}function nl(e,t,i,s,n){const o=t?e.start:e.end,r=o.nodeAfter&&o.nodeAfter.is("element")?o.nodeAfter:null,a=o.nodeBefore&&o.nodeBefore.is("element")?o.nodeBefore:null;if(r||a){let e,o;t&&r||!t&&!a?(e=r,o=!0):(e=a,o=!1);const l=i.mapper.toViewElement(e);if(l)return void function(e,t,i,s,n,o){const r=`data-${o.group}-${t?"start":"end"}-${i?"before":"after"}`,a=e.hasAttribute(r)?e.getAttribute(r).split(","):[];a.unshift(o.name),s.writer.setAttribute(r,a.join(","),e),s.mapper.bindElementToMarker(e,n.markerName)}(l,t,o,i,s,n)}!function(e,t,i,s,n){const o=`${n.group}-${t?"start":"end"}`,r=n.name?{name:n.name}:null,a=i.writer.createUIElement(o,r);i.writer.insert(e,a),i.mapper.bindElementToMarker(a,s.markerName)}(i.mapper.toViewPosition(o),t,i,s,n)}function ol(e,t){return"function"==typeof e?e:(i,s)=>function(e,t,i){let s;"string"==typeof e&&(e={name:e});const n=t.writer,o=Object.assign({},e.attributes);if("container"==i)s=n.createContainerElement(e.name,o);else if("attribute"==i){const t={priority:e.priority||Jn.DEFAULT_PRIORITY};s=n.createAttributeElement(e.name,o,t)}else s=n.createUIElement(e.name,o);if(e.styles){const t=Object.keys(e.styles);for(const i of t)n.setStyle(i,e.styles[i],s)}if(e.classes){const t=e.classes;if("string"==typeof t)n.addClass(t,s);else for(const e of t)n.addClass(e,s)}return s}(e,s,t)}function rl(e){return e.model.values?(t,i)=>{const s=e.view[t];return s?s(t,i):null}:e.view}function al(e){return"string"==typeof e?t=>({key:e,value:t}):"object"==typeof e?e.value?()=>e:t=>({key:e.key,value:t}):e}function ll(e,t,i){const s="function"==typeof e?e(t,i):e;return s?(s.priority||(s.priority=10),s.id||(s.id=t.markerName),s):null}function cl(e){const{schema:t,document:i}=e.model;for(const s of i.getRootNames()){const n=i.getRoot(s);if(n.isEmpty&&!t.checkChild(n,"$text")&&t.checkChild(n,"paragraph"))return e.insertElement("paragraph",n),!0}return!1}function hl(e,t,i){const s=i.createContext(e);return!!i.checkChild(s,"paragraph")&&!!i.checkChild(s.push("paragraph"),t)}function dl(e,t){const i=t.createElement("paragraph");return t.insert(i,e),t.createPositionAt(i,0)}class ul extends el{elementToElement(e){return this.add(ml(e))}elementToAttribute(e){return this.add(function(e){gl(e=tl(e));const t=wl(e,!1),i=pl(e.view),s=i?"element:"+i:"element";return i=>{i.on(s,t,{priority:e.converterPriority||"low"})}}(e))}attributeToAttribute(e){return this.add(function(e){let t=null;("string"==typeof(e=tl(e)).view||e.view.key)&&(t=function(e){"string"==typeof e.view&&(e.view={key:e.view});const t=e.view.key;let i;return i="class"==t||"style"==t?{["class"==t?"classes":"styles"]:e.view.value}:{attributes:{[t]:void 0===e.view.value?/[\s\S]*/:e.view.value}},e.view.name&&(i.name=e.view.name),e.view=i,t}(e)),gl(e,t);const i=wl(e,!0);return t=>{t.on("element",i,{priority:e.converterPriority||"low"})}}(e))}elementToMarker(e){return this.add(function(e){return function(e){const t=e.model;e.model=(e,i)=>{const s="string"==typeof t?t:t(e,i);return i.writer.createElement("$marker",{"data-name":s})}}(e=tl(e)),ml(e)}(e))}dataToMarker(e){return this.add(function(e){(e=tl(e)).model||(e.model=t=>t?e.view+":"+t:e.view);const t=fl(bl(e,"start")),i=fl(bl(e,"end"));return s=>{s.on("element:"+e.view+"-start",t,{priority:e.converterPriority||"normal"}),s.on("element:"+e.view+"-end",i,{priority:e.converterPriority||"normal"});const n=c.get("low"),o=c.get("highest"),r=c.get(e.converterPriority)/o;s.on("element",function(e){return(t,i,s)=>{const n=`data-${e.view}`;function o(t,n){for(const o of n){const n=e.model(o,s),r=s.writer.createElement("$marker",{"data-name":n});s.writer.insert(r,t),i.modelCursor.isEqual(t)?i.modelCursor=i.modelCursor.getShiftedBy(1):i.modelCursor=i.modelCursor._getTransformedByInsertion(t,1),i.modelRange=i.modelRange._getTransformedByInsertion(t,1)[0]}}(s.consumable.test(i.viewItem,{attributes:n+"-end-after"})||s.consumable.test(i.viewItem,{attributes:n+"-start-after"})||s.consumable.test(i.viewItem,{attributes:n+"-end-before"})||s.consumable.test(i.viewItem,{attributes:n+"-start-before"}))&&(i.modelRange||Object.assign(i,s.convertChildren(i.viewItem,i.modelCursor)),s.consumable.consume(i.viewItem,{attributes:n+"-end-after"})&&o(i.modelRange.end,i.viewItem.getAttribute(n+"-end-after").split(",")),s.consumable.consume(i.viewItem,{attributes:n+"-start-after"})&&o(i.modelRange.end,i.viewItem.getAttribute(n+"-start-after").split(",")),s.consumable.consume(i.viewItem,{attributes:n+"-end-before"})&&o(i.modelRange.start,i.viewItem.getAttribute(n+"-end-before").split(",")),s.consumable.consume(i.viewItem,{attributes:n+"-start-before"})&&o(i.modelRange.start,i.viewItem.getAttribute(n+"-start-before").split(",")))}}(e),{priority:n+r})}}(e))}}function ml(e){const t=fl(e=tl(e)),i=pl(e.view),s=i?"element:"+i:"element";return i=>{i.on(s,t,{priority:e.converterPriority||"normal"})}}function pl(e){return"string"==typeof e?e:"object"==typeof e&&"string"==typeof e.name?e.name:null}function fl(e){const t=new js(e.view);return(i,s,n)=>{const o=t.match(s.viewItem);if(!o)return;const r=o.match;if(r.name=!0,!n.consumable.test(s.viewItem,r))return;const a=function(e,t,i){return e instanceof Function?e(t,i):i.writer.createElement(e)}(e.model,s.viewItem,n);a&&n.safeInsert(a,s.modelCursor)&&(n.consumable.consume(s.viewItem,r),n.convertChildren(s.viewItem,a),n.updateConversionResult(a,s))}}function gl(e,t=null){const i=null===t||(e=>e.getAttribute(t)),s="object"!=typeof e.model?e.model:e.model.key,n="object"!=typeof e.model||void 0===e.model.value?i:e.model.value;e.model={key:s,value:n}}function wl(e,t){const i=new js(e.view);return(s,n,o)=>{const r=i.match(n.viewItem);if(!r)return;if(function(e,t){const i="function"==typeof e?e(t):e;return!("object"==typeof i&&!pl(i))&&!i.classes&&!i.attributes&&!i.styles}(e.view,n.viewItem)?r.match.name=!0:delete r.match.name,!o.consumable.test(n.viewItem,r.match))return;const a=e.model.key,l="function"==typeof e.model.value?e.model.value(n.viewItem,o):e.model.value;null!==l&&(n.modelRange||Object.assign(n,o.convertChildren(n.viewItem,n.modelCursor)),function(e,t,i,s){let n=!1;for(const o of Array.from(e.getItems({shallow:i})))s.schema.checkAttribute(o,t.key)&&(n=!0,o.hasAttribute(t.key)||s.writer.setAttribute(t.key,t.value,o));return n}(n.modelRange,{key:a,value:l},t,o)&&o.consumable.consume(n.viewItem,r.match))}}function bl(e,t){const i={};return i.view=e.view+"-"+t,i.model=(t,i)=>{const s=t.getAttribute("name"),n=e.model(s,i);return i.writer.createElement("$marker",{"data-name":n})},i}class vl{constructor(e,t){this.model=e,this.view=new ka(t),this.mapper=new Na,this.downcastDispatcher=new Ba({mapper:this.mapper,schema:e.schema});const i=this.model.document,s=i.selection,n=this.model.markers;this.listenTo(this.model,"_beforeChanges",(()=>{this.view._disableRendering(!0)}),{priority:"highest"}),this.listenTo(this.model,"_afterChanges",(()=>{this.view._disableRendering(!1)}),{priority:"lowest"}),this.listenTo(i,"change",(()=>{this.view.change((e=>{this.downcastDispatcher.convertChanges(i.differ,n,e),this.downcastDispatcher.convertSelection(s,n,e)}))}),{priority:"low"}),this.listenTo(this.view.document,"selectionChange",function(e,t){return(i,s)=>{const n=s.newSelection,o=[];for(const e of n.getRanges())o.push(t.toModelRange(e));const r=e.createSelection(o,{backward:n.isBackward});r.isEqual(e.document.selection)||e.change((e=>{e.setSelection(r)}))}}(this.model,this.mapper)),this.downcastDispatcher.on("insert:$text",((e,t,i)=>{if(!i.consumable.consume(t.item,"insert"))return;const s=i.writer,n=i.mapper.toViewPosition(t.range.start),o=s.createText(t.item.data);s.insert(n,o)}),{priority:"lowest"}),this.downcastDispatcher.on("remove",((e,t,i)=>{const s=i.mapper.toViewPosition(t.position),n=t.position.getShiftedBy(t.length),o=i.mapper.toViewPosition(n,{isPhantom:!0}),r=i.writer.createRange(s,o),a=i.writer.remove(r.getTrimmed());for(const l of i.writer.createRangeIn(a).getItems())i.mapper.unbindViewElement(l)}),{priority:"low"}),this.downcastDispatcher.on("selection",((e,t,i)=>{const s=i.writer,n=s.document.selection;for(const o of n.getRanges())o.isCollapsed&&o.end.parent.isAttached()&&i.writer.mergeAttributes(o.start);s.setSelection(null)}),{priority:"high"}),this.downcastDispatcher.on("selection",((e,t,i)=>{const s=t.selection;if(s.isCollapsed)return;if(!i.consumable.consume(s,"selection"))return;const n=[];for(const o of s.getRanges()){const e=i.mapper.toViewRange(o);n.push(e)}i.writer.setSelection(n,{backward:s.isBackward})}),{priority:"low"}),this.downcastDispatcher.on("selection",((e,t,i)=>{const s=t.selection;if(!s.isCollapsed)return;if(!i.consumable.consume(s,"selection"))return;const n=i.writer,o=s.getFirstPosition(),r=i.mapper.toViewPosition(o),a=n.breakAttributes(r);n.setSelection(a)}),{priority:"low"}),this.view.document.roots.bindTo(this.model.document.roots).using((e=>{if("$graveyard"==e.rootName)return null;const t=new Mn(this.view.document,e.name);return t.rootName=e.rootName,this.mapper.bindElements(e,t),t}))}destroy(){this.view.destroy(),this.stopListening()}}dt(vl,ot);class yl{constructor(){this._commands=new Map}add(e,t){this._commands.set(e,t)}get(e){return this._commands.get(e)}execute(e,...t){const i=this.get(e);if(!i)throw new h("commandcollection-command-not-found",this,{commandName:e});return i.execute(...t)}*names(){yield*this._commands.keys()}*commands(){yield*this._commands.values()}[Symbol.iterator](){return this._commands[Symbol.iterator]()}destroy(){for(const e of this.commands())e.destroy()}}class _l{constructor(){this._consumables=new Map}add(e,t){let i;e.is("$text")||e.is("documentFragment")?this._consumables.set(e,!0):(this._consumables.has(e)?i=this._consumables.get(e):(i=new kl(e),this._consumables.set(e,i)),i.add(t))}test(e,t){const i=this._consumables.get(e);return void 0===i?null:e.is("$text")||e.is("documentFragment")?i:i.test(t)}consume(e,t){return!!this.test(e,t)&&(e.is("$text")||e.is("documentFragment")?this._consumables.set(e,!1):this._consumables.get(e).consume(t),!0)}revert(e,t){const i=this._consumables.get(e);void 0!==i&&(e.is("$text")||e.is("documentFragment")?this._consumables.set(e,!0):i.revert(t))}static consumablesFromElement(e){const t={element:e,name:!0,attributes:[],classes:[],styles:[]},i=e.getAttributeKeys();for(const o of i)"style"!=o&&"class"!=o&&t.attributes.push(o);const s=e.getClassNames();for(const o of s)t.classes.push(o);const n=e.getStyleNames();for(const o of n)t.styles.push(o);return t}static createFrom(e,t){if(t||(t=new _l(e)),e.is("$text"))return t.add(e),t;e.is("element")&&t.add(e,_l.consumablesFromElement(e)),e.is("documentFragment")&&t.add(e);for(const i of e.getChildren())t=_l.createFrom(i,t);return t}}class kl{constructor(e){this.element=e,this._canConsumeName=null,this._consumables={attributes:new Map,styles:new Map,classes:new Map}}add(e){e.name&&(this._canConsumeName=!0);for(const t in this._consumables)t in e&&this._add(t,e[t])}test(e){if(e.name&&!this._canConsumeName)return this._canConsumeName;for(const t in this._consumables)if(t in e){const i=this._test(t,e[t]);if(!0!==i)return i}return!0}consume(e){e.name&&(this._canConsumeName=!1);for(const t in this._consumables)t in e&&this._consume(t,e[t])}revert(e){e.name&&(this._canConsumeName=!0);for(const t in this._consumables)t in e&&this._revert(t,e[t])}_add(e,t){const i=Pe(t)?t:[t],s=this._consumables[e];for(const n of i){if("attributes"===e&&("class"===n||"style"===n))throw new h("viewconsumable-invalid-attribute",this);if(s.set(n,!0),"styles"===e)for(const e of this.element.document.stylesProcessor.getRelatedStyles(n))s.set(e,!0)}}_test(e,t){const i=Pe(t)?t:[t],s=this._consumables[e];for(const n of i)if("attributes"!==e||"class"!==n&&"style"!==n){const e=s.get(n);if(void 0===e)return null;if(!e)return!1}else{const e="class"==n?"classes":"styles",t=this._test(e,[...this._consumables[e].keys()]);if(!0!==t)return t}return!0}_consume(e,t){const i=Pe(t)?t:[t],s=this._consumables[e];for(const n of i)if("attributes"!==e||"class"!==n&&"style"!==n){if(s.set(n,!1),"styles"==e)for(const e of this.element.document.stylesProcessor.getRelatedStyles(n))s.set(e,!1)}else{const e="class"==n?"classes":"styles";this._consume(e,[...this._consumables[e].keys()])}}_revert(e,t){const i=Pe(t)?t:[t],s=this._consumables[e];for(const n of i)if("attributes"!==e||"class"!==n&&"style"!==n)!1===s.get(n)&&s.set(n,!0);else{const e="class"==n?"classes":"styles";this._revert(e,[...this._consumables[e].keys()])}}}class Al{constructor(){this._sourceDefinitions={},this._attributeProperties={},this.decorate("checkChild"),this.decorate("checkAttribute"),this.on("checkAttribute",((e,t)=>{t[0]=new xl(t[0])}),{priority:"highest"}),this.on("checkChild",((e,t)=>{t[0]=new xl(t[0]),t[1]=this.getDefinition(t[1])}),{priority:"highest"})}register(e,t){if(this._sourceDefinitions[e])throw new h("schema-cannot-register-item-twice",this,{itemName:e});this._sourceDefinitions[e]=[Object.assign({},t)],this._clearCache()}extend(e,t){if(!this._sourceDefinitions[e])throw new h("schema-cannot-extend-missing-item",this,{itemName:e});this._sourceDefinitions[e].push(Object.assign({},t)),this._clearCache()}getDefinitions(){return this._compiledDefinitions||this._compile(),this._compiledDefinitions}getDefinition(e){let t;return t="string"==typeof e?e:e.is&&(e.is("$text")||e.is("$textProxy"))?"$text":e.name,this.getDefinitions()[t]}isRegistered(e){return!!this.getDefinition(e)}isBlock(e){const t=this.getDefinition(e);return!(!t||!t.isBlock)}isLimit(e){const t=this.getDefinition(e);return!!t&&!(!t.isLimit&&!t.isObject)}isObject(e){const t=this.getDefinition(e);return!!t&&!!(t.isObject||t.isLimit&&t.isSelectable&&t.isContent)}isInline(e){const t=this.getDefinition(e);return!(!t||!t.isInline)}isSelectable(e){const t=this.getDefinition(e);return!!t&&!(!t.isSelectable&&!t.isObject)}isContent(e){const t=this.getDefinition(e);return!!t&&!(!t.isContent&&!t.isObject)}checkChild(e,t){return!!t&&this._checkContextMatch(t,e)}checkAttribute(e,t){const i=this.getDefinition(e.last);return!!i&&i.allowAttributes.includes(t)}checkMerge(e,t=null){if(e instanceof Oa){const t=e.nodeBefore,i=e.nodeAfter;if(!(t instanceof Ta))throw new h("schema-check-merge-no-element-before",this);if(!(i instanceof Ta))throw new h("schema-check-merge-no-element-after",this);return this.checkMerge(t,i)}for(const i of t.getChildren())if(!this.checkChild(e,i))return!1;return!0}addChildCheck(e){this.on("checkChild",((t,[i,s])=>{if(!s)return;const n=e(i,s);"boolean"==typeof n&&(t.stop(),t.return=n)}),{priority:"high"})}addAttributeCheck(e){this.on("checkAttribute",((t,[i,s])=>{const n=e(i,s);"boolean"==typeof n&&(t.stop(),t.return=n)}),{priority:"high"})}setAttributeProperties(e,t){this._attributeProperties[e]=Object.assign(this.getAttributeProperties(e),t)}getAttributeProperties(e){return this._attributeProperties[e]||{}}getLimitElement(e){let t;for(t=e instanceof Oa?e.parent:(e instanceof Ma?[e]:Array.from(e.getRanges())).reduce(((e,t)=>{const i=t.getCommonAncestor();return e?e.getCommonAncestor(i,{includeSelf:!0}):i}),null);!this.isLimit(t)&&t.parent;)t=t.parent;return t}checkAttributeInSelection(e,t){if(e.isCollapsed){const i=[...e.getFirstPosition().getAncestors(),new xa("",e.getAttributes())];return this.checkAttribute(i,t)}{const i=e.getRanges();for(const e of i)for(const i of e)if(this.checkAttribute(i.item,t))return!0}return!1}*getValidRanges(e,t){e=function*(e){for(const t of e)yield*t.getMinimalFlatRanges()}(e);for(const i of e)yield*this._getValidRangesForRange(i,t)}getNearestSelectionRange(e,t="both"){if(this.checkChild(e,"$text"))return new Ma(e);let i,s;const n=e.getAncestors().reverse().find((e=>this.isLimit(e)))||e.root;"both"!=t&&"backward"!=t||(i=new Sa({boundaries:Ma._createIn(n),startPosition:e,direction:"backward"})),"both"!=t&&"forward"!=t||(s=new Sa({boundaries:Ma._createIn(n),startPosition:e}));for(const o of function*(e,t){let i=!1;for(;!i;){if(i=!0,e){const t=e.next();t.done||(i=!1,yield{walker:e,value:t.value})}if(t){const e=t.next();e.done||(i=!1,yield{walker:t,value:e.value})}}}(i,s)){const e=o.walker==i?"elementEnd":"elementStart",t=o.value;if(t.type==e&&this.isObject(t.item))return Ma._createOn(t.item);if(this.checkChild(t.nextPosition,"$text"))return new Ma(t.nextPosition)}return null}findAllowedParent(e,t){let i=e.parent;for(;i;){if(this.checkChild(i,t))return i;if(this.isLimit(i))return null;i=i.parent}return null}removeDisallowedAttributes(e,t){for(const i of e)if(i.is("$text"))Vl(this,i,t);else{const e=Ma._createIn(i).getPositions();for(const i of e)Vl(this,i.nodeBefore||i.parent,t)}}createContext(e){return new xl(e)}_clearCache(){this._compiledDefinitions=null}_compile(){const e={},t=this._sourceDefinitions,i=Object.keys(t);for(const s of i)e[s]=Cl(t[s],s);for(const s of i)El(e,s);for(const s of i)Tl(e,s);for(const s of i)Sl(e,s);for(const s of i)Pl(e,s),Ol(e,s);for(const s of i)Il(e,s),Rl(e,s),zl(e,s);this._compiledDefinitions=e}_checkContextMatch(e,t,i=t.length-1){const s=t.getItem(i);if(e.allowIn.includes(s.name)){if(0==i)return!0;{const e=this.getDefinition(s);return this._checkContextMatch(e,t,i-1)}}return!1}*_getValidRangesForRange(e,t){let i=e.start,s=e.start;for(const n of e.getItems({shallow:!0}))n.is("element")&&(yield*this._getValidRangesForRange(Ma._createIn(n),t)),this.checkAttribute(n,t)||(i.isEqual(s)||(yield new Ma(i,s)),i=Oa._createAfter(n)),s=Oa._createAfter(n);i.isEqual(s)||(yield new Ma(i,s))}}dt(Al,ot);class xl{constructor(e){if(e instanceof xl)return e;"string"==typeof e?e=[e]:Array.isArray(e)||(e=e.getAncestors({includeSelf:!0})),this._items=e.map(Dl)}get length(){return this._items.length}get last(){return this._items[this._items.length-1]}[Symbol.iterator](){return this._items[Symbol.iterator]()}push(e){const t=new xl([e]);return t._items=[...this._items,...t._items],t}getItem(e){return this._items[e]}*getNames(){yield*this._items.map((e=>e.name))}endsWith(e){return Array.from(this.getNames()).join(" ").endsWith(e)}startsWith(e){return Array.from(this.getNames()).join(" ").startsWith(e)}}function Cl(e,t){const i={name:t,allowIn:[],allowContentOf:[],allowWhere:[],allowAttributes:[],allowAttributesOf:[],allowChildren:[],inheritTypesFrom:[]};return function(e,t){for(const i of e){const e=Object.keys(i).filter((e=>e.startsWith("is")));for(const s of e)t[s]=i[s]}}(e,i),Ml(e,i,"allowIn"),Ml(e,i,"allowContentOf"),Ml(e,i,"allowWhere"),Ml(e,i,"allowAttributes"),Ml(e,i,"allowAttributesOf"),Ml(e,i,"allowChildren"),Ml(e,i,"inheritTypesFrom"),function(e,t){for(const i of e){const e=i.inheritAllFrom;e&&(t.allowContentOf.push(e),t.allowWhere.push(e),t.allowAttributesOf.push(e),t.inheritTypesFrom.push(e))}}(e,i),i}function El(e,t){const i=e[t];for(const s of i.allowChildren){const i=e[s];i&&i.allowIn.push(t)}i.allowChildren.length=0}function Tl(e,t){for(const i of e[t].allowContentOf)e[i]&&Nl(e,i).forEach((e=>{e.allowIn.push(t)}));delete e[t].allowContentOf}function Sl(e,t){for(const i of e[t].allowWhere){const s=e[i];if(s){const i=s.allowIn;e[t].allowIn.push(...i)}}delete e[t].allowWhere}function Pl(e,t){for(const i of e[t].allowAttributesOf){const s=e[i];if(s){const i=s.allowAttributes;e[t].allowAttributes.push(...i)}}delete e[t].allowAttributesOf}function Ol(e,t){const i=e[t];for(const s of i.inheritTypesFrom){const t=e[s];if(t){const e=Object.keys(t).filter((e=>e.startsWith("is")));for(const s of e)s in i||(i[s]=t[s])}}delete i.inheritTypesFrom}function Il(e,t){const i=e[t],s=i.allowIn.filter((t=>e[t]));i.allowIn=Array.from(new Set(s))}function Rl(e,t){const i=e[t];for(const s of i.allowIn)e[s].allowChildren.push(t)}function zl(e,t){const i=e[t];i.allowAttributes=Array.from(new Set(i.allowAttributes))}function Ml(e,t,i){for(const s of e)"string"==typeof s[i]?t[i].push(s[i]):Array.isArray(s[i])&&t[i].push(...s[i])}function Nl(e,t){const i=e[t];return(s=e,Object.keys(s).map((e=>s[e]))).filter((e=>e.allowIn.includes(i.name)));var s}function Dl(e){return"string"==typeof e||e.is("documentFragment")?{name:"string"==typeof e?e:"$documentFragment",*getAttributeKeys(){},getAttribute(){}}:{name:e.is("element")?e.name:"$text",*getAttributeKeys(){yield*e.getAttributeKeys()},getAttribute:t=>e.getAttribute(t)}}function Vl(e,t,i){for(const s of t.getAttributeKeys())e.checkAttribute(t,s)||i.removeAttribute(s,t)}class Bl{constructor(e={}){this._splitParts=new Map,this._cursorParents=new Map,this._modelCursor=null,this.conversionApi=Object.assign({},e),this.conversionApi.convertItem=this._convertItem.bind(this),this.conversionApi.convertChildren=this._convertChildren.bind(this),this.conversionApi.safeInsert=this._safeInsert.bind(this),this.conversionApi.updateConversionResult=this._updateConversionResult.bind(this),this.conversionApi.splitToAllowedParent=this._splitToAllowedParent.bind(this),this.conversionApi.getSplitParts=this._getSplitParts.bind(this)}convert(e,t,i=["$root"]){this.fire("viewCleanup",e),this._modelCursor=function(e,t){let i;for(const s of new xl(e)){const e={};for(const t of s.getAttributeKeys())e[t]=s.getAttribute(t);const n=t.createElement(s.name,e);i&&t.append(n,i),i=Oa._createAt(n,0)}return i}(i,t),this.conversionApi.writer=t,this.conversionApi.consumable=_l.createFrom(e),this.conversionApi.store={};const{modelRange:s}=this._convertItem(e,this._modelCursor),n=t.createDocumentFragment();if(s){this._removeEmptyElements();for(const e of Array.from(this._modelCursor.parent.getChildren()))t.append(e,n);n.markers=function(e,t){const i=new Set,s=new Map,n=Ma._createIn(e).getItems();for(const o of n)"$marker"==o.name&&i.add(o);for(const o of i){const e=o.getAttribute("data-name"),i=t.createPositionBefore(o);s.has(e)?s.get(e).end=i.clone():s.set(e,new Ma(i.clone())),t.remove(o)}return s}(n,t)}return this._modelCursor=null,this._splitParts.clear(),this._cursorParents.clear(),this.conversionApi.writer=null,this.conversionApi.store=null,n}_convertItem(e,t){const i=Object.assign({viewItem:e,modelCursor:t,modelRange:null});if(e.is("element")?this.fire("element:"+e.name,i,this.conversionApi):e.is("$text")?this.fire("text",i,this.conversionApi):this.fire("documentFragment",i,this.conversionApi),i.modelRange&&!(i.modelRange instanceof Ma))throw new h("view-conversion-dispatcher-incorrect-result",this);return{modelRange:i.modelRange,modelCursor:i.modelCursor}}_convertChildren(e,t){let i=t.is("position")?t:Oa._createAt(t,0);const s=new Ma(i);for(const n of Array.from(e.getChildren())){const e=this._convertItem(n,i);e.modelRange instanceof Ma&&(s.end=e.modelRange.end,i=e.modelCursor)}return{modelRange:s,modelCursor:i}}_safeInsert(e,t){const i=this._splitToAllowedParent(e,t);return!!i&&(this.conversionApi.writer.insert(e,i.position),!0)}_updateConversionResult(e,t){const i=this._getSplitParts(e),s=this.conversionApi.writer;t.modelRange||(t.modelRange=s.createRange(s.createPositionBefore(e),s.createPositionAfter(i[i.length-1])));const n=this._cursorParents.get(e);t.modelCursor=n?s.createPositionAt(n,0):t.modelRange.end}_splitToAllowedParent(e,t){const{schema:i,writer:s}=this.conversionApi;let n=i.findAllowedParent(t,e);if(n){if(n===t.parent)return{position:t};this._modelCursor.parent.getAncestors().includes(n)&&(n=null)}if(!n)return hl(t,e,i)?{position:dl(t,s)}:null;const o=this.conversionApi.writer.split(t,n),r=[];for(const l of o.range.getWalker())if("elementEnd"==l.type)r.push(l.item);else{const e=r.pop(),t=l.item;this._registerSplitPair(e,t)}const a=o.range.end.parent;return this._cursorParents.set(e,a),{position:o.position,cursorParent:a}}_registerSplitPair(e,t){this._splitParts.has(e)||this._splitParts.set(e,[e]);const i=this._splitParts.get(e);this._splitParts.set(t,i),i.push(t)}_getSplitParts(e){let t;return t=this._splitParts.has(e)?this._splitParts.get(e):[e],t}_removeEmptyElements(){let e=!1;for(const t of this._splitParts.keys())t.isEmpty&&(this.conversionApi.writer.remove(t),this._splitParts.delete(t),e=!0);e&&this._removeEmptyElements()}}dt(Bl,b);class Ll{getHtml(e){const t=document.implementation.createHTMLDocument("").createElement("div");return t.appendChild(e),t.innerHTML}}class Fl{constructor(e){this._domParser=new DOMParser,this._domConverter=new ir(e,{blockFillerMode:"nbsp"}),this._htmlWriter=new Ll}toData(e){const t=this._domConverter.viewToDom(e,document);return this._htmlWriter.getHtml(t)}toView(e){const t=this._toDom(e);return this._domConverter.domToView(t)}registerRawContentMatcher(e){this._domConverter.registerRawContentMatcher(e)}useFillerType(e){this._domConverter.blockFillerMode="marked"==e?"markedNbsp":"nbsp"}_toDom(e){const t=this._domParser.parseFromString(e,"text/html"),i=t.createDocumentFragment();let s=t.firstChild;for(;!s.isSameNode(t.documentElement);){const e=s;s=s.nextSibling,e.nodeType==Node.COMMENT_NODE&&i.appendChild(e)}const n=t.body.childNodes;for(;n.length>0;)i.appendChild(n[0]);return i}}class jl{constructor(e,t){this.model=e,this.mapper=new Na,this.downcastDispatcher=new Ba({mapper:this.mapper,schema:e.schema}),this.downcastDispatcher.on("insert:$text",((e,t,i)=>{if(!i.consumable.consume(t.item,"insert"))return;const s=i.writer,n=i.mapper.toViewPosition(t.range.start),o=s.createText(t.item.data);s.insert(n,o)}),{priority:"lowest"}),this.upcastDispatcher=new Bl({schema:e.schema}),this.viewDocument=new Kn(t),this.stylesProcessor=t,this.htmlProcessor=new Fl(this.viewDocument),this.processor=this.htmlProcessor,this._viewWriter=new vo(this.viewDocument),this.upcastDispatcher.on("text",((e,t,{schema:i,consumable:s,writer:n})=>{let o=t.modelCursor;if(!s.test(t.viewItem))return;if(!i.checkChild(o,"$text")){if(!hl(o,"$text",i))return;o=dl(o,n)}s.consume(t.viewItem);const r=n.createText(t.viewItem.data);n.insert(r,o),t.modelRange=n.createRange(o,o.getShiftedBy(r.offsetSize)),t.modelCursor=t.modelRange.end}),{priority:"lowest"}),this.upcastDispatcher.on("element",((e,t,i)=>{if(!t.modelRange&&i.consumable.consume(t.viewItem,{name:!0})){const{modelRange:e,modelCursor:s}=i.convertChildren(t.viewItem,t.modelCursor);t.modelRange=e,t.modelCursor=s}}),{priority:"lowest"}),this.upcastDispatcher.on("documentFragment",((e,t,i)=>{if(!t.modelRange&&i.consumable.consume(t.viewItem,{name:!0})){const{modelRange:e,modelCursor:s}=i.convertChildren(t.viewItem,t.modelCursor);t.modelRange=e,t.modelCursor=s}}),{priority:"lowest"}),this.decorate("init"),this.decorate("set"),this.on("init",(()=>{this.fire("ready")}),{priority:"lowest"}),this.on("ready",(()=>{this.model.enqueueChange("transparent",cl)}),{priority:"lowest"})}get(e={}){const{rootName:t="main",trim:i="empty"}=e;if(!this._checkIfRootsExists([t]))throw new h("datacontroller-get-non-existent-root",this);const s=this.model.document.getRoot(t);return"empty"!==i||this.model.hasContent(s,{ignoreWhitespaces:!0})?this.stringify(s,e):""}stringify(e,t={}){const i=this.toView(e,t);return this.processor.toData(i)}toView(e,t={}){const i=this.viewDocument,s=this._viewWriter;this.mapper.clearBindings();const n=Ma._createIn(e),o=new bo(i);this.mapper.bindElements(e,o),this.downcastDispatcher.conversionApi.options=t,this.downcastDispatcher.convertInsert(n,s);const r=e.is("documentFragment")?Array.from(e.markers):function(e){const t=[],i=e.root.document;if(!i)return[];const s=Ma._createIn(e);for(const n of i.model.markers){const e=n.getRange(),i=e.isCollapsed,o=e.start.isEqual(s.start)||e.end.isEqual(s.end);if(i&&o)t.push([n.name,e]);else{const i=s.getIntersection(e);i&&t.push([n.name,i])}}return t}(e);for(const[a,l]of r)this.downcastDispatcher.convertMarkerAdd(a,l,s);return delete this.downcastDispatcher.conversionApi.options,o}init(e){if(this.model.document.version)throw new h("datacontroller-init-document-not-empty",this);let t={};if("string"==typeof e?t.main=e:t=e,!this._checkIfRootsExists(Object.keys(t)))throw new h("datacontroller-init-non-existent-root",this);return this.model.enqueueChange("transparent",(e=>{for(const i of Object.keys(t)){const s=this.model.document.getRoot(i);e.insert(this.parse(t[i],s),s,0)}})),Promise.resolve()}set(e,t={}){let i={};if("string"==typeof e?i.main=e:i=e,!this._checkIfRootsExists(Object.keys(i)))throw new h("datacontroller-set-non-existent-root",this);const s=t.batchType||"default";this.model.enqueueChange(s,(e=>{e.setSelection(null),e.removeSelectionAttribute(this.model.document.selection.getAttributeKeys());for(const t of Object.keys(i)){const s=this.model.document.getRoot(t);e.remove(e.createRangeIn(s)),e.insert(this.parse(i[t],s),s,0)}}))}parse(e,t="$root"){const i=this.processor.toView(e);return this.toModel(i,t)}toModel(e,t="$root"){return this.model.change((i=>this.upcastDispatcher.convert(e,i,t)))}addStyleProcessorRules(e){e(this.stylesProcessor)}registerRawContentMatcher(e){this.processor&&this.processor!==this.htmlProcessor&&this.processor.registerRawContentMatcher(e),this.htmlProcessor.registerRawContentMatcher(e)}destroy(){this.stopListening()}_checkIfRootsExists(e){for(const t of e)if(!this.model.document.getRootNames().includes(t))return!1;return!0}}dt(jl,ot);class ql{constructor(e,t){this._helpers=new Map,this._downcast=Ss(e),this._createConversionHelpers({name:"downcast",dispatchers:this._downcast,isDowncast:!0}),this._upcast=Ss(t),this._createConversionHelpers({name:"upcast",dispatchers:this._upcast,isDowncast:!1})}addAlias(e,t){const i=this._downcast.includes(t);if(!this._upcast.includes(t)&&!i)throw new h("conversion-add-alias-dispatcher-not-registered",this);this._createConversionHelpers({name:e,dispatchers:[t],isDowncast:i})}for(e){if(!this._helpers.has(e))throw new h("conversion-for-unknown-group",this);return this._helpers.get(e)}elementToElement(e){this.for("downcast").elementToElement(e);for(const{model:t,view:i}of Hl(e))this.for("upcast").elementToElement({model:t,view:i,converterPriority:e.converterPriority})}attributeToElement(e){this.for("downcast").attributeToElement(e);for(const{model:t,view:i}of Hl(e))this.for("upcast").elementToAttribute({view:i,model:t,converterPriority:e.converterPriority})}attributeToAttribute(e){this.for("downcast").attributeToAttribute(e);for(const{model:t,view:i}of Hl(e))this.for("upcast").attributeToAttribute({view:i,model:t})}_createConversionHelpers({name:e,dispatchers:t,isDowncast:i}){if(this._helpers.has(e))throw new h("conversion-group-exists",this);const s=i?new il(t):new ul(t);this._helpers.set(e,s)}}function*Hl(e){if(e.model.values)for(const t of e.model.values){const i={key:e.model.key,value:t},s=e.view[t],n=e.upcastAlso?e.upcastAlso[t]:void 0;yield*$l(i,s,n)}else yield*$l(e.model,e.view,e.upcastAlso)}function*$l(e,t,i){if(yield{model:e,view:t},i)for(const s of Ss(i))yield{model:e,view:s}}class Ul{constructor(e="default"){this.operations=[],this.type=e}get baseVersion(){for(const e of this.operations)if(null!==e.baseVersion)return e.baseVersion;return null}addOperation(e){return e.batch=this,this.operations.push(e),e}}class Wl{constructor(e){this.baseVersion=e,this.isDocumentOperation=null!==this.baseVersion,this.batch=null}_validate(){}toJSON(){const e=Object.assign({},this);return e.__className=this.constructor.className,delete e.batch,delete e.isDocumentOperation,e}static get className(){return"Operation"}static fromJSON(e){return new this(e.baseVersion)}}class Zl{constructor(e){this.markers=new Map,this._children=new Ea,e&&this._insertChild(0,e)}[Symbol.iterator](){return this.getChildren()}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return 0===this.childCount}get root(){return this}get parent(){return null}is(e){return"documentFragment"===e||"model:documentFragment"===e}getChild(e){return this._children.getNode(e)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(e){return this._children.getNodeIndex(e)}getChildStartOffset(e){return this._children.getNodeStartOffset(e)}getPath(){return[]}getNodeByPath(e){let t=this;for(const i of e)t=t.getChild(t.offsetToIndex(i));return t}offsetToIndex(e){return this._children.offsetToIndex(e)}toJSON(){const e=[];for(const t of this._children)e.push(t.toJSON());return e}static fromJSON(e){const t=[];for(const i of e)i.name?t.push(Ta.fromJSON(i)):t.push(xa.fromJSON(i));return new Zl(t)}_appendChild(e){this._insertChild(this.childCount,e)}_insertChild(e,t){const i=function(e){return"string"==typeof e?[new xa(e)]:(Cs(e)||(e=[e]),Array.from(e).map((e=>"string"==typeof e?new xa(e):e instanceof Ca?new xa(e.data,e.getAttributes()):e)))}(t);for(const s of i)null!==s.parent&&s._remove(),s.parent=this;this._children._insertNodes(e,i)}_removeChildren(e,t=1){const i=this._children._removeNodes(e,t);for(const s of i)s.parent=null;return i}}function Gl(e,t){const i=(t=Yl(t)).reduce(((e,t)=>e+t.offsetSize),0),s=e.parent;Xl(e);const n=e.index;return s._insertChild(n,t),Ql(s,n+t.length),Ql(s,n),new Ma(e,e.getShiftedBy(i))}function Kl(e){if(!e.isFlat)throw new h("operation-utils-remove-range-not-flat",this);const t=e.start.parent;Xl(e.start),Xl(e.end);const i=t._removeChildren(e.start.index,e.end.index-e.start.index);return Ql(t,e.start.index),i}function Jl(e,t){if(!e.isFlat)throw new h("operation-utils-move-range-not-flat",this);const i=Kl(e);return Gl(t=t._getTransformedByDeletion(e.start,e.end.offset-e.start.offset),i)}function Yl(e){const t=[];e instanceof Array||(e=[e]);for(let i=0;i<e.length;i++)if("string"==typeof e[i])t.push(new xa(e[i]));else if(e[i]instanceof Ca)t.push(new xa(e[i].data,e[i].getAttributes()));else if(e[i]instanceof Zl||e[i]instanceof Ea)for(const s of e[i])t.push(s);else e[i]instanceof Aa&&t.push(e[i]);for(let i=1;i<t.length;i++){const e=t[i],s=t[i-1];e instanceof xa&&s instanceof xa&&ec(e,s)&&(t.splice(i-1,2,new xa(s.data+e.data,s.getAttributes())),i--)}return t}function Ql(e,t){const i=e.getChild(t-1),s=e.getChild(t);if(i&&s&&i.is("$text")&&s.is("$text")&&ec(i,s)){const n=new xa(i.data+s.data,i.getAttributes());e._removeChildren(t-1,2),e._insertChild(t-1,n)}}function Xl(e){const t=e.textNode,i=e.parent;if(t){const s=e.offset-t.startOffset,n=t.index;i._removeChildren(n,1);const o=new xa(t.data.substr(0,s),t.getAttributes()),r=new xa(t.data.substr(s),t.getAttributes());i._insertChild(n,[o,r])}}function ec(e,t){const i=e.getAttributes(),s=t.getAttributes();for(const n of i){if(n[1]!==t.getAttribute(n[0]))return!1;s.next()}return s.next().done}const tc=function(e,t){return Pr(e,t)};class ic extends Wl{constructor(e,t,i,s,n){super(n),this.range=e.clone(),this.key=t,this.oldValue=void 0===i?null:i,this.newValue=void 0===s?null:s}get type(){return null===this.oldValue?"addAttribute":null===this.newValue?"removeAttribute":"changeAttribute"}clone(){return new ic(this.range,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new ic(this.range,this.key,this.newValue,this.oldValue,this.baseVersion+1)}toJSON(){const e=super.toJSON();return e.range=this.range.toJSON(),e}_validate(){if(!this.range.isFlat)throw new h("attribute-operation-range-not-flat",this);for(const e of this.range.getItems({shallow:!0})){if(null!==this.oldValue&&!tc(e.getAttribute(this.key),this.oldValue))throw new h("attribute-operation-wrong-old-value",this,{item:e,key:this.key,value:this.oldValue});if(null===this.oldValue&&null!==this.newValue&&e.hasAttribute(this.key))throw new h("attribute-operation-attribute-exists",this,{node:e,key:this.key})}}_execute(){tc(this.oldValue,this.newValue)||function(e,t,i){Xl(e.start),Xl(e.end);for(const s of e.getItems({shallow:!0})){const e=s.is("$textProxy")?s.textNode:s;null!==i?e._setAttribute(t,i):e._removeAttribute(t),Ql(e.parent,e.index)}Ql(e.end.parent,e.end.index)}(this.range,this.key,this.newValue)}static get className(){return"AttributeOperation"}static fromJSON(e,t){return new ic(Ma.fromJSON(e.range,t),e.key,e.oldValue,e.newValue,e.baseVersion)}}class sc extends Wl{constructor(e,t){super(null),this.sourcePosition=e.clone(),this.howMany=t}get type(){return"detach"}toJSON(){const e=super.toJSON();return e.sourcePosition=this.sourcePosition.toJSON(),e}_validate(){if(this.sourcePosition.root.document)throw new h("detach-operation-on-document-node",this)}_execute(){Kl(Ma._createFromPositionAndShift(this.sourcePosition,this.howMany))}static get className(){return"DetachOperation"}}class nc extends Wl{constructor(e,t,i,s){super(s),this.sourcePosition=e.clone(),this.sourcePosition.stickiness="toNext",this.howMany=t,this.targetPosition=i.clone(),this.targetPosition.stickiness="toNone"}get type(){return"$graveyard"==this.targetPosition.root.rootName?"remove":"$graveyard"==this.sourcePosition.root.rootName?"reinsert":"move"}clone(){return new this.constructor(this.sourcePosition,this.howMany,this.targetPosition,this.baseVersion)}getMovedRangeStart(){return this.targetPosition._getTransformedByDeletion(this.sourcePosition,this.howMany)}getReversed(){const e=this.sourcePosition._getTransformedByInsertion(this.targetPosition,this.howMany);return new this.constructor(this.getMovedRangeStart(),this.howMany,e,this.baseVersion+1)}_validate(){const e=this.sourcePosition.parent,t=this.targetPosition.parent,i=this.sourcePosition.offset,s=this.targetPosition.offset;if(i+this.howMany>e.maxOffset)throw new h("move-operation-nodes-do-not-exist",this);if(e===t&&i<s&&s<i+this.howMany)throw new h("move-operation-range-into-itself",this);if(this.sourcePosition.root==this.targetPosition.root&&"prefix"==Ns(this.sourcePosition.getParentPath(),this.targetPosition.getParentPath())){const e=this.sourcePosition.path.length-1;if(this.targetPosition.path[e]>=i&&this.targetPosition.path[e]<i+this.howMany)throw new h("move-operation-node-into-itself",this)}}_execute(){Jl(Ma._createFromPositionAndShift(this.sourcePosition,this.howMany),this.targetPosition)}toJSON(){const e=super.toJSON();return e.sourcePosition=this.sourcePosition.toJSON(),e.targetPosition=this.targetPosition.toJSON(),e}static get className(){return"MoveOperation"}static fromJSON(e,t){const i=Oa.fromJSON(e.sourcePosition,t),s=Oa.fromJSON(e.targetPosition,t);return new this(i,e.howMany,s,e.baseVersion)}}class oc extends Wl{constructor(e,t,i){super(i),this.position=e.clone(),this.position.stickiness="toNone",this.nodes=new Ea(Yl(t)),this.shouldReceiveAttributes=!1}get type(){return"insert"}get howMany(){return this.nodes.maxOffset}clone(){const e=new Ea([...this.nodes].map((e=>e._clone(!0)))),t=new oc(this.position,e,this.baseVersion);return t.shouldReceiveAttributes=this.shouldReceiveAttributes,t}getReversed(){const e=this.position.root.document.graveyard,t=new Oa(e,[0]);return new nc(this.position,this.nodes.maxOffset,t,this.baseVersion+1)}_validate(){const e=this.position.parent;if(!e||e.maxOffset<this.position.offset)throw new h("insert-operation-position-invalid",this)}_execute(){const e=this.nodes;this.nodes=new Ea([...e].map((e=>e._clone(!0)))),Gl(this.position,e)}toJSON(){const e=super.toJSON();return e.position=this.position.toJSON(),e.nodes=this.nodes.toJSON(),e}static get className(){return"InsertOperation"}static fromJSON(e,t){const i=[];for(const n of e.nodes)n.name?i.push(Ta.fromJSON(n)):i.push(xa.fromJSON(n));const s=new oc(Oa.fromJSON(e.position,t),i,e.baseVersion);return s.shouldReceiveAttributes=e.shouldReceiveAttributes,s}}class rc extends Wl{constructor(e,t,i,s,n,o){super(o),this.name=e,this.oldRange=t?t.clone():null,this.newRange=i?i.clone():null,this.affectsData=n,this._markers=s}get type(){return"marker"}clone(){return new rc(this.name,this.oldRange,this.newRange,this._markers,this.affectsData,this.baseVersion)}getReversed(){return new rc(this.name,this.newRange,this.oldRange,this._markers,this.affectsData,this.baseVersion+1)}_execute(){const e=this.newRange?"_set":"_remove";this._markers[e](this.name,this.newRange,!0,this.affectsData)}toJSON(){const e=super.toJSON();return this.oldRange&&(e.oldRange=this.oldRange.toJSON()),this.newRange&&(e.newRange=this.newRange.toJSON()),delete e._markers,e}static get className(){return"MarkerOperation"}static fromJSON(e,t){return new rc(e.name,e.oldRange?Ma.fromJSON(e.oldRange,t):null,e.newRange?Ma.fromJSON(e.newRange,t):null,t.model.markers,e.affectsData,e.baseVersion)}}class ac extends Wl{constructor(e,t,i,s){super(s),this.position=e,this.position.stickiness="toNext",this.oldName=t,this.newName=i}get type(){return"rename"}clone(){return new ac(this.position.clone(),this.oldName,this.newName,this.baseVersion)}getReversed(){return new ac(this.position.clone(),this.newName,this.oldName,this.baseVersion+1)}_validate(){const e=this.position.nodeAfter;if(!(e instanceof Ta))throw new h("rename-operation-wrong-position",this);if(e.name!==this.oldName)throw new h("rename-operation-wrong-name",this)}_execute(){this.position.nodeAfter.name=this.newName}toJSON(){const e=super.toJSON();return e.position=this.position.toJSON(),e}static get className(){return"RenameOperation"}static fromJSON(e,t){return new ac(Oa.fromJSON(e.position,t),e.oldName,e.newName,e.baseVersion)}}class lc extends Wl{constructor(e,t,i,s,n){super(n),this.root=e,this.key=t,this.oldValue=i,this.newValue=s}get type(){return null===this.oldValue?"addRootAttribute":null===this.newValue?"removeRootAttribute":"changeRootAttribute"}clone(){return new lc(this.root,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new lc(this.root,this.key,this.newValue,this.oldValue,this.baseVersion+1)}_validate(){if(this.root!=this.root.root||this.root.is("documentFragment"))throw new h("rootattribute-operation-not-a-root",this,{root:this.root,key:this.key});if(null!==this.oldValue&&this.root.getAttribute(this.key)!==this.oldValue)throw new h("rootattribute-operation-wrong-old-value",this,{root:this.root,key:this.key});if(null===this.oldValue&&null!==this.newValue&&this.root.hasAttribute(this.key))throw new h("rootattribute-operation-attribute-exists",this,{root:this.root,key:this.key})}_execute(){null!==this.newValue?this.root._setAttribute(this.key,this.newValue):this.root._removeAttribute(this.key)}toJSON(){const e=super.toJSON();return e.root=this.root.toJSON(),e}static get className(){return"RootAttributeOperation"}static fromJSON(e,t){if(!t.getRoot(e.root))throw new h("rootattribute-operation-fromjson-no-root",this,{rootName:e.root});return new lc(t.getRoot(e.root),e.key,e.oldValue,e.newValue,e.baseVersion)}}class cc extends Wl{constructor(e,t,i,s,n){super(n),this.sourcePosition=e.clone(),this.sourcePosition.stickiness="toPrevious",this.howMany=t,this.targetPosition=i.clone(),this.targetPosition.stickiness="toNext",this.graveyardPosition=s.clone()}get type(){return"merge"}get deletionPosition(){return new Oa(this.sourcePosition.root,this.sourcePosition.path.slice(0,-1))}get movedRange(){const e=this.sourcePosition.getShiftedBy(Number.POSITIVE_INFINITY);return new Ma(this.sourcePosition,e)}clone(){return new this.constructor(this.sourcePosition,this.howMany,this.targetPosition,this.graveyardPosition,this.baseVersion)}getReversed(){const e=this.targetPosition._getTransformedByMergeOperation(this),t=this.sourcePosition.path.slice(0,-1),i=new Oa(this.sourcePosition.root,t)._getTransformedByMergeOperation(this);return new hc(e,this.howMany,i,this.graveyardPosition,this.baseVersion+1)}_validate(){const e=this.sourcePosition.parent,t=this.targetPosition.parent;if(!e.parent)throw new h("merge-operation-source-position-invalid",this);if(!t.parent)throw new h("merge-operation-target-position-invalid",this);if(this.howMany!=e.maxOffset)throw new h("merge-operation-how-many-invalid",this)}_execute(){const e=this.sourcePosition.parent;Jl(Ma._createIn(e),this.targetPosition),Jl(Ma._createOn(e),this.graveyardPosition)}toJSON(){const e=super.toJSON();return e.sourcePosition=e.sourcePosition.toJSON(),e.targetPosition=e.targetPosition.toJSON(),e.graveyardPosition=e.graveyardPosition.toJSON(),e}static get className(){return"MergeOperation"}static fromJSON(e,t){const i=Oa.fromJSON(e.sourcePosition,t),s=Oa.fromJSON(e.targetPosition,t),n=Oa.fromJSON(e.graveyardPosition,t);return new this(i,e.howMany,s,n,e.baseVersion)}}class hc extends Wl{constructor(e,t,i,s,n){super(n),this.splitPosition=e.clone(),this.splitPosition.stickiness="toNext",this.howMany=t,this.insertionPosition=i,this.graveyardPosition=s?s.clone():null,this.graveyardPosition&&(this.graveyardPosition.stickiness="toNext")}get type(){return"split"}get moveTargetPosition(){const e=this.insertionPosition.path.slice();return e.push(0),new Oa(this.insertionPosition.root,e)}get movedRange(){const e=this.splitPosition.getShiftedBy(Number.POSITIVE_INFINITY);return new Ma(this.splitPosition,e)}clone(){return new this.constructor(this.splitPosition,this.howMany,this.insertionPosition,this.graveyardPosition,this.baseVersion)}getReversed(){const e=this.splitPosition.root.document.graveyard,t=new Oa(e,[0]);return new cc(this.moveTargetPosition,this.howMany,this.splitPosition,t,this.baseVersion+1)}_validate(){const e=this.splitPosition.parent,t=this.splitPosition.offset;if(!e||e.maxOffset<t)throw new h("split-operation-position-invalid",this);if(!e.parent)throw new h("split-operation-split-in-root",this);if(this.howMany!=e.maxOffset-this.splitPosition.offset)throw new h("split-operation-how-many-invalid",this);if(this.graveyardPosition&&!this.graveyardPosition.nodeAfter)throw new h("split-operation-graveyard-position-invalid",this)}_execute(){const e=this.splitPosition.parent;if(this.graveyardPosition)Jl(Ma._createFromPositionAndShift(this.graveyardPosition,1),this.insertionPosition);else{const t=e._clone();Gl(this.insertionPosition,t)}Jl(new Ma(Oa._createAt(e,this.splitPosition.offset),Oa._createAt(e,e.maxOffset)),this.moveTargetPosition)}toJSON(){const e=super.toJSON();return e.splitPosition=this.splitPosition.toJSON(),e.insertionPosition=this.insertionPosition.toJSON(),this.graveyardPosition&&(e.graveyardPosition=this.graveyardPosition.toJSON()),e}static get className(){return"SplitOperation"}static getInsertionPosition(e){const t=e.path.slice(0,-1);return t[t.length-1]++,new Oa(e.root,t,"toPrevious")}static fromJSON(e,t){const i=Oa.fromJSON(e.splitPosition,t),s=Oa.fromJSON(e.insertionPosition,t),n=e.graveyardPosition?Oa.fromJSON(e.graveyardPosition,t):null;return new this(i,e.howMany,s,n,e.baseVersion)}}class dc extends Ta{constructor(e,t,i="main"){super(t),this._document=e,this.rootName=i}get document(){return this._document}is(e,t){return t?t===this.name&&("rootElement"===e||"model:rootElement"===e||"element"===e||"model:element"===e):"rootElement"===e||"model:rootElement"===e||"element"===e||"model:element"===e||"node"===e||"model:node"===e}toJSON(){return this.rootName}}class uc{constructor(e,t){this.model=e,this.batch=t}createText(e,t){return new xa(e,t)}createElement(e,t){return new Ta(e,t)}createDocumentFragment(){return new Zl}cloneElement(e,t=!0){return e._clone(t)}insert(e,t,i=0){if(this._assertWriterUsedCorrectly(),e instanceof xa&&""==e.data)return;const s=Oa._createAt(t,i);if(e.parent){if(wc(e.root,s.root))return void this.move(Ma._createOn(e),s);if(e.root.document)throw new h("model-writer-insert-forbidden-move",this);this.remove(e)}const n=s.root.document?s.root.document.version:null,o=new oc(s,e,n);if(e instanceof xa&&(o.shouldReceiveAttributes=!0),this.batch.addOperation(o),this.model.applyOperation(o),e instanceof Zl)for(const[r,a]of e.markers){const e=Oa._createAt(a.root,0),t={range:new Ma(a.start._getCombined(e,s),a.end._getCombined(e,s)),usingOperation:!0,affectsData:!0};this.model.markers.has(r)?this.updateMarker(r,t):this.addMarker(r,t)}}insertText(e,t,i,s){t instanceof Zl||t instanceof Ta||t instanceof Oa?this.insert(this.createText(e),t,i):this.insert(this.createText(e,t),i,s)}insertElement(e,t,i,s){t instanceof Zl||t instanceof Ta||t instanceof Oa?this.insert(this.createElement(e),t,i):this.insert(this.createElement(e,t),i,s)}append(e,t){this.insert(e,t,"end")}appendText(e,t,i){t instanceof Zl||t instanceof Ta?this.insert(this.createText(e),t,"end"):this.insert(this.createText(e,t),i,"end")}appendElement(e,t,i){t instanceof Zl||t instanceof Ta?this.insert(this.createElement(e),t,"end"):this.insert(this.createElement(e,t),i,"end")}setAttribute(e,t,i){if(this._assertWriterUsedCorrectly(),i instanceof Ma){const s=i.getMinimalFlatRanges();for(const i of s)mc(this,e,t,i)}else pc(this,e,t,i)}setAttributes(e,t){for(const[i,s]of Fs(e))this.setAttribute(i,s,t)}removeAttribute(e,t){if(this._assertWriterUsedCorrectly(),t instanceof Ma){const i=t.getMinimalFlatRanges();for(const t of i)mc(this,e,null,t)}else pc(this,e,null,t)}clearAttributes(e){this._assertWriterUsedCorrectly();const t=e=>{for(const t of e.getAttributeKeys())this.removeAttribute(t,e)};if(e instanceof Ma)for(const i of e.getItems())t(i);else t(e)}move(e,t,i){if(this._assertWriterUsedCorrectly(),!(e instanceof Ma))throw new h("writer-move-invalid-range",this);if(!e.isFlat)throw new h("writer-move-range-not-flat",this);const s=Oa._createAt(t,i);if(s.isEqual(e.start))return;if(this._addOperationForAffectedMarkers("move",e),!wc(e.root,s.root))throw new h("writer-move-different-document",this);const n=e.root.document?e.root.document.version:null,o=new nc(e.start,e.end.offset-e.start.offset,s,n);this.batch.addOperation(o),this.model.applyOperation(o)}remove(e){this._assertWriterUsedCorrectly();const t=(e instanceof Ma?e:Ma._createOn(e)).getMinimalFlatRanges().reverse();for(const i of t)this._addOperationForAffectedMarkers("move",i),gc(i.start,i.end.offset-i.start.offset,this.batch,this.model)}merge(e){this._assertWriterUsedCorrectly();const t=e.nodeBefore,i=e.nodeAfter;if(this._addOperationForAffectedMarkers("merge",e),!(t instanceof Ta))throw new h("writer-merge-no-element-before",this);if(!(i instanceof Ta))throw new h("writer-merge-no-element-after",this);e.root.document?this._merge(e):this._mergeDetached(e)}createPositionFromPath(e,t,i){return this.model.createPositionFromPath(e,t,i)}createPositionAt(e,t){return this.model.createPositionAt(e,t)}createPositionAfter(e){return this.model.createPositionAfter(e)}createPositionBefore(e){return this.model.createPositionBefore(e)}createRange(e,t){return this.model.createRange(e,t)}createRangeIn(e){return this.model.createRangeIn(e)}createRangeOn(e){return this.model.createRangeOn(e)}createSelection(e,t,i){return this.model.createSelection(e,t,i)}_mergeDetached(e){const t=e.nodeBefore,i=e.nodeAfter;this.move(Ma._createIn(i),Oa._createAt(t,"end")),this.remove(i)}_merge(e){const t=Oa._createAt(e.nodeBefore,"end"),i=Oa._createAt(e.nodeAfter,0),s=e.root.document.graveyard,n=new Oa(s,[0]),o=e.root.document.version,r=new cc(i,e.nodeAfter.maxOffset,t,n,o);this.batch.addOperation(r),this.model.applyOperation(r)}rename(e,t){if(this._assertWriterUsedCorrectly(),!(e instanceof Ta))throw new h("writer-rename-not-element-instance",this);const i=e.root.document?e.root.document.version:null,s=new ac(Oa._createBefore(e),e.name,t,i);this.batch.addOperation(s),this.model.applyOperation(s)}split(e,t){this._assertWriterUsedCorrectly();let i,s,n=e.parent;if(!n.parent)throw new h("writer-split-element-no-parent",this);if(t||(t=n.parent),!e.parent.getAncestors({includeSelf:!0}).includes(t))throw new h("writer-split-invalid-limit-element",this);do{const t=n.root.document?n.root.document.version:null,o=n.maxOffset-e.offset,r=hc.getInsertionPosition(e),a=new hc(e,o,r,null,t);this.batch.addOperation(a),this.model.applyOperation(a),i||s||(i=n,s=e.parent.nextSibling),n=(e=this.createPositionAfter(e.parent)).parent}while(n!==t);return{position:e,range:new Ma(Oa._createAt(i,"end"),Oa._createAt(s,0))}}wrap(e,t){if(this._assertWriterUsedCorrectly(),!e.isFlat)throw new h("writer-wrap-range-not-flat",this);const i=t instanceof Ta?t:new Ta(t);if(i.childCount>0)throw new h("writer-wrap-element-not-empty",this);if(null!==i.parent)throw new h("writer-wrap-element-attached",this);this.insert(i,e.start);const s=new Ma(e.start.getShiftedBy(1),e.end.getShiftedBy(1));this.move(s,Oa._createAt(i,0))}unwrap(e){if(this._assertWriterUsedCorrectly(),null===e.parent)throw new h("writer-unwrap-element-no-parent",this);this.move(Ma._createIn(e),this.createPositionAfter(e)),this.remove(e)}addMarker(e,t){if(this._assertWriterUsedCorrectly(),!t||"boolean"!=typeof t.usingOperation)throw new h("writer-addmarker-no-usingoperation",this);const i=t.usingOperation,s=t.range,n=void 0!==t.affectsData&&t.affectsData;if(this.model.markers.has(e))throw new h("writer-addmarker-marker-exists",this);if(!s)throw new h("writer-addmarker-no-range",this);return i?(fc(this,e,null,s,n),this.model.markers.get(e)):this.model.markers._set(e,s,i,n)}updateMarker(e,t){this._assertWriterUsedCorrectly();const i="string"==typeof e?e:e.name,s=this.model.markers.get(i);if(!s)throw new h("writer-updatemarker-marker-not-exists",this);if(!t)return void this.model.markers._refresh(s);const n="boolean"==typeof t.usingOperation,o="boolean"==typeof t.affectsData,r=o?t.affectsData:s.affectsData;if(!n&&!t.range&&!o)throw new h("writer-updatemarker-wrong-options",this);const a=s.getRange(),l=t.range?t.range:a;n&&t.usingOperation!==s.managedUsingOperations?t.usingOperation?fc(this,i,null,l,r):(fc(this,i,a,null,r),this.model.markers._set(i,l,void 0,r)):s.managedUsingOperations?fc(this,i,a,l,r):this.model.markers._set(i,l,void 0,r)}removeMarker(e){this._assertWriterUsedCorrectly();const t="string"==typeof e?e:e.name;if(!this.model.markers.has(t))throw new h("writer-removemarker-no-marker",this);const i=this.model.markers.get(t);i.managedUsingOperations?fc(this,t,i.getRange(),null,i.affectsData):this.model.markers._remove(t)}setSelection(e,t,i){this._assertWriterUsedCorrectly(),this.model.document.selection._setTo(e,t,i)}setSelectionFocus(e,t){this._assertWriterUsedCorrectly(),this.model.document.selection._setFocus(e,t)}setSelectionAttribute(e,t){if(this._assertWriterUsedCorrectly(),"string"==typeof e)this._setSelectionAttribute(e,t);else for(const[i,s]of Fs(e))this._setSelectionAttribute(i,s)}removeSelectionAttribute(e){if(this._assertWriterUsedCorrectly(),"string"==typeof e)this._removeSelectionAttribute(e);else for(const t of e)this._removeSelectionAttribute(t)}overrideSelectionGravity(){return this.model.document.selection._overrideGravity()}restoreSelectionGravity(e){this.model.document.selection._restoreGravity(e)}_setSelectionAttribute(e,t){const i=this.model.document.selection;if(i.isCollapsed&&i.anchor.parent.isEmpty){const s=Ya._getStoreAttributeKey(e);this.setAttribute(s,t,i.anchor.parent)}i._setAttribute(e,t)}_removeSelectionAttribute(e){const t=this.model.document.selection;if(t.isCollapsed&&t.anchor.parent.isEmpty){const i=Ya._getStoreAttributeKey(e);this.removeAttribute(i,t.anchor.parent)}t._removeAttribute(e)}_assertWriterUsedCorrectly(){if(this.model._currentWriter!==this)throw new h("writer-incorrect-use",this)}_addOperationForAffectedMarkers(e,t){for(const i of this.model.markers){if(!i.managedUsingOperations)continue;const s=i.getRange();let n=!1;if("move"===e)n=t.containsPosition(s.start)||t.start.isEqual(s.start)||t.containsPosition(s.end)||t.end.isEqual(s.end);else{const e=t.nodeBefore,i=t.nodeAfter,o=s.start.parent==e&&s.start.isAtEnd,r=s.end.parent==i&&0==s.end.offset,a=s.end.nodeAfter==i,l=s.start.nodeAfter==i;n=o||r||a||l}n&&this.updateMarker(i.name,{range:s})}}}function mc(e,t,i,s){const n=e.model,o=n.document;let r,a,l,c=s.start;for(const d of s.getWalker({shallow:!0}))l=d.item.getAttribute(t),r&&a!=l&&(a!=i&&h(),c=r),r=d.nextPosition,a=l;function h(){const s=new Ma(c,r),l=s.root.document?o.version:null,h=new ic(s,t,a,i,l);e.batch.addOperation(h),n.applyOperation(h)}r instanceof Oa&&r!=c&&a!=i&&h()}function pc(e,t,i,s){const n=e.model,o=n.document,r=s.getAttribute(t);let a,l;if(r!=i){if(s.root===s){const e=s.document?o.version:null;l=new lc(s,t,r,i,e)}else{a=new Ma(Oa._createBefore(s),e.createPositionAfter(s));const n=a.root.document?o.version:null;l=new ic(a,t,r,i,n)}e.batch.addOperation(l),n.applyOperation(l)}}function fc(e,t,i,s,n){const o=e.model,r=o.document,a=new rc(t,i,s,o.markers,n,r.version);e.batch.addOperation(a),o.applyOperation(a)}function gc(e,t,i,s){let n;if(e.root.document){const i=s.document,o=new Oa(i.graveyard,[0]);n=new nc(e,t,o,i.version)}else n=new sc(e,t);i.addOperation(n),s.applyOperation(n)}function wc(e,t){return e===t||e instanceof dc&&t instanceof dc}class bc{constructor(e){this._markerCollection=e,this._changesInElement=new Map,this._elementSnapshots=new Map,this._changedMarkers=new Map,this._changeCount=0,this._cachedChanges=null,this._cachedChangesWithGraveyard=null}get isEmpty(){return 0==this._changesInElement.size&&0==this._changedMarkers.size}refreshItem(e){if(this._isInInsertedElement(e.parent))return;this._markRemove(e.parent,e.startOffset,e.offsetSize),this._markInsert(e.parent,e.startOffset,e.offsetSize);const t=Ma._createOn(e);for(const i of this._markerCollection.getMarkersIntersectingRange(t)){const e=i.getRange();this.bufferMarkerChange(i.name,e,e,i.affectsData)}this._cachedChanges=null}bufferOperation(e){switch(e.type){case"insert":if(this._isInInsertedElement(e.position.parent))return;this._markInsert(e.position.parent,e.position.offset,e.nodes.maxOffset);break;case"addAttribute":case"removeAttribute":case"changeAttribute":for(const t of e.range.getItems({shallow:!0}))this._isInInsertedElement(t.parent)||this._markAttribute(t);break;case"remove":case"move":case"reinsert":{if(e.sourcePosition.isEqual(e.targetPosition)||e.sourcePosition.getShiftedBy(e.howMany).isEqual(e.targetPosition))return;const t=this._isInInsertedElement(e.sourcePosition.parent),i=this._isInInsertedElement(e.targetPosition.parent);t||this._markRemove(e.sourcePosition.parent,e.sourcePosition.offset,e.howMany),i||this._markInsert(e.targetPosition.parent,e.getMovedRangeStart().offset,e.howMany);break}case"rename":{if(this._isInInsertedElement(e.position.parent))return;this._markRemove(e.position.parent,e.position.offset,1),this._markInsert(e.position.parent,e.position.offset,1);const t=Ma._createFromPositionAndShift(e.position,1);for(const e of this._markerCollection.getMarkersIntersectingRange(t)){const t=e.getRange();this.bufferMarkerChange(e.name,t,t,e.affectsData)}break}case"split":{const t=e.splitPosition.parent;this._isInInsertedElement(t)||this._markRemove(t,e.splitPosition.offset,e.howMany),this._isInInsertedElement(e.insertionPosition.parent)||this._markInsert(e.insertionPosition.parent,e.insertionPosition.offset,1),e.graveyardPosition&&this._markRemove(e.graveyardPosition.parent,e.graveyardPosition.offset,1);break}case"merge":{const t=e.sourcePosition.parent;this._isInInsertedElement(t.parent)||this._markRemove(t.parent,t.startOffset,1);const i=e.graveyardPosition.parent;this._markInsert(i,e.graveyardPosition.offset,1);const s=e.targetPosition.parent;this._isInInsertedElement(s)||this._markInsert(s,e.targetPosition.offset,t.maxOffset);break}}this._cachedChanges=null}bufferMarkerChange(e,t,i,s){const n=this._changedMarkers.get(e);n?(n.newRange=i,n.affectsData=s,null==n.oldRange&&null==n.newRange&&this._changedMarkers.delete(e)):this._changedMarkers.set(e,{oldRange:t,newRange:i,affectsData:s})}getMarkersToRemove(){const e=[];for(const[t,i]of this._changedMarkers)null!=i.oldRange&&e.push({name:t,range:i.oldRange});return e}getMarkersToAdd(){const e=[];for(const[t,i]of this._changedMarkers)null!=i.newRange&&e.push({name:t,range:i.newRange});return e}getChangedMarkers(){return Array.from(this._changedMarkers).map((e=>({name:e[0],data:{oldRange:e[1].oldRange,newRange:e[1].newRange}})))}hasDataChanges(){for(const[,e]of this._changedMarkers)if(e.affectsData)return!0;return this._changesInElement.size>0}getChanges(e={includeChangesInGraveyard:!1}){if(this._cachedChanges)return e.includeChangesInGraveyard?this._cachedChangesWithGraveyard.slice():this._cachedChanges.slice();let t=[];for(const i of this._changesInElement.keys()){const e=this._changesInElement.get(i).sort(((e,t)=>e.offset===t.offset?e.type!=t.type?"remove"==e.type?-1:1:0:e.offset<t.offset?-1:1)),s=this._elementSnapshots.get(i),n=vc(i.getChildren()),o=yc(s.length,e);let r=0,a=0;for(const l of o)if("i"===l)t.push(this._getInsertDiff(i,r,n[r].name)),r++;else if("r"===l)t.push(this._getRemoveDiff(i,r,s[a].name)),a++;else if("a"===l){const e=n[r].attributes,o=s[a].attributes;let l;if("$text"==n[r].name)l=new Ma(Oa._createAt(i,r),Oa._createAt(i,r+1));else{const e=i.offsetToIndex(r);l=new Ma(Oa._createAt(i,r),Oa._createAt(i.getChild(e),0))}t.push(...this._getAttributesDiff(l,o,e)),r++,a++}else r++,a++}t.sort(((e,t)=>e.position.root!=t.position.root?e.position.root.rootName<t.position.root.rootName?-1:1:e.position.isEqual(t.position)?e.changeCount-t.changeCount:e.position.isBefore(t.position)?-1:1));for(let i=1,s=0;i<t.length;i++){const e=t[s],n=t[i],o="remove"==e.type&&"remove"==n.type&&"$text"==e.name&&"$text"==n.name&&e.position.isEqual(n.position),r="insert"==e.type&&"insert"==n.type&&"$text"==e.name&&"$text"==n.name&&e.position.parent==n.position.parent&&e.position.offset+e.length==n.position.offset,a="attribute"==e.type&&"attribute"==n.type&&e.position.parent==n.position.parent&&e.range.isFlat&&n.range.isFlat&&e.position.offset+e.length==n.position.offset&&e.attributeKey==n.attributeKey&&e.attributeOldValue==n.attributeOldValue&&e.attributeNewValue==n.attributeNewValue;o||r||a?(e.length++,a&&(e.range.end=e.range.end.getShiftedBy(1)),t[i]=null):s=i}t=t.filter((e=>e));for(const i of t)delete i.changeCount,"attribute"==i.type&&(delete i.position,delete i.length);return this._changeCount=0,this._cachedChangesWithGraveyard=t.slice(),this._cachedChanges=t.filter(_c),e.includeChangesInGraveyard?this._cachedChangesWithGraveyard:this._cachedChanges}reset(){this._changesInElement.clear(),this._elementSnapshots.clear(),this._changedMarkers.clear(),this._cachedChanges=null}_markInsert(e,t,i){const s={type:"insert",offset:t,howMany:i,count:this._changeCount++};this._markChange(e,s)}_markRemove(e,t,i){const s={type:"remove",offset:t,howMany:i,count:this._changeCount++};this._markChange(e,s),this._removeAllNestedChanges(e,t,i)}_markAttribute(e){const t={type:"attribute",offset:e.startOffset,howMany:e.offsetSize,count:this._changeCount++};this._markChange(e.parent,t)}_markChange(e,t){this._makeSnapshot(e);const i=this._getChangesForElement(e);this._handleChange(t,i),i.push(t);for(let s=0;s<i.length;s++)i[s].howMany<1&&(i.splice(s,1),s--)}_getChangesForElement(e){let t;return this._changesInElement.has(e)?t=this._changesInElement.get(e):(t=[],this._changesInElement.set(e,t)),t}_makeSnapshot(e){this._elementSnapshots.has(e)||this._elementSnapshots.set(e,vc(e.getChildren()))}_handleChange(e,t){e.nodesToHandle=e.howMany;for(const i of t){const s=e.offset+e.howMany,n=i.offset+i.howMany;if("insert"==e.type&&("insert"==i.type&&(e.offset<=i.offset?i.offset+=e.howMany:e.offset<n&&(i.howMany+=e.nodesToHandle,e.nodesToHandle=0)),"remove"==i.type&&e.offset<i.offset&&(i.offset+=e.howMany),"attribute"==i.type))if(e.offset<=i.offset)i.offset+=e.howMany;else if(e.offset<n){const n=i.howMany;i.howMany=e.offset-i.offset,t.unshift({type:"attribute",offset:s,howMany:n-i.howMany,count:this._changeCount++})}if("remove"==e.type){if("insert"==i.type)if(s<=i.offset)i.offset-=e.howMany;else if(s<=n)if(e.offset<i.offset){const t=s-i.offset;i.offset=e.offset,i.howMany-=t,e.nodesToHandle-=t}else i.howMany-=e.nodesToHandle,e.nodesToHandle=0;else if(e.offset<=i.offset)e.nodesToHandle-=i.howMany,i.howMany=0;else if(e.offset<n){const t=n-e.offset;i.howMany-=t,e.nodesToHandle-=t}if("remove"==i.type&&(s<=i.offset?i.offset-=e.howMany:e.offset<i.offset&&(e.nodesToHandle+=i.howMany,i.howMany=0)),"attribute"==i.type)if(s<=i.offset)i.offset-=e.howMany;else if(e.offset<i.offset){const t=s-i.offset;i.offset=e.offset,i.howMany-=t}else if(e.offset<n)if(s<=n){const s=i.howMany;i.howMany=e.offset-i.offset;const n=s-i.howMany-e.nodesToHandle;t.unshift({type:"attribute",offset:e.offset,howMany:n,count:this._changeCount++})}else i.howMany-=n-e.offset}if("attribute"==e.type){if("insert"==i.type)if(e.offset<i.offset&&s>i.offset){if(s>n){const e={type:"attribute",offset:n,howMany:s-n,count:this._changeCount++};this._handleChange(e,t),t.push(e)}e.nodesToHandle=i.offset-e.offset,e.howMany=e.nodesToHandle}else e.offset>=i.offset&&e.offset<n&&(s>n?(e.nodesToHandle=s-n,e.offset=n):e.nodesToHandle=0);if("remove"==i.type&&e.offset<i.offset&&s>i.offset){const n={type:"attribute",offset:i.offset,howMany:s-i.offset,count:this._changeCount++};this._handleChange(n,t),t.push(n),e.nodesToHandle=i.offset-e.offset,e.howMany=e.nodesToHandle}"attribute"==i.type&&(e.offset>=i.offset&&s<=n?(e.nodesToHandle=0,e.howMany=0,e.offset=0):e.offset<=i.offset&&s>=n&&(i.howMany=0))}}e.howMany=e.nodesToHandle,delete e.nodesToHandle}_getInsertDiff(e,t,i){return{type:"insert",position:Oa._createAt(e,t),name:i,length:1,changeCount:this._changeCount++}}_getRemoveDiff(e,t,i){return{type:"remove",position:Oa._createAt(e,t),name:i,length:1,changeCount:this._changeCount++}}_getAttributesDiff(e,t,i){const s=[];i=new Map(i);for(const[n,o]of t){const t=i.has(n)?i.get(n):null;t!==o&&s.push({type:"attribute",position:e.start,range:e.clone(),length:1,attributeKey:n,attributeOldValue:o,attributeNewValue:t,changeCount:this._changeCount++}),i.delete(n)}for(const[n,o]of i)s.push({type:"attribute",position:e.start,range:e.clone(),length:1,attributeKey:n,attributeOldValue:null,attributeNewValue:o,changeCount:this._changeCount++});return s}_isInInsertedElement(e){const t=e.parent;if(!t)return!1;const i=this._changesInElement.get(t),s=e.startOffset;if(i)for(const n of i)if("insert"==n.type&&s>=n.offset&&s<n.offset+n.howMany)return!0;return this._isInInsertedElement(t)}_removeAllNestedChanges(e,t,i){const s=new Ma(Oa._createAt(e,t),Oa._createAt(e,t+i));for(const n of s.getItems({shallow:!0}))n.is("element")&&(this._elementSnapshots.delete(n),this._changesInElement.delete(n),this._removeAllNestedChanges(n,0,n.maxOffset))}}function vc(e){const t=[];for(const i of e)if(i.is("$text"))for(let e=0;e<i.data.length;e++)t.push({name:"$text",attributes:new Map(i.getAttributes())});else t.push({name:i.name,attributes:new Map(i.getAttributes())});return t}function yc(e,t){const i=[];let s=0,n=0;for(const o of t){if(o.offset>s){for(let e=0;e<o.offset-s;e++)i.push("e");n+=o.offset-s}if("insert"==o.type){for(let e=0;e<o.howMany;e++)i.push("i");s=o.offset+o.howMany}else if("remove"==o.type){for(let e=0;e<o.howMany;e++)i.push("r");s=o.offset,n+=o.howMany}else i.push(..."a".repeat(o.howMany).split("")),s=o.offset+o.howMany,n+=o.howMany}if(n<e)for(let o=0;o<e-n-s;o++)i.push("e");return i}function _c(e){const t=e.position&&"$graveyard"==e.position.root.rootName,i=e.range&&"$graveyard"==e.range.root.rootName;return!t&&!i}class kc{constructor(){this._operations=[],this._undoPairs=new Map,this._undoneOperations=new Set}addOperation(e){this._operations.includes(e)||this._operations.push(e)}getOperations(e=Number.NEGATIVE_INFINITY,t=Number.POSITIVE_INFINITY){const i=[];for(const s of this._operations)s.baseVersion>=e&&s.baseVersion<t&&i.push(s);return i}getOperation(e){for(const t of this._operations)if(t.baseVersion==e)return t}setOperationAsUndone(e,t){this._undoPairs.set(t,e),this._undoneOperations.add(e)}isUndoingOperation(e){return this._undoPairs.has(e)}isUndoneOperation(e){return this._undoneOperations.has(e)}getUndoneOperation(e){return this._undoPairs.get(e)}}function Ac(e,t){return!!(i=e.charAt(t-1))&&1==i.length&&/[\ud800-\udbff]/.test(i)&&function(e){return!!e&&1==e.length&&/[\udc00-\udfff]/.test(e)}(e.charAt(t));var i}function xc(e,t){return!!(i=e.charAt(t))&&1==i.length&&/[\u0300-\u036f\u1ab0-\u1aff\u1dc0-\u1dff\u20d0-\u20ff\ufe20-\ufe2f]/.test(i);var i}const Cc="$graveyard";class Ec{constructor(e){this.model=e,this.version=0,this.history=new kc(this),this.selection=new Ya(this),this.roots=new Es({idProperty:"rootName"}),this.differ=new bc(e.markers),this._postFixers=new Set,this._hasSelectionChangedFromTheLastChangeBlock=!1,this.createRoot("$root",Cc),this.listenTo(e,"applyOperation",((e,t)=>{const i=t[0];if(i.isDocumentOperation&&i.baseVersion!==this.version)throw new h("model-document-applyoperation-wrong-version",this,{operation:i})}),{priority:"highest"}),this.listenTo(e,"applyOperation",((e,t)=>{const i=t[0];i.isDocumentOperation&&this.differ.bufferOperation(i)}),{priority:"high"}),this.listenTo(e,"applyOperation",((e,t)=>{const i=t[0];i.isDocumentOperation&&(this.version++,this.history.addOperation(i))}),{priority:"low"}),this.listenTo(this.selection,"change",(()=>{this._hasSelectionChangedFromTheLastChangeBlock=!0})),this.listenTo(e.markers,"update",((e,t,i,s)=>{this.differ.bufferMarkerChange(t.name,i,s,t.affectsData),null===i&&t.on("change",((e,i)=>{this.differ.bufferMarkerChange(t.name,i,t.getRange(),t.affectsData)}))}))}get graveyard(){return this.getRoot(Cc)}createRoot(e="$root",t="main"){if(this.roots.get(t))throw new h("model-document-createroot-name-exists",this,{name:t});const i=new dc(this,e,t);return this.roots.add(i),i}destroy(){this.selection.destroy(),this.stopListening()}getRoot(e="main"){return this.roots.get(e)}getRootNames(){return Array.from(this.roots,(e=>e.rootName)).filter((e=>e!=Cc))}registerPostFixer(e){this._postFixers.add(e)}toJSON(){const e=Ds(this);return e.selection="[engine.model.DocumentSelection]",e.model="[engine.model.Model]",e}_handleChangeBlock(e){this._hasDocumentChangedFromTheLastChangeBlock()&&(this._callPostFixers(e),this.selection.refresh(),this.differ.hasDataChanges()?this.fire("change:data",e.batch):this.fire("change",e.batch),this.selection.refresh(),this.differ.reset()),this._hasSelectionChangedFromTheLastChangeBlock=!1}_hasDocumentChangedFromTheLastChangeBlock(){return!this.differ.isEmpty||this._hasSelectionChangedFromTheLastChangeBlock}_getDefaultRoot(){for(const e of this.roots)if(e!==this.graveyard)return e;return this.graveyard}_getDefaultRange(){const e=this._getDefaultRoot(),t=this.model,i=t.schema,s=t.createPositionFromPath(e,[0]);return i.getNearestSelectionRange(s)||t.createRange(s)}_validateSelectionRange(e){return Tc(e.start)&&Tc(e.end)}_callPostFixers(e){let t=!1;do{for(const i of this._postFixers)if(this.selection.refresh(),t=i(e),t)break}while(t)}}function Tc(e){const t=e.textNode;if(t){const i=t.data,s=e.offset-t.startOffset;return!Ac(i,s)&&!xc(i,s)}return!0}dt(Ec,b);class Sc{constructor(){this._markers=new Map}[Symbol.iterator](){return this._markers.values()}has(e){return this._markers.has(e)}get(e){return this._markers.get(e)||null}_set(e,t,i=!1,s=!1){const n=e instanceof Pc?e.name:e;if(n.includes(","))throw new h("markercollection-incorrect-marker-name",this);const o=this._markers.get(n);if(o){const e=o.getRange();let r=!1;return e.isEqual(t)||(o._attachLiveRange(Za.fromRange(t)),r=!0),i!=o.managedUsingOperations&&(o._managedUsingOperations=i,r=!0),"boolean"==typeof s&&s!=o.affectsData&&(o._affectsData=s,r=!0),r&&this.fire("update:"+n,o,e,t),o}const r=Za.fromRange(t),a=new Pc(n,r,i,s);return this._markers.set(n,a),this.fire("update:"+n,a,null,t),a}_remove(e){const t=e instanceof Pc?e.name:e,i=this._markers.get(t);return!!i&&(this._markers.delete(t),this.fire("update:"+t,i,i.getRange(),null),this._destroyMarker(i),!0)}_refresh(e){const t=e instanceof Pc?e.name:e,i=this._markers.get(t);if(!i)throw new h("markercollection-refresh-marker-not-exists",this);const s=i.getRange();this.fire("update:"+t,i,s,s,i.managedUsingOperations,i.affectsData)}*getMarkersAtPosition(e){for(const t of this)t.getRange().containsPosition(e)&&(yield t)}*getMarkersIntersectingRange(e){for(const t of this)null!==t.getRange().getIntersection(e)&&(yield t)}destroy(){for(const e of this._markers.values())this._destroyMarker(e);this._markers=null,this.stopListening()}*getMarkersGroup(e){for(const t of this._markers.values())t.name.startsWith(e+":")&&(yield t)}_destroyMarker(e){e.stopListening(),e._detachLiveRange()}}dt(Sc,b);class Pc{constructor(e,t,i,s){this.name=e,this._liveRange=this._attachLiveRange(t),this._managedUsingOperations=i,this._affectsData=s}get managedUsingOperations(){if(!this._liveRange)throw new h("marker-destroyed",this);return this._managedUsingOperations}get affectsData(){if(!this._liveRange)throw new h("marker-destroyed",this);return this._affectsData}getStart(){if(!this._liveRange)throw new h("marker-destroyed",this);return this._liveRange.start.clone()}getEnd(){if(!this._liveRange)throw new h("marker-destroyed",this);return this._liveRange.end.clone()}getRange(){if(!this._liveRange)throw new h("marker-destroyed",this);return this._liveRange.toRange()}is(e){return"marker"===e||"model:marker"===e}_attachLiveRange(e){return this._liveRange&&this._detachLiveRange(),e.delegate("change:range").to(this),e.delegate("change:content").to(this),this._liveRange=e,e}_detachLiveRange(){this._liveRange.stopDelegating("change:range",this),this._liveRange.stopDelegating("change:content",this),this._liveRange.detach(),this._liveRange=null}}dt(Pc,b);class Oc extends Wl{get type(){return"noop"}clone(){return new Oc(this.baseVersion)}getReversed(){return new Oc(this.baseVersion+1)}_execute(){}static get className(){return"NoOperation"}}const Ic={};Ic[ic.className]=ic,Ic[oc.className]=oc,Ic[rc.className]=rc,Ic[nc.className]=nc,Ic[Oc.className]=Oc,Ic[Wl.className]=Wl,Ic[ac.className]=ac,Ic[lc.className]=lc,Ic[hc.className]=hc,Ic[cc.className]=cc;class Rc extends Oa{constructor(e,t,i="toNone"){if(super(e,t,i),!this.root.is("rootElement"))throw new h("model-liveposition-root-not-rootelement",e);zc.call(this)}detach(){this.stopListening()}is(e){return"livePosition"===e||"model:livePosition"===e||"position"==e||"model:position"===e}toPosition(){return new Oa(this.root,this.path.slice(),this.stickiness)}static fromPosition(e,t){return new this(e.root,e.path.slice(),t||e.stickiness)}}function zc(){this.listenTo(this.root.document.model,"applyOperation",((e,t)=>{const i=t[0];i.isDocumentOperation&&Mc.call(this,i)}),{priority:"low"})}function Mc(e){const t=this.getTransformedByOperation(e);if(!this.isEqual(t)){const e=this.toPosition();this.path=t.path,this.root=t.root,this.fire("change",e)}}dt(Rc,b);class Nc{constructor(e,t,i){this.model=e,this.writer=t,this.position=i,this.canMergeWith=new Set([this.position.parent]),this.schema=e.schema,this._documentFragment=t.createDocumentFragment(),this._documentFragmentPosition=t.createPositionAt(this._documentFragment,0),this._firstNode=null,this._lastNode=null,this._lastAutoParagraph=null,this._filterAttributesOf=[],this._affectedStart=null,this._affectedEnd=null}handleNodes(e){for(const t of Array.from(e))this._handleNode(t);this._insertPartialFragment(),this._lastAutoParagraph&&this._updateLastNodeFromAutoParagraph(this._lastAutoParagraph),this._mergeOnRight(),this.schema.removeDisallowedAttributes(this._filterAttributesOf,this.writer),this._filterAttributesOf=[]}_updateLastNodeFromAutoParagraph(e){const t=this.writer.createPositionAfter(this._lastNode),i=this.writer.createPositionAfter(e);if(i.isAfter(t)){if(this._lastNode=e,this.position.parent!=e||!this.position.isAtEnd)throw new h("insertcontent-invalid-insertion-position",this);this.position=i,this._setAffectedBoundaries(this.position)}}getSelectionRange(){return this.nodeToSelect?Ma._createOn(this.nodeToSelect):this.model.schema.getNearestSelectionRange(this.position)}getAffectedRange(){return this._affectedStart?new Ma(this._affectedStart,this._affectedEnd):null}destroy(){this._affectedStart&&this._affectedStart.detach(),this._affectedEnd&&this._affectedEnd.detach()}_handleNode(e){if(this.schema.isObject(e))return void this._handleObject(e);let t=this._checkAndAutoParagraphToAllowedPosition(e);t||(t=this._checkAndSplitToAllowedPosition(e),t)?(this._appendToFragment(e),this._firstNode||(this._firstNode=e),this._lastNode=e):this._handleDisallowedNode(e)}_insertPartialFragment(){if(this._documentFragment.isEmpty)return;const e=Rc.fromPosition(this.position,"toNext");this._setAffectedBoundaries(this.position),this._documentFragment.getChild(0)==this._firstNode&&(this.writer.insert(this._firstNode,this.position),this._mergeOnLeft(),this.position=e.toPosition()),this._documentFragment.isEmpty||this.writer.insert(this._documentFragment,this.position),this._documentFragmentPosition=this.writer.createPositionAt(this._documentFragment,0),this.position=e.toPosition(),e.detach()}_handleObject(e){this._checkAndSplitToAllowedPosition(e)?this._appendToFragment(e):this._tryAutoparagraphing(e)}_handleDisallowedNode(e){e.is("element")?this.handleNodes(e.getChildren()):this._tryAutoparagraphing(e)}_appendToFragment(e){if(!this.schema.checkChild(this.position,e))throw new h("insertcontent-wrong-position",this,{node:e,position:this.position});this.writer.insert(e,this._documentFragmentPosition),this._documentFragmentPosition=this._documentFragmentPosition.getShiftedBy(e.offsetSize),this.schema.isObject(e)&&!this.schema.checkChild(this.position,"$text")?this.nodeToSelect=e:this.nodeToSelect=null,this._filterAttributesOf.push(e)}_setAffectedBoundaries(e){this._affectedStart||(this._affectedStart=Rc.fromPosition(e,"toPrevious")),this._affectedEnd&&!this._affectedEnd.isBefore(e)||(this._affectedEnd&&this._affectedEnd.detach(),this._affectedEnd=Rc.fromPosition(e,"toNext"))}_mergeOnLeft(){const e=this._firstNode;if(!(e instanceof Ta))return;if(!this._canMergeLeft(e))return;const t=Rc._createBefore(e);t.stickiness="toNext";const i=Rc.fromPosition(this.position,"toNext");this._affectedStart.isEqual(t)&&(this._affectedStart.detach(),this._affectedStart=Rc._createAt(t.nodeBefore,"end","toPrevious")),this._firstNode===this._lastNode&&(this._firstNode=t.nodeBefore,this._lastNode=t.nodeBefore),this.writer.merge(t),t.isEqual(this._affectedEnd)&&this._firstNode===this._lastNode&&(this._affectedEnd.detach(),this._affectedEnd=Rc._createAt(t.nodeBefore,"end","toNext")),this.position=i.toPosition(),i.detach(),this._filterAttributesOf.push(this.position.parent),t.detach()}_mergeOnRight(){const e=this._lastNode;if(!(e instanceof Ta))return;if(!this._canMergeRight(e))return;const t=Rc._createAfter(e);if(t.stickiness="toNext",!this.position.isEqual(t))throw new h("insertcontent-invalid-insertion-position",this);this.position=Oa._createAt(t.nodeBefore,"end");const i=Rc.fromPosition(this.position,"toPrevious");this._affectedEnd.isEqual(t)&&(this._affectedEnd.detach(),this._affectedEnd=Rc._createAt(t.nodeBefore,"end","toNext")),this._firstNode===this._lastNode&&(this._firstNode=t.nodeBefore,this._lastNode=t.nodeBefore),this.writer.merge(t),t.getShiftedBy(-1).isEqual(this._affectedStart)&&this._firstNode===this._lastNode&&(this._affectedStart.detach(),this._affectedStart=Rc._createAt(t.nodeBefore,0,"toPrevious")),this.position=i.toPosition(),i.detach(),this._filterAttributesOf.push(this.position.parent),t.detach()}_canMergeLeft(e){const t=e.previousSibling;return t instanceof Ta&&this.canMergeWith.has(t)&&this.model.schema.checkMerge(t,e)}_canMergeRight(e){const t=e.nextSibling;return t instanceof Ta&&this.canMergeWith.has(t)&&this.model.schema.checkMerge(e,t)}_tryAutoparagraphing(e){const t=this.writer.createElement("paragraph");this._getAllowedIn(this.position.parent,t)&&this.schema.checkChild(t,e)&&(t._appendChild(e),this._handleNode(t))}_checkAndAutoParagraphToAllowedPosition(e){if(this.schema.checkChild(this.position.parent,e))return!0;if(!this.schema.checkChild(this.position.parent,"paragraph")||!this.schema.checkChild("paragraph",e))return!1;this._insertPartialFragment();const t=this.writer.createElement("paragraph");return this.writer.insert(t,this.position),this._setAffectedBoundaries(this.position),this._lastAutoParagraph=t,this.position=this.writer.createPositionAt(t,0),!0}_checkAndSplitToAllowedPosition(e){const t=this._getAllowedIn(this.position.parent,e);if(!t)return!1;for(t!=this.position.parent&&this._insertPartialFragment();t!=this.position.parent;)if(this.position.isAtStart){const e=this.position.parent;this.position=this.writer.createPositionBefore(e),e.isEmpty&&e.parent===t&&this.writer.remove(e)}else if(this.position.isAtEnd)this.position=this.writer.createPositionAfter(this.position.parent);else{const e=this.writer.createPositionAfter(this.position.parent);this._setAffectedBoundaries(this.position),this.writer.split(this.position),this.position=e,this.canMergeWith.add(this.position.nodeAfter)}return!0}_getAllowedIn(e,t){return this.schema.checkChild(e,t)?e:this.schema.isLimit(e)?null:this._getAllowedIn(e.parent,t)}}function Dc(e,t,i={}){if(t.isCollapsed)return;const s=t.getFirstRange();if("$graveyard"==s.root.rootName)return;const n=e.schema;e.change((e=>{if(!i.doNotResetEntireContent&&function(e,t){const i=e.getLimitElement(t);if(!t.containsEntireContent(i))return!1;const s=t.getFirstRange();return s.start.parent!=s.end.parent&&e.checkChild(i,"paragraph")}(n,t))return void function(e,t){const i=e.model.schema.getLimitElement(t);e.remove(e.createRangeIn(i)),Fc(e,e.createPositionAt(i,0),t)}(e,t);const[o,r]=function(e){const t=e.root.document.model,i=e.start;let s=e.end;if(t.hasContent(e,{ignoreMarkers:!0})){const i=function(e){const t=e.parent,i=t.root.document.model.schema,s=t.getAncestors({parentFirst:!0,includeSelf:!0});for(const n of s){if(i.isLimit(n))return null;if(i.isBlock(n))return n}}(s);if(i&&s.isTouching(t.createPositionAt(i,0))){const i=t.createSelection(e);t.modifySelection(i,{direction:"backward"});const n=i.getLastPosition(),o=t.createRange(n,s);t.hasContent(o,{ignoreMarkers:!0})||(s=n)}}return[Rc.fromPosition(i,"toPrevious"),Rc.fromPosition(s,"toNext")]}(s);o.isTouching(r)||e.remove(e.createRange(o,r)),i.leaveUnmerged||(function(e,t,i){const s=e.model;if(!Lc(e.model.schema,t,i))return;const[n,o]=function(e,t){const i=e.getAncestors(),s=t.getAncestors();let n=0;for(;i[n]&&i[n]==s[n];)n++;return[i[n],s[n]]}(t,i);n&&o&&(!s.hasContent(n,{ignoreMarkers:!0})&&s.hasContent(o,{ignoreMarkers:!0})?Bc(e,t,i,n.parent):Vc(e,t,i,n.parent))}(e,o,r),n.removeDisallowedAttributes(o.parent.getChildren(),e)),jc(e,t,o),!i.doNotAutoparagraph&&function(e,t){const i=e.checkChild(t,"$text"),s=e.checkChild(t,"paragraph");return!i&&s}(n,o)&&Fc(e,o,t),o.detach(),r.detach()}))}function Vc(e,t,i,s){const n=t.parent,o=i.parent;if(n!=s&&o!=s){for(t=e.createPositionAfter(n),(i=e.createPositionBefore(o)).isEqual(t)||e.insert(o,t),e.merge(t);i.parent.isEmpty;){const t=i.parent;i=e.createPositionBefore(t),e.remove(t)}Lc(e.model.schema,t,i)&&Vc(e,t,i,s)}}function Bc(e,t,i,s){const n=t.parent,o=i.parent;if(n!=s&&o!=s){for(t=e.createPositionAfter(n),(i=e.createPositionBefore(o)).isEqual(t)||e.insert(n,i);t.parent.isEmpty;){const i=t.parent;t=e.createPositionBefore(i),e.remove(i)}i=e.createPositionBefore(o),function(e,t){const i=t.nodeBefore,s=t.nodeAfter;i.name!=s.name&&e.rename(i,s.name),e.clearAttributes(i),e.setAttributes(Object.fromEntries(s.getAttributes()),i),e.merge(t)}(e,i),Lc(e.model.schema,t,i)&&Bc(e,t,i,s)}}function Lc(e,t,i){const s=t.parent,n=i.parent;return s!=n&&!e.isLimit(s)&&!e.isLimit(n)&&function(e,t,i){const s=new Ma(e,t);for(const n of s.getWalker())if(i.isLimit(n.item))return!1;return!0}(t,i,e)}function Fc(e,t,i){const s=e.createElement("paragraph");e.insert(s,t),jc(e,i,e.createPositionAt(s,0))}function jc(e,t,i){t instanceof Ya?e.setSelection(i):t.setTo(i)}const qc=' ,.?!:;"-()';function Hc(e,t){const{isForward:i,walker:s,unit:n,schema:o}=e,{type:r,item:a,nextPosition:l}=t;if("text"==r)return"word"===e.unit?function(e,t){let i=e.position.textNode;if(i){let s=e.position.offset-i.startOffset;for(;!Uc(i.data,s,t)&&!Wc(i,s,t);){e.next();const n=t?e.position.nodeAfter:e.position.nodeBefore;if(n&&n.is("$text")){const s=n.data.charAt(t?0:n.data.length-1);qc.includes(s)||(e.next(),i=e.position.textNode)}s=e.position.offset-i.startOffset}}return e.position}(s,i):function(e,t){const i=e.position.textNode;if(i){const s=i.data;let n=e.position.offset-i.startOffset;for(;Ac(s,n)||"character"==t&&xc(s,n);)e.next(),n=e.position.offset-i.startOffset}return e.position}(s,n);if(r==(i?"elementStart":"elementEnd")){if(o.isSelectable(a))return Oa._createAt(a,i?"after":"before");if(o.checkChild(l,"$text"))return l}else{if(o.isLimit(a))return void s.skip((()=>!0));if(o.checkChild(l,"$text"))return l}}function $c(e,t){const i=e.root,s=Oa._createAt(i,t?"end":0);return t?new Ma(e,s):new Ma(s,e)}function Uc(e,t,i){const s=t+(i?0:-1);return qc.includes(e.charAt(s))}function Wc(e,t,i){return t===(i?e.endOffset:0)}function Zc(e,t){const i=[];Array.from(e.getItems({direction:"backward"})).map((e=>t.createRangeOn(e))).filter((t=>(t.start.isAfter(e.start)||t.start.isEqual(e.start))&&(t.end.isBefore(e.end)||t.end.isEqual(e.end)))).forEach((e=>{i.push(e.start.parent),t.remove(e)})),i.forEach((e=>{let i=e;for(;i.parent&&i.isEmpty;){const e=t.createRangeOn(i);i=i.parent,t.remove(e)}}))}function Gc(e){e.document.registerPostFixer((t=>function(e,t){const i=t.document.selection,s=t.schema,n=[];let o=!1;for(const r of i.getRanges()){const e=Kc(r,s);e&&!e.isEqual(r)?(n.push(e),o=!0):n.push(r)}o&&e.setSelection(function(e){const t=[];t.push(e.shift());for(const i of e){const e=t.pop();if(i.isEqual(e))t.push(e);else if(i.isIntersecting(e)){const s=e.start.isAfter(i.start)?i.start:e.start,n=e.end.isAfter(i.end)?e.end:i.end,o=new Ma(s,n);t.push(o)}else t.push(e),t.push(i)}return t}(n),{backward:i.isBackward})}(t,e)))}function Kc(e,t){return e.isCollapsed?function(e,t){const i=e.start,s=t.getNearestSelectionRange(i);if(!s)return null;if(!s.isCollapsed)return s;const n=s.start;return i.isEqual(n)?null:new Ma(n)}(e,t):function(e,t){const{start:i,end:s}=e,n=t.checkChild(i,"$text"),o=t.checkChild(s,"$text"),r=t.getLimitElement(i),a=t.getLimitElement(s);if(r===a){if(n&&o)return null;if(function(e,t,i){const s=e.nodeAfter&&!i.isLimit(e.nodeAfter)||i.checkChild(e,"$text"),n=t.nodeBefore&&!i.isLimit(t.nodeBefore)||i.checkChild(t,"$text");return s||n}(i,s,t)){const e=i.nodeAfter&&t.isSelectable(i.nodeAfter)?null:t.getNearestSelectionRange(i,"forward"),n=s.nodeBefore&&t.isSelectable(s.nodeBefore)?null:t.getNearestSelectionRange(s,"backward"),o=e?e.start:i,r=n?n.end:s;return new Ma(o,r)}}const l=r&&!r.is("rootElement"),c=a&&!a.is("rootElement");if(l||c){const e=i.nodeAfter&&s.nodeBefore&&i.nodeAfter.parent===s.nodeBefore.parent,n=l&&(!e||!Yc(i.nodeAfter,t)),o=c&&(!e||!Yc(s.nodeBefore,t));let h=i,d=s;return n&&(h=Oa._createBefore(Jc(r,t))),o&&(d=Oa._createAfter(Jc(a,t))),new Ma(h,d)}return null}(e,t)}function Jc(e,t){let i=e,s=i;for(;t.isLimit(s)&&s.parent;)i=s,s=s.parent;return i}function Yc(e,t){return e&&t.isSelectable(e)}class Qc{constructor(){this.markers=new Sc,this.document=new Ec(this),this.schema=new Al,this._pendingChanges=[],this._currentWriter=null,["insertContent","deleteContent","modifySelection","getSelectedContent","applyOperation"].forEach((e=>this.decorate(e))),this.on("applyOperation",((e,t)=>{t[0]._validate()}),{priority:"highest"}),this.schema.register("$root",{isLimit:!0}),this.schema.register("$block",{allowIn:"$root",isBlock:!0}),this.schema.register("$text",{allowIn:"$block",isInline:!0,isContent:!0}),this.schema.register("$clipboardHolder",{allowContentOf:"$root",allowChildren:"$text",isLimit:!0}),this.schema.register("$documentFragment",{allowContentOf:"$root",allowChildren:"$text",isLimit:!0}),this.schema.register("$marker"),this.schema.addChildCheck(((e,t)=>{if("$marker"===t.name)return!0})),Gc(this),this.document.registerPostFixer(cl)}change(e){try{return 0===this._pendingChanges.length?(this._pendingChanges.push({batch:new Ul,callback:e}),this._runPendingChanges()[0]):e(this._currentWriter)}catch(e){h.rethrowUnexpectedError(e,this)}}enqueueChange(e,t){try{"string"==typeof e?e=new Ul(e):"function"==typeof e&&(t=e,e=new Ul),this._pendingChanges.push({batch:e,callback:t}),1==this._pendingChanges.length&&this._runPendingChanges()}catch(e){h.rethrowUnexpectedError(e,this)}}applyOperation(e){e._execute()}insertContent(e,t,i){return function(e,t,i,s){return e.change((n=>{let o;o=i?i instanceof qa||i instanceof Ya?i:n.createSelection(i,s):e.document.selection,o.isCollapsed||e.deleteContent(o,{doNotAutoparagraph:!0});const r=new Nc(e,n,o.anchor);let a;a=t.is("documentFragment")?t.getChildren():[t],r.handleNodes(a);const l=r.getSelectionRange();l&&(o instanceof Ya?n.setSelection(l):o.setTo(l));const c=r.getAffectedRange()||e.createRange(o.anchor);return r.destroy(),c}))}(this,e,t,i)}deleteContent(e,t){Dc(this,e,t)}modifySelection(e,t){!function(e,t,i={}){const s=e.schema,n="backward"!=i.direction,o=i.unit?i.unit:"character",r=t.focus,a=new Sa({boundaries:$c(r,n),singleCharacters:!0,direction:n?"forward":"backward"}),l={walker:a,schema:s,isForward:n,unit:o};let c;for(;c=a.next();){if(c.done)return;const i=Hc(l,c.value);if(i)return void(t instanceof Ya?e.change((e=>{e.setSelectionFocus(i)})):t.setFocus(i))}}(this,e,t)}getSelectedContent(e){return function(e,t){return e.change((e=>{const i=e.createDocumentFragment(),s=t.getFirstRange();if(!s||s.isCollapsed)return i;const n=s.start.root,o=s.start.getCommonPath(s.end),r=n.getNodeByPath(o);let a;a=s.start.parent==s.end.parent?s:e.createRange(e.createPositionAt(r,s.start.path[o.length]),e.createPositionAt(r,s.end.path[o.length]+1));const l=a.end.offset-a.start.offset;for(const t of a.getItems({shallow:!0}))t.is("$textProxy")?e.appendText(t.data,t.getAttributes(),i):e.append(e.cloneElement(t,!0),i);if(a!=s){const t=s._getTransformedByMove(a.start,e.createPositionAt(i,0),l)[0],n=e.createRange(e.createPositionAt(i,0),t.start);Zc(e.createRange(t.end,e.createPositionAt(i,"end")),e),Zc(n,e)}return i}))}(this,e)}hasContent(e,t={}){const i=e instanceof Ta?Ma._createIn(e):e;if(i.isCollapsed)return!1;const{ignoreWhitespaces:s=!1,ignoreMarkers:n=!1}=t;if(!n)for(const o of this.markers.getMarkersIntersectingRange(i))if(o.affectsData)return!0;for(const o of i.getItems())if(this.schema.isContent(o)){if(!o.is("$textProxy"))return!0;if(!s)return!0;if(-1!==o.data.search(/\S/))return!0}return!1}createPositionFromPath(e,t,i){return new Oa(e,t,i)}createPositionAt(e,t){return Oa._createAt(e,t)}createPositionAfter(e){return Oa._createAfter(e)}createPositionBefore(e){return Oa._createBefore(e)}createRange(e,t){return new Ma(e,t)}createRangeIn(e){return Ma._createIn(e)}createRangeOn(e){return Ma._createOn(e)}createSelection(e,t,i){return new qa(e,t,i)}createBatch(e){return new Ul(e)}createOperationFromJSON(e){return class{static fromJSON(e,t){return Ic[e.__className].fromJSON(e,t)}}.fromJSON(e,this.document)}destroy(){this.document.destroy(),this.stopListening()}_runPendingChanges(){const e=[];for(this.fire("_beforeChanges");this._pendingChanges.length;){const t=this._pendingChanges[0].batch;this._currentWriter=new uc(this,t);const i=this._pendingChanges[0].callback(this._currentWriter);e.push(i),this.document._handleChangeBlock(this._currentWriter),this._pendingChanges.shift(),this._currentWriter=null}return this.fire("_afterChanges"),e}}dt(Qc,ot);class Xc extends ha{constructor(e){super(),this.editor=e}set(e,t,i={}){if("string"==typeof t){const e=t;t=(t,i)=>{this.editor.execute(e),i()}}super.set(e,t,i)}}class eh{constructor(e={}){this._context=e.context||new zs({language:e.language}),this._context._addEditor(this,!e.context);const t=Array.from(this.constructor.builtinPlugins||[]);this.config=new ks(e,this.constructor.defaultConfig),this.config.define("plugins",t),this.config.define(this._context._getEditorConfig()),this.plugins=new Ts(this,t,this._context.plugins),this.locale=this._context.locale,this.t=this.locale.t,this.commands=new yl,this.set("state","initializing"),this.once("ready",(()=>this.state="ready"),{priority:"high"}),this.once("destroy",(()=>this.state="destroyed"),{priority:"high"}),this.set("isReadOnly",!1),this.model=new Qc;const i=new Cn;this.data=new jl(this.model,i),this.editing=new vl(this.model,i),this.editing.view.document.bind("isReadOnly").to(this),this.conversion=new ql([this.editing.downcastDispatcher,this.data.downcastDispatcher],this.data.upcastDispatcher),this.conversion.addAlias("dataDowncast",this.data.downcastDispatcher),this.conversion.addAlias("editingDowncast",this.editing.downcastDispatcher),this.keystrokes=new Xc(this),this.keystrokes.listenTo(this.editing.view.document)}initPlugins(){const e=this.config,t=e.get("plugins"),i=e.get("removePlugins")||[],s=e.get("extraPlugins")||[],n=e.get("substitutePlugins")||[];return this.plugins.init(t.concat(s),i,n)}destroy(){let e=Promise.resolve();return"initializing"==this.state&&(e=new Promise((e=>this.once("ready",e)))),e.then((()=>{this.fire("destroy"),this.stopListening(),this.commands.destroy()})).then((()=>this.plugins.destroy())).then((()=>{this.model.destroy(),this.data.destroy(),this.editing.destroy(),this.keystrokes.destroy()})).then((()=>this._context._removeEditor(this)))}execute(...e){try{return this.commands.execute(...e)}catch(e){h.rethrowUnexpectedError(e,this)}}focus(){this.editing.view.focus()}}dt(eh,ot);class th{constructor(e){this.editor=e,this._components=new Map}*names(){for(const e of this._components.values())yield e.originalName}add(e,t){this._components.set(ih(e),{callback:t,originalName:e})}create(e){if(!this.has(e))throw new h("componentfactory-item-missing",this,{name:e});return this._components.get(ih(e)).callback(this.editor.locale)}has(e){return this._components.has(ih(e))}}function ih(e){return String(e).toLowerCase()}class sh{constructor(e){this.editor=e,this.componentFactory=new th(e),this.focusTracker=new ca,this._editableElementsMap=new Map,this.listenTo(e.editing.view.document,"layoutChanged",(()=>this.update()))}get element(){return null}update(){this.fire("update")}destroy(){this.stopListening(),this.focusTracker.destroy();for(const e of this._editableElementsMap.values())e.ckeditorInstance=null;this._editableElementsMap=new Map}setEditableElement(e,t){this._editableElementsMap.set(e,t),t.ckeditorInstance||(t.ckeditorInstance=this.editor)}getEditableElement(e="main"){return this._editableElementsMap.get(e)}getEditableElementsNames(){return this._editableElementsMap.keys()}get _editableElements(){return console.warn("editor-ui-deprecated-editable-elements: The EditorUI#_editableElements property has been deprecated and will be removed in the near future.",{editorUI:this}),this._editableElementsMap}}dt(sh,b);const nh={setData(e){this.data.set(e)},getData(e){return this.data.get(e)}};class oh extends Ms{static get pluginName(){return"PendingActions"}init(){this.set("hasAny",!1),this._actions=new Es({idProperty:"_id"}),this._actions.delegate("add","remove").to(this)}add(e){if("string"!=typeof e)throw new h("pendingactions-add-invalid-message",this);const t=Object.create(ot);return t.set("message",e),this._actions.add(t),this.hasAny=!0,t}remove(e){this._actions.remove(e),this.hasAny=!!this._actions.length}get first(){return this._actions.get(0)}[Symbol.iterator](){return this._actions[Symbol.iterator]()}}const rh={cancel:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.591 10.177 4.243 4.242a1 1 0 0 1-1.415 1.415l-4.242-4.243-4.243 4.243a1 1 0 0 1-1.414-1.415l4.243-4.242L4.52 5.934A1 1 0 0 1 5.934 4.52l4.243 4.243 4.242-4.243a1 1 0 1 1 1.415 1.414l-4.243 4.243z"/></svg>',caption:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 16h9a1 1 0 0 1 0 2H2a1 1 0 0 1 0-2z"/><path d="M17 1a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h14zm0 1.5H3a.5.5 0 0 0-.492.41L2.5 3v9a.5.5 0 0 0 .41.492L3 12.5h14a.5.5 0 0 0 .492-.41L17.5 12V3a.5.5 0 0 0-.41-.492L17 2.5z" fill-opacity=".6"/></svg>',check:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.972 16.615a.997.997 0 0 1-.744-.292l-4.596-4.596a1 1 0 1 1 1.414-1.414l3.926 3.926 9.937-9.937a1 1 0 0 1 1.414 1.415L7.717 16.323a.997.997 0 0 1-.745.292z"/></svg>',cog:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.333 2 .19 2.263a5.899 5.899 0 0 1 1.458.604L14.714 3.4 16.6 5.286l-1.467 1.733c.263.452.468.942.605 1.46L18 8.666v2.666l-2.263.19a5.899 5.899 0 0 1-.604 1.458l1.467 1.733-1.886 1.886-1.733-1.467a5.899 5.899 0 0 1-1.46.605L11.334 18H8.667l-.19-2.263a5.899 5.899 0 0 1-1.458-.604L5.286 16.6 3.4 14.714l1.467-1.733a5.899 5.899 0 0 1-.604-1.458L2 11.333V8.667l2.262-.189a5.899 5.899 0 0 1 .605-1.459L3.4 5.286 5.286 3.4l1.733 1.467a5.899 5.899 0 0 1 1.46-.605L8.666 2h2.666zM10 6.267a3.733 3.733 0 1 0 0 7.466 3.733 3.733 0 0 0 0-7.466z"/></svg>',eraser:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m8.636 9.531-2.758 3.94a.5.5 0 0 0 .122.696l3.224 2.284h1.314l2.636-3.736L8.636 9.53zm.288 8.451L5.14 15.396a2 2 0 0 1-.491-2.786l6.673-9.53a2 2 0 0 1 2.785-.49l3.742 2.62a2 2 0 0 1 .491 2.785l-7.269 10.053-2.147-.066z"/><path d="M4 18h5.523v-1H4zm-2 0h1v-1H2z"/></svg>',lowVision:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M5.085 6.22 2.943 4.078a.75.75 0 1 1 1.06-1.06l2.592 2.59A11.094 11.094 0 0 1 10 5.068c4.738 0 8.578 3.101 8.578 5.083 0 1.197-1.401 2.803-3.555 3.887l1.714 1.713a.75.75 0 0 1-.09 1.138.488.488 0 0 1-.15.084.75.75 0 0 1-.821-.16L6.17 7.304c-.258.11-.51.233-.757.365l6.239 6.24-.006.005.78.78c-.388.094-.78.166-1.174.215l-1.11-1.11h.011L4.55 8.197a7.2 7.2 0 0 0-.665.514l-.112.098 4.897 4.897-.005.006 1.276 1.276a10.164 10.164 0 0 1-1.477-.117l-.479-.479-.009.009-4.863-4.863-.022.031a2.563 2.563 0 0 0-.124.2c-.043.077-.08.158-.108.241a.534.534 0 0 0-.028.133.29.29 0 0 0 .008.072.927.927 0 0 0 .082.226c.067.133.145.26.234.379l3.242 3.365.025.01.59.623c-3.265-.918-5.59-3.155-5.59-4.668 0-1.194 1.448-2.838 3.663-3.93zm7.07.531a4.632 4.632 0 0 1 1.108 5.992l.345.344.046-.018a9.313 9.313 0 0 0 2-1.112c.256-.187.5-.392.727-.613.137-.134.27-.277.392-.431.072-.091.141-.185.203-.286.057-.093.107-.19.148-.292a.72.72 0 0 0 .036-.12.29.29 0 0 0 .008-.072.492.492 0 0 0-.028-.133.999.999 0 0 0-.036-.096 2.165 2.165 0 0 0-.071-.145 2.917 2.917 0 0 0-.125-.2 3.592 3.592 0 0 0-.263-.335 5.444 5.444 0 0 0-.53-.523 7.955 7.955 0 0 0-1.054-.768 9.766 9.766 0 0 0-1.879-.891c-.337-.118-.68-.219-1.027-.301zm-2.85.21-.069.002a.508.508 0 0 0-.254.097.496.496 0 0 0-.104.679.498.498 0 0 0 .326.199l.045.005c.091.003.181.003.272.012a2.45 2.45 0 0 1 2.017 1.513c.024.061.043.125.069.185a.494.494 0 0 0 .45.287h.008a.496.496 0 0 0 .35-.158.482.482 0 0 0 .13-.335.638.638 0 0 0-.048-.219 3.379 3.379 0 0 0-.36-.723 3.438 3.438 0 0 0-2.791-1.543l-.028-.001h-.013z"/></svg>',image:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.91 10.54c.26-.23.64-.21.88.03l3.36 3.14 2.23-2.06a.64.64 0 0 1 .87 0l2.52 2.97V4.5H3.2v10.12l3.71-4.08zm10.27-7.51c.6 0 1.09.47 1.09 1.05v11.84c0 .59-.49 1.06-1.09 1.06H2.79c-.6 0-1.09-.47-1.09-1.06V4.08c0-.58.49-1.05 1.1-1.05h14.38zm-5.22 5.56a1.96 1.96 0 1 1 3.4-1.96 1.96 1.96 0 0 1-3.4 1.96z"/></svg>',alignBottom:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m9.239 13.938-2.88-1.663a.75.75 0 0 1 .75-1.3L9 12.067V4.75a.75.75 0 1 1 1.5 0v7.318l1.89-1.093a.75.75 0 0 1 .75 1.3l-2.879 1.663a.752.752 0 0 1-.511.187.752.752 0 0 1-.511-.187zM4.25 17a.75.75 0 1 1 0-1.5h10.5a.75.75 0 0 1 0 1.5H4.25z"/></svg>',alignMiddle:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.75 11.875a.752.752 0 0 1 .508.184l2.883 1.666a.75.75 0 0 1-.659 1.344l-.091-.044-1.892-1.093.001 4.318a.75.75 0 1 1-1.5 0v-4.317l-1.89 1.092a.75.75 0 0 1-.75-1.3l2.879-1.663a.752.752 0 0 1 .51-.187zM15.25 9a.75.75 0 1 1 0 1.5H4.75a.75.75 0 1 1 0-1.5h10.5zM9.75.375a.75.75 0 0 1 .75.75v4.318l1.89-1.093.092-.045a.75.75 0 0 1 .659 1.344l-2.883 1.667a.752.752 0 0 1-.508.184.752.752 0 0 1-.511-.187L6.359 5.65a.75.75 0 0 1 .75-1.299L9 5.442V1.125a.75.75 0 0 1 .75-.75z"/></svg>',alignTop:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m10.261 7.062 2.88 1.663a.75.75 0 0 1-.75 1.3L10.5 8.933v7.317a.75.75 0 1 1-1.5 0V8.932l-1.89 1.093a.75.75 0 0 1-.75-1.3l2.879-1.663a.752.752 0 0 1 .511-.187.752.752 0 0 1 .511.187zM15.25 4a.75.75 0 1 1 0 1.5H4.75a.75.75 0 0 1 0-1.5h10.5z"/></svg>',alignLeft:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 4c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75z"/></svg>',alignCenter:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm2.286 4c0 .414.336.75.75.75h9.928a.75.75 0 1 0 0-1.5H5.036a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h9.928a.75.75 0 1 0 0-1.5H5.036a.75.75 0 0 0-.75.75z"/></svg>',alignRight:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M18 3.75a.75.75 0 0 1-.75.75H2.75a.75.75 0 1 1 0-1.5h14.5a.75.75 0 0 1 .75.75zm0 8a.75.75 0 0 1-.75.75H2.75a.75.75 0 1 1 0-1.5h14.5a.75.75 0 0 1 .75.75zm0 4a.75.75 0 0 1-.75.75H7.321a.75.75 0 1 1 0-1.5h9.929a.75.75 0 0 1 .75.75zm0-8a.75.75 0 0 1-.75.75H7.321a.75.75 0 1 1 0-1.5h9.929a.75.75 0 0 1 .75.75z"/></svg>',alignJustify:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 4c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75z"/></svg>',objectLeft:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm11.5 9H18v1.5h-4.5zm0-3H18v1.5h-4.5zm0-3H18v1.5h-4.5zM2 15h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>',objectCenter:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M15.003 7v5.5a1 1 0 0 1-1 1H5.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H6.5V12h6.997V7.5z"/></svg>',objectRight:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2zm0-9h5v1.5H2zm0 3h5v1.5H2zm0 3h5v1.5H2z"/><path d="M18.003 7v5.5a1 1 0 0 1-1 1H8.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H9.5V12h6.997V7.5z"/></svg>',objectFullWidth:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M18 7v5.5a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1zm-1.505.5H3.504V12h12.991V7.5z"/></svg>',objectInline:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm11.5 9H18v1.5h-4.5zM2 15h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>',objectBlockLeft:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>',objectBlockRight:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M18.003 7v5.5a1 1 0 0 1-1 1H8.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H9.5V12h6.997V7.5z"/></svg>',objectSizeFull:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.5 17v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zM1 15.5v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm0-2v1h-1v-1h1zm-19 0v1H0v-1h1zM14.5 2v1h-1V2h1zm2 0v1h-1V2h1zm2 0v1h-1V2h1zm-8 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm8 0v1h-1V2h1zm-10 0v1h-1V2h1z"/><path d="M18.095 2H1.905C.853 2 0 2.895 0 4v12c0 1.105.853 2 1.905 2h16.19C19.147 18 20 17.105 20 16V4c0-1.105-.853-2-1.905-2zm0 1.5c.263 0 .476.224.476.5v12c0 .276-.213.5-.476.5H1.905a.489.489 0 0 1-.476-.5V4c0-.276.213-.5.476-.5h16.19z"/></svg>',objectSizeLarge:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.5 17v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zM1 15.5v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm0-2v1h-1v-1h1zm-19 0v1H0v-1h1zM14.5 2v1h-1V2h1zm2 0v1h-1V2h1zm2 0v1h-1V2h1zm-8 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm8 0v1h-1V2h1zm-10 0v1h-1V2h1z"/><path d="M13 6H2a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2zm0 1.5a.5.5 0 0 1 .5.5v8a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5V8a.5.5 0 0 1 .5-.5h11z"/></svg>',objectSizeSmall:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.5 17v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zM1 15.5v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm0-2v1h-1v-1h1zm-19 0v1H0v-1h1zM14.5 2v1h-1V2h1zm2 0v1h-1V2h1zm2 0v1h-1V2h1zm-8 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm8 0v1h-1V2h1zm-10 0v1h-1V2h1z"/><path d="M7 10H2a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h5a2 2 0 0 0 2-2v-4a2 2 0 0 0-2-2zm0 1.5a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-4a.5.5 0 0 1 .5-.5h5z"/></svg>',objectSizeMedium:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.5 17v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zM1 15.5v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm0-2v1h-1v-1h1zm-19 0v1H0v-1h1zM14.5 2v1h-1V2h1zm2 0v1h-1V2h1zm2 0v1h-1V2h1zm-8 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm8 0v1h-1V2h1zm-10 0v1h-1V2h1z"/><path d="M10 8H2a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2v-6a2 2 0 0 0-2-2zm0 1.5a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-6a.5.5 0 0 1 .5-.5h8z"/></svg>',pencil:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m7.3 17.37-.061.088a1.518 1.518 0 0 1-.934.535l-4.178.663-.806-4.153a1.495 1.495 0 0 1 .187-1.058l.056-.086L8.77 2.639c.958-1.351 2.803-1.076 4.296-.03 1.497 1.047 2.387 2.693 1.433 4.055L7.3 17.37zM9.14 4.728l-5.545 8.346 3.277 2.294 5.544-8.346L9.14 4.728zM6.07 16.512l-3.276-2.295.53 2.73 2.746-.435zM9.994 3.506 13.271 5.8c.316-.452-.16-1.333-1.065-1.966-.905-.634-1.895-.78-2.212-.328zM8 18.5 9.375 17H19v1.5H8z"/></svg>',pilcrow:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.999 2H15a1 1 0 0 1 0 2h-1.004v13a1 1 0 1 1-2 0V4H8.999v13a1 1 0 1 1-2 0v-7A4 4 0 0 1 3 6a4 4 0 0 1 3.999-4z"/></svg>',quote:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 10.423a6.5 6.5 0 0 1 6.056-6.408l.038.67C6.448 5.423 5.354 7.663 5.22 10H9c.552 0 .5.432.5.986v4.511c0 .554-.448.503-1 .503h-5c-.552 0-.5-.449-.5-1.003v-4.574zm8 0a6.5 6.5 0 0 1 6.056-6.408l.038.67c-2.646.739-3.74 2.979-3.873 5.315H17c.552 0 .5.432.5.986v4.511c0 .554-.448.503-1 .503h-5c-.552 0-.5-.449-.5-1.003v-4.574z"/></svg>',threeVerticalDots:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><circle cx="9.5" cy="4.5" r="1.5"/><circle cx="9.5" cy="10.5" r="1.5"/><circle cx="9.5" cy="16.5" r="1.5"/></svg>'},ah=new WeakMap;function lh(e){const{view:t,element:i,text:s,isDirectHost:n=!0,keepOnFocus:o=!1}=e,r=t.document;ah.has(r)||(ah.set(r,new Map),r.registerPostFixer((e=>hh(r,e)))),ah.get(r).set(i,{text:s,isDirectHost:n,keepOnFocus:o,hostElement:n?i:null}),t.change((e=>hh(r,e)))}function ch(e,t){return!!t.hasClass("ck-placeholder")&&(e.removeClass("ck-placeholder",t),!0)}function hh(e,t){const i=ah.get(e),s=[];let n=!1;for(const[o,r]of i)r.isDirectHost&&(s.push(o),dh(t,o,r)&&(n=!0));for(const[o,r]of i){if(r.isDirectHost)continue;const e=uh(o);e&&(s.includes(e)||(r.hostElement=e,dh(t,o,r)&&(n=!0)))}return n}function dh(e,t,i){const{text:s,isDirectHost:n,hostElement:o}=i;let r=!1;return o.getAttribute("data-placeholder")!==s&&(e.setAttribute("data-placeholder",s,o),r=!0),(n||1==t.childCount)&&function(e,t){if(!e.isAttached())return!1;if(Array.from(e.getChildren()).some((e=>!e.is("uiElement"))))return!1;if(t)return!0;const i=e.document;if(!i.isFocused)return!0;const s=i.selection.anchor;return s&&s.parent!==e}(o,i.keepOnFocus)?function(e,t){return!t.hasClass("ck-placeholder")&&(e.addClass("ck-placeholder",t),!0)}(e,o)&&(r=!0):ch(e,o)&&(r=!0),r}function uh(e){if(e.childCount){const t=e.getChild(0);if(t.is("element")&&!t.is("uiElement"))return t}return null}const mh=new Map;function ph(e,t,i){let s=mh.get(e);s||(s=new Map,mh.set(e,s)),s.set(t,i)}function fh(e){return[e]}function gh(e,t,i={}){const s=function(e,t){const i=mh.get(e);return i&&i.has(t)?i.get(t):fh}(e.constructor,t.constructor);try{return s(e=e.clone(),t,i)}catch(e){throw e}}function wh(e,t,i){e=e.slice(),t=t.slice();const s=new bh(i.document,i.useRelations,i.forceWeakRemove);s.setOriginalOperations(e),s.setOriginalOperations(t);const n=s.originalOperations;if(0==e.length||0==t.length)return{operationsA:e,operationsB:t,originalOperations:n};const o=new WeakMap;for(const l of e)o.set(l,0);const r={nextBaseVersionA:e[e.length-1].baseVersion+1,nextBaseVersionB:t[t.length-1].baseVersion+1,originalOperationsACount:e.length,originalOperationsBCount:t.length};let a=0;for(;a<e.length;){const i=e[a],n=o.get(i);if(n==t.length){a++;continue}const r=t[n],l=gh(i,r,s.getContext(i,r,!0)),c=gh(r,i,s.getContext(r,i,!1));s.updateRelation(i,r),s.setOriginalOperations(l,i),s.setOriginalOperations(c,r);for(const e of l)o.set(e,n+c.length);e.splice(a,1,...l),t.splice(n,1,...c)}if(i.padWithNoOps){const i=e.length-r.originalOperationsACount,s=t.length-r.originalOperationsBCount;yh(e,s-i),yh(t,i-s)}return vh(e,r.nextBaseVersionB),vh(t,r.nextBaseVersionA),{operationsA:e,operationsB:t,originalOperations:n}}class bh{constructor(e,t,i=!1){this.originalOperations=new Map,this._history=e.history,this._useRelations=t,this._forceWeakRemove=!!i,this._relations=new Map}setOriginalOperations(e,t=null){const i=t?this.originalOperations.get(t):null;for(const s of e)this.originalOperations.set(s,i||s)}updateRelation(e,t){switch(e.constructor){case nc:switch(t.constructor){case cc:e.targetPosition.isEqual(t.sourcePosition)||t.movedRange.containsPosition(e.targetPosition)?this._setRelation(e,t,"insertAtSource"):e.targetPosition.isEqual(t.deletionPosition)?this._setRelation(e,t,"insertBetween"):e.targetPosition.isAfter(t.sourcePosition)&&this._setRelation(e,t,"moveTargetAfter");break;case nc:e.targetPosition.isEqual(t.sourcePosition)||e.targetPosition.isBefore(t.sourcePosition)?this._setRelation(e,t,"insertBefore"):this._setRelation(e,t,"insertAfter")}break;case hc:switch(t.constructor){case cc:e.splitPosition.isBefore(t.sourcePosition)&&this._setRelation(e,t,"splitBefore");break;case nc:if(e.splitPosition.isEqual(t.sourcePosition)||e.splitPosition.isBefore(t.sourcePosition))this._setRelation(e,t,"splitBefore");else{const i=Ma._createFromPositionAndShift(t.sourcePosition,t.howMany);if(e.splitPosition.hasSameParentAs(t.sourcePosition)&&i.containsPosition(e.splitPosition)){const s=i.end.offset-e.splitPosition.offset,n=e.splitPosition.offset-i.start.offset;this._setRelation(e,t,{howMany:s,offset:n})}}}break;case cc:switch(t.constructor){case cc:e.targetPosition.isEqual(t.sourcePosition)||this._setRelation(e,t,"mergeTargetNotMoved"),e.sourcePosition.isEqual(t.targetPosition)&&this._setRelation(e,t,"mergeSourceNotMoved"),e.sourcePosition.isEqual(t.sourcePosition)&&this._setRelation(e,t,"mergeSameElement");break;case hc:e.sourcePosition.isEqual(t.splitPosition)&&this._setRelation(e,t,"splitAtSource")}break;case rc:{const i=e.newRange;if(!i)return;switch(t.constructor){case nc:{const s=Ma._createFromPositionAndShift(t.sourcePosition,t.howMany),n=s.containsPosition(i.start)||s.start.isEqual(i.start),o=s.containsPosition(i.end)||s.end.isEqual(i.end);!n&&!o||s.containsRange(i)||this._setRelation(e,t,{side:n?"left":"right",path:n?i.start.path.slice():i.end.path.slice()});break}case cc:{const s=i.start.isEqual(t.targetPosition),n=i.start.isEqual(t.deletionPosition),o=i.end.isEqual(t.deletionPosition),r=i.end.isEqual(t.sourcePosition);(s||n||o||r)&&this._setRelation(e,t,{wasInLeftElement:s,wasStartBeforeMergedElement:n,wasEndBeforeMergedElement:o,wasInRightElement:r});break}}break}}}getContext(e,t,i){return{aIsStrong:i,aWasUndone:this._wasUndone(e),bWasUndone:this._wasUndone(t),abRelation:this._useRelations?this._getRelation(e,t):null,baRelation:this._useRelations?this._getRelation(t,e):null,forceWeakRemove:this._forceWeakRemove}}_wasUndone(e){const t=this.originalOperations.get(e);return t.wasUndone||this._history.isUndoneOperation(t)}_getRelation(e,t){const i=this.originalOperations.get(t),s=this._history.getUndoneOperation(i);if(!s)return null;const n=this.originalOperations.get(e),o=this._relations.get(n);return o&&o.get(s)||null}_setRelation(e,t,i){const s=this.originalOperations.get(e),n=this.originalOperations.get(t);let o=this._relations.get(s);o||(o=new Map,this._relations.set(s,o)),o.set(n,i)}}function vh(e,t){for(const i of e)i.baseVersion=t++}function yh(e,t){for(let i=0;i<t;i++)e.push(new Oc(0))}function _h(e,t,i){const s=e.nodes.getNode(0).getAttribute(t);if(s==i)return null;const n=new Ma(e.position,e.position.getShiftedBy(e.howMany));return new ic(n,t,s,i,0)}function kh(e,t){return null===e.targetPosition._getTransformedByDeletion(t.sourcePosition,t.howMany)}function Ah(e,t){const i=[];for(let s=0;s<e.length;s++){const n=e[s],o=new nc(n.start,n.end.offset-n.start.offset,t,0);i.push(o);for(let t=s+1;t<e.length;t++)e[t]=e[t]._getTransformedByMove(o.sourcePosition,o.targetPosition,o.howMany)[0];t=t._getTransformedByMove(o.sourcePosition,o.targetPosition,o.howMany)}return i}ph(ic,ic,((e,t,i)=>{if(e.key===t.key&&e.range.start.hasSameParentAs(t.range.start)){const s=e.range.getDifference(t.range).map((t=>new ic(t,e.key,e.oldValue,e.newValue,0))),n=e.range.getIntersection(t.range);return n&&i.aIsStrong&&s.push(new ic(n,t.key,t.newValue,e.newValue,0)),0==s.length?[new Oc(0)]:s}return[e]})),ph(ic,oc,((e,t)=>{if(e.range.start.hasSameParentAs(t.position)&&e.range.containsPosition(t.position)){const i=e.range._getTransformedByInsertion(t.position,t.howMany,!t.shouldReceiveAttributes).map((t=>new ic(t,e.key,e.oldValue,e.newValue,e.baseVersion)));if(t.shouldReceiveAttributes){const s=_h(t,e.key,e.oldValue);s&&i.unshift(s)}return i}return e.range=e.range._getTransformedByInsertion(t.position,t.howMany,!1)[0],[e]})),ph(ic,cc,((e,t)=>{const i=[];e.range.start.hasSameParentAs(t.deletionPosition)&&(e.range.containsPosition(t.deletionPosition)||e.range.start.isEqual(t.deletionPosition))&&i.push(Ma._createFromPositionAndShift(t.graveyardPosition,1));const s=e.range._getTransformedByMergeOperation(t);return s.isCollapsed||i.push(s),i.map((t=>new ic(t,e.key,e.oldValue,e.newValue,e.baseVersion)))})),ph(ic,nc,((e,t)=>function(e,t){const i=Ma._createFromPositionAndShift(t.sourcePosition,t.howMany);let s=null,n=[];i.containsRange(e,!0)?s=e:e.start.hasSameParentAs(i.start)?(n=e.getDifference(i),s=e.getIntersection(i)):n=[e];const o=[];for(let r of n){r=r._getTransformedByDeletion(t.sourcePosition,t.howMany);const e=t.getMovedRangeStart(),i=r.start.hasSameParentAs(e);r=r._getTransformedByInsertion(e,t.howMany,i),o.push(...r)}return s&&o.push(s._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany,!1)[0]),o}(e.range,t).map((t=>new ic(t,e.key,e.oldValue,e.newValue,e.baseVersion))))),ph(ic,hc,((e,t)=>{if(e.range.end.isEqual(t.insertionPosition))return t.graveyardPosition||e.range.end.offset++,[e];if(e.range.start.hasSameParentAs(t.splitPosition)&&e.range.containsPosition(t.splitPosition)){const i=e.clone();return i.range=new Ma(t.moveTargetPosition.clone(),e.range.end._getCombined(t.splitPosition,t.moveTargetPosition)),e.range.end=t.splitPosition.clone(),e.range.end.stickiness="toPrevious",[e,i]}return e.range=e.range._getTransformedBySplitOperation(t),[e]})),ph(oc,ic,((e,t)=>{const i=[e];if(e.shouldReceiveAttributes&&e.position.hasSameParentAs(t.range.start)&&t.range.containsPosition(e.position)){const s=_h(e,t.key,t.newValue);s&&i.push(s)}return i})),ph(oc,oc,((e,t,i)=>(e.position.isEqual(t.position)&&i.aIsStrong||(e.position=e.position._getTransformedByInsertOperation(t)),[e]))),ph(oc,nc,((e,t)=>(e.position=e.position._getTransformedByMoveOperation(t),[e]))),ph(oc,hc,((e,t)=>(e.position=e.position._getTransformedBySplitOperation(t),[e]))),ph(oc,cc,((e,t)=>(e.position=e.position._getTransformedByMergeOperation(t),[e]))),ph(rc,oc,((e,t)=>(e.oldRange&&(e.oldRange=e.oldRange._getTransformedByInsertOperation(t)[0]),e.newRange&&(e.newRange=e.newRange._getTransformedByInsertOperation(t)[0]),[e]))),ph(rc,rc,((e,t,i)=>{if(e.name==t.name){if(!i.aIsStrong)return[new Oc(0)];e.oldRange=t.newRange?t.newRange.clone():null}return[e]})),ph(rc,cc,((e,t)=>(e.oldRange&&(e.oldRange=e.oldRange._getTransformedByMergeOperation(t)),e.newRange&&(e.newRange=e.newRange._getTransformedByMergeOperation(t)),[e]))),ph(rc,nc,((e,t,i)=>{if(e.oldRange&&(e.oldRange=Ma._createFromRanges(e.oldRange._getTransformedByMoveOperation(t))),e.newRange){if(i.abRelation){const s=Ma._createFromRanges(e.newRange._getTransformedByMoveOperation(t));if("left"==i.abRelation.side&&t.targetPosition.isEqual(e.newRange.start))return e.newRange.start.path=i.abRelation.path,e.newRange.end=s.end,[e];if("right"==i.abRelation.side&&t.targetPosition.isEqual(e.newRange.end))return e.newRange.start=s.start,e.newRange.end.path=i.abRelation.path,[e]}e.newRange=Ma._createFromRanges(e.newRange._getTransformedByMoveOperation(t))}return[e]})),ph(rc,hc,((e,t,i)=>{if(e.oldRange&&(e.oldRange=e.oldRange._getTransformedBySplitOperation(t)),e.newRange){if(i.abRelation){const s=e.newRange._getTransformedBySplitOperation(t);return e.newRange.start.isEqual(t.splitPosition)&&i.abRelation.wasStartBeforeMergedElement?e.newRange.start=Oa._createAt(t.insertionPosition):e.newRange.start.isEqual(t.splitPosition)&&!i.abRelation.wasInLeftElement&&(e.newRange.start=Oa._createAt(t.moveTargetPosition)),e.newRange.end.isEqual(t.splitPosition)&&i.abRelation.wasInRightElement?e.newRange.end=Oa._createAt(t.moveTargetPosition):e.newRange.end.isEqual(t.splitPosition)&&i.abRelation.wasEndBeforeMergedElement?e.newRange.end=Oa._createAt(t.insertionPosition):e.newRange.end=s.end,[e]}e.newRange=e.newRange._getTransformedBySplitOperation(t)}return[e]})),ph(cc,oc,((e,t)=>(e.sourcePosition.hasSameParentAs(t.position)&&(e.howMany+=t.howMany),e.sourcePosition=e.sourcePosition._getTransformedByInsertOperation(t),e.targetPosition=e.targetPosition._getTransformedByInsertOperation(t),[e]))),ph(cc,cc,((e,t,i)=>{if(e.sourcePosition.isEqual(t.sourcePosition)&&e.targetPosition.isEqual(t.targetPosition)){if(i.bWasUndone){const i=t.graveyardPosition.path.slice();return i.push(0),e.sourcePosition=new Oa(t.graveyardPosition.root,i),e.howMany=0,[e]}return[new Oc(0)]}if(e.sourcePosition.isEqual(t.sourcePosition)&&!e.targetPosition.isEqual(t.targetPosition)&&!i.bWasUndone&&"splitAtSource"!=i.abRelation){const s="$graveyard"==e.targetPosition.root.rootName,n="$graveyard"==t.targetPosition.root.rootName,o=s&&!n;if(n&&!s||!o&&i.aIsStrong){const i=t.targetPosition._getTransformedByMergeOperation(t),s=e.targetPosition._getTransformedByMergeOperation(t);return[new nc(i,e.howMany,s,0)]}return[new Oc(0)]}return e.sourcePosition.hasSameParentAs(t.targetPosition)&&(e.howMany+=t.howMany),e.sourcePosition=e.sourcePosition._getTransformedByMergeOperation(t),e.targetPosition=e.targetPosition._getTransformedByMergeOperation(t),e.graveyardPosition.isEqual(t.graveyardPosition)&&i.aIsStrong||(e.graveyardPosition=e.graveyardPosition._getTransformedByMergeOperation(t)),[e]})),ph(cc,nc,((e,t,i)=>{const s=Ma._createFromPositionAndShift(t.sourcePosition,t.howMany);return"remove"==t.type&&!i.bWasUndone&&!i.forceWeakRemove&&e.deletionPosition.hasSameParentAs(t.sourcePosition)&&s.containsPosition(e.sourcePosition)?[new Oc(0)]:(e.sourcePosition.hasSameParentAs(t.targetPosition)&&(e.howMany+=t.howMany),e.sourcePosition.hasSameParentAs(t.sourcePosition)&&(e.howMany-=t.howMany),e.sourcePosition=e.sourcePosition._getTransformedByMoveOperation(t),e.targetPosition=e.targetPosition._getTransformedByMoveOperation(t),e.graveyardPosition.isEqual(t.targetPosition)||(e.graveyardPosition=e.graveyardPosition._getTransformedByMoveOperation(t)),[e])})),ph(cc,hc,((e,t,i)=>{if(t.graveyardPosition&&(e.graveyardPosition=e.graveyardPosition._getTransformedByDeletion(t.graveyardPosition,1),e.deletionPosition.isEqual(t.graveyardPosition)&&(e.howMany=t.howMany)),e.targetPosition.isEqual(t.splitPosition)){const s=0!=t.howMany,n=t.graveyardPosition&&e.deletionPosition.isEqual(t.graveyardPosition);if(s||n||"mergeTargetNotMoved"==i.abRelation)return e.sourcePosition=e.sourcePosition._getTransformedBySplitOperation(t),[e]}if(e.sourcePosition.isEqual(t.splitPosition)){if("mergeSourceNotMoved"==i.abRelation)return e.howMany=0,e.targetPosition=e.targetPosition._getTransformedBySplitOperation(t),[e];if("mergeSameElement"==i.abRelation||e.sourcePosition.offset>0)return e.sourcePosition=t.moveTargetPosition.clone(),e.targetPosition=e.targetPosition._getTransformedBySplitOperation(t),[e]}return e.sourcePosition.hasSameParentAs(t.splitPosition)&&(e.howMany=t.splitPosition.offset),e.sourcePosition=e.sourcePosition._getTransformedBySplitOperation(t),e.targetPosition=e.targetPosition._getTransformedBySplitOperation(t),[e]})),ph(nc,oc,((e,t)=>{const i=Ma._createFromPositionAndShift(e.sourcePosition,e.howMany)._getTransformedByInsertOperation(t,!1)[0];return e.sourcePosition=i.start,e.howMany=i.end.offset-i.start.offset,e.targetPosition.isEqual(t.position)||(e.targetPosition=e.targetPosition._getTransformedByInsertOperation(t)),[e]})),ph(nc,nc,((e,t,i)=>{const s=Ma._createFromPositionAndShift(e.sourcePosition,e.howMany),n=Ma._createFromPositionAndShift(t.sourcePosition,t.howMany);let o,r=i.aIsStrong,a=!i.aIsStrong;if("insertBefore"==i.abRelation||"insertAfter"==i.baRelation?a=!0:"insertAfter"!=i.abRelation&&"insertBefore"!=i.baRelation||(a=!1),o=e.targetPosition.isEqual(t.targetPosition)&&a?e.targetPosition._getTransformedByDeletion(t.sourcePosition,t.howMany):e.targetPosition._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany),kh(e,t)&&kh(t,e))return[t.getReversed()];if(s.containsPosition(t.targetPosition)&&s.containsRange(n,!0))return s.start=s.start._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany),s.end=s.end._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany),Ah([s],o);if(n.containsPosition(e.targetPosition)&&n.containsRange(s,!0))return s.start=s.start._getCombined(t.sourcePosition,t.getMovedRangeStart()),s.end=s.end._getCombined(t.sourcePosition,t.getMovedRangeStart()),Ah([s],o);const l=Ns(e.sourcePosition.getParentPath(),t.sourcePosition.getParentPath());if("prefix"==l||"extension"==l)return s.start=s.start._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany),s.end=s.end._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany),Ah([s],o);"remove"!=e.type||"remove"==t.type||i.aWasUndone||i.forceWeakRemove?"remove"==e.type||"remove"!=t.type||i.bWasUndone||i.forceWeakRemove||(r=!1):r=!0;const c=[],h=s.getDifference(n);for(const u of h){u.start=u.start._getTransformedByDeletion(t.sourcePosition,t.howMany),u.end=u.end._getTransformedByDeletion(t.sourcePosition,t.howMany);const e="same"==Ns(u.start.getParentPath(),t.getMovedRangeStart().getParentPath()),i=u._getTransformedByInsertion(t.getMovedRangeStart(),t.howMany,e);c.push(...i)}const d=s.getIntersection(n);return null!==d&&r&&(d.start=d.start._getCombined(t.sourcePosition,t.getMovedRangeStart()),d.end=d.end._getCombined(t.sourcePosition,t.getMovedRangeStart()),0===c.length?c.push(d):1==c.length?n.start.isBefore(s.start)||n.start.isEqual(s.start)?c.unshift(d):c.push(d):c.splice(1,0,d)),0===c.length?[new Oc(e.baseVersion)]:Ah(c,o)})),ph(nc,hc,((e,t,i)=>{let s=e.targetPosition.clone();e.targetPosition.isEqual(t.insertionPosition)&&t.graveyardPosition&&"moveTargetAfter"!=i.abRelation||(s=e.targetPosition._getTransformedBySplitOperation(t));const n=Ma._createFromPositionAndShift(e.sourcePosition,e.howMany);if(n.end.isEqual(t.insertionPosition))return t.graveyardPosition||e.howMany++,e.targetPosition=s,[e];if(n.start.hasSameParentAs(t.splitPosition)&&n.containsPosition(t.splitPosition)){let e=new Ma(t.splitPosition,n.end);return e=e._getTransformedBySplitOperation(t),Ah([new Ma(n.start,t.splitPosition),e],s)}e.targetPosition.isEqual(t.splitPosition)&&"insertAtSource"==i.abRelation&&(s=t.moveTargetPosition),e.targetPosition.isEqual(t.insertionPosition)&&"insertBetween"==i.abRelation&&(s=e.targetPosition);const o=[n._getTransformedBySplitOperation(t)];if(t.graveyardPosition){const s=n.start.isEqual(t.graveyardPosition)||n.containsPosition(t.graveyardPosition);e.howMany>1&&s&&!i.aWasUndone&&o.push(Ma._createFromPositionAndShift(t.insertionPosition,1))}return Ah(o,s)})),ph(nc,cc,((e,t,i)=>{const s=Ma._createFromPositionAndShift(e.sourcePosition,e.howMany);if(t.deletionPosition.hasSameParentAs(e.sourcePosition)&&s.containsPosition(t.sourcePosition))if("remove"!=e.type||i.forceWeakRemove){if(1==e.howMany)return i.bWasUndone?(e.sourcePosition=t.graveyardPosition.clone(),e.targetPosition=e.targetPosition._getTransformedByMergeOperation(t),[e]):[new Oc(0)]}else if(!i.aWasUndone){const i=[];let s=t.graveyardPosition.clone(),n=t.targetPosition._getTransformedByMergeOperation(t);e.howMany>1&&(i.push(new nc(e.sourcePosition,e.howMany-1,e.targetPosition,0)),s=s._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany-1),n=n._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany-1));const o=t.deletionPosition._getCombined(e.sourcePosition,e.targetPosition),r=new nc(s,1,o,0),a=r.getMovedRangeStart().path.slice();a.push(0);const l=new Oa(r.targetPosition.root,a);n=n._getTransformedByMove(s,o,1);const c=new nc(n,t.howMany,l,0);return i.push(r),i.push(c),i}const n=Ma._createFromPositionAndShift(e.sourcePosition,e.howMany)._getTransformedByMergeOperation(t);return e.sourcePosition=n.start,e.howMany=n.end.offset-n.start.offset,e.targetPosition=e.targetPosition._getTransformedByMergeOperation(t),[e]})),ph(ac,oc,((e,t)=>(e.position=e.position._getTransformedByInsertOperation(t),[e]))),ph(ac,cc,((e,t)=>e.position.isEqual(t.deletionPosition)?(e.position=t.graveyardPosition.clone(),e.position.stickiness="toNext",[e]):(e.position=e.position._getTransformedByMergeOperation(t),[e]))),ph(ac,nc,((e,t)=>(e.position=e.position._getTransformedByMoveOperation(t),[e]))),ph(ac,ac,((e,t,i)=>{if(e.position.isEqual(t.position)){if(!i.aIsStrong)return[new Oc(0)];e.oldName=t.newName}return[e]})),ph(ac,hc,((e,t)=>{if("same"==Ns(e.position.path,t.splitPosition.getParentPath())&&!t.graveyardPosition){const t=new ac(e.position.getShiftedBy(1),e.oldName,e.newName,0);return[e,t]}return e.position=e.position._getTransformedBySplitOperation(t),[e]})),ph(lc,lc,((e,t,i)=>{if(e.root===t.root&&e.key===t.key){if(!i.aIsStrong||e.newValue===t.newValue)return[new Oc(0)];e.oldValue=t.newValue}return[e]})),ph(hc,oc,((e,t)=>(e.splitPosition.hasSameParentAs(t.position)&&e.splitPosition.offset<t.position.offset&&(e.howMany+=t.howMany),e.splitPosition=e.splitPosition._getTransformedByInsertOperation(t),e.insertionPosition=e.insertionPosition._getTransformedByInsertOperation(t),[e]))),ph(hc,cc,((e,t,i)=>{if(!e.graveyardPosition&&!i.bWasUndone&&e.splitPosition.hasSameParentAs(t.sourcePosition)){const i=t.graveyardPosition.path.slice();i.push(0);const s=new Oa(t.graveyardPosition.root,i),n=hc.getInsertionPosition(new Oa(t.graveyardPosition.root,i)),o=new hc(s,0,n,null,0);return e.splitPosition=e.splitPosition._getTransformedByMergeOperation(t),e.insertionPosition=hc.getInsertionPosition(e.splitPosition),e.graveyardPosition=o.insertionPosition.clone(),e.graveyardPosition.stickiness="toNext",[o,e]}return e.splitPosition.hasSameParentAs(t.deletionPosition)&&!e.splitPosition.isAfter(t.deletionPosition)&&e.howMany--,e.splitPosition.hasSameParentAs(t.targetPosition)&&(e.howMany+=t.howMany),e.splitPosition=e.splitPosition._getTransformedByMergeOperation(t),e.insertionPosition=hc.getInsertionPosition(e.splitPosition),e.graveyardPosition&&(e.graveyardPosition=e.graveyardPosition._getTransformedByMergeOperation(t)),[e]})),ph(hc,nc,((e,t,i)=>{const s=Ma._createFromPositionAndShift(t.sourcePosition,t.howMany);if(e.graveyardPosition){const n=s.start.isEqual(e.graveyardPosition)||s.containsPosition(e.graveyardPosition);if(!i.bWasUndone&&n){const i=e.splitPosition._getTransformedByMoveOperation(t),s=e.graveyardPosition._getTransformedByMoveOperation(t),n=s.path.slice();n.push(0);const o=new Oa(s.root,n);return[new nc(i,e.howMany,o,0)]}e.graveyardPosition=e.graveyardPosition._getTransformedByMoveOperation(t)}const n=e.splitPosition.isEqual(t.targetPosition);if(n&&("insertAtSource"==i.baRelation||"splitBefore"==i.abRelation))return e.howMany+=t.howMany,e.splitPosition=e.splitPosition._getTransformedByDeletion(t.sourcePosition,t.howMany),e.insertionPosition=hc.getInsertionPosition(e.splitPosition),[e];if(n&&i.abRelation&&i.abRelation.howMany){const{howMany:t,offset:s}=i.abRelation;return e.howMany+=t,e.splitPosition=e.splitPosition.getShiftedBy(s),[e]}if(e.splitPosition.hasSameParentAs(t.sourcePosition)&&s.containsPosition(e.splitPosition)){const i=t.howMany-(e.splitPosition.offset-t.sourcePosition.offset);return e.howMany-=i,e.splitPosition.hasSameParentAs(t.targetPosition)&&e.splitPosition.offset<t.targetPosition.offset&&(e.howMany+=t.howMany),e.splitPosition=t.sourcePosition.clone(),e.insertionPosition=hc.getInsertionPosition(e.splitPosition),[e]}return t.sourcePosition.isEqual(t.targetPosition)||(e.splitPosition.hasSameParentAs(t.sourcePosition)&&e.splitPosition.offset<=t.sourcePosition.offset&&(e.howMany-=t.howMany),e.splitPosition.hasSameParentAs(t.targetPosition)&&e.splitPosition.offset<t.targetPosition.offset&&(e.howMany+=t.howMany)),e.splitPosition.stickiness="toNone",e.splitPosition=e.splitPosition._getTransformedByMoveOperation(t),e.splitPosition.stickiness="toNext",e.graveyardPosition?e.insertionPosition=e.insertionPosition._getTransformedByMoveOperation(t):e.insertionPosition=hc.getInsertionPosition(e.splitPosition),[e]})),ph(hc,hc,((e,t,i)=>{if(e.splitPosition.isEqual(t.splitPosition)){if(!e.graveyardPosition&&!t.graveyardPosition)return[new Oc(0)];if(e.graveyardPosition&&t.graveyardPosition&&e.graveyardPosition.isEqual(t.graveyardPosition))return[new Oc(0)];if("splitBefore"==i.abRelation)return e.howMany=0,e.graveyardPosition=e.graveyardPosition._getTransformedBySplitOperation(t),[e]}if(e.graveyardPosition&&t.graveyardPosition&&e.graveyardPosition.isEqual(t.graveyardPosition)){const s="$graveyard"==e.splitPosition.root.rootName,n="$graveyard"==t.splitPosition.root.rootName,o=s&&!n;if(n&&!s||!o&&i.aIsStrong){const i=[];return t.howMany&&i.push(new nc(t.moveTargetPosition,t.howMany,t.splitPosition,0)),e.howMany&&i.push(new nc(e.splitPosition,e.howMany,e.moveTargetPosition,0)),i}return[new Oc(0)]}if(e.graveyardPosition&&(e.graveyardPosition=e.graveyardPosition._getTransformedBySplitOperation(t)),e.splitPosition.isEqual(t.insertionPosition)&&"splitBefore"==i.abRelation)return e.howMany++,[e];if(t.splitPosition.isEqual(e.insertionPosition)&&"splitBefore"==i.baRelation){const i=t.insertionPosition.path.slice();i.push(0);const s=new Oa(t.insertionPosition.root,i);return[e,new nc(e.insertionPosition,1,s,0)]}return e.splitPosition.hasSameParentAs(t.splitPosition)&&e.splitPosition.offset<t.splitPosition.offset&&(e.howMany-=t.howMany),e.splitPosition=e.splitPosition._getTransformedBySplitOperation(t),e.insertionPosition=hc.getInsertionPosition(e.splitPosition),[e]}));class xh extends zr{constructor(e){super(e),this.domEventType="click"}onDomEvent(e){this.fire(e.type,e)}}class Ch extends zr{constructor(e){super(e),this.domEventType=["mousedown","mouseup","mouseover","mouseout"]}onDomEvent(e){this.fire(e.type,e)}}class Eh{constructor(e){this.document=e}createDocumentFragment(e){return new bo(this.document,e)}createElement(e,t,i){return new Sn(this.document,e,t,i)}createText(e){return new Bs(this.document,e)}clone(e,t=!1){return e._clone(t)}appendChild(e,t){return t._appendChild(e)}insertChild(e,t,i){return i._insertChild(e,t)}removeChildren(e,t,i){return i._removeChildren(e,t)}remove(e){const t=e.parent;return t?this.removeChildren(t.getChildIndex(e),1,t):[]}replace(e,t){const i=e.parent;if(i){const s=i.getChildIndex(e);return this.removeChildren(s,1,i),this.insertChild(s,t,i),!0}return!1}unwrapElement(e){const t=e.parent;if(t){const i=t.getChildIndex(e);this.remove(e),this.insertChild(i,e.getChildren(),t)}}rename(e,t){const i=new Sn(this.document,e,t.getAttributes(),t.getChildren());return this.replace(t,i)?i:null}setAttribute(e,t,i){i._setAttribute(e,t)}removeAttribute(e,t){t._removeAttribute(e)}addClass(e,t){t._addClass(e)}removeClass(e,t){t._removeClass(e)}setStyle(e,t,i){xt(e)&&void 0===i&&(i=t),i._setStyle(e,t)}removeStyle(e,t){t._removeStyle(e)}setCustomProperty(e,t,i){i._setCustomProperty(e,t)}removeCustomProperty(e,t){return t._removeCustomProperty(e)}createPositionAt(e,t){return Dn._createAt(e,t)}createPositionAfter(e){return Dn._createAfter(e)}createPositionBefore(e){return Dn._createBefore(e)}createRange(e,t){return new Vn(e,t)}createRangeOn(e){return Vn._createOn(e)}createRangeIn(e){return Vn._createIn(e)}createSelection(e,t,i){return new Fn(e,t,i)}}const Th=/^#([0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/i,Sh=/^rgb\([ ]?([0-9]{1,3}[ %]?,[ ]?){2,3}[0-9]{1,3}[ %]?\)$/i,Ph=/^rgba\([ ]?([0-9]{1,3}[ %]?,[ ]?){3}(1|[0-9]+%|[0]?\.?[0-9]+)\)$/i,Oh=/^hsl\([ ]?([0-9]{1,3}[ %]?[,]?[ ]*){3}(1|[0-9]+%|[0]?\.?[0-9]+)?\)$/i,Ih=/^hsla\([ ]?([0-9]{1,3}[ %]?,[ ]?){2,3}(1|[0-9]+%|[0]?\.?[0-9]+)\)$/i,Rh=new Set(["black","silver","gray","white","maroon","red","purple","fuchsia","green","lime","olive","yellow","navy","blue","teal","aqua","orange","aliceblue","antiquewhite","aquamarine","azure","beige","bisque","blanchedalmond","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","gainsboro","ghostwhite","gold","goldenrod","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","limegreen","linen","magenta","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","oldlace","olivedrab","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","thistle","tomato","turquoise","violet","wheat","whitesmoke","yellowgreen","rebeccapurple","currentcolor","transparent"]);function zh(e){return e.startsWith("#")?Th.test(e):e.startsWith("rgb")?Sh.test(e)||Ph.test(e):e.startsWith("hsl")?Oh.test(e)||Ih.test(e):Rh.has(e.toLowerCase())}const Mh=/^([+-]?[0-9]*([.][0-9]+)?(px|cm|mm|in|pc|pt|ch|em|ex|rem|vh|vw|vmin|vmax)|0)$/,Nh=/^[+-]?[0-9]*([.][0-9]+)?%$/,Dh=["repeat-x","repeat-y","repeat","space","round","no-repeat"],Vh=["center","top","bottom","left","right"];function Bh(e){return Vh.includes(e)}const Lh=["fixed","scroll","local"];function Fh(e){return Lh.includes(e)}const jh=/^url\(/;function qh(e){return jh.test(e)}function Hh(e){return e.replace(/, /g,",").split(" ").map((e=>e.replace(/,/g,", ")))}function $h(e){e.setNormalizer("background",Uh),e.setNormalizer("background-color",(e=>({path:"background.color",value:e}))),e.setReducer("background",(e=>{const t=[];return t.push(["background-color",e.color]),t})),e.setStyleRelation("background",["background-color"])}function Uh(e){const t={},i=Hh(e);for(const n of i)s=n,Dh.includes(s)?(t.repeat=t.repeat||[],t.repeat.push(n)):Bh(n)?(t.position=t.position||[],t.position.push(n)):Fh(n)?t.attachment=n:zh(n)?t.color=n:qh(n)&&(t.image=n);var s;return{path:"background",value:t}}function Wh(e,t,i,s){let n,o=null;"function"==typeof s?n=s:(o=e.commands.get(s),n=()=>{e.execute(s)}),e.model.document.on("change:data",((r,a)=>{if(o&&!o.isEnabled||!t.isEnabled)return;const l=la(e.model.document.selection.getRanges());if(!l.isCollapsed)return;if("transparent"==a.type)return;const c=Array.from(e.model.document.differ.getChanges()),h=c[0];if(1!=c.length||"insert"!==h.type||"$text"!=h.name||1!=h.length)return;const d=h.position.parent;if(d.is("element","codeBlock"))return;if(d.is("element","listItem")&&"function"!=typeof s&&!["numberedList","bulletedList","todoList"].includes(s))return;if(o&&!0===o.value)return;const u=d.getChild(0),m=e.model.createRangeOn(u);if(!m.containsRange(l)&&!l.end.isEqual(m.end))return;const p=i.exec(u.data.substr(0,l.end.offset));p&&e.model.enqueueChange((t=>{const i=t.createPositionAt(d,0),s=t.createPositionAt(d,p[0].length),o=new Za(i,s);if(!1!==n({match:p})){t.remove(o);const i=e.model.document.selection.getFirstRange(),s=t.createRangeIn(d);!d.isEmpty||s.isEqual(i)||s.containsRange(i,!0)||t.remove(d)}o.detach()}))}))}function Zh(e,t,i,s){let n,o;i instanceof RegExp?n=i:o=i,o=o||(e=>{let t;const i=[],s=[];for(;null!==(t=n.exec(e))&&!(t&&t.length<4);){let{index:e,1:n,2:o,3:r}=t;const a=n+o+r;e+=t[0].length-a.length;const l=[e,e+n.length],c=[e+n.length+o.length,e+n.length+o.length+r.length];i.push(l),i.push(c),s.push([e+n.length,e+n.length+o.length])}return{remove:i,format:s}}),e.model.document.on("change:data",((i,n)=>{if("transparent"==n.type||!t.isEnabled)return;const r=e.model,a=r.document.selection;if(!a.isCollapsed)return;const l=Array.from(r.document.differ.getChanges()),c=l[0];if(1!=l.length||"insert"!==c.type||"$text"!=c.name||1!=c.length)return;const h=a.focus,d=h.parent,{text:u,range:m}=function(e,t){let i=e.start;return{text:Array.from(e.getItems()).reduce(((e,s)=>!s.is("$text")&&!s.is("$textProxy")||s.getAttribute("code")?(i=t.createPositionAfter(s),""):e+s.data),""),range:t.createRange(i,e.end)}}(r.createRange(r.createPositionAt(d,0),h),r),p=o(u),f=Gh(m.start,p.format,r),g=Gh(m.start,p.remove,r);f.length&&g.length&&r.enqueueChange((e=>{if(!1!==s(e,f))for(const t of g.reverse())e.remove(t)}))}))}function Gh(e,t,i){return t.filter((e=>void 0!==e[0]&&void 0!==e[1])).map((t=>i.createRange(e.getShiftedBy(t[0]),e.getShiftedBy(t[1]))))}function Kh(e,t){return(i,s)=>{if(!e.commands.get(t).isEnabled)return!1;const n=e.model.schema.getValidRanges(s,t);for(const e of n)i.setAttribute(t,!0,e);i.removeSelectionAttribute(t)}}const Jh=["left","right","center","justify"];function Yh(e){return Jh.includes(e)}function Qh(e,t){return"rtl"==t.contentLanguageDirection?"right"===e:"left"===e}function Xh(e){const t=e.map((e=>{let t;return t="string"==typeof e?{name:e}:e,t})).filter((e=>{const t=!!Jh.includes(e.name);return t||d("alignment-config-name-not-recognized",{option:e}),t})),i=t.filter((e=>!!e.className)).length;if(i&&i<t.length)throw new h("alignment-config-classnames-are-missing",{configuredOptions:e});return t.forEach(((t,i,s)=>{const n=s.slice(i+1);if(n.some((e=>e.name==t.name)))throw new h("alignment-config-name-already-defined",{option:t,configuredOptions:e});if(t.className&&n.some((e=>e.className==t.className)))throw new h("alignment-config-classname-already-defined",{option:t,configuredOptions:e})})),t}const ed="alignment";class td extends pt{refresh(){const e=this.editor.locale,t=la(this.editor.model.document.selection.getSelectedBlocks());this.isEnabled=!!t&&this._canBeAligned(t),this.isEnabled&&t.hasAttribute("alignment")?this.value=t.getAttribute("alignment"):this.value="rtl"===e.contentLanguageDirection?"right":"left"}execute(e={}){const t=this.editor,i=t.locale,s=t.model,n=s.document,o=e.value;s.change((e=>{const t=Array.from(n.selection.getSelectedBlocks()).filter((e=>this._canBeAligned(e))),s=t[0].getAttribute("alignment");Qh(o,i)||s===o||!o?function(e,t){for(const i of e)t.removeAttribute(ed,i)}(t,e):function(e,t,i){for(const s of e)t.setAttribute(ed,i,s)}(t,e,o)}))}_canBeAligned(e){return this.editor.model.schema.checkAttribute(e,ed)}}class id extends ut{static get pluginName(){return"AlignmentEditing"}constructor(e){super(e),e.config.define("alignment",{options:[...Jh.map((e=>({name:e})))]})}init(){const e=this.editor,t=e.locale,i=e.model.schema,s=Xh(e.config.get("alignment.options")).filter((e=>Yh(e.name)&&!Qh(e.name,t))),n=s.some((e=>!!e.className));i.extend("$block",{allowAttributes:"alignment"}),e.model.schema.setAttributeProperties("alignment",{isFormatting:!0}),n?e.conversion.attributeToAttribute(function(e){const t={model:{key:"alignment",values:e.map((e=>e.name))},view:{}};for(const i of e)t.view[i.name]={key:"class",value:i.className};return t}(s)):e.conversion.for("downcast").attributeToAttribute(function(e){const t={model:{key:"alignment",values:e.map((e=>e.name))},view:{}};for(const{name:i}of e)t.view[i]={key:"style",value:{"text-align":i}};return t}(s));const o=function(e){const t=[];for(const{name:i}of e)t.push({view:{key:"style",value:{"text-align":i}},model:{key:"alignment",value:i}});return t}(s);for(const a of o)e.conversion.for("upcast").attributeToAttribute(a);const r=function(e){const t=[];for(const{name:i}of e)t.push({view:{key:"align",value:i},model:{key:"alignment",value:i}});return t}(s);for(const a of r)e.conversion.for("upcast").attributeToAttribute(a);e.commands.add("alignment",new td(e))}}function sd({emitter:e,activator:t,callback:i,contextElements:s}){e.listenTo(document,"mousedown",((e,n)=>{if(!t())return;const o="function"==typeof n.composedPath?n.composedPath():[];for(const t of s)if(t.contains(n.target)||o.includes(t))return;i()}))}function nd(e){e.set("_isCssTransitionsDisabled",!1),e.disableCssTransitions=()=>{e._isCssTransitionsDisabled=!0},e.enableCssTransitions=()=>{e._isCssTransitionsDisabled=!1},e.extendTemplate({attributes:{class:[e.bindTemplate.if("_isCssTransitionsDisabled","ck-transitions-disabled")]}})}function od({view:e}){e.listenTo(e.element,"submit",((t,i)=>{i.preventDefault(),e.fire("submit")}),{useCapture:!0})}class rd extends Es{constructor(e=[]){super(e,{idProperty:"viewUid"}),this.on("add",((e,t,i)=>{this._renderViewIntoCollectionParent(t,i)})),this.on("remove",((e,t)=>{t.element&&this._parentElement&&t.element.remove()})),this._parentElement=null}destroy(){this.map((e=>e.destroy()))}setParent(e){this._parentElement=e;for(const t of this)this._renderViewIntoCollectionParent(t)}delegate(...e){if(!e.length||!e.every((e=>"string"==typeof e)))throw new h("ui-viewcollection-delegate-wrong-events",this);return{to:t=>{for(const i of this)for(const s of e)i.delegate(s).to(t);this.on("add",((i,s)=>{for(const n of e)s.delegate(n).to(t)})),this.on("remove",((i,s)=>{for(const n of e)s.stopDelegating(n,t)}))}}}_renderViewIntoCollectionParent(e,t){e.isRendered||e.render(),e.element&&this._parentElement&&this._parentElement.insertBefore(e.element,this._parentElement.children[t])}}class ad{constructor(e){this.element=null,this.isRendered=!1,this.locale=e,this.t=e&&e.t,this._viewCollections=new Es,this._unboundChildren=this.createCollection(),this._viewCollections.on("add",((t,i)=>{i.locale=e})),this.decorate("render")}get bindTemplate(){return this._bindTemplate?this._bindTemplate:this._bindTemplate=ld.bind(this,this)}createCollection(e){const t=new rd(e);return this._viewCollections.add(t),t}registerChild(e){Cs(e)||(e=[e]);for(const t of e)this._unboundChildren.add(t)}deregisterChild(e){Cs(e)||(e=[e]);for(const t of e)this._unboundChildren.remove(t)}setTemplate(e){this.template=new ld(e)}extendTemplate(e){ld.extend(this.template,e)}render(){if(this.isRendered)throw new h("ui-view-render-already-rendered",this);this.template&&(this.element=this.template.render(),this.registerChild(this.template.getViews())),this.isRendered=!0}destroy(){this.stopListening(),this._viewCollections.map((e=>e.destroy())),this.template&&this.template._revertData&&this.template.revert(this.element)}}dt(ad,rr),dt(ad,ot);class ld{constructor(e){Object.assign(this,bd(wd(e))),this._isRendered=!1,this._revertData=null}render(){const e=this._renderNode({intoFragment:!0});return this._isRendered=!0,e}apply(e){return this._revertData={children:[],bindings:[],attributes:{}},this._renderNode({node:e,isApplying:!0,revertData:this._revertData}),e}revert(e){if(!this._revertData)throw new h("ui-template-revert-not-applied",[this,e]);this._revertTemplateFromNode(e,this._revertData)}*getViews(){yield*function*e(t){if(t.children)for(const i of t.children)xd(i)?yield i:Cd(i)&&(yield*e(i))}(this)}static bind(e,t){return{to:(i,s)=>new hd({eventNameOrFunction:i,attribute:i,observable:e,emitter:t,callback:s}),if:(i,s,n)=>new dd({observable:e,emitter:t,attribute:i,valueIfTrue:s,callback:n})}}static extend(e,t){if(e._isRendered)throw new h("template-extend-render",[this,e]);kd(e,bd(wd(t)))}_renderNode(e){let t;if(t=e.node?this.tag&&this.text:this.tag?this.text:!this.text,t)throw new h("ui-template-wrong-syntax",this);return this.text?this._renderText(e):this._renderElement(e)}_renderElement(e){let t=e.node;return t||(t=e.node=document.createElementNS(this.ns||"http://www.w3.org/1999/xhtml",this.tag)),this._renderAttributes(e),this._renderElementChildren(e),this._setUpListeners(e),t}_renderText(e){let t=e.node;return t?e.revertData.text=t.textContent:t=e.node=document.createTextNode(""),ud(this.text)?this._bindToObservable({schema:this.text,updater:pd(t),data:e}):t.textContent=this.text.join(""),t}_renderAttributes(e){let t,i,s,n;if(!this.attributes)return;const o=e.node,r=e.revertData;for(t in this.attributes)if(s=o.getAttribute(t),i=this.attributes[t],r&&(r.attributes[t]=s),n=E(i[0])&&i[0].ns?i[0].ns:null,ud(i)){const a=n?i[0].value:i;r&&Td(t)&&a.unshift(s),this._bindToObservable({schema:a,updater:fd(o,t,n),data:e})}else"style"==t&&"string"!=typeof i[0]?this._renderStyleAttribute(i[0],e):(r&&s&&Td(t)&&i.unshift(s),i=i.map((e=>e&&e.value||e)).reduce(((e,t)=>e.concat(t)),[]).reduce(yd,""),Ad(i)||o.setAttributeNS(n,t,i))}_renderStyleAttribute(e,t){const i=t.node;for(const s in e){const n=e[s];ud(n)?this._bindToObservable({schema:[n],updater:gd(i,s),data:t}):i.style[s]=n}}_renderElementChildren(e){const t=e.node,i=e.intoFragment?document.createDocumentFragment():t,s=e.isApplying;let n=0;for(const o of this.children)if(Ed(o)){if(!s){o.setParent(t);for(const e of o)i.appendChild(e.element)}}else if(xd(o))s||(o.isRendered||o.render(),i.appendChild(o.element));else if(Uo(o))i.appendChild(o);else if(s){const t={children:[],bindings:[],attributes:{}};e.revertData.children.push(t),o._renderNode({node:i.childNodes[n++],isApplying:!0,revertData:t})}else i.appendChild(o.render());e.intoFragment&&t.appendChild(i)}_setUpListeners(e){if(this.eventListeners)for(const t in this.eventListeners){const i=this.eventListeners[t].map((i=>{const[s,n]=t.split("@");return i.activateDomEventListener(s,n,e)}));e.revertData&&e.revertData.bindings.push(i)}}_bindToObservable({schema:e,updater:t,data:i}){const s=i.revertData;md(e,t,i);const n=e.filter((e=>!Ad(e))).filter((e=>e.observable)).map((s=>s.activateAttributeListener(e,t,i)));s&&s.bindings.push(n)}_revertTemplateFromNode(e,t){for(const i of t.bindings)for(const e of i)e();if(t.text)e.textContent=t.text;else{for(const i in t.attributes){const s=t.attributes[i];null===s?e.removeAttribute(i):e.setAttribute(i,s)}for(let i=0;i<t.children.length;++i)this._revertTemplateFromNode(e.childNodes[i],t.children[i])}}}dt(ld,b);class cd{constructor(e){Object.assign(this,e)}getValue(e){const t=this.observable[this.attribute];return this.callback?this.callback(t,e):t}activateAttributeListener(e,t,i){const s=()=>md(e,t,i);return this.emitter.listenTo(this.observable,"change:"+this.attribute,s),()=>{this.emitter.stopListening(this.observable,"change:"+this.attribute,s)}}}class hd extends cd{activateDomEventListener(e,t,i){const s=(e,i)=>{t&&!i.target.matches(t)||("function"==typeof this.eventNameOrFunction?this.eventNameOrFunction(i):this.observable.fire(this.eventNameOrFunction,i))};return this.emitter.listenTo(i.node,e,s),()=>{this.emitter.stopListening(i.node,e,s)}}}class dd extends cd{getValue(e){return!Ad(super.getValue(e))&&(this.valueIfTrue||!0)}}function ud(e){return!!e&&(e.value&&(e=e.value),Array.isArray(e)?e.some(ud):e instanceof cd)}function md(e,t,{node:i}){let s=function(e,t){return e.map((e=>e instanceof cd?e.getValue(t):e))}(e,i);s=1==e.length&&e[0]instanceof dd?s[0]:s.reduce(yd,""),Ad(s)?t.remove():t.set(s)}function pd(e){return{set(t){e.textContent=t},remove(){e.textContent=""}}}function fd(e,t,i){return{set(s){e.setAttributeNS(i,t,s)},remove(){e.removeAttributeNS(i,t)}}}function gd(e,t){return{set(i){e.style[t]=i},remove(){e.style[t]=null}}}function wd(e){return ys(e,(e=>{if(e&&(e instanceof cd||Cd(e)||xd(e)||Ed(e)))return e}))}function bd(e){if("string"==typeof e?e=function(e){return{text:[e]}}(e):e.text&&function(e){e.text=Ss(e.text)}(e),e.on&&(e.eventListeners=function(e){for(const t in e)vd(e,t);return e}(e.on),delete e.on),!e.text){e.attributes&&function(e){for(const t in e)e[t].value&&(e[t].value=Ss(e[t].value)),vd(e,t)}(e.attributes);const t=[];if(e.children)if(Ed(e.children))t.push(e.children);else for(const i of e.children)Cd(i)||xd(i)||Uo(i)?t.push(i):t.push(new ld(i));e.children=t}return e}function vd(e,t){e[t]=Ss(e[t])}function yd(e,t){return Ad(t)?e:Ad(e)?t:`${e} ${t}`}function _d(e,t){for(const i in t)e[i]?e[i].push(...t[i]):e[i]=t[i]}function kd(e,t){if(t.attributes&&(e.attributes||(e.attributes={}),_d(e.attributes,t.attributes)),t.eventListeners&&(e.eventListeners||(e.eventListeners={}),_d(e.eventListeners,t.eventListeners)),t.text&&e.text.push(...t.text),t.children&&t.children.length){if(e.children.length!=t.children.length)throw new h("ui-template-extend-children-mismatch",e);let i=0;for(const s of t.children)kd(e.children[i++],s)}}function Ad(e){return!e&&0!==e}function xd(e){return e instanceof ad}function Cd(e){return e instanceof ld}function Ed(e){return e instanceof rd}function Td(e){return"class"==e||"style"==e}const Sd=function(e){return"string"==typeof e||!Pe(e)&&Ae(e)&&"[object String]"==L(e)};class Pd extends rd{constructor(e,t=[]){super(t),this.locale=e}attachToDom(){this._bodyCollectionContainer=new ld({tag:"div",attributes:{class:["ck","ck-reset_all","ck-body","ck-rounded-corners"],dir:this.locale.uiLanguageDirection},children:this}).render();let e=document.querySelector(".ck-body-wrapper");e||(e=function(e,t,i={},s=[]){const n=i&&i.xmlns,o=n?e.createElementNS(n,t):e.createElement(t);for(const r in i)o.setAttribute(r,i[r]);!Sd(s)&&Cs(s)||(s=[s]);for(let r of s)Sd(r)&&(r=e.createTextNode(r)),o.appendChild(r);return o}(document,"div",{class:"ck-body-wrapper"}),document.body.appendChild(e)),e.appendChild(this._bodyCollectionContainer)}detachFromDom(){super.destroy(),this._bodyCollectionContainer&&this._bodyCollectionContainer.remove();const e=document.querySelector(".ck-body-wrapper");e&&0==e.childElementCount&&e.remove()}}class Od extends ad{constructor(){super();const e=this.bindTemplate;this.set("content",""),this.set("viewBox","0 0 20 20"),this.set("fillColor",""),this.setTemplate({tag:"svg",ns:"http://www.w3.org/2000/svg",attributes:{class:["ck","ck-icon"],viewBox:e.to("viewBox")}})}render(){super.render(),this._updateXMLContent(),this._colorFillPaths(),this.on("change:content",(()=>{this._updateXMLContent(),this._colorFillPaths()})),this.on("change:fillColor",(()=>{this._colorFillPaths()}))}_updateXMLContent(){if(this.content){const e=(new DOMParser).parseFromString(this.content.trim(),"image/svg+xml").querySelector("svg"),t=e.getAttribute("viewBox");for(t&&(this.viewBox=t),this.element.innerHTML="";e.childNodes.length>0;)this.element.appendChild(e.childNodes[0])}}_colorFillPaths(){this.fillColor&&this.element.querySelectorAll(".ck-icon__fill").forEach((e=>{e.style.fill=this.fillColor}))}}class Id extends ad{constructor(e){super(e),this.set("text",""),this.set("position","s");const t=this.bindTemplate;this.setTemplate({tag:"span",attributes:{class:["ck","ck-tooltip",t.to("position",(e=>"ck-tooltip_"+e)),t.if("text","ck-hidden",(e=>!e.trim()))]},children:[{tag:"span",attributes:{class:["ck","ck-tooltip__text"]},children:[{text:t.to("text")}]}]})}}class Rd extends ad{constructor(e){super(e);const t=this.bindTemplate,i=r();this.set("class"),this.set("labelStyle"),this.set("icon"),this.set("isEnabled",!0),this.set("isOn",!1),this.set("isVisible",!0),this.set("isToggleable",!1),this.set("keystroke"),this.set("label"),this.set("tabindex",-1),this.set("tooltip"),this.set("tooltipPosition","s"),this.set("type","button"),this.set("withText",!1),this.set("withKeystroke",!1),this.children=this.createCollection(),this.tooltipView=this._createTooltipView(),this.labelView=this._createLabelView(i),this.iconView=new Od,this.iconView.extendTemplate({attributes:{class:"ck-button__icon"}}),this.keystrokeView=this._createKeystrokeView(),this.bind("_tooltipString").to(this,"tooltip",this,"label",this,"keystroke",this._getTooltipString.bind(this)),this.setTemplate({tag:"button",attributes:{class:["ck","ck-button",t.to("class"),t.if("isEnabled","ck-disabled",(e=>!e)),t.if("isVisible","ck-hidden",(e=>!e)),t.to("isOn",(e=>e?"ck-on":"ck-off")),t.if("withText","ck-button_with-text"),t.if("withKeystroke","ck-button_with-keystroke")],type:t.to("type",(e=>e||"button")),tabindex:t.to("tabindex"),"aria-labelledby":`ck-editor__aria-label_${i}`,"aria-disabled":t.if("isEnabled",!0,(e=>!e)),"aria-pressed":t.to("isOn",(e=>!!this.isToggleable&&String(e)))},children:this.children,on:{mousedown:t.to((e=>{e.preventDefault()})),click:t.to((e=>{this.isEnabled?this.fire("execute"):e.preventDefault()}))}})}render(){super.render(),this.icon&&(this.iconView.bind("content").to(this,"icon"),this.children.add(this.iconView)),this.children.add(this.tooltipView),this.children.add(this.labelView),this.withKeystroke&&this.children.add(this.keystrokeView)}focus(){this.element.focus()}_createTooltipView(){const e=new Id;return e.bind("text").to(this,"_tooltipString"),e.bind("position").to(this,"tooltipPosition"),e}_createLabelView(e){const t=new ad,i=this.bindTemplate;return t.setTemplate({tag:"span",attributes:{class:["ck","ck-button__label"],style:i.to("labelStyle"),id:`ck-editor__aria-label_${e}`},children:[{text:this.bindTemplate.to("label")}]}),t}_createKeystrokeView(){const e=new ad;return e.setTemplate({tag:"span",attributes:{class:["ck","ck-button__keystroke"]},children:[{text:this.bindTemplate.to("keystroke",(e=>co(e)))}]}),e}_getTooltipString(e,t,i){return e?"string"==typeof e?e:(i&&(i=co(i)),e instanceof Function?e(t,i):`${t}${i?` (${i})`:""}`):""}}class zd extends Rd{constructor(e){super(e),this.isToggleable=!0,this.toggleSwitchView=this._createToggleView(),this.extendTemplate({attributes:{class:"ck-switchbutton"}})}render(){super.render(),this.children.add(this.toggleSwitchView)}_createToggleView(){const e=new ad;return e.setTemplate({tag:"span",attributes:{class:["ck","ck-button__toggle"]},children:[{tag:"span",attributes:{class:["ck","ck-button__toggle__inner"]}}]}),e}}function Md(e){return"string"==typeof e?{model:e,label:e,hasBorder:!1,view:{name:"span",styles:{color:e}}}:{model:e.color,label:e.label||e.color,hasBorder:void 0!==e.hasBorder&&e.hasBorder,view:{name:"span",styles:{color:`${e.color}`}}}}class Nd extends Rd{constructor(e){super(e);const t=this.bindTemplate;this.set("color"),this.set("hasBorder"),this.icon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path class="ck-icon__fill" d="M16.935 5.328a2 2 0 0 1 0 2.829l-7.778 7.778a2 2 0 0 1-2.829 0L3.5 13.107a1.999 1.999 0 1 1 2.828-2.829l.707.707a1 1 0 0 0 1.414 0l5.658-5.657a2 2 0 0 1 2.828 0z"/><path d="M14.814 6.035 8.448 12.4a1 1 0 0 1-1.414 0l-1.413-1.415A1 1 0 1 0 4.207 12.4l2.829 2.829a1 1 0 0 0 1.414 0l7.778-7.778a1 1 0 1 0-1.414-1.415z"/></svg>',this.extendTemplate({attributes:{style:{backgroundColor:t.to("color")},class:["ck","ck-color-grid__tile",t.if("hasBorder","ck-color-table__color-tile_bordered")]}})}render(){super.render(),this.iconView.fillColor="hsl(0, 0%, 100%)"}}class Dd{constructor(e){if(Object.assign(this,e),e.actions&&e.keystrokeHandler)for(const t in e.actions){let i=e.actions[t];"string"==typeof i&&(i=[i]);for(const s of i)e.keystrokeHandler.set(s,((e,i)=>{this[t](),i()}))}}get first(){return this.focusables.find(Vd)||null}get last(){return this.focusables.filter(Vd).slice(-1)[0]||null}get next(){return this._getFocusableItem(1)}get previous(){return this._getFocusableItem(-1)}get current(){let e=null;return null===this.focusTracker.focusedElement?null:(this.focusables.find(((t,i)=>{const s=t.element===this.focusTracker.focusedElement;return s&&(e=i),s})),e)}focusFirst(){this._focus(this.first)}focusLast(){this._focus(this.last)}focusNext(){this._focus(this.next)}focusPrevious(){this._focus(this.previous)}_focus(e){e&&e.focus()}_getFocusableItem(e){const t=this.current,i=this.focusables.length;if(!i)return null;if(null===t)return this[1===e?"first":"last"];let s=(t+i+e)%i;do{const t=this.focusables.get(s);if(Vd(t))return t;s=(s+i+e)%i}while(s!==t);return null}}function Vd(e){return!(!e.focus||"none"==Jo.window.getComputedStyle(e.element).display)}class Bd extends ad{constructor(e,t){super(e);const i=t&&t.colorDefinitions||[],s={};t&&t.columns&&(s.gridTemplateColumns=`repeat( ${t.columns}, 1fr)`),this.set("selectedColor"),this.items=this.createCollection(),this.focusTracker=new ca,this.keystrokes=new ha,this._focusCycler=new Dd({focusables:this.items,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"arrowleft",focusNext:"arrowright"}}),this.items.on("add",((e,t)=>{t.isOn=t.color===this.selectedColor})),i.forEach((e=>{const t=new Nd;t.set({color:e.color,label:e.label,tooltip:!0,hasBorder:e.options.hasBorder}),t.on("execute",(()=>{this.fire("execute",{value:e.color,hasBorder:e.options.hasBorder,label:e.label})})),this.items.add(t)})),this.setTemplate({tag:"div",children:this.items,attributes:{class:["ck","ck-color-grid"],style:s}}),this.on("change:selectedColor",((e,t,i)=>{for(const s of this.items)s.isOn=s.color===i}))}focus(){this.items.length&&this.items.first.focus()}focusLast(){this.items.length&&this.items.last.focus()}render(){super.render();for(const e of this.items)this.focusTracker.add(e.element);this.items.on("add",((e,t)=>{this.focusTracker.add(t.element)})),this.items.on("remove",((e,t)=>{this.focusTracker.remove(t.element)})),this.keystrokes.listenTo(this.element)}}const Ld='<svg viewBox="0 0 10 10" xmlns="http://www.w3.org/2000/svg"><path d="M.941 4.523a.75.75 0 1 1 1.06-1.06l3.006 3.005 3.005-3.005a.75.75 0 1 1 1.06 1.06l-3.549 3.55a.75.75 0 0 1-1.168-.136L.941 4.523z"/></svg>';class Fd extends Rd{constructor(e){super(e),this.arrowView=this._createArrowView(),this.extendTemplate({attributes:{"aria-haspopup":!0}}),this.delegate("execute").to(this,"open")}render(){super.render(),this.children.add(this.arrowView)}_createArrowView(){const e=new Od;return e.content=Ld,e.extendTemplate({attributes:{class:"ck-dropdown__arrow"}}),e}}class jd extends ad{constructor(e){super(e);const t=this.bindTemplate;this.set("class"),this.set("icon"),this.set("isEnabled",!0),this.set("isOn",!1),this.set("isToggleable",!1),this.set("isVisible",!0),this.set("keystroke"),this.set("label"),this.set("tabindex",-1),this.set("tooltip"),this.set("tooltipPosition","s"),this.set("type","button"),this.set("withText",!1),this.children=this.createCollection(),this.actionView=this._createActionView(),this.arrowView=this._createArrowView(),this.keystrokes=new ha,this.focusTracker=new ca,this.setTemplate({tag:"div",attributes:{class:["ck","ck-splitbutton",t.to("class"),t.if("isVisible","ck-hidden",(e=>!e)),this.arrowView.bindTemplate.if("isOn","ck-splitbutton_open")]},children:this.children})}render(){super.render(),this.children.add(this.actionView),this.children.add(this.arrowView),this.focusTracker.add(this.actionView.element),this.focusTracker.add(this.arrowView.element),this.keystrokes.listenTo(this.element),this.keystrokes.set("arrowright",((e,t)=>{this.focusTracker.focusedElement===this.actionView.element&&(this.arrowView.focus(),t())})),this.keystrokes.set("arrowleft",((e,t)=>{this.focusTracker.focusedElement===this.arrowView.element&&(this.actionView.focus(),t())}))}focus(){this.actionView.focus()}_createActionView(){const e=new Rd;return e.bind("icon","isEnabled","isOn","isToggleable","keystroke","label","tabindex","tooltip","tooltipPosition","type","withText").to(this),e.extendTemplate({attributes:{class:"ck-splitbutton__action"}}),e.delegate("execute").to(this),e}_createArrowView(){const e=new Rd,t=e.bindTemplate;return e.icon=Ld,e.extendTemplate({attributes:{class:"ck-splitbutton__arrow","aria-haspopup":!0,"aria-expanded":t.to("isOn",(e=>String(e)))}}),e.bind("isEnabled").to(this),e.delegate("execute").to(this,"open"),e}}class qd extends ad{constructor(e){super(e);const t=this.bindTemplate;this.set("isVisible",!1),this.set("position","se"),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-dropdown__panel",t.to("position",(e=>`ck-dropdown__panel_${e}`)),t.if("isVisible","ck-dropdown__panel-visible")]},children:this.children,on:{selectstart:t.to((e=>e.preventDefault()))}})}focus(){this.children.length&&this.children.first.focus()}focusLast(){if(this.children.length){const e=this.children.last;"function"==typeof e.focusLast?e.focusLast():e.focus()}}}function Hd({element:e,target:t,positions:i,limiter:s,fitInViewport:n}){F(t)&&(t=t()),F(s)&&(s=s());const o=function(e){return e&&e.parentNode?e.offsetParent===Jo.document.body?null:e.offsetParent:null}(e),r=new ia(e),a=new ia(t);let l,c;if(s||n){const e=function(e,t){const{elementRect:i,viewportRect:s}=t,n=i.getArea(),o=function(e,{targetRect:t,elementRect:i,limiterRect:s,viewportRect:n}){const o=[],r=i.getArea();for(const a of e){const e=$d(a,t,i);if(!e)continue;const[l,c]=e;let h=0,d=0;if(s)if(n){const e=s.getIntersection(n);e&&(h=e.getIntersectionArea(c))}else h=s.getIntersectionArea(c);n&&(d=n.getIntersectionArea(c));const u={positionName:l,positionRect:c,limiterIntersectArea:h,viewportIntersectArea:d};if(h===r)return[u];o.push(u)}return o}(e,t);if(s){const e=Ud(o.filter((({viewportIntersectArea:e})=>e===n)),n);if(e)return e}return Ud(o,n)}(i,{targetRect:a,elementRect:r,limiterRect:s&&new ia(s).getVisible(),viewportRect:n&&new ia(Jo.window)});[c,l]=e||$d(i[0],a,r)}else[c,l]=$d(i[0],a,r);let h=Wd(l);return o&&(h=function({left:e,top:t},i){const s=Wd(new ia(i)),n=ea(i);return e-=s.left,t-=s.top,e+=i.scrollLeft,t+=i.scrollTop,{left:e-=n.left,top:t-=n.top}}(h,o)),{left:h.left,top:h.top,name:c}}function $d(e,t,i){const s=e(t,i);if(!s)return null;const{left:n,top:o,name:r}=s;return[r,i.clone().moveTo(n,o)]}function Ud(e,t){let i,s,n=0;for(const{positionName:o,positionRect:r,limiterIntersectArea:a,viewportIntersectArea:l}of e){if(a===t)return[o,r];const e=l**2+a**2;e>n&&(n=e,i=r,s=o)}return i?[s,i]:null}function Wd({left:e,top:t}){const{scrollX:i,scrollY:s}=Jo.window;return{left:e+i,top:t+s}}class Zd extends ad{constructor(e,t,i){super(e);const s=this.bindTemplate;this.buttonView=t,this.panelView=i,this.set("isOpen",!1),this.set("isEnabled",!0),this.set("class"),this.set("id"),this.set("panelPosition","auto"),this.keystrokes=new ha,this.setTemplate({tag:"div",attributes:{class:["ck","ck-dropdown",s.to("class"),s.if("isEnabled","ck-disabled",(e=>!e))],id:s.to("id"),"aria-describedby":s.to("ariaDescribedById")},children:[t,i]}),t.extendTemplate({attributes:{class:["ck-dropdown__button"]}})}render(){super.render(),this.listenTo(this.buttonView,"open",(()=>{this.isOpen=!this.isOpen})),this.panelView.bind("isVisible").to(this,"isOpen"),this.on("change:isOpen",(()=>{this.isOpen&&("auto"===this.panelPosition?this.panelView.position=Zd._getOptimalPosition({element:this.panelView.element,target:this.buttonView.element,fitInViewport:!0,positions:this._panelPositions}).name:this.panelView.position=this.panelPosition)})),this.keystrokes.listenTo(this.element);const e=(e,t)=>{this.isOpen&&(this.buttonView.focus(),this.isOpen=!1,t())};this.keystrokes.set("arrowdown",((e,t)=>{this.buttonView.isEnabled&&!this.isOpen&&(this.isOpen=!0,t())})),this.keystrokes.set("arrowright",((e,t)=>{this.isOpen&&t()})),this.keystrokes.set("arrowleft",e),this.keystrokes.set("esc",e)}focus(){this.buttonView.focus()}get _panelPositions(){const{south:e,north:t,southEast:i,southWest:s,northEast:n,northWest:o,southMiddleEast:r,southMiddleWest:a,northMiddleEast:l,northMiddleWest:c}=Zd.defaultPanelPositions;return"rtl"!==this.locale.uiLanguageDirection?[i,s,r,a,e,n,o,l,c,t]:[s,i,a,r,e,o,n,c,l,t]}}Zd.defaultPanelPositions={south:(e,t)=>({top:e.bottom,left:e.left-(t.width-e.width)/2,name:"s"}),southEast:e=>({top:e.bottom,left:e.left,name:"se"}),southWest:(e,t)=>({top:e.bottom,left:e.left-t.width+e.width,name:"sw"}),southMiddleEast:(e,t)=>({top:e.bottom,left:e.left-(t.width-e.width)/4,name:"sme"}),southMiddleWest:(e,t)=>({top:e.bottom,left:e.left-3*(t.width-e.width)/4,name:"smw"}),north:(e,t)=>({top:e.top-t.height,left:e.left-(t.width-e.width)/2,name:"n"}),northEast:(e,t)=>({top:e.top-t.height,left:e.left,name:"ne"}),northWest:(e,t)=>({top:e.top-t.height,left:e.left-t.width+e.width,name:"nw"}),northMiddleEast:(e,t)=>({top:e.top-t.height,left:e.left-(t.width-e.width)/4,name:"nme"}),northMiddleWest:(e,t)=>({top:e.top-t.height,left:e.left-3*(t.width-e.width)/4,name:"nmw"})},Zd._getOptimalPosition=Hd;class Gd extends ad{constructor(e){super(e),this.setTemplate({tag:"span",attributes:{class:["ck","ck-toolbar__separator"]}})}}class Kd extends ad{constructor(e){super(e),this.setTemplate({tag:"span",attributes:{class:["ck","ck-toolbar__line-break"]}})}}class Jd extends ad{constructor(e,t){super(e);const i=this.bindTemplate,s=this.t;this.options=t||{},this.set("ariaLabel",s("Editor toolbar")),this.set("maxWidth","auto"),this.items=this.createCollection(),this.focusTracker=new ca,this.keystrokes=new ha,this.set("class"),this.set("isCompact",!1),this.itemsView=new Yd(e),this.children=this.createCollection(),this.children.add(this.itemsView),this.focusables=this.createCollection();const n="rtl"===e.uiLanguageDirection;this._focusCycler=new Dd({focusables:this.focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:[n?"arrowright":"arrowleft","arrowup"],focusNext:[n?"arrowleft":"arrowright","arrowdown"]}});const o=["ck","ck-toolbar",i.to("class"),i.if("isCompact","ck-toolbar_compact")];var r;this.options.shouldGroupWhenFull&&this.options.isFloating&&o.push("ck-toolbar_floating"),this.setTemplate({tag:"div",attributes:{class:o,role:"toolbar","aria-label":i.to("ariaLabel"),style:{maxWidth:i.to("maxWidth")}},children:this.children,on:{mousedown:(r=this,r.bindTemplate.to((e=>{e.target===r.element&&e.preventDefault()})))}}),this._behavior=this.options.shouldGroupWhenFull?new Xd(this):new Qd(this)}render(){super.render();for(const e of this.items)this.focusTracker.add(e.element);this.items.on("add",((e,t)=>{this.focusTracker.add(t.element)})),this.items.on("remove",((e,t)=>{this.focusTracker.remove(t.element)})),this.keystrokes.listenTo(this.element),this._behavior.render(this)}destroy(){return this._behavior.destroy(),super.destroy()}focus(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}fillFromConfig(e,t){const i=function(e){return Array.isArray(e)?{items:e,removeItems:[]}:e?Object.assign({items:[],removeItems:[]},e):{items:[],removeItems:[]}}(e),s=i.items.filter(((e,s,n)=>"|"===e||-1===i.removeItems.indexOf(e)&&("-"===e?!this.options.shouldGroupWhenFull||(d("toolbarview-line-break-ignored-when-grouping-items",n),!1):!!t.has(e)||(d("toolbarview-item-unavailable",{name:e}),!1)))),n=this._cleanSeparators(s).map((e=>"|"===e?new Gd:"-"===e?new Kd:t.create(e)));this.items.addMany(n)}_cleanSeparators(e){const t=e=>"-"!==e&&"|"!==e,i=e.length,s=e.findIndex(t),n=i-e.slice().reverse().findIndex(t);return e.slice(s,n).filter(((e,i,s)=>!!t(e)||!(i>0&&s[i-1]===e)))}}class Yd extends ad{constructor(e){super(e),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-toolbar__items"]},children:this.children})}}class Qd{constructor(e){const t=e.bindTemplate;e.set("isVertical",!1),e.itemsView.children.bindTo(e.items).using((e=>e)),e.focusables.bindTo(e.items).using((e=>e)),e.extendTemplate({attributes:{class:[t.if("isVertical","ck-toolbar_vertical")]}})}render(){}destroy(){}}class Xd{constructor(e){this.view=e,this.viewChildren=e.children,this.viewFocusables=e.focusables,this.viewItemsView=e.itemsView,this.viewFocusTracker=e.focusTracker,this.viewLocale=e.locale,this.ungroupedItems=e.createCollection(),this.groupedItems=e.createCollection(),this.groupedItemsDropdown=this._createGroupedItemsDropdown(),this.resizeObserver=null,this.cachedPadding=null,this.shouldUpdateGroupingOnNextResize=!1,e.itemsView.children.bindTo(this.ungroupedItems).using((e=>e)),this.ungroupedItems.on("add",this._updateFocusCycleableItems.bind(this)),this.ungroupedItems.on("remove",this._updateFocusCycleableItems.bind(this)),e.children.on("add",this._updateFocusCycleableItems.bind(this)),e.children.on("remove",this._updateFocusCycleableItems.bind(this)),e.items.on("change",((e,t)=>{const i=t.index;for(const s of t.removed)i>=this.ungroupedItems.length?this.groupedItems.remove(s):this.ungroupedItems.remove(s);for(let s=i;s<i+t.added.length;s++){const e=t.added[s-i];s>this.ungroupedItems.length?this.groupedItems.add(e,s-this.ungroupedItems.length):this.ungroupedItems.add(e,s)}this._updateGrouping()})),e.extendTemplate({attributes:{class:["ck-toolbar_grouping"]}})}render(e){this.viewElement=e.element,this._enableGroupingOnResize(),this._enableGroupingOnMaxWidthChange(e)}destroy(){this.groupedItemsDropdown.destroy(),this.resizeObserver.destroy()}_updateGrouping(){if(!this.viewElement.ownerDocument.body.contains(this.viewElement))return;if(!this.viewElement.offsetParent)return void(this.shouldUpdateGroupingOnNextResize=!0);const e=this.groupedItems.length;let t;for(;this._areItemsOverflowing;)this._groupLastItem(),t=!0;if(!t&&this.groupedItems.length){for(;this.groupedItems.length&&!this._areItemsOverflowing;)this._ungroupFirstItem();this._areItemsOverflowing&&this._groupLastItem()}this.groupedItems.length!==e&&this.view.fire("groupedItemsUpdate")}get _areItemsOverflowing(){if(!this.ungroupedItems.length)return!1;const e=this.viewElement,t=this.viewLocale.uiLanguageDirection,i=new ia(e.lastChild),s=new ia(e);if(!this.cachedPadding){const i=Jo.window.getComputedStyle(e),s="ltr"===t?"paddingRight":"paddingLeft";this.cachedPadding=Number.parseInt(i[s])}return"ltr"===t?i.right>s.right-this.cachedPadding:i.left<s.left+this.cachedPadding}_enableGroupingOnResize(){let e;this.resizeObserver=new oa(this.viewElement,(t=>{e&&e===t.contentRect.width&&!this.shouldUpdateGroupingOnNextResize||(this.shouldUpdateGroupingOnNextResize=!1,this._updateGrouping(),e=t.contentRect.width)})),this._updateGrouping()}_enableGroupingOnMaxWidthChange(e){e.on("change:maxWidth",(()=>{this._updateGrouping()}))}_groupLastItem(){this.groupedItems.length||(this.viewChildren.add(new Gd),this.viewChildren.add(this.groupedItemsDropdown),this.viewFocusTracker.add(this.groupedItemsDropdown.element)),this.groupedItems.add(this.ungroupedItems.remove(this.ungroupedItems.last),0)}_ungroupFirstItem(){this.ungroupedItems.add(this.groupedItems.remove(this.groupedItems.first)),this.groupedItems.length||(this.viewChildren.remove(this.groupedItemsDropdown),this.viewChildren.remove(this.viewChildren.last),this.viewFocusTracker.remove(this.groupedItemsDropdown.element))}_createGroupedItemsDropdown(){const e=this.viewLocale,t=e.t,i=su(e);return i.class="ck-toolbar__grouped-dropdown",i.panelPosition="ltr"===e.uiLanguageDirection?"sw":"se",nu(i,[]),i.buttonView.set({label:t("Show more items"),tooltip:!0,tooltipPosition:"rtl"===e.uiLanguageDirection?"se":"sw",icon:rh.threeVerticalDots}),i.toolbarView.items.bindTo(this.groupedItems).using((e=>e)),i}_updateFocusCycleableItems(){this.viewFocusables.clear(),this.ungroupedItems.map((e=>{this.viewFocusables.add(e)})),this.groupedItems.length&&this.viewFocusables.add(this.groupedItemsDropdown)}}class eu extends ad{constructor(){super(),this.items=this.createCollection(),this.focusTracker=new ca,this.keystrokes=new ha,this._focusCycler=new Dd({focusables:this.items,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"arrowup",focusNext:"arrowdown"}}),this.setTemplate({tag:"ul",attributes:{class:["ck","ck-reset","ck-list"]},children:this.items})}render(){super.render();for(const e of this.items)this.focusTracker.add(e.element);this.items.on("add",((e,t)=>{this.focusTracker.add(t.element)})),this.items.on("remove",((e,t)=>{this.focusTracker.remove(t.element)})),this.keystrokes.listenTo(this.element)}focus(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}}class tu extends ad{constructor(e){super(e),this.children=this.createCollection(),this.setTemplate({tag:"li",attributes:{class:["ck","ck-list__item"]},children:this.children})}focus(){this.children.first.focus()}}class iu extends ad{constructor(e){super(e),this.setTemplate({tag:"li",attributes:{class:["ck","ck-list__separator"]}})}}function su(e,t=Fd){const i=new t(e),s=new qd(e),n=new Zd(e,i,s);return i.bind("isEnabled").to(n),i instanceof Fd?i.bind("isOn").to(n,"isOpen"):i.arrowView.bind("isOn").to(n,"isOpen"),function(e){(function(e){e.on("render",(()=>{sd({emitter:e,activator:()=>e.isOpen,callback:()=>{e.isOpen=!1},contextElements:[e.element]})}))})(e),function(e){e.on("execute",(t=>{t.source instanceof zd||(e.isOpen=!1)}))}(e),function(e){e.keystrokes.set("arrowdown",((t,i)=>{e.isOpen&&(e.panelView.focus(),i())})),e.keystrokes.set("arrowup",((t,i)=>{e.isOpen&&(e.panelView.focusLast(),i())}))}(e)}(n),n}function nu(e,t){const i=e.locale,s=i.t,n=e.toolbarView=new Jd(i);n.set("ariaLabel",s("Dropdown toolbar")),e.extendTemplate({attributes:{class:["ck-toolbar-dropdown"]}}),t.map((e=>n.items.add(e))),e.panelView.children.add(n),n.items.delegate("execute").to(e)}function ou(e,t){const i=e.locale,s=e.listView=new eu(i);s.items.bindTo(t).using((({type:e,model:t})=>{if("separator"===e)return new iu(i);if("button"===e||"switchbutton"===e){const s=new tu(i);let n;return n="button"===e?new Rd(i):new zd(i),n.bind(...Object.keys(t)).to(t),n.delegate("execute").to(s),s.children.add(n),s}})),e.panelView.children.add(s),s.items.delegate("execute").to(e)}class ru extends ad{constructor(e){super(e),this.body=new Pd(e)}render(){super.render(),this.body.attachToDom()}destroy(){return this.body.detachFromDom(),super.destroy()}}class au extends ad{constructor(e){super(e),this.set("text"),this.set("for"),this.id=`ck-editor__label_${r()}`;const t=this.bindTemplate;this.setTemplate({tag:"label",attributes:{class:["ck","ck-label"],id:this.id,for:t.to("for")},children:[{text:t.to("text")}]})}}class lu extends ad{constructor(e,t,i){super(e),this.setTemplate({tag:"div",attributes:{class:["ck","ck-content","ck-editor__editable","ck-rounded-corners"],lang:e.contentLanguage,dir:e.contentLanguageDirection}}),this.name=null,this.set("isFocused",!1),this._editableElement=i,this._hasExternalElement=!!this._editableElement,this._editingView=t}render(){super.render(),this._hasExternalElement?this.template.apply(this.element=this._editableElement):this._editableElement=this.element,this.on("change:isFocused",(()=>this._updateIsFocusedClasses())),this._updateIsFocusedClasses()}destroy(){this._hasExternalElement&&this.template.revert(this._editableElement),super.destroy()}_updateIsFocusedClasses(){const e=this._editingView;function t(t){e.change((i=>{const s=e.document.getRoot(t.name);i.addClass(t.isFocused?"ck-focused":"ck-blurred",s),i.removeClass(t.isFocused?"ck-blurred":"ck-focused",s)}))}e.isRenderingInProgress?function i(s){e.once("change:isRenderingInProgress",((e,n,o)=>{o?i(s):t(s)}))}(this):t(this)}}class cu extends lu{constructor(e,t,i){super(e,t,i),this.extendTemplate({attributes:{role:"textbox",class:"ck-editor__editable_inline"}})}render(){super.render();const e=this._editingView,t=this.t;e.change((i=>{const s=e.document.getRoot(this.name);i.setAttribute("aria-label",t("Rich Text Editor, %0",this.name),s)}))}}class hu extends ad{constructor(e){super(e),this.set("value"),this.set("id"),this.set("placeholder"),this.set("isReadOnly",!1),this.set("hasError",!1),this.set("ariaDescribedById"),this.focusTracker=new ca,this.bind("isFocused").to(this.focusTracker),this.set("isEmpty",!0);const t=this.bindTemplate;this.setTemplate({tag:"input",attributes:{type:"text",class:["ck","ck-input","ck-input-text",t.if("isFocused","ck-input_focused"),t.if("isEmpty","ck-input-text_empty"),t.if("hasError","ck-error")],id:t.to("id"),placeholder:t.to("placeholder"),readonly:t.to("isReadOnly"),"aria-invalid":t.if("hasError",!0),"aria-describedby":t.to("ariaDescribedById")},on:{input:t.to("input"),change:t.to(this._updateIsEmpty.bind(this))}})}render(){super.render(),this.focusTracker.add(this.element),this._setDomElementValue(this.value),this._updateIsEmpty(),this.on("change:value",((e,t,i)=>{this._setDomElementValue(i),this._updateIsEmpty()}))}select(){this.element.select()}focus(){this.element.focus()}_updateIsEmpty(){this.isEmpty=!this.element.value}_setDomElementValue(e){this.element.value=e||0===e?e:""}}class du extends ad{constructor(e,t){super(e);const i=`ck-labeled-field-view-${r()}`,s=`ck-labeled-field-view-status-${r()}`;this.fieldView=t(this,i,s),this.set("label"),this.set("isEnabled",!0),this.set("isEmpty",!0),this.set("isFocused",!1),this.set("errorText",null),this.set("infoText",null),this.set("class"),this.set("placeholder"),this.labelView=this._createLabelView(i),this.statusView=this._createStatusView(s),this.bind("_statusText").to(this,"errorText",this,"infoText",((e,t)=>e||t));const n=this.bindTemplate;this.setTemplate({tag:"div",attributes:{class:["ck","ck-labeled-field-view",n.to("class"),n.if("isEnabled","ck-disabled",(e=>!e)),n.if("isEmpty","ck-labeled-field-view_empty"),n.if("isFocused","ck-labeled-field-view_focused"),n.if("placeholder","ck-labeled-field-view_placeholder"),n.if("errorText","ck-error")]},children:[{tag:"div",attributes:{class:["ck","ck-labeled-field-view__input-wrapper"]},children:[this.fieldView,this.labelView]},this.statusView]})}_createLabelView(e){const t=new au(this.locale);return t.for=e,t.bind("text").to(this,"label"),t}_createStatusView(e){const t=new ad(this.locale),i=this.bindTemplate;return t.setTemplate({tag:"div",attributes:{class:["ck","ck-labeled-field-view__status",i.if("errorText","ck-labeled-field-view__status_error"),i.if("_statusText","ck-hidden",(e=>!e))],id:e,role:i.if("errorText","alert")},children:[{text:i.to("_statusText")}]}),t}focus(){this.fieldView.focus()}}function uu(e,t,i){const s=new hu(e.locale);return s.set({id:t,ariaDescribedById:i}),s.bind("isReadOnly").to(e,"isEnabled",(e=>!e)),s.bind("hasError").to(e,"errorText",(e=>!!e)),s.on("input",(()=>{e.errorText=null})),e.bind("isEmpty","isFocused","placeholder").to(s),s}class mu extends Ms{static get pluginName(){return"Notification"}init(){this.on("show:warning",((e,t)=>{window.alert(t.message)}),{priority:"lowest"})}showSuccess(e,t={}){this._showNotification({message:e,type:"success",namespace:t.namespace,title:t.title})}showInfo(e,t={}){this._showNotification({message:e,type:"info",namespace:t.namespace,title:t.title})}showWarning(e,t={}){this._showNotification({message:e,type:"warning",namespace:t.namespace,title:t.title})}_showNotification(e){const t=`show:${e.type}`+(e.namespace?`:${e.namespace}`:"");this.fire(t,{message:e.message,type:e.type,title:e.title||""})}}class pu{constructor(e,t){t&&Qe(this,t),e&&this.set(e)}}function fu(e){return t=>t+e}dt(pu,ot);const gu=fu("px"),wu=Jo.document.body;class bu extends ad{constructor(e){super(e);const t=this.bindTemplate;this.set("top",0),this.set("left",0),this.set("position","arrow_nw"),this.set("isVisible",!1),this.set("withArrow",!0),this.set("class"),this.content=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-balloon-panel",t.to("position",(e=>`ck-balloon-panel_${e}`)),t.if("isVisible","ck-balloon-panel_visible"),t.if("withArrow","ck-balloon-panel_with-arrow"),t.to("class")],style:{top:t.to("top",gu),left:t.to("left",gu)}},children:this.content})}show(){this.isVisible=!0}hide(){this.isVisible=!1}attachTo(e){this.show();const t=bu.defaultPositions,i=Object.assign({},{element:this.element,positions:[t.southArrowNorth,t.southArrowNorthMiddleWest,t.southArrowNorthMiddleEast,t.southArrowNorthWest,t.southArrowNorthEast,t.northArrowSouth,t.northArrowSouthMiddleWest,t.northArrowSouthMiddleEast,t.northArrowSouthWest,t.northArrowSouthEast],limiter:wu,fitInViewport:!0},e),s=bu._getOptimalPosition(i),n=parseInt(s.left),o=parseInt(s.top),r=s.name;Object.assign(this,{top:o,left:n,position:r})}pin(e){this.unpin(),this._pinWhenIsVisibleCallback=()=>{this.isVisible?this._startPinning(e):this._stopPinning()},this._startPinning(e),this.listenTo(this,"change:isVisible",this._pinWhenIsVisibleCallback)}unpin(){this._pinWhenIsVisibleCallback&&(this._stopPinning(),this.stopListening(this,"change:isVisible",this._pinWhenIsVisibleCallback),this._pinWhenIsVisibleCallback=null,this.hide())}_startPinning(e){this.attachTo(e);const t=vu(e.target),i=e.limiter?vu(e.limiter):wu;this.listenTo(Jo.document,"scroll",((s,n)=>{const o=n.target,r=t&&o.contains(t),a=i&&o.contains(i);!r&&!a&&t&&i||this.attachTo(e)}),{useCapture:!0}),this.listenTo(Jo.window,"resize",(()=>{this.attachTo(e)}))}_stopPinning(){this.stopListening(Jo.document,"scroll"),this.stopListening(Jo.window,"resize")}}function vu(e){return _s(e)?e:Xr(e)?e.commonAncestorContainer:"function"==typeof e?vu(e()):null}function yu(e,t){return e.top-t.height-bu.arrowVerticalOffset}function _u(e){return e.bottom+bu.arrowVerticalOffset}bu.arrowHorizontalOffset=25,bu.arrowVerticalOffset=10,bu._getOptimalPosition=Hd,bu.defaultPositions={northWestArrowSouthWest:(e,t)=>({top:yu(e,t),left:e.left-bu.arrowHorizontalOffset,name:"arrow_sw"}),northWestArrowSouthMiddleWest:(e,t)=>({top:yu(e,t),left:e.left-.25*t.width-bu.arrowHorizontalOffset,name:"arrow_smw"}),northWestArrowSouth:(e,t)=>({top:yu(e,t),left:e.left-t.width/2,name:"arrow_s"}),northWestArrowSouthMiddleEast:(e,t)=>({top:yu(e,t),left:e.left-.75*t.width+bu.arrowHorizontalOffset,name:"arrow_sme"}),northWestArrowSouthEast:(e,t)=>({top:yu(e,t),left:e.left-t.width+bu.arrowHorizontalOffset,name:"arrow_se"}),northArrowSouthWest:(e,t)=>({top:yu(e,t),left:e.left+e.width/2-bu.arrowHorizontalOffset,name:"arrow_sw"}),northArrowSouthMiddleWest:(e,t)=>({top:yu(e,t),left:e.left+e.width/2-.25*t.width-bu.arrowHorizontalOffset,name:"arrow_smw"}),northArrowSouth:(e,t)=>({top:yu(e,t),left:e.left+e.width/2-t.width/2,name:"arrow_s"}),northArrowSouthMiddleEast:(e,t)=>({top:yu(e,t),left:e.left+e.width/2-.75*t.width+bu.arrowHorizontalOffset,name:"arrow_sme"}),northArrowSouthEast:(e,t)=>({top:yu(e,t),left:e.left+e.width/2-t.width+bu.arrowHorizontalOffset,name:"arrow_se"}),northEastArrowSouthWest:(e,t)=>({top:yu(e,t),left:e.right-bu.arrowHorizontalOffset,name:"arrow_sw"}),northEastArrowSouthMiddleWest:(e,t)=>({top:yu(e,t),left:e.right-.25*t.width-bu.arrowHorizontalOffset,name:"arrow_smw"}),northEastArrowSouth:(e,t)=>({top:yu(e,t),left:e.right-t.width/2,name:"arrow_s"}),northEastArrowSouthMiddleEast:(e,t)=>({top:yu(e,t),left:e.right-.75*t.width+bu.arrowHorizontalOffset,name:"arrow_sme"}),northEastArrowSouthEast:(e,t)=>({top:yu(e,t),left:e.right-t.width+bu.arrowHorizontalOffset,name:"arrow_se"}),southWestArrowNorthWest:(e,t)=>({top:_u(e),left:e.left-bu.arrowHorizontalOffset,name:"arrow_nw"}),southWestArrowNorthMiddleWest:(e,t)=>({top:_u(e),left:e.left-.25*t.width-bu.arrowHorizontalOffset,name:"arrow_nmw"}),southWestArrowNorth:(e,t)=>({top:_u(e),left:e.left-t.width/2,name:"arrow_n"}),southWestArrowNorthMiddleEast:(e,t)=>({top:_u(e),left:e.left-.75*t.width+bu.arrowHorizontalOffset,name:"arrow_nme"}),southWestArrowNorthEast:(e,t)=>({top:_u(e),left:e.left-t.width+bu.arrowHorizontalOffset,name:"arrow_ne"}),southArrowNorthWest:(e,t)=>({top:_u(e),left:e.left+e.width/2-bu.arrowHorizontalOffset,name:"arrow_nw"}),southArrowNorthMiddleWest:(e,t)=>({top:_u(e),left:e.left+e.width/2-.25*t.width-bu.arrowHorizontalOffset,name:"arrow_nmw"}),southArrowNorth:(e,t)=>({top:_u(e),left:e.left+e.width/2-t.width/2,name:"arrow_n"}),southArrowNorthMiddleEast:(e,t)=>({top:_u(e),left:e.left+e.width/2-.75*t.width+bu.arrowHorizontalOffset,name:"arrow_nme"}),southArrowNorthEast:(e,t)=>({top:_u(e),left:e.left+e.width/2-t.width+bu.arrowHorizontalOffset,name:"arrow_ne"}),southEastArrowNorthWest:(e,t)=>({top:_u(e),left:e.right-bu.arrowHorizontalOffset,name:"arrow_nw"}),southEastArrowNorthMiddleWest:(e,t)=>({top:_u(e),left:e.right-.25*t.width-bu.arrowHorizontalOffset,name:"arrow_nmw"}),southEastArrowNorth:(e,t)=>({top:_u(e),left:e.right-t.width/2,name:"arrow_n"}),southEastArrowNorthMiddleEast:(e,t)=>({top:_u(e),left:e.right-.75*t.width+bu.arrowHorizontalOffset,name:"arrow_nme"}),southEastArrowNorthEast:(e,t)=>({top:_u(e),left:e.right-t.width+bu.arrowHorizontalOffset,name:"arrow_ne"})};const ku=fu("px");class Au extends ut{static get pluginName(){return"ContextualBalloon"}constructor(e){super(e),this.positionLimiter=()=>{const e=this.editor.editing.view,t=e.document.selection.editableElement;return t?e.domConverter.mapViewToDom(t.root):null},this.set("visibleView",null),this.view=new bu(e.locale),e.ui.view.body.add(this.view),e.ui.focusTracker.add(this.view.element),this._viewToStack=new Map,this._idToStack=new Map,this.set("_numberOfStacks",0),this.set("_singleViewMode",!1),this._rotatorView=this._createRotatorView(),this._fakePanelsView=this._createFakePanelsView()}hasView(e){return Array.from(this._viewToStack.keys()).includes(e)}add(e){if(this.hasView(e.view))throw new h("contextualballoon-add-view-exist",[this,e]);const t=e.stackId||"main";if(!this._idToStack.has(t))return this._idToStack.set(t,new Map([[e.view,e]])),this._viewToStack.set(e.view,this._idToStack.get(t)),this._numberOfStacks=this._idToStack.size,void(this._visibleStack&&!e.singleViewMode||this.showStack(t));const i=this._idToStack.get(t);e.singleViewMode&&this.showStack(t),i.set(e.view,e),this._viewToStack.set(e.view,i),i===this._visibleStack&&this._showView(e)}remove(e){if(!this.hasView(e))throw new h("contextualballoon-remove-view-not-exist",[this,e]);const t=this._viewToStack.get(e);this._singleViewMode&&this.visibleView===e&&(this._singleViewMode=!1),this.visibleView===e&&(1===t.size?this._idToStack.size>1?this._showNextStack():(this.view.hide(),this.visibleView=null,this._rotatorView.hideView()):this._showView(Array.from(t.values())[t.size-2])),1===t.size?(this._idToStack.delete(this._getStackId(t)),this._numberOfStacks=this._idToStack.size):t.delete(e),this._viewToStack.delete(e)}updatePosition(e){e&&(this._visibleStack.get(this.visibleView).position=e),this.view.pin(this._getBalloonPosition()),this._fakePanelsView.updatePosition()}showStack(e){this.visibleStack=e;const t=this._idToStack.get(e);if(!t)throw new h("contextualballoon-showstack-stack-not-exist",this);this._visibleStack!==t&&this._showView(Array.from(t.values()).pop())}get _visibleStack(){return this._viewToStack.get(this.visibleView)}_getStackId(e){return Array.from(this._idToStack.entries()).find((t=>t[1]===e))[0]}_showNextStack(){const e=Array.from(this._idToStack.values());let t=e.indexOf(this._visibleStack)+1;e[t]||(t=0),this.showStack(this._getStackId(e[t]))}_showPrevStack(){const e=Array.from(this._idToStack.values());let t=e.indexOf(this._visibleStack)-1;e[t]||(t=e.length-1),this.showStack(this._getStackId(e[t]))}_createRotatorView(){const e=new xu(this.editor.locale),t=this.editor.locale.t;return this.view.content.add(e),e.bind("isNavigationVisible").to(this,"_numberOfStacks",this,"_singleViewMode",((e,t)=>!t&&e>1)),e.on("change:isNavigationVisible",(()=>this.updatePosition()),{priority:"low"}),e.bind("counter").to(this,"visibleView",this,"_numberOfStacks",((e,i)=>{if(i<2)return"";const s=Array.from(this._idToStack.values()).indexOf(this._visibleStack)+1;return t("%0 of %1",[s,i])})),e.buttonNextView.on("execute",(()=>{e.focusTracker.isFocused&&this.editor.editing.view.focus(),this._showNextStack()})),e.buttonPrevView.on("execute",(()=>{e.focusTracker.isFocused&&this.editor.editing.view.focus(),this._showPrevStack()})),e}_createFakePanelsView(){const e=new Cu(this.editor.locale,this.view);return e.bind("numberOfPanels").to(this,"_numberOfStacks",this,"_singleViewMode",((e,t)=>!t&&e>=2?Math.min(e-1,2):0)),e.listenTo(this.view,"change:top",(()=>e.updatePosition())),e.listenTo(this.view,"change:left",(()=>e.updatePosition())),this.editor.ui.view.body.add(e),e}_showView({view:e,balloonClassName:t="",withArrow:i=!0,singleViewMode:s=!1}){this.view.class=t,this.view.withArrow=i,this._rotatorView.showView(e),this.visibleView=e,this.view.pin(this._getBalloonPosition()),this._fakePanelsView.updatePosition(),s&&(this._singleViewMode=!0)}_getBalloonPosition(){let e=Array.from(this._visibleStack.values()).pop().position;return e&&!e.limiter&&(e=Object.assign({},e,{limiter:this.positionLimiter})),e}}class xu extends ad{constructor(e){super(e);const t=e.t,i=this.bindTemplate;this.set("isNavigationVisible",!0),this.focusTracker=new ca,this.buttonPrevView=this._createButtonView(t("Previous"),'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.463 5.187a.888.888 0 1 1 1.254 1.255L9.16 10l3.557 3.557a.888.888 0 1 1-1.254 1.255L7.26 10.61a.888.888 0 0 1 .16-1.382l4.043-4.042z"/></svg>'),this.buttonNextView=this._createButtonView(t("Next"),'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M8.537 14.813a.888.888 0 1 1-1.254-1.255L10.84 10 7.283 6.442a.888.888 0 1 1 1.254-1.255L12.74 9.39a.888.888 0 0 1-.16 1.382l-4.043 4.042z"/></svg>'),this.content=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-balloon-rotator"],"z-index":"-1"},children:[{tag:"div",attributes:{class:["ck-balloon-rotator__navigation",i.to("isNavigationVisible",(e=>e?"":"ck-hidden"))]},children:[this.buttonPrevView,{tag:"span",attributes:{class:["ck-balloon-rotator__counter"]},children:[{text:i.to("counter")}]},this.buttonNextView]},{tag:"div",attributes:{class:"ck-balloon-rotator__content"},children:this.content}]})}render(){super.render(),this.focusTracker.add(this.element)}showView(e){this.hideView(),this.content.add(e)}hideView(){this.content.clear()}_createButtonView(e,t){const i=new Rd(this.locale);return i.set({label:e,icon:t,tooltip:!0}),i}}class Cu extends ad{constructor(e,t){super(e);const i=this.bindTemplate;this.set("top",0),this.set("left",0),this.set("height",0),this.set("width",0),this.set("numberOfPanels",0),this.content=this.createCollection(),this._balloonPanelView=t,this.setTemplate({tag:"div",attributes:{class:["ck-fake-panel",i.to("numberOfPanels",(e=>e?"":"ck-hidden"))],style:{top:i.to("top",ku),left:i.to("left",ku),width:i.to("width",ku),height:i.to("height",ku)}},children:this.content}),this.on("change:numberOfPanels",((e,t,i,s)=>{i>s?this._addPanels(i-s):this._removePanels(s-i),this.updatePosition()}))}_addPanels(e){for(;e--;){const e=new ad;e.setTemplate({tag:"div"}),this.content.add(e),this.registerChild(e)}}_removePanels(e){for(;e--;){const e=this.content.last;this.content.remove(e),this.deregisterChild(e),e.destroy()}}updatePosition(){if(this.numberOfPanels){const{top:e,left:t}=this._balloonPanelView,{width:i,height:s}=new ia(this._balloonPanelView.element);Object.assign(this,{top:e,left:t,width:i,height:s})}}}fu("px"),fu("px"),fu("px"),fu("px");const Eu=new Map([["left",rh.alignLeft],["right",rh.alignRight],["center",rh.alignCenter],["justify",rh.alignJustify]]);class Tu extends ut{get localizedOptionTitles(){const e=this.editor.t;return{left:e("Align left"),right:e("Align right"),center:e("Align center"),justify:e("Justify")}}static get pluginName(){return"AlignmentUI"}init(){const e=this.editor,t=e.ui.componentFactory,i=e.t,s=Xh(e.config.get("alignment.options"));s.map((e=>e.name)).filter(Yh).forEach((e=>this._addButton(e))),t.add("alignment",(e=>{const n=su(e),o=s.map((e=>t.create(`alignment:${e.name}`)));nu(n,o),n.buttonView.set({label:i("Text alignment"),tooltip:!0}),n.toolbarView.isVertical=!0,n.toolbarView.ariaLabel=i("Text alignment toolbar"),n.extendTemplate({attributes:{class:"ck-alignment-dropdown"}});const r="rtl"===e.contentLanguageDirection?Eu.get("right"):Eu.get("left");return n.buttonView.bind("icon").toMany(o,"isOn",((...e)=>{const t=e.findIndex((e=>e));return t<0?r:o[t].icon})),n.bind("isEnabled").toMany(o,"isEnabled",((...e)=>e.some((e=>e)))),n}))}_addButton(e){const t=this.editor;t.ui.componentFactory.add(`alignment:${e}`,(i=>{const s=t.commands.get("alignment"),n=new Rd(i);return n.set({label:this.localizedOptionTitles[e],icon:Eu.get(e),tooltip:!0,isToggleable:!0}),n.bind("isEnabled").to(s),n.bind("isOn").to(s,"value",(t=>t===e)),this.listenTo(n,"execute",(()=>{t.execute("alignment",{value:e}),t.editing.view.focus()})),n}))}}class Su extends pt{constructor(e,t){super(e),this.attributeKey=t}refresh(){const e=this.editor.model,t=e.document;this.value=this._getValueFromFirstAllowedNode(),this.isEnabled=e.schema.checkAttributeInSelection(t.selection,this.attributeKey)}execute(e={}){const t=this.editor.model,i=t.document.selection,s=void 0===e.forceValue?!this.value:e.forceValue;t.change((e=>{if(i.isCollapsed)s?e.setSelectionAttribute(this.attributeKey,!0):e.removeSelectionAttribute(this.attributeKey);else{const n=t.schema.getValidRanges(i.getRanges(),this.attributeKey);for(const t of n)s?e.setAttribute(this.attributeKey,s,t):e.removeAttribute(this.attributeKey,t)}}))}_getValueFromFirstAllowedNode(){const e=this.editor.model,t=e.schema,i=e.document.selection;if(i.isCollapsed)return i.hasAttribute(this.attributeKey);for(const s of i.getRanges())for(const e of s.getItems())if(t.checkAttribute(e,this.attributeKey))return e.hasAttribute(this.attributeKey);return!1}}const Pu="bold";class Ou extends ut{static get pluginName(){return"BoldEditing"}init(){const e=this.editor;e.model.schema.extend("$text",{allowAttributes:Pu}),e.model.schema.setAttributeProperties(Pu,{isFormatting:!0,copyOnEnter:!0}),e.conversion.attributeToElement({model:Pu,view:"strong",upcastAlso:["b",e=>{const t=e.getStyle("font-weight");return t?"bold"==t||Number(t)>=600?{name:!0,styles:["font-weight"]}:void 0:null}]}),e.commands.add(Pu,new Su(e,Pu)),e.keystrokes.set("CTRL+B",Pu)}}const Iu="bold";class Ru extends ut{static get pluginName(){return"BoldUI"}init(){const e=this.editor,t=e.t;e.ui.componentFactory.add(Iu,(i=>{const s=e.commands.get(Iu),n=new Rd(i);return n.set({label:t("Bold"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.187 17H5.773c-.637 0-1.092-.138-1.364-.415-.273-.277-.409-.718-.409-1.323V4.738c0-.617.14-1.062.419-1.332.279-.27.73-.406 1.354-.406h4.68c.69 0 1.288.041 1.793.124.506.083.96.242 1.36.478.341.197.644.447.906.75a3.262 3.262 0 0 1 .808 2.162c0 1.401-.722 2.426-2.167 3.075C15.05 10.175 16 11.315 16 13.01a3.756 3.756 0 0 1-2.296 3.504 6.1 6.1 0 0 1-1.517.377c-.571.073-1.238.11-2 .11zm-.217-6.217H7v4.087h3.069c1.977 0 2.965-.69 2.965-2.072 0-.707-.256-1.22-.768-1.537-.512-.319-1.277-.478-2.296-.478zM7 5.13v3.619h2.606c.729 0 1.292-.067 1.69-.2a1.6 1.6 0 0 0 .91-.765c.165-.267.247-.566.247-.897 0-.707-.26-1.176-.778-1.409-.519-.232-1.31-.348-2.375-.348H7z"/></svg>',keystroke:"CTRL+B",tooltip:!0,isToggleable:!0}),n.bind("isOn","isEnabled").to(s,"value","isEnabled"),this.listenTo(n,"execute",(()=>{e.execute(Iu),e.editing.view.focus()})),n}))}}const zu="italic";class Mu extends ut{static get pluginName(){return"ItalicEditing"}init(){const e=this.editor;e.model.schema.extend("$text",{allowAttributes:zu}),e.model.schema.setAttributeProperties(zu,{isFormatting:!0,copyOnEnter:!0}),e.conversion.attributeToElement({model:zu,view:"i",upcastAlso:["em",{styles:{"font-style":"italic"}}]}),e.commands.add(zu,new Su(e,zu)),e.keystrokes.set("CTRL+I",zu)}}const Nu="italic";class Du extends ut{static get pluginName(){return"ItalicUI"}init(){const e=this.editor,t=e.t;e.ui.componentFactory.add(Nu,(i=>{const s=e.commands.get(Nu),n=new Rd(i);return n.set({label:t("Italic"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m9.586 14.633.021.004c-.036.335.095.655.393.962.082.083.173.15.274.201h1.474a.6.6 0 1 1 0 1.2H5.304a.6.6 0 0 1 0-1.2h1.15c.474-.07.809-.182 1.005-.334.157-.122.291-.32.404-.597l2.416-9.55a1.053 1.053 0 0 0-.281-.823 1.12 1.12 0 0 0-.442-.296H8.15a.6.6 0 0 1 0-1.2h6.443a.6.6 0 1 1 0 1.2h-1.195c-.376.056-.65.155-.823.296-.215.175-.423.439-.623.79l-2.366 9.347z"/></svg>',keystroke:"CTRL+I",tooltip:!0,isToggleable:!0}),n.bind("isOn","isEnabled").to(s,"value","isEnabled"),this.listenTo(n,"execute",(()=>{e.execute(Nu),e.editing.view.focus()})),n}))}}const Vu="strikethrough";class Bu extends ut{static get pluginName(){return"StrikethroughEditing"}init(){const e=this.editor;e.model.schema.extend("$text",{allowAttributes:Vu}),e.model.schema.setAttributeProperties(Vu,{isFormatting:!0,copyOnEnter:!0}),e.conversion.attributeToElement({model:Vu,view:"s",upcastAlso:["del","strike",{styles:{"text-decoration":"line-through"}}]}),e.commands.add(Vu,new Su(e,Vu)),e.keystrokes.set("CTRL+SHIFT+X","strikethrough")}}const Lu="strikethrough";class Fu extends ut{static get pluginName(){return"StrikethroughUI"}init(){const e=this.editor,t=e.t;e.ui.componentFactory.add(Lu,(i=>{const s=e.commands.get(Lu),n=new Rd(i);return n.set({label:t("Strikethrough"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 16.4c-.8-.4-1.5-.9-2.2-1.5a.6.6 0 0 1-.2-.5l.3-.6h1c1 1.2 2.1 1.7 3.7 1.7 1 0 1.8-.3 2.3-.6.6-.4.6-1.2.6-1.3.2-1.2-.9-2.1-.9-2.1h2.1c.3.7.4 1.2.4 1.7v.8l-.6 1.2c-.6.8-1.1 1-1.6 1.2a6 6 0 0 1-2.4.6c-1 0-1.8-.3-2.5-.6zM6.8 9 6 8.3c-.4-.5-.5-.8-.5-1.6 0-.7.1-1.3.5-1.8.4-.6 1-1 1.6-1.3a6.3 6.3 0 0 1 4.7 0 4 4 0 0 1 1.7 1l.3.7c0 .1.2.4-.2.7-.4.2-.9.1-1 0a3 3 0 0 0-1.2-1c-.4-.2-1-.3-2-.4-.7 0-1.4.2-2 .6-.8.6-1 .8-1 1.5 0 .8.5 1 1.2 1.5.6.4 1.1.7 1.9 1H6.8z"/><path d="M3 10.5V9h14v1.5z"/></svg>',keystroke:"CTRL+SHIFT+X",tooltip:!0,isToggleable:!0}),n.bind("isOn","isEnabled").to(s,"value","isEnabled"),this.listenTo(n,"execute",(()=>{e.execute(Lu),e.editing.view.focus()})),n}))}}const ju="underline";class qu extends ut{static get pluginName(){return"UnderlineEditing"}init(){const e=this.editor;e.model.schema.extend("$text",{allowAttributes:ju}),e.model.schema.setAttributeProperties(ju,{isFormatting:!0,copyOnEnter:!0}),e.conversion.attributeToElement({model:ju,view:"u",upcastAlso:{styles:{"text-decoration":"underline"}}}),e.commands.add(ju,new Su(e,ju)),e.keystrokes.set("CTRL+U","underline")}}const Hu="underline";class $u extends ut{static get pluginName(){return"UnderlineUI"}init(){const e=this.editor,t=e.t;e.ui.componentFactory.add(Hu,(i=>{const s=e.commands.get(Hu),n=new Rd(i);return n.set({label:t("Underline"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 18v-1.5h14V18zm2.2-8V3.6c0-.4.4-.6.8-.6.3 0 .7.2.7.6v6.2c0 2 1.3 2.8 3.2 2.8 1.9 0 3.4-.9 3.4-2.9V3.6c0-.3.4-.5.8-.5.3 0 .7.2.7.5V10c0 2.7-2.2 4-4.9 4-2.6 0-4.7-1.2-4.7-4z"/></svg>',keystroke:"CTRL+U",tooltip:!0,isToggleable:!0}),n.bind("isOn","isEnabled").to(s,"value","isEnabled"),this.listenTo(n,"execute",(()=>{e.execute(Hu),e.editing.view.focus()})),n}))}}function*Uu(e,t){for(const i of t)i&&e.getAttributeProperties(i[0]).copyOnEnter&&(yield i)}class Wu extends pt{execute(){const e=this.editor.model,t=e.document;e.change((i=>{!function(e,t,i,s){const n=i.isCollapsed,o=i.getFirstRange(),r=o.start.parent,a=o.end.parent;if(s.isLimit(r)||s.isLimit(a))n||r!=a||e.deleteContent(i);else if(n){const e=Uu(t.model.schema,i.getAttributes());Zu(t,o.start),t.setSelectionAttribute(e)}else{const s=!(o.start.isAtStart&&o.end.isAtEnd),n=r==a;e.deleteContent(i,{leaveUnmerged:s}),s&&(n?Zu(t,i.focus):t.setSelection(a,0))}}(this.editor.model,i,t.selection,e.schema),this.fire("afterExecute",{writer:i})}))}}function Zu(e,t){e.split(t),e.setSelection(t.parent.nextSibling,0)}class Gu extends cr{constructor(e){super(e);const t=this.document;t.on("keydown",((e,i)=>{if(this.isEnabled&&i.keyCode==oo.enter){const s=new qn(t,"enter",t.selection.getFirstRange());t.fire(s,new Rr(t,i.domEvent,{isSoft:i.shiftKey})),s.stop.called&&e.stop()}}))}observe(){}}class Ku extends ut{static get pluginName(){return"Enter"}init(){const e=this.editor,t=e.editing.view,i=t.document;t.addObserver(Gu),e.commands.add("enter",new Wu(e)),this.listenTo(i,"enter",((i,s)=>{s.preventDefault(),s.isSoft||(e.execute("enter"),t.scrollToTheSelection())}),{priority:"low"})}}class Ju extends pt{execute(){const e=this.editor.model,t=e.document;e.change((i=>{!function(e,t,i){const s=i.isCollapsed,n=i.getFirstRange(),o=n.start.parent,r=n.end.parent,a=o==r;if(s){const s=Uu(e.schema,i.getAttributes());Yu(e,t,n.end),t.removeSelectionAttribute(i.getAttributeKeys()),t.setSelectionAttribute(s)}else{const s=!(n.start.isAtStart&&n.end.isAtEnd);e.deleteContent(i,{leaveUnmerged:s}),a?Yu(e,t,i.focus):s&&t.setSelection(r,0)}}(e,i,t.selection),this.fire("afterExecute",{writer:i})}))}refresh(){const e=this.editor.model,t=e.document;this.isEnabled=function(e,t){if(t.rangeCount>1)return!1;const i=t.anchor;if(!i||!e.checkChild(i,"softBreak"))return!1;const s=t.getFirstRange(),n=s.start.parent,o=s.end.parent;return!Qu(n,e)&&!Qu(o,e)||n===o}(e.schema,t.selection)}}function Yu(e,t,i){const s=t.createElement("softBreak");e.insertContent(s,i),t.setSelection(s,"after")}function Qu(e,t){return!e.is("rootElement")&&(t.isLimit(e)||Qu(e.parent,t))}class Xu extends ut{static get pluginName(){return"ShiftEnter"}init(){const e=this.editor,t=e.model.schema,i=e.conversion,s=e.editing.view,n=s.document;t.register("softBreak",{allowWhere:"$text",isInline:!0}),i.for("upcast").elementToElement({model:"softBreak",view:"br"}),i.for("downcast").elementToElement({model:"softBreak",view:(e,{writer:t})=>t.createEmptyElement("br")}),s.addObserver(Gu),e.commands.add("shiftEnter",new Ju(e)),this.listenTo(n,"enter",((t,i)=>{i.preventDefault(),i.isSoft&&(e.execute("shiftEnter"),s.scrollToTheSelection())}),{priority:"low"})}}class em{constructor(e,t=20){this.model=e,this.size=0,this.limit=t,this.isLocked=!1,this._changeCallback=(e,t)=>{"transparent"!=t.type&&t!==this._batch&&this._reset(!0)},this._selectionChangeCallback=()=>{this._reset()},this.model.document.on("change",this._changeCallback),this.model.document.selection.on("change:range",this._selectionChangeCallback),this.model.document.selection.on("change:attribute",this._selectionChangeCallback)}get batch(){return this._batch||(this._batch=this.model.createBatch()),this._batch}input(e){this.size+=e,this.size>=this.limit&&this._reset(!0)}lock(){this.isLocked=!0}unlock(){this.isLocked=!1}destroy(){this.model.document.off("change",this._changeCallback),this.model.document.selection.off("change:range",this._selectionChangeCallback),this.model.document.selection.off("change:attribute",this._selectionChangeCallback)}_reset(e){this.isLocked&&!e||(this._batch=null,this.size=0)}}class tm extends pt{constructor(e,t){super(e),this._buffer=new em(e.model,t),this._batches=new WeakSet}get buffer(){return this._buffer}destroy(){super.destroy(),this._buffer.destroy()}execute(e={}){const t=this.editor.model,i=t.document,s=e.text||"",n=s.length,o=e.range?t.createSelection(e.range):i.selection,r=e.resultRange;t.enqueueChange(this._buffer.batch,(e=>{this._buffer.lock(),this._batches.add(this._buffer.batch),t.deleteContent(o),s&&t.insertContent(e.createText(s,i.selection.getAttributes()),o),r?e.setSelection(r):o.is("documentSelection")||e.setSelection(o),this._buffer.unlock(),this._buffer.input(n)}))}}const im=[ao("arrowUp"),ao("arrowRight"),ao("arrowDown"),ao("arrowLeft"),9,16,17,18,19,20,27,33,34,35,36,45,91,93,144,145,173,174,175,176,177,178,179,255];for(let e=112;e<=135;e++)im.push(e);function sm(e){return!(!e.ctrlKey&&!e.metaKey)||im.includes(e.keyCode)}function nm(e){if(e.newChildren.length-e.oldChildren.length!=1)return;const t=function(e,t){const i=[];let s,n=0;return e.forEach((e=>{"equal"==e?(o(),n++):"insert"==e?(r("insert")?s.values.push(t[n]):(o(),s={type:"insert",index:n,values:[t[n]]}),n++):r("delete")?s.howMany++:(o(),s={type:"delete",index:n,howMany:1})})),o(),i;function o(){s&&(i.push(s),s=null)}function r(e){return s&&s.type==e}}(qo(e.oldChildren,e.newChildren,om),e.newChildren);if(t.length>1)return;const i=t[0];return i.values[0]&&i.values[0].is("$text")?i:void 0}function om(e,t){return e&&e.is("$text")&&t&&t.is("$text")?e.data===t.data:e===t}class rm{constructor(e){this.editor=e,this.editing=this.editor.editing}handle(e,t){if(function(e){if(0==e.length)return!1;for(const t of e)if("children"===t.type&&!nm(t))return!0;return!1}(e))this._handleContainerChildrenMutations(e,t);else for(const i of e)this._handleTextMutation(i,t),this._handleTextNodeInsertion(i)}_handleContainerChildrenMutations(e,t){const i=function(e){const t=e.map((e=>e.node)).reduce(((e,t)=>e.getCommonAncestor(t,{includeSelf:!0})));if(t)return t.getAncestors({includeSelf:!0,parentFirst:!0}).find((e=>e.is("containerElement")||e.is("rootElement")))}(e);if(!i)return;const s=this.editor.editing.view.domConverter.mapViewToDom(i),n=new ir(this.editor.editing.view.document),o=this.editor.data.toModel(n.domToView(s)).getChild(0),r=this.editor.editing.mapper.toModelElement(i);if(!r)return;const a=Array.from(o.getChildren()),l=Array.from(r.getChildren()),c=a[a.length-1],h=l[l.length-1],d=c&&c.is("element","softBreak"),u=h&&!h.is("element","softBreak");d&&u&&a.pop();const m=this.editor.model.schema;if(!am(a,m)||!am(l,m))return;const p=a.map((e=>e.is("$text")?e.data:"@")).join("").replace(/\u00A0/g," "),f=l.map((e=>e.is("$text")?e.data:"@")).join("").replace(/\u00A0/g," ");if(f===p)return;const g=qo(f,p),{firstChangeAt:w,insertions:b,deletions:v}=lm(g);let y=null;t&&(y=this.editing.mapper.toModelRange(t.getFirstRange()));const _=p.substr(w,b),k=this.editor.model.createRange(this.editor.model.createPositionAt(r,w),this.editor.model.createPositionAt(r,w+v));this.editor.execute("input",{text:_,range:k,resultRange:y})}_handleTextMutation(e,t){if("text"!=e.type)return;const i=e.newText.replace(/\u00A0/g," "),s=e.oldText.replace(/\u00A0/g," ");if(s===i)return;const n=qo(s,i),{firstChangeAt:o,insertions:r,deletions:a}=lm(n);let l=null;t&&(l=this.editing.mapper.toModelRange(t.getFirstRange()));const c=this.editing.view.createPositionAt(e.node,o),h=this.editing.mapper.toModelPosition(c),d=this.editor.model.createRange(h,h.getShiftedBy(a)),u=i.substr(o,r);this.editor.execute("input",{text:u,range:d,resultRange:l})}_handleTextNodeInsertion(e){if("children"!=e.type)return;const t=nm(e),i=this.editing.view.createPositionAt(e.node,t.index),s=this.editing.mapper.toModelPosition(i),n=t.values[0].data;this.editor.execute("input",{text:n.replace(/\u00A0/g," "),range:this.editor.model.createRange(s)})}}function am(e,t){return e.every((e=>t.isInline(e)))}function lm(e){let t=null,i=null;for(let o=0;o<e.length;o++)"equal"!=e[o]&&(t=null===t?o:t,i=o);let s=0,n=0;for(let o=t;o<=i;o++)"insert"!=e[o]&&s++,"delete"!=e[o]&&n++;return{insertions:n,deletions:s,firstChangeAt:t}}class cm extends ut{static get pluginName(){return"Input"}init(){const e=this.editor,t=new tm(e,e.config.get("typing.undoStep")||20);e.commands.add("input",t),function(e){let t=null;const i=e.model,s=e.editing.view,n=e.commands.get("input");function o(e){const o=i.document,a=s.document.isComposing,l=t&&t.isEqual(o.selection);t=null,n.isEnabled&&(sm(e)||o.selection.isCollapsed||a&&229===e.keyCode||!a&&229===e.keyCode&&l||r())}function r(){const e=n.buffer;e.lock();const t=e.batch;n._batches.add(t),i.enqueueChange(t,(()=>{i.deleteContent(i.document.selection)})),e.unlock()}io.isAndroid?s.document.on("beforeinput",((e,t)=>o(t)),{priority:"lowest"}):s.document.on("keydown",((e,t)=>o(t)),{priority:"lowest"}),s.document.on("compositionstart",(function(){const e=i.document,t=1!==e.selection.rangeCount||e.selection.getFirstRange().isFlat;e.selection.isCollapsed||t||r()}),{priority:"lowest"}),s.document.on("compositionend",(()=>{t=i.createSelection(i.document.selection)}),{priority:"lowest"})}(e),function(e){e.editing.view.document.on("mutations",((t,i,s)=>{new rm(e).handle(i,s)}))}(e)}isInput(e){return this.editor.commands.get("input")._batches.has(e)}}class hm extends pt{constructor(e,t){super(e),this.direction=t,this._buffer=new em(e.model,e.config.get("typing.undoStep"))}get buffer(){return this._buffer}execute(e={}){const t=this.editor.model,i=t.document;t.enqueueChange(this._buffer.batch,(s=>{this._buffer.lock();const n=s.createSelection(e.selection||i.selection),o=e.sequence||1,r=n.isCollapsed;if(n.isCollapsed&&t.modifySelection(n,{direction:this.direction,unit:e.unit}),this._shouldEntireContentBeReplacedWithParagraph(o))return void this._replaceEntireContentWithParagraph(s);if(this._shouldReplaceFirstBlockWithParagraph(n,o))return void this.editor.execute("paragraph",{selection:n});if(n.isCollapsed)return;let a=0;n.getFirstRange().getMinimalFlatRanges().forEach((e=>{a+=Ln(e.getWalker({singleCharacters:!0,ignoreElementEnd:!0,shallow:!0}))})),t.deleteContent(n,{doNotResetEntireContent:r,direction:this.direction}),this._buffer.input(a),s.setSelection(n),this._buffer.unlock()}))}_shouldEntireContentBeReplacedWithParagraph(e){if(e>1)return!1;const t=this.editor.model,i=t.document.selection,s=t.schema.getLimitElement(i);if(!i.isCollapsed||!i.containsEntireContent(s))return!1;if(!t.schema.checkChild(s,"paragraph"))return!1;const n=s.getChild(0);return!n||"paragraph"!==n.name}_replaceEntireContentWithParagraph(e){const t=this.editor.model,i=t.document.selection,s=t.schema.getLimitElement(i),n=e.createElement("paragraph");e.remove(e.createRangeIn(s)),e.insert(n,s),e.setSelection(n,0)}_shouldReplaceFirstBlockWithParagraph(e,t){const i=this.editor.model;if(t>1||"backward"!=this.direction)return!1;if(!e.isCollapsed)return!1;const s=e.getFirstPosition(),n=i.schema.getLimitElement(s),o=n.getChild(0);return s.parent==o&&!!e.containsEntireContent(o)&&!!i.schema.checkChild(n,"paragraph")&&"paragraph"!=o.name}}class dm extends cr{constructor(e){super(e);const t=e.document;let i=0;function s(e,i,s){const n=new qn(t,"delete",t.selection.getFirstRange());t.fire(n,new Rr(t,i,s)),n.stop.called&&e.stop()}t.on("keyup",((e,t)=>{t.keyCode!=oo.delete&&t.keyCode!=oo.backspace||(i=0)})),t.on("keydown",((e,t)=>{const n={};if(t.keyCode==oo.delete)n.direction="forward",n.unit="character";else{if(t.keyCode!=oo.backspace)return;n.direction="backward",n.unit="codePoint"}const o=io.isMac?t.altKey:t.ctrlKey;n.unit=o?"word":n.unit,n.sequence=++i,s(e,t.domEvent,n)})),io.isAndroid&&t.on("beforeinput",((t,i)=>{if("deleteContentBackward"!=i.domEvent.inputType)return;const n={unit:"codepoint",direction:"backward",sequence:1},o=i.domTarget.ownerDocument.defaultView.getSelection();o.anchorNode==o.focusNode&&o.anchorOffset+1!=o.focusOffset&&(n.selectionToRemove=e.domConverter.domSelectionToView(o)),s(t,i.domEvent,n)}))}observe(){}}class um extends ut{static get pluginName(){return"Delete"}init(){const e=this.editor,t=e.editing.view,i=t.document;t.addObserver(dm);const s=new hm(e,"forward");if(e.commands.add("deleteForward",s),e.commands.add("forwardDelete",s),e.commands.add("delete",new hm(e,"backward")),this.listenTo(i,"delete",((i,s)=>{const n={unit:s.unit,sequence:s.sequence};if(s.selectionToRemove){const t=e.model.createSelection(),i=[];for(const n of s.selectionToRemove.getRanges())i.push(e.editing.mapper.toModelRange(n));t.setTo(i),n.selection=t}e.execute("forward"==s.direction?"deleteForward":"delete",n),s.preventDefault(),t.scrollToTheSelection()}),{priority:"low"}),io.isAndroid){let e=null;this.listenTo(i,"delete",((t,i)=>{const s=i.domTarget.ownerDocument.defaultView.getSelection();e={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}}),{priority:"lowest"}),this.listenTo(i,"keyup",((t,i)=>{if(e){const t=i.domTarget.ownerDocument.defaultView.getSelection();t.collapse(e.anchorNode,e.anchorOffset),t.extend(e.focusNode,e.focusOffset),e=null}}))}}}class mm extends ut{static get requires(){return[cm,um]}static get pluginName(){return"Typing"}}function pm(e,t){let i=e.start;return{text:Array.from(e.getItems()).reduce(((e,s)=>s.is("$text")||s.is("$textProxy")?e+s.data:(i=t.createPositionAfter(s),"")),""),range:t.createRange(i,e.end)}}class fm{constructor(e,t){this.model=e,this.testCallback=t,this.hasMatch=!1,this.set("isEnabled",!0),this.on("change:isEnabled",(()=>{this.isEnabled?this._startListening():(this.stopListening(e.document.selection),this.stopListening(e.document))})),this._startListening()}_startListening(){const e=this.model.document;this.listenTo(e.selection,"change:range",((t,{directChange:i})=>{i&&(e.selection.isCollapsed?this._evaluateTextBeforeSelection("selection"):this.hasMatch&&(this.fire("unmatched"),this.hasMatch=!1))})),this.listenTo(e,"change:data",((e,t)=>{"transparent"!=t.type&&this._evaluateTextBeforeSelection("data",{batch:t})}))}_evaluateTextBeforeSelection(e,t={}){const i=this.model,s=i.document.selection,n=i.createRange(i.createPositionAt(s.focus.parent,0),s.focus),{text:o,range:r}=pm(n,i),a=this.testCallback(o);if(!a&&this.hasMatch&&this.fire("unmatched"),this.hasMatch=!!a,a){const i=Object.assign(t,{text:o,range:r});"object"==typeof a&&Object.assign(i,a),this.fire(`matched:${e}`,i)}}}dt(fm,ot);class gm extends ut{static get pluginName(){return"TwoStepCaretMovement"}constructor(e){super(e),this.attributes=new Set,this._overrideUid=null}init(){const e=this.editor,t=e.model,i=e.editing.view,s=e.locale,n=t.document.selection;this.listenTo(i.document,"arrowKey",((e,t)=>{if(!n.isCollapsed)return;if(t.shiftKey||t.altKey||t.ctrlKey)return;const i=t.keyCode==oo.arrowright,o=t.keyCode==oo.arrowleft;if(!i&&!o)return;const r=s.contentLanguageDirection;let a=!1;a="ltr"===r&&i||"rtl"===r&&o?this._handleForwardMovement(t):this._handleBackwardMovement(t),!0===a&&e.stop()}),{context:"$text",priority:"highest"}),this._isNextGravityRestorationSkipped=!1,this.listenTo(n,"change:range",((e,t)=>{this._isNextGravityRestorationSkipped?this._isNextGravityRestorationSkipped=!1:this._isGravityOverridden&&(!t.directChange&&ym(n.getFirstPosition(),this.attributes)||this._restoreGravity())}))}registerAttribute(e){this.attributes.add(e)}_handleForwardMovement(e){const t=this.attributes,i=this.editor.model.document.selection,s=i.getFirstPosition();return!this._isGravityOverridden&&(!s.isAtStart||!wm(i,t))&&(ym(s,t)?(vm(e),this._overrideGravity(),!0):void 0)}_handleBackwardMovement(e){const t=this.attributes,i=this.editor.model,s=i.document.selection,n=s.getFirstPosition();return this._isGravityOverridden?(vm(e),this._restoreGravity(),bm(i,t,n),!0):n.isAtStart?!!wm(s,t)&&(vm(e),bm(i,t,n),!0):function(e,t){return ym(e.getShiftedBy(-1),t)}(n,t)?n.isAtEnd&&!wm(s,t)&&ym(n,t)?(vm(e),bm(i,t,n),!0):(this._isNextGravityRestorationSkipped=!0,this._overrideGravity(),!1):void 0}get _isGravityOverridden(){return!!this._overrideUid}_overrideGravity(){this._overrideUid=this.editor.model.change((e=>e.overrideSelectionGravity()))}_restoreGravity(){this.editor.model.change((e=>{e.restoreSelectionGravity(this._overrideUid),this._overrideUid=null}))}}function wm(e,t){for(const i of t)if(e.hasAttribute(i))return!0;return!1}function bm(e,t,i){const s=i.nodeBefore;e.change((e=>{s?e.setSelectionAttribute(s.getAttributes()):e.removeSelectionAttribute(t)}))}function vm(e){e.preventDefault()}function ym(e,t){const{nodeBefore:i,nodeAfter:s}=e;for(const n of t){const e=i?i.getAttribute(n):void 0;if((s?s.getAttribute(n):void 0)!==e)return!0}return!1}var _m=/[\\^$.*+?()[\]{}|]/g,km=RegExp(_m.source);const Am=function(e){return(e=nn(e))&&km.test(e)?e.replace(_m,"\\$&"):e},xm={copyright:{from:"(c)",to:"\xa9"},registeredTrademark:{from:"(r)",to:"\xae"},trademark:{from:"(tm)",to:"\u2122"},oneHalf:{from:"1/2",to:"\xbd"},oneThird:{from:"1/3",to:"\u2153"},twoThirds:{from:"2/3",to:"\u2154"},oneForth:{from:"1/4",to:"\xbc"},threeQuarters:{from:"3/4",to:"\xbe"},lessThanOrEqual:{from:"<=",to:"\u2264"},greaterThanOrEqual:{from:">=",to:"\u2265"},notEqual:{from:"!=",to:"\u2260"},arrowLeft:{from:"<-",to:"\u2190"},arrowRight:{from:"->",to:"\u2192"},horizontalEllipsis:{from:"...",to:"\u2026"},enDash:{from:/(^| )(--)( )$/,to:[null,"\u2013",null]},emDash:{from:/(^| )(---)( )$/,to:[null,"\u2014",null]},quotesPrimary:{from:Om('"'),to:[null,"\u201c",null,"\u201d"]},quotesSecondary:{from:Om("'"),to:[null,"\u2018",null,"\u2019"]},quotesPrimaryEnGb:{from:Om("'"),to:[null,"\u2018",null,"\u2019"]},quotesSecondaryEnGb:{from:Om('"'),to:[null,"\u201c",null,"\u201d"]},quotesPrimaryPl:{from:Om('"'),to:[null,"\u201e",null,"\u201d"]},quotesSecondaryPl:{from:Om("'"),to:[null,"\u201a",null,"\u2019"]}},Cm={symbols:["copyright","registeredTrademark","trademark"],mathematical:["oneHalf","oneThird","twoThirds","oneForth","threeQuarters","lessThanOrEqual","greaterThanOrEqual","notEqual","arrowLeft","arrowRight"],typography:["horizontalEllipsis","enDash","emDash"],quotes:["quotesPrimary","quotesSecondary"]},Em=["symbols","mathematical","typography","quotes"];function Tm(e){return"string"==typeof e?new RegExp(`(${Am(e)})$`):e}function Sm(e){return"string"==typeof e?()=>[e]:e instanceof Array?()=>e:e}function Pm(e){return(e.textNode?e.textNode:e.nodeAfter).getAttributes()}function Om(e){return new RegExp(`(^|\\s)(${e})([^${e}]*)(${e})$`)}function Im(e,t,i,s){return s.createRange(Rm(e,t,i,!0,s),Rm(e,t,i,!1,s))}function Rm(e,t,i,s,n){let o=e.textNode||(s?e.nodeBefore:e.nodeAfter),r=null;for(;o&&o.getAttribute(t)==i;)r=o,o=s?o.previousSibling:o.nextSibling;return r?n.createPositionAt(r,s?"before":"after"):e}class zm extends pt{refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(e={}){const t=this.editor.model,i=t.schema,s=t.document.selection,n=Array.from(s.getSelectedBlocks()),o=void 0===e.forceValue?!this.value:e.forceValue;t.change((e=>{if(o){const t=n.filter((e=>Mm(e)||Dm(i,e)));this._applyQuote(e,t)}else this._removeQuote(e,n.filter(Mm))}))}_getValue(){const e=la(this.editor.model.document.selection.getSelectedBlocks());return!(!e||!Mm(e))}_checkEnabled(){if(this.value)return!0;const e=this.editor.model.document.selection,t=this.editor.model.schema,i=la(e.getSelectedBlocks());return!!i&&Dm(t,i)}_removeQuote(e,t){Nm(e,t).reverse().forEach((t=>{if(t.start.isAtStart&&t.end.isAtEnd)return void e.unwrap(t.start.parent);if(t.start.isAtStart){const i=e.createPositionBefore(t.start.parent);return void e.move(t,i)}t.end.isAtEnd||e.split(t.end);const i=e.createPositionAfter(t.end.parent);e.move(t,i)}))}_applyQuote(e,t){const i=[];Nm(e,t).reverse().forEach((t=>{let s=Mm(t.start);s||(s=e.createElement("blockQuote"),e.wrap(t,s)),i.push(s)})),i.reverse().reduce(((t,i)=>t.nextSibling==i?(e.merge(e.createPositionAfter(t)),t):i))}}function Mm(e){return"blockQuote"==e.parent.name?e.parent:null}function Nm(e,t){let i,s=0;const n=[];for(;s<t.length;){const o=t[s],r=t[s+1];i||(i=e.createPositionBefore(o)),r&&o.nextSibling==r||(n.push(e.createRange(i,e.createPositionAfter(o))),i=null),s++}return n}function Dm(e,t){const i=e.checkChild(t.parent,"blockQuote"),s=e.checkChild(["$root","blockQuote"],t);return i&&s}class Vm extends ut{static get pluginName(){return"BlockQuoteEditing"}static get requires(){return[Ku,um]}init(){const e=this.editor,t=e.model.schema;e.commands.add("blockQuote",new zm(e)),t.register("blockQuote",{allowWhere:"$block",allowContentOf:"$root"}),e.conversion.elementToElement({model:"blockQuote",view:"blockquote"}),e.model.document.registerPostFixer((i=>{const s=e.model.document.differ.getChanges();for(const e of s)if("insert"==e.type){const s=e.position.nodeAfter;if(!s)continue;if(s.is("element","blockQuote")&&s.isEmpty)return i.remove(s),!0;if(s.is("element","blockQuote")&&!t.checkChild(e.position,s))return i.unwrap(s),!0;if(s.is("element")){const e=i.createRangeIn(s);for(const s of e.getItems())if(s.is("element","blockQuote")&&!t.checkChild(i.createPositionBefore(s),s))return i.unwrap(s),!0}}else if("remove"==e.type){const t=e.position.parent;if(t.is("element","blockQuote")&&t.isEmpty)return i.remove(t),!0}return!1}));const i=this.editor.editing.view.document,s=e.model.document.selection,n=e.commands.get("blockQuote");this.listenTo(i,"enter",((t,i)=>{s.isCollapsed&&n.value&&s.getLastPosition().parent.isEmpty&&(e.execute("blockQuote"),e.editing.view.scrollToTheSelection(),i.preventDefault(),t.stop())}),{context:"blockquote"}),this.listenTo(i,"delete",((t,i)=>{if("backward"!=i.direction||!s.isCollapsed||!n.value)return;const o=s.getLastPosition().parent;o.isEmpty&&!o.previousSibling&&(e.execute("blockQuote"),e.editing.view.scrollToTheSelection(),i.preventDefault(),t.stop())}),{context:"blockquote"})}}class Bm extends ut{static get pluginName(){return"BlockQuoteUI"}init(){const e=this.editor,t=e.t;e.ui.componentFactory.add("blockQuote",(i=>{const s=e.commands.get("blockQuote"),n=new Rd(i);return n.set({label:t("Block quote"),icon:rh.quote,tooltip:!0,isToggleable:!0}),n.bind("isOn","isEnabled").to(s,"value","isEnabled"),this.listenTo(n,"execute",(()=>{e.execute("blockQuote"),e.editing.view.focus()})),n}))}}class Lm extends sh{constructor(e,t){super(e),this.view=t}init(){const e=this.editor,t=this.view,i=e.editing.view,s=t.editable,n=i.document.getRoot();t.editable.name=n.rootName,t.render();const o=s.element;this.setEditableElement(s.name,o),this.focusTracker.add(o),t.editable.bind("isFocused").to(this.focusTracker),i.attachDomRoot(o),this._initPlaceholder(),this._initToolbar(),this.fire("ready")}destroy(){const e=this.view;this.editor.editing.view.detachDomRoot(e.editable.name),e.destroy(),super.destroy()}_initToolbar(){const e=this.editor,t=this.view.toolbar;t.fillFromConfig(e.config.get("toolbar"),this.componentFactory),function({origin:e,originKeystrokeHandler:t,originFocusTracker:i,toolbar:s,beforeFocus:n,afterBlur:o}){i.add(s.element),t.set("Alt+F10",((e,t)=>{i.isFocused&&!s.focusTracker.isFocused&&(n&&n(),s.focus(),t())})),s.keystrokes.set("Esc",((t,i)=>{s.focusTracker.isFocused&&(e.focus(),o&&o(),i())}))}({origin:e.editing.view,originFocusTracker:this.focusTracker,originKeystrokeHandler:e.keystrokes,toolbar:t})}_initPlaceholder(){const e=this.editor,t=e.editing.view,i=t.document.getRoot(),s=e.sourceElement,n=e.config.get("placeholder")||s&&"textarea"===s.tagName.toLowerCase()&&s.getAttribute("placeholder");n&&lh({view:t,element:i,text:n,isDirectHost:!1,keepOnFocus:!0})}}class Fm extends ru{constructor(e,t,i={}){super(e),this.toolbar=new Jd(e,{shouldGroupWhenFull:i.shouldToolbarGroupWhenFull}),this.editable=new cu(e,t,i.editableElement),this.toolbar.extendTemplate({attributes:{class:["ck-reset_all","ck-rounded-corners"],dir:e.uiLanguageDirection}})}render(){super.render(),this.registerChild([this.toolbar,this.editable])}}class jm extends eh{constructor(e,t){super(t),_s(e)&&(this.sourceElement=e,function(e){const t=e.sourceElement;if(t){if(t.ckeditorInstance)throw new h("editor-source-element-already-used",e);t.ckeditorInstance=e,e.once("destroy",(()=>{delete t.ckeditorInstance}))}}(this)),this.model.document.createRoot();const i=!this.config.get("toolbar.shouldNotGroupWhenFull"),s=new Fm(this.locale,this.editing.view,{editableElement:this.sourceElement,shouldToolbarGroupWhenFull:i});this.ui=new Lm(this,s)}destroy(){const e=this.getData();return this.ui.destroy(),super.destroy().then((()=>{this.sourceElement&&aa(this.sourceElement,e)}))}static create(e,t={}){return new Promise((i=>{const s=_s(e);if(s&&"TEXTAREA"===e.tagName)throw new h("editor-wrong-element",null);const n=new this(e,t);i(n.initPlugins().then((()=>{n.ui.init()})).then((()=>{if(!s&&t.initialData)throw new h("editor-create-initial-data",null);const i=void 0!==t.initialData?t.initialData:function(e){return _s(e)?(t=e)instanceof HTMLTextAreaElement?t.value:t.innerHTML:e;var t}(e);return n.data.init(i)})).then((()=>n.fire("ready"))).then((()=>n)))}))}}dt(jm,nh);class qm{constructor(e){this.files=function(e){const t=Array.from(e.files||[]),i=Array.from(e.items||[]);return t.length?t:i.filter((e=>"file"===e.kind)).map((e=>e.getAsFile()))}(e),this._native=e}get types(){return this._native.types}getData(e){return this._native.getData(e)}setData(e,t){this._native.setData(e,t)}set effectAllowed(e){this._native.effectAllowed=e}get effectAllowed(){return this._native.effectAllowed}set dropEffect(e){this._native.dropEffect=e}get dropEffect(){return this._native.dropEffect}get isCanceled(){return"none"==this._native.dropEffect||!!this._native.mozUserCancelled}}class Hm extends zr{constructor(e){super(e);const t=this.document;function i(e){return(i,s)=>{s.preventDefault();const o=s.dropRange?[s.dropRange]:null,r=new n(t,e);t.fire(r,{dataTransfer:s.dataTransfer,method:i.name,targetRanges:o,target:s.target}),r.stop.called&&s.stopPropagation()}}this.domEventType=["paste","copy","cut","drop","dragover","dragstart","dragend","dragenter","dragleave"],this.listenTo(t,"paste",i("clipboardInput"),{priority:"low"}),this.listenTo(t,"drop",i("clipboardInput"),{priority:"low"}),this.listenTo(t,"dragover",i("dragging"),{priority:"low"})}onDomEvent(e){const t={dataTransfer:new qm(e.clipboardData?e.clipboardData:e.dataTransfer)};"drop"!=e.type&&"dragover"!=e.type||(t.dropRange=function(e,t){const i=t.target.ownerDocument,s=t.clientX,n=t.clientY;let o;return i.caretRangeFromPoint&&i.caretRangeFromPoint(s,n)?o=i.caretRangeFromPoint(s,n):t.rangeParent&&(o=i.createRange(),o.setStart(t.rangeParent,t.rangeOffset),o.collapse(!0)),o?e.domConverter.domRangeToView(o):null}(this.view,e)),this.fire(e.type,e,t)}}const $m=["figcaption","li"];function Um(e){let t="";if(e.is("$text")||e.is("$textProxy"))t=e.data;else if(e.is("element","img")&&e.hasAttribute("alt"))t=e.getAttribute("alt");else if(e.is("element","br"))t="\n";else{let i=null;for(const s of e.getChildren()){const e=Um(s);i&&(i.is("containerElement")||s.is("containerElement"))&&($m.includes(i.name)||$m.includes(s.name)?t+="\n":t+="\n\n"),t+=e,i=s}}return t}class Wm extends ut{static get pluginName(){return"ClipboardPipeline"}init(){this.editor.editing.view.addObserver(Hm),this._setupPasteDrop(),this._setupCopyCut()}_setupPasteDrop(){const e=this.editor,t=e.model,i=e.editing.view,s=i.document;this.listenTo(s,"clipboardInput",(t=>{e.isReadOnly&&t.stop()}),{priority:"highest"}),this.listenTo(s,"clipboardInput",((e,t)=>{const s=t.dataTransfer;let o=t.content||"";var r;o||(s.getData("text/html")?o=function(e){return e.replace(/<span(?: class="Apple-converted-space"|)>(\s+)<\/span>/g,((e,t)=>1==t.length?" ":t)).replace(/<!--[\s\S]*?-->/g,"")}(s.getData("text/html")):s.getData("text/plain")&&(((r=(r=s.getData("text/plain")).replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r?\n\r?\n/g,"</p><p>").replace(/\r?\n/g,"<br>").replace(/^\s/,"&nbsp;").replace(/\s$/,"&nbsp;").replace(/\s\s/g," &nbsp;")).includes("</p><p>")||r.includes("<br>"))&&(r=`<p>${r}</p>`),o=r),o=this.editor.data.htmlProcessor.toView(o));const a=new n(this,"inputTransformation");this.fire(a,{content:o,dataTransfer:s,targetRanges:t.targetRanges,method:t.method}),a.stop.called&&e.stop(),i.scrollToTheSelection()}),{priority:"low"}),this.listenTo(this,"inputTransformation",((e,i)=>{if(i.content.isEmpty)return;const s=this.editor.data.toModel(i.content,"$clipboardHolder");0!=s.childCount&&(e.stop(),t.change((()=>{this.fire("contentInsertion",{content:s,method:i.method,dataTransfer:i.dataTransfer,targetRanges:i.targetRanges})})))}),{priority:"low"}),this.listenTo(this,"contentInsertion",((e,i)=>{i.resultRange=t.insertContent(i.content)}),{priority:"low"})}_setupCopyCut(){const e=this.editor,t=e.model.document,i=e.editing.view.document;function s(s,n){const o=n.dataTransfer;n.preventDefault();const r=e.data.toView(e.model.getSelectedContent(t.selection));i.fire("clipboardOutput",{dataTransfer:o,content:r,method:s.name})}this.listenTo(i,"copy",s,{priority:"low"}),this.listenTo(i,"cut",((t,i)=>{e.isReadOnly?i.preventDefault():s(t,i)}),{priority:"low"}),this.listenTo(i,"clipboardOutput",((i,s)=>{s.content.isEmpty||(s.dataTransfer.setData("text/html",this.editor.data.htmlProcessor.toData(s.content)),s.dataTransfer.setData("text/plain",Um(s.content))),"cut"==s.method&&e.model.deleteContent(t.selection)}),{priority:"low"})}}class Zm{constructor(){this._stack=[]}add(e,t){const i=this._stack,s=i[0];this._insertDescriptor(e);const n=i[0];s===n||Gm(s,n)||this.fire("change:top",{oldDescriptor:s,newDescriptor:n,writer:t})}remove(e,t){const i=this._stack,s=i[0];this._removeDescriptor(e);const n=i[0];s===n||Gm(s,n)||this.fire("change:top",{oldDescriptor:s,newDescriptor:n,writer:t})}_insertDescriptor(e){const t=this._stack,i=t.findIndex((t=>t.id===e.id));if(Gm(e,t[i]))return;i>-1&&t.splice(i,1);let s=0;for(;t[s]&&Km(t[s],e);)s++;t.splice(s,0,e)}_removeDescriptor(e){const t=this._stack,i=t.findIndex((t=>t.id===e));i>-1&&t.splice(i,1)}}function Gm(e,t){return e&&t&&e.priority==t.priority&&Jm(e.classes)==Jm(t.classes)}function Km(e,t){return e.priority>t.priority||!(e.priority<t.priority)&&Jm(e.classes)>Jm(t.classes)}function Jm(e){return Array.isArray(e)?e.sort().join(","):e}dt(Zm,b);const Ym='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M4 0v1H1v3H0V.5A.5.5 0 0 1 .5 0H4zm8 0h3.5a.5.5 0 0 1 .5.5V4h-1V1h-3V0zM4 16H.5a.5.5 0 0 1-.5-.5V12h1v3h3v1zm8 0v-1h3v-3h1v3.5a.5.5 0 0 1-.5.5H12z"/><path fill-opacity=".256" d="M1 1h14v14H1z"/><g class="ck-icon__selected-indicator"><path d="M7 0h2v1H7V0zM0 7h1v2H0V7zm15 0h1v2h-1V7zm-8 8h2v1H7v-1z"/><path fill-opacity=".254" d="M1 1h14v14H1z"/></g></svg>',Qm="ck-widget_selected";function Xm(e){return!!e.is("element")&&!!e.getCustomProperty("widget")}function ep(e,t,i={}){if(!e.is("containerElement"))throw new h("widget-to-widget-wrong-element-type",null,{element:e});return t.setAttribute("contenteditable","false",e),t.addClass("ck-widget",e),t.setCustomProperty("widget",!0,e),e.getFillerOffset=lp,i.label&&function(e,t,i){i.setCustomProperty("widgetLabel",t,e)}(e,i.label,t),i.hasSelectionHandle&&function(e,t){const i=t.createUIElement("div",{class:"ck ck-widget__selection-handle"},(function(e){const t=this.toDomElement(e),i=new Od;return i.set("content",Ym),i.render(),t.appendChild(i.element),t}));t.insert(t.createPositionAt(e,0),i),t.addClass(["ck-widget_with-selection-handle"],e)}(e,t),sp(e,t,tp,ip),e}function tp(e,t,i){if(t.classes&&i.addClass(Ss(t.classes),e),t.attributes)for(const s in t.attributes)i.setAttribute(s,t.attributes[s],e)}function ip(e,t,i){if(t.classes&&i.removeClass(Ss(t.classes),e),t.attributes)for(const s in t.attributes)i.removeAttribute(s,e)}function sp(e,t,i,s){const n=new Zm;n.on("change:top",((t,n)=>{n.oldDescriptor&&s(e,n.oldDescriptor,n.writer),n.newDescriptor&&i(e,n.newDescriptor,n.writer)})),t.setCustomProperty("addHighlight",((e,t,i)=>n.add(t,i)),e),t.setCustomProperty("removeHighlight",((e,t,i)=>n.remove(t,i)),e)}function np(e){const t=e.getCustomProperty("widgetLabel");return t?"function"==typeof t?t():t:""}function op(e,t){return t.addClass(["ck-editor__editable","ck-editor__nested-editable"],e),t.setAttribute("contenteditable",e.isReadOnly?"false":"true",e),e.on("change:isReadOnly",((i,s,n)=>{t.setAttribute("contenteditable",n?"false":"true",e)})),e.on("change:isFocused",((i,s,n)=>{n?t.addClass("ck-editor__nested-editable_focused",e):t.removeClass("ck-editor__nested-editable_focused",e)})),e}function rp(e,t){const i=e.getSelectedElement();if(i){const s=dp(e);if(s)return t.createRange(t.createPositionAt(i,s));if(t.schema.isObject(i)&&!t.schema.isInline(i))return t.createRangeOn(i)}const s=e.getSelectedBlocks().next().value;if(s){if(s.isEmpty)return t.createRange(t.createPositionAt(s,0));const i=t.createPositionAfter(s);return e.focus.isTouching(i)?t.createRange(i):t.createRange(t.createPositionBefore(s))}return t.createRange(e.focus)}function ap(e,t){const i=new ia(Jo.window),s=i.getIntersection(e),n=t.height+bu.arrowVerticalOffset;if(e.top-n>i.top||e.bottom+n<i.bottom)return null;const o=s||e,r=o.left+o.width/2-t.width/2;return{top:Math.max(e.top,0)+bu.arrowVerticalOffset,left:r,name:"arrow_n"}}function lp(){return null}const cp="widget-type-around";function hp(e,t,i){return e&&Xm(e)&&!i.isInline(t)}function dp(e){return e.getAttribute(cp)}const up=["before","after"],mp=(new DOMParser).parseFromString('<svg viewBox="0 0 10 8" xmlns="http://www.w3.org/2000/svg"><path d="M9.055.263v3.972h-6.77M1 4.216l2-2.038m-2 2 2 2.038"/></svg>',"image/svg+xml").firstChild,pp="ck-widget__type-around_disabled";class fp extends ut{static get pluginName(){return"WidgetTypeAround"}static get requires(){return[Ku,um]}constructor(e){super(e),this._currentFakeCaretModelElement=null}init(){const e=this.editor,t=e.editing.view;this.on("change:isEnabled",((i,s,n)=>{t.change((e=>{for(const i of t.document.roots)n?e.removeClass(pp,i):e.addClass(pp,i)})),n||e.model.change((e=>{e.removeSelectionAttribute(cp)}))})),this._enableTypeAroundUIInjection(),this._enableInsertingParagraphsOnButtonClick(),this._enableInsertingParagraphsOnEnterKeypress(),this._enableInsertingParagraphsOnTypingKeystroke(),this._enableTypeAroundFakeCaretActivationUsingKeyboardArrows(),this._enableDeleteIntegration(),this._enableInsertContentIntegration(),this._enableDeleteContentIntegration()}destroy(){this._currentFakeCaretModelElement=null}_insertParagraph(e,t){const i=this.editor,s=i.editing.view;i.execute("insertParagraph",{position:i.model.createPositionAt(e,t)}),s.focus(),s.scrollToTheSelection()}_listenToIfEnabled(e,t,i,s){this.listenTo(e,t,((...e)=>{this.isEnabled&&i(...e)}),s)}_insertParagraphAccordingToFakeCaretPosition(){const e=this.editor.model.document.selection,t=dp(e);if(!t)return!1;const i=e.getSelectedElement();return this._insertParagraph(i,t),!0}_enableTypeAroundUIInjection(){const e=this.editor,t=e.model.schema,i=e.locale.t,s={before:i("Insert paragraph before block"),after:i("Insert paragraph after block")};e.editing.downcastDispatcher.on("insert",((e,i,n)=>{const o=n.mapper.toViewElement(i.item);hp(o,i.item,t)&&function(e,t,i){const s=e.createUIElement("div",{class:"ck ck-reset_all ck-widget__type-around"},(function(e){const i=this.toDomElement(e);return function(e,t){for(const i of up){const s=new ld({tag:"div",attributes:{class:["ck","ck-widget__type-around__button",`ck-widget__type-around__button_${i}`],title:t[i]},children:[e.ownerDocument.importNode(mp,!0)]});e.appendChild(s.render())}}(i,t),function(e){const t=new ld({tag:"div",attributes:{class:["ck","ck-widget__type-around__fake-caret"]}});e.appendChild(t.render())}(i),i}));e.insert(e.createPositionAt(i,"end"),s)}(n.writer,s,o)}),{priority:"low"})}_enableTypeAroundFakeCaretActivationUsingKeyboardArrows(){const e=this.editor,t=e.model,i=t.document.selection,s=t.schema,n=e.editing.view;function o(e){return`ck-widget_type-around_show-fake-caret_${e}`}this._listenToIfEnabled(n.document,"arrowKey",((e,t)=>{this._handleArrowKeyPress(e,t)}),{context:[Xm,"$text"],priority:"high"}),this._listenToIfEnabled(i,"change:range",((t,i)=>{i.directChange&&e.model.change((e=>{e.removeSelectionAttribute(cp)}))})),this._listenToIfEnabled(t.document,"change:data",(()=>{const t=i.getSelectedElement();t&&hp(e.editing.mapper.toViewElement(t),t,s)||e.model.change((e=>{e.removeSelectionAttribute(cp)}))})),this._listenToIfEnabled(e.editing.downcastDispatcher,"selection",((e,t,i)=>{const n=i.writer;if(this._currentFakeCaretModelElement){const e=i.mapper.toViewElement(this._currentFakeCaretModelElement);e&&(n.removeClass(up.map(o),e),this._currentFakeCaretModelElement=null)}const r=t.selection.getSelectedElement();if(!r)return;const a=i.mapper.toViewElement(r);if(!hp(a,r,s))return;const l=dp(t.selection);l&&(n.addClass(o(l),a),this._currentFakeCaretModelElement=r)})),this._listenToIfEnabled(e.ui.focusTracker,"change:isFocused",((t,i,s)=>{s||e.model.change((e=>{e.removeSelectionAttribute(cp)}))}))}_handleArrowKeyPress(e,t){const i=this.editor,s=i.model,n=s.document.selection,o=s.schema,r=i.editing.view,a=uo(t.keyCode,i.locale.contentLanguageDirection),l=r.document.selection.getSelectedElement();let c;hp(l,i.editing.mapper.toModelElement(l),o)?c=this._handleArrowKeyPressOnSelectedWidget(a):n.isCollapsed&&(c=this._handleArrowKeyPressWhenSelectionNextToAWidget(a)),c&&(t.preventDefault(),e.stop())}_handleArrowKeyPressOnSelectedWidget(e){const t=this.editor.model,i=dp(t.document.selection);return t.change((t=>i?i!==(e?"after":"before")&&(t.removeSelectionAttribute(cp),!0):(t.setSelectionAttribute(cp,e?"after":"before"),!0)))}_handleArrowKeyPressWhenSelectionNextToAWidget(e){const t=this.editor,i=t.model,s=i.schema,n=t.plugins.get("Widget"),o=n._getObjectElementNextToSelection(e);return!!hp(t.editing.mapper.toViewElement(o),o,s)&&(i.change((t=>{n._setSelectionOverElement(o),t.setSelectionAttribute(cp,e?"before":"after")})),!0)}_enableInsertingParagraphsOnButtonClick(){const e=this.editor,t=e.editing.view;this._listenToIfEnabled(t.document,"mousedown",((i,s)=>{const n=s.domTarget.closest(".ck-widget__type-around__button");if(!n)return;const o=function(e){return e.classList.contains("ck-widget__type-around__button_before")?"before":"after"}(n),r=function(e,t){const i=e.closest(".ck-widget");return t.mapDomToView(i)}(n,t.domConverter),a=e.editing.mapper.toModelElement(r);this._insertParagraph(a,o),s.preventDefault(),i.stop()}))}_enableInsertingParagraphsOnEnterKeypress(){const e=this.editor,t=e.model.document.selection,i=e.editing.view;this._listenToIfEnabled(i.document,"enter",((i,s)=>{if("atTarget"!=i.eventPhase)return;const n=t.getSelectedElement(),o=e.editing.mapper.toViewElement(n),r=e.model.schema;let a;this._insertParagraphAccordingToFakeCaretPosition()?a=!0:hp(o,n,r)&&(this._insertParagraph(n,s.isSoft?"before":"after"),a=!0),a&&(s.preventDefault(),i.stop())}),{context:Xm})}_enableInsertingParagraphsOnTypingKeystroke(){const e=this.editor.editing.view,t=[oo.enter,oo.delete,oo.backspace];this._listenToIfEnabled(e.document,"keydown",((e,i)=>{t.includes(i.keyCode)||sm(i)||this._insertParagraphAccordingToFakeCaretPosition()}),{priority:"high"})}_enableDeleteIntegration(){const e=this.editor,t=e.editing.view,i=e.model,s=i.schema;this._listenToIfEnabled(t.document,"delete",((t,n)=>{if("atTarget"!=t.eventPhase)return;const o=dp(i.document.selection);if(!o)return;const r=n.direction,a=i.document.selection.getSelectedElement(),l="forward"==r;if("before"===o===l)e.execute("delete",{selection:i.createSelection(a,"on")});else{const t=s.getNearestSelectionRange(i.createPositionAt(a,o),r);if(t)if(t.isCollapsed){const n=i.createSelection(t.start);if(i.modifySelection(n,{direction:r}),n.focus.isEqual(t.start)){const e=function(e,t){let i=t;for(const s of t.getAncestors({parentFirst:!0})){if(s.childCount>1||e.isLimit(s))break;i=s}return i}(s,t.start.parent);i.deleteContent(i.createSelection(e,"on"),{doNotAutoparagraph:!0})}else i.change((i=>{i.setSelection(t),e.execute(l?"deleteForward":"delete")}))}else i.change((i=>{i.setSelection(t),e.execute(l?"deleteForward":"delete")}))}n.preventDefault(),t.stop()}),{context:Xm})}_enableInsertContentIntegration(){const e=this.editor,t=this.editor.model,i=t.document.selection;this._listenToIfEnabled(e.model,"insertContent",((e,[s,n])=>{if(n&&!n.is("documentSelection"))return;const o=dp(i);return o?(e.stop(),t.change((e=>{const n=i.getSelectedElement(),r=t.createPositionAt(n,o),a=e.createSelection(r),l=t.insertContent(s,a);return e.setSelection(a),l}))):void 0}),{priority:"high"})}_enableDeleteContentIntegration(){const e=this.editor,t=this.editor.model.document.selection;this._listenToIfEnabled(e.model,"deleteContent",((e,[i])=>{i&&!i.is("documentSelection")||dp(t)&&e.stop()}),{priority:"high"})}}function gp(e){const t=e.model;return(i,s)=>{const n=s.keyCode==oo.arrowup,o=s.keyCode==oo.arrowdown,r=s.shiftKey,a=t.document.selection;if(!n&&!o)return;const l=o;if(r&&function(e,t){return!e.isCollapsed&&e.isBackward==t}(a,l))return;const c=function(e,t,i){const s=e.model;if(i){const e=t.isCollapsed?t.focus:t.getLastPosition(),i=wp(s,e,"forward");if(!i)return null;const n=s.createRange(e,i),o=bp(s.schema,n,"backward");return o&&e.isBefore(o)?s.createRange(e,o):null}{const e=t.isCollapsed?t.focus:t.getFirstPosition(),i=wp(s,e,"backward");if(!i)return null;const n=s.createRange(i,e),o=bp(s.schema,n,"forward");return o&&e.isAfter(o)?s.createRange(o,e):null}}(e,a,l);c&&!c.isCollapsed&&function(e,t,i){const s=e.model,n=e.view.domConverter;if(i){const e=s.createSelection(t.start);s.modifySelection(e),e.focus.isAtEnd||t.start.isEqual(e.focus)||(t=s.createRange(e.focus,t.end))}const o=e.mapper.toViewRange(t),r=n.viewRangeToDom(o),a=ia.getDomRangeRects(r);let l;for(const c of a)if(void 0!==l){if(Math.round(c.top)>=l)return!1;l=Math.max(l,Math.round(c.bottom))}else l=Math.round(c.bottom);return!0}(e,c,l)&&(t.change((e=>{const i=l?c.end:c.start;if(r){const s=t.createSelection(a.anchor);s.setFocus(i),e.setSelection(s)}else e.setSelection(i)})),i.stop(),s.preventDefault(),s.stopPropagation())}}function wp(e,t,i){const s=e.schema,n=e.createRangeIn(t.root),o="forward"==i?"elementStart":"elementEnd";for(const{previousPosition:r,item:a,type:l}of n.getWalker({startPosition:t,direction:i})){if(s.isLimit(a)&&!s.isInline(a))return r;if(l==o&&s.isBlock(a))return null}return null}function bp(e,t,i){const s="backward"==i?t.end:t.start;if(e.checkChild(s,"$text"))return s;for(const{nextPosition:n}of t.getWalker({direction:i}))if(e.checkChild(n,"$text"))return n}class vp extends ut{static get pluginName(){return"Widget"}static get requires(){return[fp,um]}init(){const e=this.editor,t=e.editing.view,i=t.document;this._previouslySelected=new Set,this.editor.editing.downcastDispatcher.on("selection",((t,i,s)=>{const n=s.writer,o=i.selection;if(o.isCollapsed)return;const r=o.getSelectedElement();if(!r)return;const a=e.editing.mapper.toViewElement(r);Xm(a)&&s.consumable.consume(o,"selection")&&n.setSelection(n.createRangeOn(a),{fake:!0,label:np(a)})})),this.editor.editing.downcastDispatcher.on("selection",((e,t,i)=>{this._clearPreviouslySelectedWidgets(i.writer);const s=i.writer,n=s.document.selection;let o=null;for(const r of n.getRanges())for(const e of r){const t=e.item;Xm(t)&&!yp(t,o)&&(s.addClass(Qm,t),this._previouslySelected.add(t),o=t)}}),{priority:"low"}),t.addObserver(Ch),this.listenTo(i,"mousedown",((...e)=>this._onMousedown(...e))),this.listenTo(i,"arrowKey",((...e)=>{this._handleSelectionChangeOnArrowKeyPress(...e)}),{context:[Xm,"$text"]}),this.listenTo(i,"arrowKey",((...e)=>{this._preventDefaultOnArrowKeyPress(...e)}),{context:"$root"}),this.listenTo(i,"arrowKey",gp(this.editor.editing),{context:"$text"}),this.listenTo(i,"delete",((e,t)=>{this._handleDelete("forward"==t.direction)&&(t.preventDefault(),e.stop())}),{context:"$root"})}_onMousedown(e,t){const i=this.editor,s=i.editing.view,n=s.document;let o=t.target;if(function(e){for(;e;){if(e.is("editableElement")&&!e.is("rootElement"))return!0;if(Xm(e))return!1;e=e.parent}return!1}(o)){if((io.isSafari||io.isGecko)&&t.domEvent.detail>=3){const e=i.editing.mapper,s=o.is("attributeElement")?o.findAncestor((e=>!e.is("attributeElement"))):o,n=e.toModelElement(s);t.preventDefault(),this.editor.model.change((e=>{e.setSelection(n,"in")}))}return}if(!Xm(o)&&(o=o.findAncestor(Xm),!o))return;io.isAndroid&&t.preventDefault(),n.isFocused||s.focus();const r=i.editing.mapper.toModelElement(o);this._setSelectionOverElement(r)}_handleSelectionChangeOnArrowKeyPress(e,t){const i=t.keyCode,s=this.editor.model,n=s.schema,o=s.document.selection,r=o.getSelectedElement(),a=uo(i,this.editor.locale.contentLanguageDirection);if(r&&n.isObject(r)){const i=a?o.getLastPosition():o.getFirstPosition(),r=n.getNearestSelectionRange(i,a?"forward":"backward");return void(r&&(s.change((e=>{e.setSelection(r)})),t.preventDefault(),e.stop()))}if(!o.isCollapsed)return;const l=this._getObjectElementNextToSelection(a);l&&n.isObject(l)&&(this._setSelectionOverElement(l),t.preventDefault(),e.stop())}_preventDefaultOnArrowKeyPress(e,t){const i=this.editor.model,s=i.schema,n=i.document.selection.getSelectedElement();n&&s.isObject(n)&&(t.preventDefault(),e.stop())}_handleDelete(e){if(this.editor.isReadOnly)return;const t=this.editor.model.document.selection;if(!t.isCollapsed)return;const i=this._getObjectElementNextToSelection(e);return i?(this.editor.model.change((e=>{let s=t.anchor.parent;for(;s.isEmpty;){const t=s;s=t.parent,e.remove(t)}this._setSelectionOverElement(i)})),!0):void 0}_setSelectionOverElement(e){this.editor.model.change((t=>{t.setSelection(t.createRangeOn(e))}))}_getObjectElementNextToSelection(e){const t=this.editor.model,i=t.schema,s=t.document.selection,n=t.createSelection(s);t.modifySelection(n,{direction:e?"forward":"backward"});const o=e?n.focus.nodeBefore:n.focus.nodeAfter;return o&&i.isObject(o)?o:null}_clearPreviouslySelectedWidgets(e){for(const t of this._previouslySelected)e.removeClass(Qm,t);this._previouslySelected.clear()}}function yp(e,t){return!!t&&Array.from(e.getAncestors()).includes(t)}const _p=function(e,t,i){var s=!0,n=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return E(i)&&(s="leading"in i?!!i.leading:s,n="trailing"in i?!!i.trailing:n),Zr(e,t,{leading:s,maxWait:t,trailing:n})};class kp extends ut{static get pluginName(){return"DragDrop"}static get requires(){return[Wm,vp]}init(){const e=this.editor,t=e.editing.view;this._draggedRange=null,this._draggingUid="",this._draggableElement=null,this._updateDropMarkerThrottled=_p((e=>this._updateDropMarker(e)),40),this._removeDropMarkerDelayed=Cp((()=>this._removeDropMarker()),40),this._clearDraggableAttributesDelayed=Cp((()=>this._clearDraggableAttributes()),40),t.addObserver(Hm),t.addObserver(Ch),this._setupDragging(),this._setupContentInsertionIntegration(),this._setupClipboardInputIntegration(),this._setupDropMarker(),this._setupDraggableAttributeHandling(),this.listenTo(e,"change:isReadOnly",((e,t,i)=>{i?this.forceDisabled("readOnlyMode"):this.clearForceDisabled("readOnlyMode")})),this.on("change:isEnabled",((e,t,i)=>{i||this._finalizeDragging(!1)})),io.isAndroid&&this.forceDisabled("noAndroidSupport")}destroy(){return this._draggedRange&&(this._draggedRange.detach(),this._draggedRange=null),this._updateDropMarkerThrottled.cancel(),this._removeDropMarkerDelayed.cancel(),this._clearDraggableAttributesDelayed.cancel(),super.destroy()}_setupDragging(){const e=this.editor,t=e.model,i=t.document,s=e.editing.view,n=s.document;this.listenTo(n,"dragstart",((s,o)=>{const a=i.selection;if(o.target&&o.target.is("editableElement"))return void o.preventDefault();const l=o.target?Ep(o.target):null;if(l){const i=e.editing.mapper.toModelElement(l);this._draggedRange=Za.fromRange(t.createRangeOn(i)),e.plugins.has("WidgetToolbarRepository")&&e.plugins.get("WidgetToolbarRepository").forceDisabled("dragDrop")}else if(!n.selection.isCollapsed){const e=n.selection.getSelectedElement();e&&Xm(e)||(this._draggedRange=Za.fromRange(a.getFirstRange()))}if(!this._draggedRange)return void o.preventDefault();this._draggingUid=r(),o.dataTransfer.effectAllowed=this.isEnabled?"copyMove":"copy",o.dataTransfer.setData("application/ckeditor5-dragging-uid",this._draggingUid);const c=t.createSelection(this._draggedRange.toRange()),h=e.data.toView(t.getSelectedContent(c));n.fire("clipboardOutput",{dataTransfer:o.dataTransfer,content:h,method:s.name}),this.isEnabled||(this._draggedRange.detach(),this._draggedRange=null,this._draggingUid="")}),{priority:"low"}),this.listenTo(n,"dragend",((e,t)=>{this._finalizeDragging(!t.dataTransfer.isCanceled&&"move"==t.dataTransfer.dropEffect)}),{priority:"low"}),this.listenTo(n,"dragenter",(()=>{this.isEnabled&&s.focus()})),this.listenTo(n,"dragleave",(()=>{this._removeDropMarkerDelayed()})),this.listenTo(n,"dragging",((t,i)=>{if(!this.isEnabled)return void(i.dataTransfer.dropEffect="none");this._removeDropMarkerDelayed.cancel();const s=Ap(e,i.targetRanges,i.target);this._draggedRange||(i.dataTransfer.dropEffect="copy"),io.isGecko||("copy"==i.dataTransfer.effectAllowed?i.dataTransfer.dropEffect="copy":["all","copyMove"].includes(i.dataTransfer.effectAllowed)&&(i.dataTransfer.dropEffect="move")),s&&this._updateDropMarkerThrottled(s)}),{priority:"low"})}_setupClipboardInputIntegration(){const e=this.editor,t=e.editing.view.document;this.listenTo(t,"clipboardInput",((t,i)=>{if("drop"!=i.method)return;const s=Ap(e,i.targetRanges,i.target);return this._removeDropMarker(),s?(this._draggedRange&&this._draggingUid!=i.dataTransfer.getData("application/ckeditor5-dragging-uid")&&(this._draggedRange.detach(),this._draggedRange=null,this._draggingUid=""),"move"==xp(i.dataTransfer)&&this._draggedRange&&this._draggedRange.containsRange(s,!0)?(this._finalizeDragging(!1),void t.stop()):void(i.targetRanges=[e.editing.mapper.toViewRange(s)])):(this._finalizeDragging(!1),void t.stop())}),{priority:"high"})}_setupContentInsertionIntegration(){const e=this.editor.plugins.get(Wm);e.on("contentInsertion",((e,t)=>{if(!this.isEnabled||"drop"!==t.method)return;const i=t.targetRanges.map((e=>this.editor.editing.mapper.toModelRange(e)));this.editor.model.change((e=>e.setSelection(i)))}),{priority:"high"}),e.on("contentInsertion",((e,t)=>{if(!this.isEnabled||"drop"!==t.method)return;const i="move"==xp(t.dataTransfer),s=!t.resultRange||!t.resultRange.isCollapsed;this._finalizeDragging(s&&i)}),{priority:"lowest"})}_setupDraggableAttributeHandling(){const e=this.editor,t=e.editing.view,i=t.document;this.listenTo(i,"mousedown",((s,n)=>{if(io.isAndroid||!n)return;this._clearDraggableAttributesDelayed.cancel();let o=Ep(n.target);if(io.isBlink&&!e.isReadOnly&&!o&&!i.selection.isCollapsed){const e=i.selection.getSelectedElement();e&&Xm(e)||(o=i.selection.editableElement)}o&&(t.change((e=>{e.setAttribute("draggable","true",o)})),this._draggableElement=e.editing.mapper.toModelElement(o))})),this.listenTo(i,"mouseup",(()=>{io.isAndroid||this._clearDraggableAttributesDelayed()}))}_clearDraggableAttributes(){const e=this.editor.editing;e.view.change((t=>{this._draggableElement&&"$graveyard"!=this._draggableElement.root.rootName&&t.removeAttribute("draggable",e.mapper.toViewElement(this._draggableElement)),this._draggableElement=null}))}_setupDropMarker(){const e=this.editor;e.conversion.for("editingDowncast").markerToHighlight({model:"drop-target",view:{classes:["ck-clipboard-drop-target-range"]}}),e.conversion.for("editingDowncast").markerToElement({model:"drop-target",view:(t,{writer:i})=>{if(e.model.schema.checkChild(t.markerRange.start,"$text"))return i.createUIElement("span",{class:"ck ck-clipboard-drop-target-position"},(function(e){const t=this.toDomElement(e);return t.innerHTML="&NoBreak;<span></span>&NoBreak;",t}))}})}_updateDropMarker(e){const t=this.editor,i=t.model.markers;t.model.change((t=>{i.has("drop-target")?i.get("drop-target").getRange().isEqual(e)||t.updateMarker("drop-target",{range:e}):t.addMarker("drop-target",{range:e,usingOperation:!1,affectsData:!1})}))}_removeDropMarker(){const e=this.editor.model;this._removeDropMarkerDelayed.cancel(),this._updateDropMarkerThrottled.cancel(),e.markers.has("drop-target")&&e.change((e=>{e.removeMarker("drop-target")}))}_finalizeDragging(e){const t=this.editor,i=t.model;this._removeDropMarker(),this._clearDraggableAttributes(),t.plugins.has("WidgetToolbarRepository")&&t.plugins.get("WidgetToolbarRepository").clearForceDisabled("dragDrop"),this._draggingUid="",this._draggedRange&&(e&&this.isEnabled&&i.deleteContent(i.createSelection(this._draggedRange),{doNotAutoparagraph:!0}),this._draggedRange.detach(),this._draggedRange=null)}}function Ap(e,t,i){const s=e.model,n=e.editing.mapper;let o=null;const r=t?t[0].start:null;if(i.is("uiElement")&&(i=i.parent),o=function(e,t){const i=e.model,s=e.editing.mapper;if(Xm(t))return i.createRangeOn(s.toModelElement(t));if(!t.is("editableElement")){const e=t.findAncestor((e=>Xm(e)||e.is("editableElement")));if(Xm(e))return i.createRangeOn(s.toModelElement(e))}return null}(e,i),o)return o;const a=function(e,t){const i=e.editing.mapper,s=e.editing.view,n=i.toModelElement(t);if(n)return n;const o=s.createPositionBefore(t),r=i.findMappedViewAncestor(o);return i.toModelElement(r)}(e,i),l=r?n.toModelPosition(r):null;return l?(o=function(e,t,i){const s=e.model;if(!s.schema.checkChild(i,"$block"))return null;const n=s.createPositionAt(i,0),o=t.path.slice(0,n.path.length),r=s.createPositionFromPath(t.root,o).nodeAfter;return r&&s.schema.isObject(r)?s.createRangeOn(r):null}(e,l,a),o||(o=s.schema.getNearestSelectionRange(l,io.isGecko?"forward":"backward"),o||function(e,t){const i=e.model;for(;t;){if(i.schema.isObject(t))return i.createRangeOn(t);t=t.parent}}(e,l.parent))):function(e,t){const i=e.model,s=i.schema,n=i.createPositionAt(t,0);return s.getNearestSelectionRange(n,"forward")}(e,a)}function xp(e){return io.isGecko?e.dropEffect:["all","copyMove"].includes(e.effectAllowed)?"move":"copy"}function Cp(e,t){let i;function s(...n){s.cancel(),i=setTimeout((()=>e(...n)),t)}return s.cancel=()=>{clearTimeout(i)},s}function Ep(e){if(e.is("editableElement"))return null;if(e.hasClass("ck-widget__selection-handle"))return e.findAncestor(Xm);if(Xm(e))return e;const t=e.findAncestor((e=>Xm(e)||e.is("editableElement")));return Xm(t)?t:null}class Tp extends ut{static get pluginName(){return"PastePlainText"}static get requires(){return[Wm]}init(){const e=this.editor,t=e.model,i=e.editing.view,s=i.document,n=t.document.selection;let o=!1;i.addObserver(Hm),this.listenTo(s,"keydown",((e,t)=>{o=t.shiftKey})),e.plugins.get(Wm).on("contentInsertion",((e,i)=>{(o||function(e,t){if(e.childCount>1)return!1;const i=e.getChild(0);return!t.isObject(i)&&0==[...i.getAttributeKeys()].length}(i.content,t.schema))&&t.change((e=>{const s=Array.from(n.getAttributes()).filter((([e])=>t.schema.getAttributeProperties(e).isFormatting));n.isCollapsed||t.deleteContent(n,{doNotAutoparagraph:!0}),s.push(...n.getAttributes());const o=e.createRangeIn(i.content);for(const t of o.getItems())t.is("$textProxy")&&e.setAttributes(s,t)}))}))}}class Sp extends ut{static get pluginName(){return"Clipboard"}static get requires(){return[Wm,kp,Tp]}}class Pp extends pt{execute(){const e=this.editor.model,t=e.document.selection;let i=e.schema.getLimitElement(t);if(t.containsEntireContent(i)||!Op(e.schema,i))do{if(i=i.parent,!i)return}while(!Op(e.schema,i));e.change((e=>{e.setSelection(i,"in")}))}}function Op(e,t){return e.isLimit(t)&&(e.checkChild(t,"$text")||e.checkChild(t,"paragraph"))}const Ip=lo("Ctrl+A");class Rp extends ut{static get pluginName(){return"SelectAllEditing"}init(){const e=this.editor,t=e.editing.view.document;e.commands.add("selectAll",new Pp(e)),this.listenTo(t,"keydown",((t,i)=>{ao(i)===Ip&&(e.execute("selectAll"),i.preventDefault())}))}}class zp extends ut{static get pluginName(){return"SelectAllUI"}init(){const e=this.editor;e.ui.componentFactory.add("selectAll",(t=>{const i=e.commands.get("selectAll"),s=new Rd(t),n=t.t;return s.set({label:n("Select all"),icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M.75 15.5a.75.75 0 0 1 .75.75V18l.008.09A.5.5 0 0 0 2 18.5h1.75a.75.75 0 1 1 0 1.5H1.5l-.144-.007a1.5 1.5 0 0 1-1.35-1.349L0 18.5v-2.25a.75.75 0 0 1 .75-.75zm18.5 0a.75.75 0 0 1 .75.75v2.25l-.007.144a1.5 1.5 0 0 1-1.349 1.35L18.5 20h-2.25a.75.75 0 1 1 0-1.5H18a.5.5 0 0 0 .492-.41L18.5 18v-1.75a.75.75 0 0 1 .75-.75zm-10.45 3c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2H7.2a.2.2 0 0 1-.2-.2v-1.1c0-.11.09-.2.2-.2h1.6zm4 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2h-1.6a.2.2 0 0 1-.2-.2v-1.1c0-.11.09-.2.2-.2h1.6zm.45-5.5a.75.75 0 1 1 0 1.5h-8.5a.75.75 0 1 1 0-1.5h8.5zM1.3 11c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H.2a.2.2 0 0 1-.2-.2v-1.6c0-.11.09-.2.2-.2h1.1zm18.5 0c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2h-1.1a.2.2 0 0 1-.2-.2v-1.6c0-.11.09-.2.2-.2h1.1zm-4.55-2a.75.75 0 1 1 0 1.5H4.75a.75.75 0 1 1 0-1.5h10.5zM1.3 7c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H.2a.2.2 0 0 1-.2-.2V7.2c0-.11.09-.2.2-.2h1.1zm18.5 0c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2h-1.1a.2.2 0 0 1-.2-.2V7.2c0-.11.09-.2.2-.2h1.1zm-4.55-2a.75.75 0 1 1 0 1.5h-2.5a.75.75 0 1 1 0-1.5h2.5zm-5 0a.75.75 0 1 1 0 1.5h-5.5a.75.75 0 0 1 0-1.5h5.5zm-6.5-5a.75.75 0 0 1 0 1.5H2a.5.5 0 0 0-.492.41L1.5 2v1.75a.75.75 0 0 1-1.5 0V1.5l.007-.144A1.5 1.5 0 0 1 1.356.006L1.5 0h2.25zM18.5 0l.144.007a1.5 1.5 0 0 1 1.35 1.349L20 1.5v2.25a.75.75 0 1 1-1.5 0V2l-.008-.09A.5.5 0 0 0 18 1.5h-1.75a.75.75 0 1 1 0-1.5h2.25zM8.8 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2H7.2a.2.2 0 0 1-.2-.2V.2c0-.11.09-.2.2-.2h1.6zm4 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2h-1.6a.2.2 0 0 1-.2-.2V.2c0-.11.09-.2.2-.2h1.6z"/></svg>',keystroke:"Ctrl+A",tooltip:!0}),s.bind("isOn","isEnabled").to(i,"value","isEnabled"),this.listenTo(s,"execute",(()=>{e.execute("selectAll"),e.editing.view.focus()})),s}))}}class Mp extends ut{static get requires(){return[Rp,zp]}static get pluginName(){return"SelectAll"}}function Np(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function Dp(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class Vp extends pt{constructor(e){super(e),this._stack=[],this._createdBatches=new WeakSet,this.refresh(),this.listenTo(e.data,"set",((e,t)=>{t[1]=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Np(Object(i),!0).forEach((function(t){Dp(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Np(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({},t[1]);const i=t[1];i.batchType||(i.batchType="transparent")}),{priority:"high"}),this.listenTo(e.data,"set",((e,t)=>{"transparent"===t[1].batchType&&this.clearStack()}))}refresh(){this.isEnabled=this._stack.length>0}addBatch(e){const t=this.editor.model.document.selection,i={ranges:t.hasOwnRange?Array.from(t.getRanges()):[],isBackward:t.isBackward};this._stack.push({batch:e,selection:i}),this.refresh()}clearStack(){this._stack=[],this.refresh()}_restoreSelection(e,t,i){const s=this.editor.model,n=s.document,o=[],r=e.map((e=>e.getTransformedByOperations(i))),a=r.flat();for(const l of r){const e=l.filter((e=>e.root!=n.graveyard)).filter((e=>!Lp(e,a)));e.length&&(Bp(e),o.push(e[0]))}o.length&&s.change((e=>{e.setSelection(o,{backward:t})}))}_undo(e,t){const i=this.editor.model,s=i.document;this._createdBatches.add(t);const n=e.operations.slice().filter((e=>e.isDocumentOperation));n.reverse();for(const o of n){const e=o.baseVersion+1,n=Array.from(s.history.getOperations(e)),r=wh([o.getReversed()],n,{useRelations:!0,document:this.editor.model.document,padWithNoOps:!1,forceWeakRemove:!0}).operationsA;for(const a of r)t.addOperation(a),i.applyOperation(a),s.history.setOperationAsUndone(o,a)}}}function Bp(e){e.sort(((e,t)=>e.start.isBefore(t.start)?-1:1));for(let t=1;t<e.length;t++){const i=e[t-1].getJoined(e[t],!0);i&&(t--,e.splice(t,2,i))}}function Lp(e,t){return t.some((t=>t!==e&&t.containsRange(e,!0)))}class Fp extends Vp{execute(e=null){const t=e?this._stack.findIndex((t=>t.batch==e)):this._stack.length-1,i=this._stack.splice(t,1)[0],s=this.editor.model.createBatch("transparent");this.editor.model.enqueueChange(s,(()=>{this._undo(i.batch,s);const e=this.editor.model.document.history.getOperations(i.batch.baseVersion);this._restoreSelection(i.selection.ranges,i.selection.isBackward,e),this.fire("revert",i.batch,s)})),this.refresh()}}class jp extends Vp{execute(){const e=this._stack.pop(),t=this.editor.model.createBatch("transparent");this.editor.model.enqueueChange(t,(()=>{const i=e.batch.operations[e.batch.operations.length-1].baseVersion+1,s=this.editor.model.document.history.getOperations(i);this._restoreSelection(e.selection.ranges,e.selection.isBackward,s),this._undo(e.batch,t)})),this.refresh()}}class qp extends ut{static get pluginName(){return"UndoEditing"}constructor(e){super(e),this._batchRegistry=new WeakSet}init(){const e=this.editor;this._undoCommand=new Fp(e),this._redoCommand=new jp(e),e.commands.add("undo",this._undoCommand),e.commands.add("redo",this._redoCommand),this.listenTo(e.model,"applyOperation",((e,t)=>{const i=t[0];if(!i.isDocumentOperation)return;const s=i.batch,n=this._redoCommand._createdBatches.has(s),o=this._undoCommand._createdBatches.has(s);this._batchRegistry.has(s)||"transparent"==s.type&&!n&&!o||(n?this._undoCommand.addBatch(s):o||(this._undoCommand.addBatch(s),this._redoCommand.clearStack()),this._batchRegistry.add(s))}),{priority:"highest"}),this.listenTo(this._undoCommand,"revert",((e,t,i)=>{this._redoCommand.addBatch(i)})),e.keystrokes.set("CTRL+Z","undo"),e.keystrokes.set("CTRL+Y","redo"),e.keystrokes.set("CTRL+SHIFT+Z","redo")}}const Hp='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m5.042 9.367 2.189 1.837a.75.75 0 0 1-.965 1.149l-3.788-3.18a.747.747 0 0 1-.21-.284.75.75 0 0 1 .17-.945L6.23 4.762a.75.75 0 1 1 .964 1.15L4.863 7.866h8.917A.75.75 0 0 1 14 7.9a4 4 0 1 1-1.477 7.718l.344-1.489a2.5 2.5 0 1 0 1.094-4.73l.008-.032H5.042z"/></svg>',$p='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m14.958 9.367-2.189 1.837a.75.75 0 0 0 .965 1.149l3.788-3.18a.747.747 0 0 0 .21-.284.75.75 0 0 0-.17-.945L13.77 4.762a.75.75 0 1 0-.964 1.15l2.331 1.955H6.22A.75.75 0 0 0 6 7.9a4 4 0 1 0 1.477 7.718l-.344-1.489A2.5 2.5 0 1 1 6.039 9.4l-.008-.032h8.927z"/></svg>';class Up extends ut{static get pluginName(){return"UndoUI"}init(){const e=this.editor,t=e.locale,i=e.t,s="ltr"==t.uiLanguageDirection?Hp:$p,n="ltr"==t.uiLanguageDirection?$p:Hp;this._addButton("undo",i("Undo"),"CTRL+Z",s),this._addButton("redo",i("Redo"),"CTRL+Y",n)}_addButton(e,t,i,s){const n=this.editor;n.ui.componentFactory.add(e,(o=>{const r=n.commands.get(e),a=new Rd(o);return a.set({label:t,icon:s,keystroke:i,tooltip:!0}),a.bind("isEnabled").to(r,"isEnabled"),this.listenTo(a,"execute",(()=>{n.execute(e),n.editing.view.focus()})),a}))}}class Wp extends ut{static get requires(){return[qp,Up]}static get pluginName(){return"Undo"}}class Zp extends pt{constructor(e,t){super(e),this.attributeKey=t}refresh(){const e=this.editor.model,t=e.document;this.value=t.selection.getAttribute(this.attributeKey),this.isEnabled=e.schema.checkAttributeInSelection(t.selection,this.attributeKey)}execute(e={}){const t=this.editor.model,i=t.document.selection,s=e.value;t.change((e=>{if(i.isCollapsed)s?e.setSelectionAttribute(this.attributeKey,s):e.removeSelectionAttribute(this.attributeKey);else{const n=t.schema.getValidRanges(i.getRanges(),this.attributeKey);for(const t of n)s?e.setAttribute(this.attributeKey,s,t):e.removeAttribute(this.attributeKey,t)}}))}}class Gp extends Es{constructor(e){super(e),this.set("isEmpty",!0),this.on("change",(()=>{this.set("isEmpty",0===this.length)}))}add(e,t){this.find((t=>t.color===e.color))||super.add(e,t)}hasColor(e){return!!this.find((t=>t.color===e))}}dt(Gp,ot);class Kp extends ad{constructor(e,{colors:t,columns:i,removeButtonLabel:s,documentColorsLabel:n,documentColorsCount:o}){super(e),this.items=this.createCollection(),this.colorDefinitions=t,this.focusTracker=new ca,this.keystrokes=new ha,this.set("selectedColor"),this.removeButtonLabel=s,this.columns=i,this.documentColors=new Gp,this.documentColorsCount=o,this._focusCycler=new Dd({focusables:this.items,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"arrowup",focusNext:"arrowdown"}}),this._documentColorsLabel=n,this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-table"]},children:this.items}),this.items.add(this._removeColorButton())}updateDocumentColors(e,t){const i=e.document,s=this.documentColorsCount;this.documentColors.clear();for(const n of i.getRootNames()){const o=i.getRoot(n),r=e.createRangeIn(o);for(const e of r.getItems())if(e.is("$textProxy")&&e.hasAttribute(t)&&(this._addColorToDocumentColors(e.getAttribute(t)),this.documentColors.length>=s))return}}updateSelectedColors(){const e=this.documentColorsGrid,t=this.staticColorsGrid,i=this.selectedColor;t.selectedColor=i,e&&(e.selectedColor=i)}render(){super.render();for(const e of this.items)this.focusTracker.add(e.element);this.keystrokes.listenTo(this.element)}appendGrids(){if(!this.staticColorsGrid&&(this.staticColorsGrid=this._createStaticColorsGrid(),this.items.add(this.staticColorsGrid),this.documentColorsCount)){const e=ld.bind(this.documentColors,this.documentColors),t=new au(this.locale);t.text=this._documentColorsLabel,t.extendTemplate({attributes:{class:["ck","ck-color-grid__label",e.if("isEmpty","ck-hidden")]}}),this.items.add(t),this.documentColorsGrid=this._createDocumentColorsGrid(),this.items.add(this.documentColorsGrid)}}focus(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}_removeColorButton(){const e=new Rd;return e.set({withText:!0,icon:rh.eraser,tooltip:!0,label:this.removeButtonLabel}),e.class="ck-color-table__remove-color",e.on("execute",(()=>{this.fire("execute",{value:null})})),e}_createStaticColorsGrid(){const e=new Bd(this.locale,{colorDefinitions:this.colorDefinitions,columns:this.columns});return e.delegate("execute").to(this),e}_createDocumentColorsGrid(){const e=ld.bind(this.documentColors,this.documentColors),t=new Bd(this.locale,{columns:this.columns});return t.delegate("execute").to(this),t.extendTemplate({attributes:{class:e.if("isEmpty","ck-hidden")}}),t.items.bindTo(this.documentColors).using((e=>{const t=new Nd;return t.set({color:e.color,hasBorder:e.options&&e.options.hasBorder}),e.label&&t.set({label:e.label,tooltip:!0}),t.on("execute",(()=>{this.fire("execute",{value:e.color})})),t})),this.documentColors.on("change:isEmpty",((e,i,s)=>{s&&(t.selectedColor=null)})),t}_addColorToDocumentColors(e){const t=this.colorDefinitions.find((t=>t.color===e));t?this.documentColors.add(Object.assign({},t)):this.documentColors.add({color:e,label:e,options:{hasBorder:!1}})}}const Jp="fontSize",Yp="fontFamily",Qp="fontColor",Xp="fontBackgroundColor";function ef(e,t){const i={model:{key:e,values:[]},view:{},upcastAlso:{}};for(const s of t)i.model.values.push(s.model),i.view[s.model]=s.view,s.upcastAlso&&(i.upcastAlso[s.model]=s.upcastAlso);return i}function tf(e){return t=>t.getStyle(e).replace(/\s/g,"")}function sf(e){return(t,{writer:i})=>i.createAttributeElement("span",{style:`${e}:${t}`},{priority:7})}class nf extends Zp{constructor(e){super(e,Yp)}}function of(e){return e.map(rf).filter((e=>!!e))}function rf(e){return"object"==typeof e?e:"default"===e?{title:"Default",model:void 0}:"string"==typeof e?function(e){const t=e.replace(/"|'/g,"").split(","),i=t[0],s=t.map(af).join(", ");return{title:i,model:s,view:{name:"span",styles:{"font-family":s},priority:7}}}(e):void 0}function af(e){return(e=e.trim()).indexOf(" ")>0&&(e=`'${e}'`),e}class lf extends ut{static get pluginName(){return"FontFamilyEditing"}constructor(e){super(e),e.config.define(Yp,{options:["default","Arial, Helvetica, sans-serif","Courier New, Courier, monospace","Georgia, serif","Lucida Sans Unicode, Lucida Grande, sans-serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif","Trebuchet MS, Helvetica, sans-serif","Verdana, Geneva, sans-serif"],supportAllValues:!1})}init(){const e=this.editor;e.model.schema.extend("$text",{allowAttributes:Yp}),e.model.schema.setAttributeProperties(Yp,{isFormatting:!0,copyOnEnter:!0});const t=of(e.config.get("fontFamily.options")).filter((e=>e.model)),i=ef(Yp,t);e.config.get("fontFamily.supportAllValues")?(this._prepareAnyValueConverters(),this._prepareCompatibilityConverter()):e.conversion.attributeToElement(i),e.commands.add(Yp,new nf(e))}_prepareAnyValueConverters(){const e=this.editor;e.conversion.for("downcast").attributeToElement({model:Yp,view:(e,{writer:t})=>t.createAttributeElement("span",{style:"font-family:"+e},{priority:7})}),e.conversion.for("upcast").elementToAttribute({model:{key:Yp,value:e=>e.getStyle("font-family")},view:{name:"span",styles:{"font-family":/.*/}}})}_prepareCompatibilityConverter(){this.editor.conversion.for("upcast").elementToAttribute({view:{name:"font",attributes:{face:/.*/}},model:{key:Yp,value:e=>e.getAttribute("face")}})}}class cf extends ut{static get pluginName(){return"FontFamilyUI"}init(){const e=this.editor,t=e.t,i=this._getLocalizedOptions(),s=e.commands.get(Yp);e.ui.componentFactory.add(Yp,(n=>{const o=su(n);return ou(o,function(e,t){const i=new Es;for(const s of e){const e={type:"button",model:new pu({commandName:Yp,commandParam:s.model,label:s.title,withText:!0})};e.model.bind("isOn").to(t,"value",(e=>e===s.model||!(!e||!s.model)&&e.split(",")[0].replace(/'/g,"").toLowerCase()===s.model.toLowerCase())),s.view&&s.view.styles&&e.model.set("labelStyle",`font-family: ${s.view.styles["font-family"]}`),i.add(e)}return i}(i,s)),o.buttonView.set({label:t("Font Family"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.03 3h6.149a.75.75 0 1 1 0 1.5h-5.514L11.03 3zm1.27 3h4.879a.75.75 0 1 1 0 1.5h-4.244L12.3 6zm1.27 3h3.609a.75.75 0 1 1 0 1.5h-2.973L13.57 9zm-2.754 2.5L8.038 4.785 5.261 11.5h5.555zm.62 1.5H4.641l-1.666 4.028H1.312l5.789-14h1.875l5.789 14h-1.663L11.436 13z"/></svg>',tooltip:!0}),o.extendTemplate({attributes:{class:"ck-font-family-dropdown"}}),o.bind("isEnabled").to(s),this.listenTo(o,"execute",(t=>{e.execute(t.source.commandName,{value:t.source.commandParam}),e.editing.view.focus()})),o}))}_getLocalizedOptions(){const e=this.editor,t=e.t;return of(e.config.get(Yp).options).map((e=>("Default"===e.title&&(e.title=t("Default")),e)))}}class hf extends ut{static get requires(){return[lf,cf]}static get pluginName(){return"FontFamily"}}class df extends Zp{constructor(e){super(e,Jp)}}function uf(e){return e.map((e=>function(e){if("object"==typeof(t=e)&&t.title&&t.model&&t.view)return pf(e);var t;const i=function(e){return mf[e]||mf[e.model]}(e);return i?pf(i):"default"===e?{model:void 0,title:"Default"}:function(e){let t;if("object"==typeof e){if(!e.model)throw new h("font-size-invalid-definition",null,e);t=parseFloat(e.model)}else t=parseFloat(e);return isNaN(t)}(e)?void 0:function(e){return"number"!=typeof e&&"string"!=typeof e||(e={title:String(e),model:`${parseFloat(e)}px`}),e.view={name:"span",styles:{"font-size":e.model}},pf(e)}(e)}(e))).filter((e=>!!e))}const mf={get tiny(){return{title:"Tiny",model:"tiny",view:{name:"span",classes:"text-tiny",priority:7}}},get small(){return{title:"Small",model:"small",view:{name:"span",classes:"text-small",priority:7}}},get big(){return{title:"Big",model:"big",view:{name:"span",classes:"text-big",priority:7}}},get huge(){return{title:"Huge",model:"huge",view:{name:"span",classes:"text-huge",priority:7}}}};function pf(e){return e.view.priority||(e.view.priority=7),e}const ff=["x-small","x-small","small","medium","large","x-large","xx-large","xxx-large"];class gf extends ut{static get pluginName(){return"FontSizeEditing"}constructor(e){super(e),e.config.define(Jp,{options:["tiny","small","default","big","huge"],supportAllValues:!1})}init(){const e=this.editor;e.model.schema.extend("$text",{allowAttributes:Jp}),e.model.schema.setAttributeProperties(Jp,{isFormatting:!0,copyOnEnter:!0});const t=e.config.get("fontSize.supportAllValues"),i=uf(this.editor.config.get("fontSize.options")).filter((e=>e.model)),s=ef(Jp,i);t?(this._prepareAnyValueConverters(s),this._prepareCompatibilityConverter()):e.conversion.attributeToElement(s),e.commands.add(Jp,new df(e))}_prepareAnyValueConverters(e){const t=this.editor,i=e.model.values.filter((e=>{return t=String(e),!(Mh.test(t)||function(e){return Nh.test(e)}(String(e)));var t}));if(i.length)throw new h("font-size-invalid-use-of-named-presets",null,{presets:i});t.conversion.for("downcast").attributeToElement({model:Jp,view:(e,{writer:t})=>{if(e)return t.createAttributeElement("span",{style:"font-size:"+e},{priority:7})}}),t.conversion.for("upcast").elementToAttribute({model:{key:Jp,value:e=>e.getStyle("font-size")},view:{name:"span",styles:{"font-size":/.*/}}})}_prepareCompatibilityConverter(){this.editor.conversion.for("upcast").elementToAttribute({view:{name:"font",attributes:{size:/^[+-]?\d{1,3}$/}},model:{key:Jp,value:e=>{const t=e.getAttribute("size"),i="-"===t[0]||"+"===t[0];let s=parseInt(t,10);i&&(s=3+s);const n=ff.length-1,o=Math.min(Math.max(s,0),n);return ff[o]}}})}}class wf extends ut{static get pluginName(){return"FontSizeUI"}init(){const e=this.editor,t=e.t,i=this._getLocalizedOptions(),s=e.commands.get(Jp);e.ui.componentFactory.add(Jp,(n=>{const o=su(n);return ou(o,function(e,t){const i=new Es;for(const s of e){const e={type:"button",model:new pu({commandName:Jp,commandParam:s.model,label:s.title,class:"ck-fontsize-option",withText:!0})};s.view&&s.view.styles&&e.model.set("labelStyle",`font-size:${s.view.styles["font-size"]}`),s.view&&s.view.classes&&e.model.set("class",`${e.model.class} ${s.view.classes}`),e.model.bind("isOn").to(t,"value",(e=>e===s.model)),i.add(e)}return i}(i,s)),o.buttonView.set({label:t("Font Size"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.816 11.5 7.038 4.785 4.261 11.5h5.555zm.62 1.5H3.641l-1.666 4.028H.312l5.789-14h1.875l5.789 14h-1.663L10.436 13zm7.55 2.279.779-.779.707.707-2.265 2.265-2.193-2.265.707-.707.765.765V4.825c0-.042 0-.083.002-.123l-.77.77-.707-.707L17.207 2.5l2.265 2.265-.707.707-.782-.782c.002.043.003.089.003.135v10.454z"/></svg>',tooltip:!0}),o.extendTemplate({attributes:{class:["ck-font-size-dropdown"]}}),o.bind("isEnabled").to(s),this.listenTo(o,"execute",(t=>{e.execute(t.source.commandName,{value:t.source.commandParam}),e.editing.view.focus()})),o}))}_getLocalizedOptions(){const e=this.editor,t=e.t,i={Default:t("Default"),Tiny:t("Tiny"),Small:t("Small"),Big:t("Big"),Huge:t("Huge")};return uf(e.config.get(Jp).options).map((e=>{const t=i[e.title];return t&&t!=e.title&&(e=Object.assign({},e,{title:t})),e}))}}class bf extends ut{static get requires(){return[gf,wf]}static get pluginName(){return"FontSize"}}class vf extends Zp{constructor(e){super(e,Qp)}}class yf extends ut{static get pluginName(){return"FontColorEditing"}constructor(e){super(e),e.config.define(Qp,{colors:[{color:"hsl(0, 0%, 0%)",label:"Black"},{color:"hsl(0, 0%, 30%)",label:"Dim grey"},{color:"hsl(0, 0%, 60%)",label:"Grey"},{color:"hsl(0, 0%, 90%)",label:"Light grey"},{color:"hsl(0, 0%, 100%)",label:"White",hasBorder:!0},{color:"hsl(0, 75%, 60%)",label:"Red"},{color:"hsl(30, 75%, 60%)",label:"Orange"},{color:"hsl(60, 75%, 60%)",label:"Yellow"},{color:"hsl(90, 75%, 60%)",label:"Light green"},{color:"hsl(120, 75%, 60%)",label:"Green"},{color:"hsl(150, 75%, 60%)",label:"Aquamarine"},{color:"hsl(180, 75%, 60%)",label:"Turquoise"},{color:"hsl(210, 75%, 60%)",label:"Light blue"},{color:"hsl(240, 75%, 60%)",label:"Blue"},{color:"hsl(270, 75%, 60%)",label:"Purple"}],columns:5}),e.conversion.for("upcast").elementToAttribute({view:{name:"span",styles:{color:/[\s\S]+/}},model:{key:Qp,value:tf("color")}}),e.conversion.for("upcast").elementToAttribute({view:{name:"font",attributes:{color:/^#?\w+$/}},model:{key:Qp,value:e=>e.getAttribute("color")}}),e.conversion.for("downcast").attributeToElement({model:Qp,view:sf("color")}),e.commands.add(Qp,new vf(e)),e.model.schema.extend("$text",{allowAttributes:Qp}),e.model.schema.setAttributeProperties(Qp,{isFormatting:!0,copyOnEnter:!0})}}class _f extends ut{constructor(e,{commandName:t,icon:i,componentName:s,dropdownLabel:n}){super(e),this.commandName=t,this.componentName=s,this.icon=i,this.dropdownLabel=n,this.columns=e.config.get(`${this.componentName}.columns`),this.colorTableView=void 0}init(){const e=this.editor,t=e.locale,i=t.t,s=e.commands.get(this.commandName),n=function(e,t){const i=e.t,s={Black:i("Black"),"Dim grey":i("Dim grey"),Grey:i("Grey"),"Light grey":i("Light grey"),White:i("White"),Red:i("Red"),Orange:i("Orange"),Yellow:i("Yellow"),"Light green":i("Light green"),Green:i("Green"),Aquamarine:i("Aquamarine"),Turquoise:i("Turquoise"),"Light blue":i("Light blue"),Blue:i("Blue"),Purple:i("Purple")};return t.map((e=>{const t=s[e.label];return t&&t!=e.label&&(e.label=t),e}))}(t,e.config.get(this.componentName).colors.map(Md).filter((e=>!!e))),o=e.config.get(`${this.componentName}.documentColors`);e.ui.componentFactory.add(this.componentName,(t=>{const r=su(t);return this.colorTableView=function({dropdownView:e,colors:t,columns:i,removeButtonLabel:s,documentColorsLabel:n,documentColorsCount:o}){const r=e.locale,a=new Kp(r,{colors:t,columns:i,removeButtonLabel:s,documentColorsLabel:n,documentColorsCount:o});return e.colorTableView=a,e.panelView.children.add(a),a.delegate("execute").to(e,"execute"),a}({dropdownView:r,colors:n.map((e=>({label:e.label,color:e.model,options:{hasBorder:e.hasBorder}}))),columns:this.columns,removeButtonLabel:i("Remove color"),documentColorsLabel:0!==o?i("Document colors"):void 0,documentColorsCount:void 0===o?this.columns:o}),this.colorTableView.bind("selectedColor").to(s,"value"),r.buttonView.set({label:this.dropdownLabel,icon:this.icon,tooltip:!0}),r.extendTemplate({attributes:{class:"ck-color-ui-dropdown"}}),r.bind("isEnabled").to(s),r.on("execute",((t,i)=>{e.execute(this.commandName,i),e.editing.view.focus()})),r.on("change:isOpen",((t,i,s)=>{r.colorTableView.appendGrids(),s&&(0!==o&&this.colorTableView.updateDocumentColors(e.model,this.componentName),this.colorTableView.updateSelectedColors())})),r}))}}class kf extends _f{constructor(e){const t=e.locale.t;super(e,{commandName:Qp,componentName:Qp,icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12.4 10.3 10 4.5l-2.4 5.8h4.8zm.5 1.2H7.1L5.7 15H4.2l5-12h1.6l5 12h-1.5L13 11.5zm3.1 7H4a1 1 0 0 1 0-2h12a1 1 0 0 1 0 2z"/></svg>',dropdownLabel:t("Font Color")})}static get pluginName(){return"FontColorUI"}}class Af extends ut{static get requires(){return[yf,kf]}static get pluginName(){return"FontColor"}}class xf extends Zp{constructor(e){super(e,Xp)}}class Cf extends ut{static get pluginName(){return"FontBackgroundColorEditing"}constructor(e){super(e),e.config.define(Xp,{colors:[{color:"hsl(0, 0%, 0%)",label:"Black"},{color:"hsl(0, 0%, 30%)",label:"Dim grey"},{color:"hsl(0, 0%, 60%)",label:"Grey"},{color:"hsl(0, 0%, 90%)",label:"Light grey"},{color:"hsl(0, 0%, 100%)",label:"White",hasBorder:!0},{color:"hsl(0, 75%, 60%)",label:"Red"},{color:"hsl(30, 75%, 60%)",label:"Orange"},{color:"hsl(60, 75%, 60%)",label:"Yellow"},{color:"hsl(90, 75%, 60%)",label:"Light green"},{color:"hsl(120, 75%, 60%)",label:"Green"},{color:"hsl(150, 75%, 60%)",label:"Aquamarine"},{color:"hsl(180, 75%, 60%)",label:"Turquoise"},{color:"hsl(210, 75%, 60%)",label:"Light blue"},{color:"hsl(240, 75%, 60%)",label:"Blue"},{color:"hsl(270, 75%, 60%)",label:"Purple"}],columns:5}),e.data.addStyleProcessorRules($h),e.conversion.for("upcast").elementToAttribute({view:{name:"span",styles:{"background-color":/[\s\S]+/}},model:{key:Xp,value:tf("background-color")}}),e.conversion.for("downcast").attributeToElement({model:Xp,view:sf("background-color")}),e.commands.add(Xp,new xf(e)),e.model.schema.extend("$text",{allowAttributes:Xp}),e.model.schema.setAttributeProperties(Xp,{isFormatting:!0,copyOnEnter:!0})}}class Ef extends _f{constructor(e){const t=e.locale.t;super(e,{commandName:Xp,componentName:Xp,icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M4 2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2zm8.38 9.262H7.62L10 5.506l2.38 5.756zm.532 1.285L14.34 16h1.426L10.804 4H9.196L4.234 16H5.66l1.428-3.453h5.824z"/></svg>',dropdownLabel:t("Font Background Color")})}static get pluginName(){return"FontBackgroundColorUI"}}class Tf extends ut{static get requires(){return[Cf,Ef]}static get pluginName(){return"FontBackgroundColor"}}class Sf extends pt{refresh(){const e=this.editor.model,t=la(e.document.selection.getSelectedBlocks());this.value=!!t&&t.is("element","paragraph"),this.isEnabled=!!t&&Pf(t,e.schema)}execute(e={}){const t=this.editor.model,i=t.document;t.change((s=>{const n=(e.selection||i.selection).getSelectedBlocks();for(const e of n)!e.is("element","paragraph")&&Pf(e,t.schema)&&s.rename(e,"paragraph")}))}}function Pf(e,t){return t.checkChild(e.parent,"paragraph")&&!t.isObject(e)}class Of extends pt{execute(e){const t=this.editor.model;let i=e.position;t.change((e=>{const s=e.createElement("paragraph");if(!t.schema.checkChild(i.parent,s)){const n=t.schema.findAllowedParent(i,s);if(!n)return;i=e.split(i,n).position}t.insertContent(s,i),e.setSelection(s,"in")}))}}class If extends ut{static get pluginName(){return"Paragraph"}init(){const e=this.editor,t=e.model;e.commands.add("paragraph",new Sf(e)),e.commands.add("insertParagraph",new Of(e)),t.schema.register("paragraph",{inheritAllFrom:"$block"}),e.conversion.elementToElement({model:"paragraph",view:"p"}),e.conversion.for("upcast").elementToElement({model:(e,{writer:t})=>If.paragraphLikeElements.has(e.name)?e.isEmpty?null:t.createElement("paragraph"):null,view:/.+/,converterPriority:"low"})}}If.paragraphLikeElements=new Set(["blockquote","dd","div","dt","h1","h2","h3","h4","h5","h6","li","p","td","th"]);class Rf extends pt{constructor(e,t){super(e),this.modelElements=t}refresh(){const e=la(this.editor.model.document.selection.getSelectedBlocks());this.value=!!e&&this.modelElements.includes(e.name)&&e.name,this.isEnabled=!!e&&this.modelElements.some((t=>zf(e,t,this.editor.model.schema)))}execute(e){const t=this.editor.model,i=t.document,s=e.value;t.change((e=>{const n=Array.from(i.selection.getSelectedBlocks()).filter((e=>zf(e,s,t.schema)));for(const t of n)t.is("element",s)||e.rename(t,s)}))}}function zf(e,t,i){return i.checkChild(e.parent,t)&&!i.isObject(e)}const Mf="paragraph";class Nf extends ut{static get pluginName(){return"HeadingEditing"}constructor(e){super(e),e.config.define("heading",{options:[{model:"paragraph",title:"Paragraph",class:"ck-heading_paragraph"},{model:"heading1",view:"h2",title:"Heading 1",class:"ck-heading_heading1"},{model:"heading2",view:"h3",title:"Heading 2",class:"ck-heading_heading2"},{model:"heading3",view:"h4",title:"Heading 3",class:"ck-heading_heading3"}]})}static get requires(){return[If]}init(){const e=this.editor,t=e.config.get("heading.options"),i=[];for(const s of t)s.model!==Mf&&(e.model.schema.register(s.model,{inheritAllFrom:"$block"}),e.conversion.elementToElement(s),i.push(s.model));this._addDefaultH1Conversion(e),e.commands.add("heading",new Rf(e,i))}afterInit(){const e=this.editor,t=e.commands.get("enter"),i=e.config.get("heading.options");t&&this.listenTo(t,"afterExecute",((t,s)=>{const n=e.model.document.selection.getFirstPosition().parent;i.some((e=>n.is("element",e.model)))&&!n.is("element",Mf)&&0===n.childCount&&s.writer.rename(n,Mf)}))}_addDefaultH1Conversion(e){e.conversion.for("upcast").elementToElement({model:"heading1",view:"h1",converterPriority:c.get("low")+1})}}class Df extends ut{static get pluginName(){return"HeadingUI"}init(){const e=this.editor,t=e.t,i=function(e){const t=e.t,i={Paragraph:t("Paragraph"),"Heading 1":t("Heading 1"),"Heading 2":t("Heading 2"),"Heading 3":t("Heading 3"),"Heading 4":t("Heading 4"),"Heading 5":t("Heading 5"),"Heading 6":t("Heading 6")};return e.config.get("heading.options").map((e=>{const t=i[e.title];return t&&t!=e.title&&(e.title=t),e}))}(e),s=t("Choose heading"),n=t("Heading");e.ui.componentFactory.add("heading",(t=>{const o={},r=new Es,a=e.commands.get("heading"),l=e.commands.get("paragraph"),c=[a];for(const e of i){const t={type:"button",model:new pu({label:e.title,class:e.class,withText:!0})};"paragraph"===e.model?(t.model.bind("isOn").to(l,"value"),t.model.set("commandName","paragraph"),c.push(l)):(t.model.bind("isOn").to(a,"value",(t=>t===e.model)),t.model.set({commandName:"heading",commandValue:e.model})),r.add(t),o[e.model]=e.title}const h=su(t);return ou(h,r),h.buttonView.set({isOn:!1,withText:!0,tooltip:n}),h.extendTemplate({attributes:{class:["ck-heading-dropdown"]}}),h.bind("isEnabled").toMany(c,"isEnabled",((...e)=>e.some((e=>e)))),h.buttonView.bind("label").to(a,"value",l,"value",((e,t)=>{const i=e||t&&"paragraph";return o[i]?o[i]:s})),this.listenTo(h,"execute",(t=>{e.execute(t.source.commandName,t.source.commandValue?{value:t.source.commandValue}:void 0),e.editing.view.focus()})),h}))}}class Vf extends ut{static get requires(){return[Au]}static get pluginName(){return"WidgetToolbarRepository"}init(){const e=this.editor;if(e.plugins.has("BalloonToolbar")){const t=e.plugins.get("BalloonToolbar");this.listenTo(t,"show",(t=>{(function(e){const t=e.getSelectedElement();return!(!t||!Xm(t))})(e.editing.view.document.selection)&&t.stop()}),{priority:"high"})}this._toolbarDefinitions=new Map,this._balloon=this.editor.plugins.get("ContextualBalloon"),this.on("change:isEnabled",(()=>{this._updateToolbarsVisibility()})),this.listenTo(e.ui,"update",(()=>{this._updateToolbarsVisibility()})),this.listenTo(e.ui.focusTracker,"change:isFocused",(()=>{this._updateToolbarsVisibility()}),{priority:"low"})}destroy(){super.destroy();for(const e of this._toolbarDefinitions.values())e.view.destroy()}register(e,{ariaLabel:t,items:i,getRelatedElement:s,balloonClassName:n="ck-toolbar-container"}){if(!i.length)return void d("widget-toolbar-no-items",{toolbarId:e});const o=this.editor,r=o.t,a=new Jd(o.locale);if(a.ariaLabel=t||r("Widget toolbar"),this._toolbarDefinitions.has(e))throw new h("widget-toolbar-duplicated",this,{toolbarId:e});a.fillFromConfig(i,o.ui.componentFactory),this._toolbarDefinitions.set(e,{view:a,getRelatedElement:s,balloonClassName:n})}_updateToolbarsVisibility(){let e=0,t=null,i=null;for(const s of this._toolbarDefinitions.values()){const n=s.getRelatedElement(this.editor.editing.view.document.selection);if(this.isEnabled&&n)if(this.editor.ui.focusTracker.isFocused){const o=n.getAncestors().length;o>e&&(e=o,t=n,i=s)}else this._isToolbarVisible(s)&&this._hideToolbar(s);else this._isToolbarInBalloon(s)&&this._hideToolbar(s)}i&&this._showToolbar(i,t)}_hideToolbar(e){this._balloon.remove(e.view),this.stopListening(this._balloon,"change:visibleView")}_showToolbar(e,t){this._isToolbarVisible(e)?Bf(this.editor,t):this._isToolbarInBalloon(e)||(this._balloon.add({view:e.view,position:Lf(this.editor,t),balloonClassName:e.balloonClassName}),this.listenTo(this._balloon,"change:visibleView",(()=>{for(const e of this._toolbarDefinitions.values())if(this._isToolbarVisible(e)){const t=e.getRelatedElement(this.editor.editing.view.document.selection);Bf(this.editor,t)}})))}_isToolbarVisible(e){return this._balloon.visibleView===e.view}_isToolbarInBalloon(e){return this._balloon.hasView(e.view)}}function Bf(e,t){const i=e.plugins.get("ContextualBalloon"),s=Lf(e,t);i.updatePosition(s)}function Lf(e,t){const i=e.editing.view,s=bu.defaultPositions;return{target:i.domConverter.mapViewToDom(t),positions:[s.northArrowSouth,s.northArrowSouthWest,s.northArrowSouthEast,s.southArrowNorth,s.southArrowNorthWest,s.southArrowNorthEast,ap]}}class Ff{constructor(e){this.set("activeHandlePosition",null),this.set("proposedWidthPercents",null),this.set("proposedWidth",null),this.set("proposedHeight",null),this.set("proposedHandleHostWidth",null),this.set("proposedHandleHostHeight",null),this._options=e,this._referenceCoordinates=null}begin(e,t,i){const s=new ia(t);this.activeHandlePosition=function(e){const t=["top-left","top-right","bottom-right","bottom-left"];for(const i of t)if(e.classList.contains(jf(i)))return i}(e),this._referenceCoordinates=function(e,t){const i=new ia(e),s=t.split("-"),n={x:"right"==s[1]?i.right:i.left,y:"bottom"==s[0]?i.bottom:i.top};return n.x+=e.ownerDocument.defaultView.scrollX,n.y+=e.ownerDocument.defaultView.scrollY,n}(t,function(e){const t=e.split("-"),i={top:"bottom",bottom:"top",left:"right",right:"left"};return`${i[t[0]]}-${i[t[1]]}`}(this.activeHandlePosition)),this.originalWidth=s.width,this.originalHeight=s.height,this.aspectRatio=s.width/s.height;const n=i.style.width;n&&n.match(/^\d+(\.\d*)?%$/)?this.originalWidthPercents=parseFloat(n):this.originalWidthPercents=function(e,t){const i=e.parentElement,s=parseFloat(i.ownerDocument.defaultView.getComputedStyle(i).width);return t.width/s*100}(i,s)}update(e){this.proposedWidth=e.width,this.proposedHeight=e.height,this.proposedWidthPercents=e.widthPercents,this.proposedHandleHostWidth=e.handleHostWidth,this.proposedHandleHostHeight=e.handleHostHeight}}function jf(e){return`ck-widget__resizer__handle-${e}`}dt(Ff,ot);class qf extends ad{constructor(){super();const e=this.bindTemplate;this.setTemplate({tag:"div",attributes:{class:["ck","ck-size-view",e.to("_viewPosition",(e=>e?`ck-orientation-${e}`:""))],style:{display:e.if("_isVisible","none",(e=>!e))}},children:[{text:e.to("_label")}]})}_bindToState(e,t){this.bind("_isVisible").to(t,"proposedWidth",t,"proposedHeight",((e,t)=>null!==e&&null!==t)),this.bind("_label").to(t,"proposedHandleHostWidth",t,"proposedHandleHostHeight",t,"proposedWidthPercents",((t,i,s)=>"px"===e.unit?`${t}\xd7${i}`:`${s}%`)),this.bind("_viewPosition").to(t,"activeHandlePosition",t,"proposedHandleHostWidth",t,"proposedHandleHostHeight",((e,t,i)=>t<50||i<50?"above-center":e))}_dismiss(){this.unbind(),this._isVisible=!1}}class Hf{constructor(e){this._options=e,this._viewResizerWrapper=null,this.set("isEnabled",!0),this.decorate("begin"),this.decorate("cancel"),this.decorate("commit"),this.decorate("updateSize"),this.on("commit",(e=>{this.state.proposedWidth||this.state.proposedWidthPercents||(this._cleanup(),e.stop())}),{priority:"high"}),this.on("change:isEnabled",(()=>{this.isEnabled&&this.redraw()}))}attach(){const e=this,t=this._options.viewElement;this._options.editor.editing.view.change((i=>{const s=i.createUIElement("div",{class:"ck ck-reset_all ck-widget__resizer"},(function(t){const i=this.toDomElement(t);return e._appendHandles(i),e._appendSizeUI(i),e.on("change:isEnabled",((e,t,s)=>{i.style.display=s?"":"none"})),i.style.display=e.isEnabled?"":"none",i}));i.insert(i.createPositionAt(t,"end"),s),i.addClass("ck-widget_with-resizer",t),this._viewResizerWrapper=s}))}begin(e){this.state=new Ff(this._options),this._sizeView._bindToState(this._options,this.state),this._initialViewWidth=this._options.viewElement.getStyle("width"),this.state.begin(e,this._getHandleHost(),this._getResizeHost())}updateSize(e){const t=this._proposeNewSize(e);this._options.editor.editing.view.change((e=>{const i=this._options.unit||"%",s=("%"===i?t.widthPercents:t.width)+i;e.setStyle("width",s,this._options.viewElement)}));const i=this._getHandleHost(),s=new ia(i);t.handleHostWidth=Math.round(s.width),t.handleHostHeight=Math.round(s.height);const n=new ia(i);t.width=Math.round(n.width),t.height=Math.round(n.height),this.redraw(s),this.state.update(t)}commit(){const e=this._options.unit||"%",t=("%"===e?this.state.proposedWidthPercents:this.state.proposedWidth)+e;this._options.editor.editing.view.change((()=>{this._cleanup(),this._options.onCommit(t)}))}cancel(){this._cleanup()}destroy(){this.cancel()}redraw(e){const t=this._domResizerWrapper;if(!((i=t)&&i.ownerDocument&&i.ownerDocument.contains(i)))return;var i;const s=t.parentElement,n=this._getHandleHost(),o=this._viewResizerWrapper,r=[o.getStyle("width"),o.getStyle("height"),o.getStyle("left"),o.getStyle("top")];let a;if(s.isSameNode(n)){const t=e||new ia(n);a=[t.width+"px",t.height+"px",void 0,void 0]}else a=[n.offsetWidth+"px",n.offsetHeight+"px",n.offsetLeft+"px",n.offsetTop+"px"];"same"!==Ns(r,a)&&this._options.editor.editing.view.change((e=>{e.setStyle({width:a[0],height:a[1],left:a[2],top:a[3]},o)}))}containsHandle(e){return this._domResizerWrapper.contains(e)}static isResizeHandle(e){return e.classList.contains("ck-widget__resizer__handle")}_cleanup(){this._sizeView._dismiss(),this._options.editor.editing.view.change((e=>{e.setStyle("width",this._initialViewWidth,this._options.viewElement)}))}_proposeNewSize(e){const t=this.state,i={x:(s=e).pageX,y:s.pageY};var s;const n=!this._options.isCentered||this._options.isCentered(this),o={x:t._referenceCoordinates.x-(i.x+t.originalWidth),y:i.y-t.originalHeight-t._referenceCoordinates.y};n&&t.activeHandlePosition.endsWith("-right")&&(o.x=i.x-(t._referenceCoordinates.x+t.originalWidth)),n&&(o.x*=2);const r={width:Math.abs(t.originalWidth+o.x),height:Math.abs(t.originalHeight+o.y)};r.dominant=r.width/t.aspectRatio>r.height?"width":"height",r.max=r[r.dominant];const a={width:r.width,height:r.height};return"width"==r.dominant?a.height=a.width/t.aspectRatio:a.width=a.height*t.aspectRatio,{width:Math.round(a.width),height:Math.round(a.height),widthPercents:Math.min(Math.round(t.originalWidthPercents/t.originalWidth*a.width*100)/100,100)}}_getResizeHost(){const e=this._domResizerWrapper.parentElement;return this._options.getResizeHost(e)}_getHandleHost(){const e=this._domResizerWrapper.parentElement;return this._options.getHandleHost(e)}get _domResizerWrapper(){return this._options.editor.editing.view.domConverter.mapViewToDom(this._viewResizerWrapper)}_appendHandles(e){const t=["top-left","top-right","bottom-right","bottom-left"];for(const s of t)e.appendChild(new ld({tag:"div",attributes:{class:"ck-widget__resizer__handle "+(i=s,`ck-widget__resizer__handle-${i}`)}}).render());var i}_appendSizeUI(e){this._sizeView=new qf,this._sizeView.render(),e.appendChild(this._sizeView.element)}}dt(Hf,ot);class $f extends ut{static get pluginName(){return"WidgetResize"}init(){const e=this.editor.editing,t=Jo.window.document;this.set("visibleResizer",null),this.set("_activeResizer",null),this._resizers=new Map,e.view.addObserver(Ch),this._observer=Object.create(rr),this.listenTo(e.view.document,"mousedown",this._mouseDownListener.bind(this),{priority:"high"}),this._observer.listenTo(t,"mousemove",this._mouseMoveListener.bind(this)),this._observer.listenTo(t,"mouseup",this._mouseUpListener.bind(this));const i=()=>{this.visibleResizer&&this.visibleResizer.redraw()};this._redrawFocusedResizerThrottled=_p(i,200),this.on("change:visibleResizer",i),this.editor.ui.on("update",this._redrawFocusedResizerThrottled),this.editor.model.document.on("change",(()=>{for(const[e,t]of this._resizers)e.isAttached()||(this._resizers.delete(e),t.destroy())}),{priority:"lowest"}),this._observer.listenTo(Jo.window,"resize",this._redrawFocusedResizerThrottled);const s=this.editor.editing.view.document.selection;s.on("change",(()=>{const e=s.getSelectedElement();this.visibleResizer=this.getResizerByViewElement(e)||null}))}destroy(){this._observer.stopListening();for(const e of this._resizers.values())e.destroy();this._redrawFocusedResizerThrottled.cancel()}attachTo(e){const t=new Hf(e),i=this.editor.plugins;if(t.attach(),i.has("WidgetToolbarRepository")){const e=i.get("WidgetToolbarRepository");t.on("begin",(()=>{e.forceDisabled("resize")}),{priority:"lowest"}),t.on("cancel",(()=>{e.clearForceDisabled("resize")}),{priority:"highest"}),t.on("commit",(()=>{e.clearForceDisabled("resize")}),{priority:"highest"})}this._resizers.set(e.viewElement,t);const s=this.editor.editing.view.document.selection.getSelectedElement();return this.getResizerByViewElement(s)==t&&(this.visibleResizer=t),t}getResizerByViewElement(e){return this._resizers.get(e)}_getResizerByHandle(e){for(const t of this._resizers.values())if(t.containsHandle(e))return t}_mouseDownListener(e,t){const i=t.domTarget;Hf.isResizeHandle(i)&&(this._activeResizer=this._getResizerByHandle(i),this._activeResizer&&(this._activeResizer.begin(i),e.stop(),t.preventDefault()))}_mouseMoveListener(e,t){this._activeResizer&&this._activeResizer.updateSize(t)}_mouseUpListener(){this._activeResizer&&(this._activeResizer.commit(),this._activeResizer=null)}}dt($f,ot);class Uf extends pt{refresh(){const e=this.editor.plugins.get("ImageUtils").getClosestSelectedImageElement(this.editor.model.document.selection);this.isEnabled=!!e,this.isEnabled&&e.hasAttribute("alt")?this.value=e.getAttribute("alt"):this.value=!1}execute(e){const t=this.editor,i=t.plugins.get("ImageUtils"),s=t.model,n=i.getClosestSelectedImageElement(s.document.selection);s.change((t=>{t.setAttribute("alt",e.newValue,n)}))}}function Wf(e,t){const i=e.createEmptyElement("img"),s="imageBlock"===t?e.createContainerElement("figure",{class:"image"}):e.createContainerElement("span",{class:"image-inline"},{isAllowedInsideAttributeElement:!0});return e.insert(e.createPositionAt(s,0),i),s}function Zf(e,t){if(e.plugins.has("ImageInlineEditing")!==e.plugins.has("ImageBlockEditing"))return{name:"img",attributes:{src:!0}};const i=e.plugins.get("ImageUtils");return e=>i.isInlineImageView(e)&&e.hasAttribute("src")?(e.findAncestor(i.isBlockImageView)?"imageBlock":"imageInline")!==t?null:{name:!0,attributes:["src"]}:null}function Gf(e,t){const i=la(t.getSelectedBlocks());return!i||e.isObject(i)||i.isEmpty&&"listItem"!=i.name?"imageBlock":"imageInline"}function Kf(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function Jf(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Kf(Object(i),!0).forEach((function(t){Yf(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Kf(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function Yf(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class Qf extends ut{static get pluginName(){return"ImageUtils"}isImage(e){return this.isInlineImage(e)||this.isBlockImage(e)}isInlineImageView(e){return!!e&&e.is("element","img")}isBlockImageView(e){return!!e&&e.is("element","figure")&&e.hasClass("image")}insertImage(e={},t=null,i=null){const s=this.editor,n=s.model,o=n.document.selection;i=Xf(s,t||o,i),e=Jf(Jf({},Object.fromEntries(o.getAttributes())),e);for(const r in e)n.schema.checkAttribute(i,r)||delete e[r];return n.change((s=>{const r=s.createElement(i,e);return t||"imageInline"==i||(t=rp(o,n)),n.insertContent(r,t),r.parent?(s.setSelection(r,"on"),r):null}))}getClosestSelectedImageWidget(e){const t=e.getSelectedElement();if(t&&this.isImageWidget(t))return t;let i=e.getFirstPosition().parent;for(;i;){if(i.is("element")&&this.isImageWidget(i))return i;i=i.parent}return null}getClosestSelectedImageElement(e){const t=e.getSelectedElement();return this.isImage(t)?t:e.getFirstPosition().findAncestor("imageBlock")}isImageAllowed(){const e=this.editor.model.document.selection;return function(e,t){if("imageBlock"==Xf(e,t)){const i=function(e,t){const i=rp(e,t).start.parent;return i.isEmpty&&!i.is("element","$root")?i.parent:i}(t,e.model);if(e.model.schema.checkChild(i,"imageBlock"))return!0}else if(e.model.schema.checkChild(t.focus,"imageInline"))return!0;return!1}(this.editor,e)&&function(e){return[...e.focus.getAncestors()].every((e=>!e.is("element","imageBlock")))}(e)}toImageWidget(e,t,i){return t.setCustomProperty("image",!0,e),ep(e,t,{label:()=>{const t=this.findViewImgElement(e).getAttribute("alt");return t?`${t} ${i}`:i}})}isImageWidget(e){return!!e.getCustomProperty("image")&&Xm(e)}isBlockImage(e){return!!e&&e.is("element","imageBlock")}isInlineImage(e){return!!e&&e.is("element","imageInline")}findViewImgElement(e){if(this.isInlineImageView(e))return e;const t=this.editor.editing.view;for(const{item:i}of t.createRangeIn(e))if(this.isInlineImageView(i))return i}}function Xf(e,t,i){const s=e.model.schema,n=e.config.get("image.insert.type");return e.plugins.has("ImageBlockEditing")?e.plugins.has("ImageInlineEditing")?i||("inline"===n?"imageInline":"block"===n?"imageBlock":t.is("selection")?Gf(s,t):s.checkChild(t,"imageInline")?"imageInline":"imageBlock"):"imageBlock":"imageInline"}class eg extends ut{static get requires(){return[Qf]}static get pluginName(){return"ImageTextAlternativeEditing"}init(){this.editor.commands.add("imageTextAlternative",new Uf(this.editor))}}class tg extends ad{constructor(e){super(e);const t=this.locale.t;this.focusTracker=new ca,this.keystrokes=new ha,this.labeledInput=this._createLabeledInputView(),this.saveButtonView=this._createButton(t("Save"),rh.check,"ck-button-save"),this.saveButtonView.type="submit",this.cancelButtonView=this._createButton(t("Cancel"),rh.cancel,"ck-button-cancel","cancel"),this._focusables=new rd,this._focusCycler=new Dd({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"form",attributes:{class:["ck","ck-text-alternative-form","ck-responsive-form"],tabindex:"-1"},children:[this.labeledInput,this.saveButtonView,this.cancelButtonView]}),nd(this)}render(){super.render(),this.keystrokes.listenTo(this.element),od({view:this}),[this.labeledInput,this.saveButtonView,this.cancelButtonView].forEach((e=>{this._focusables.add(e),this.focusTracker.add(e.element)}))}_createButton(e,t,i,s){const n=new Rd(this.locale);return n.set({label:e,icon:t,tooltip:!0}),n.extendTemplate({attributes:{class:i}}),s&&n.delegate("execute").to(this,s),n}_createLabeledInputView(){const e=this.locale.t,t=new du(this.locale,uu);return t.label=e("Text alternative"),t}}function ig(e){const t=e.editing.view,i=bu.defaultPositions,s=e.plugins.get("ImageUtils");return{target:t.domConverter.viewToDom(s.getClosestSelectedImageWidget(t.document.selection)),positions:[i.northArrowSouth,i.northArrowSouthWest,i.northArrowSouthEast,i.southArrowNorth,i.southArrowNorthWest,i.southArrowNorthEast]}}class sg extends ut{static get requires(){return[Au]}static get pluginName(){return"ImageTextAlternativeUI"}init(){this._createButton(),this._createForm()}destroy(){super.destroy(),this._form.destroy()}_createButton(){const e=this.editor,t=e.t;e.ui.componentFactory.add("imageTextAlternative",(i=>{const s=e.commands.get("imageTextAlternative"),n=new Rd(i);return n.set({label:t("Change image text alternative"),icon:rh.lowVision,tooltip:!0}),n.bind("isEnabled").to(s,"isEnabled"),this.listenTo(n,"execute",(()=>{this._showForm()})),n}))}_createForm(){const e=this.editor,t=e.editing.view.document,i=e.plugins.get("ImageUtils");this._balloon=this.editor.plugins.get("ContextualBalloon"),this._form=new tg(e.locale),this._form.render(),this.listenTo(this._form,"submit",(()=>{e.execute("imageTextAlternative",{newValue:this._form.labeledInput.fieldView.element.value}),this._hideForm(!0)})),this.listenTo(this._form,"cancel",(()=>{this._hideForm(!0)})),this._form.keystrokes.set("Esc",((e,t)=>{this._hideForm(!0),t()})),this.listenTo(e.ui,"update",(()=>{i.getClosestSelectedImageWidget(t.selection)?this._isVisible&&function(e){const t=e.plugins.get("ContextualBalloon");if(e.plugins.get("ImageUtils").getClosestSelectedImageWidget(e.editing.view.document.selection)){const i=ig(e);t.updatePosition(i)}}(e):this._hideForm(!0)})),sd({emitter:this._form,activator:()=>this._isVisible,contextElements:[this._balloon.view.element],callback:()=>this._hideForm()})}_showForm(){if(this._isVisible)return;const e=this.editor,t=e.commands.get("imageTextAlternative"),i=this._form.labeledInput;this._form.disableCssTransitions(),this._isInBalloon||this._balloon.add({view:this._form,position:ig(e)}),i.fieldView.value=i.fieldView.element.value=t.value||"",this._form.labeledInput.fieldView.select(),this._form.enableCssTransitions()}_hideForm(e){this._isInBalloon&&(this._form.focusTracker.isFocused&&this._form.saveButtonView.focus(),this._balloon.remove(this._form),e&&this.editor.editing.view.focus())}get _isVisible(){return this._balloon.visibleView===this._form}get _isInBalloon(){return this._balloon.hasView(this._form)}}class ng extends ut{static get requires(){return[eg,sg]}static get pluginName(){return"ImageTextAlternative"}}function og(e,t){return e=>{e.on(`attribute:srcset:${t}`,i)};function i(t,i,s){if(!s.consumable.consume(i.item,t.name))return;const n=s.writer,o=s.mapper.toViewElement(i.item),r=e.findViewImgElement(o);if(null===i.attributeNewValue){const e=i.attributeOldValue;e.data&&(n.removeAttribute("srcset",r),n.removeAttribute("sizes",r),e.width&&n.removeAttribute("width",r))}else{const e=i.attributeNewValue;e.data&&(n.setAttribute("srcset",e.data,r),n.setAttribute("sizes","100vw",r),e.width&&n.setAttribute("width",e.width,r))}}}function rg(e,t,i){return e=>{e.on(`attribute:${i}:${t}`,s)};function s(t,i,s){if(!s.consumable.consume(i.item,t.name))return;const n=s.writer,o=s.mapper.toViewElement(i.item),r=e.findViewImgElement(o);n.setAttribute(i.attributeKey,i.attributeNewValue||"",r)}}class ag extends cr{observe(e){this.listenTo(e,"load",((e,t)=>{const i=t.target;this.checkShouldIgnoreEventFromTarget(i)||"IMG"==i.tagName&&this._fireEvents(t)}),{useCapture:!0})}_fireEvents(e){this.isEnabled&&(this.document.fire("layoutChanged"),this.document.fire("imageLoaded",e))}}function lg(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function cg(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?lg(Object(i),!0).forEach((function(t){hg(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):lg(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function hg(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class dg extends pt{constructor(e){super(e);const t=e.config.get("image.insert.type");e.plugins.has("ImageBlockEditing")||"block"===t&&d("image-block-plugin-required"),e.plugins.has("ImageInlineEditing")||"inline"===t&&d("image-inline-plugin-required")}refresh(){this.isEnabled=this.editor.plugins.get("ImageUtils").isImageAllowed()}execute(e){const t=Ss(e.source),i=this.editor.model.document.selection,s=this.editor.plugins.get("ImageUtils"),n=Object.fromEntries(i.getAttributes());t.forEach(((e,t)=>{const o=i.getSelectedElement();if("string"==typeof e&&(e={src:e}),t&&o&&s.isImage(o)){const t=this.editor.model.createPositionAfter(o);s.insertImage(cg(cg({},e),n),t)}else s.insertImage(cg(cg({},e),n))}))}}class ug extends ut{static get requires(){return[Qf]}static get pluginName(){return"ImageEditing"}init(){const e=this.editor,t=e.conversion;e.editing.view.addObserver(ag),t.for("upcast").attributeToAttribute({view:{name:"img",key:"alt"},model:"alt"}).attributeToAttribute({view:{name:"img",key:"srcset"},model:{key:"srcset",value:e=>{const t={data:e.getAttribute("srcset")};return e.hasAttribute("width")&&(t.width=e.getAttribute("width")),t}}});const i=new dg(e);e.commands.add("insertImage",i),e.commands.add("imageInsert",i)}}class mg extends pt{constructor(e,t){super(e),this._modelElementName=t}refresh(){const e=this.editor.plugins.get("ImageUtils"),t=e.getClosestSelectedImageElement(this.editor.model.document.selection);"imageBlock"===this._modelElementName?this.isEnabled=e.isInlineImage(t):this.isEnabled=e.isBlockImage(t)}execute(){const e=this.editor,t=this.editor.model,i=e.plugins.get("ImageUtils"),s=i.getClosestSelectedImageElement(t.document.selection),n=Object.fromEntries(s.getAttributes());return n.src||n.uploadId?t.change((e=>{const o=Array.from(t.markers).filter((e=>e.getRange().containsItem(s))),r=i.insertImage(n,t.createSelection(s,"on"),this._modelElementName);if(!r)return null;const a=e.createRangeOn(r);for(const t of o){const i=t.getRange(),s="$graveyard"!=i.root.rootName?i.getJoined(a,!0):a;e.updateMarker(t,{range:s})}return{oldElement:s,newElement:r}})):null}}class pg extends ut{static get requires(){return[ug,Qf,Wm]}static get pluginName(){return"ImageBlockEditing"}init(){const e=this.editor;e.model.schema.register("imageBlock",{isObject:!0,isBlock:!0,allowWhere:"$block",allowAttributes:["alt","src","srcset"]}),this._setupConversion(),e.plugins.has("ImageInlineEditing")&&(e.commands.add("imageTypeBlock",new mg(this.editor,"imageBlock")),this._setupClipboardIntegration())}_setupConversion(){const e=this.editor,t=e.t,i=e.conversion,s=e.plugins.get("ImageUtils");i.for("dataDowncast").elementToElement({model:"imageBlock",view:(e,{writer:t})=>Wf(t,"imageBlock")}),i.for("editingDowncast").elementToElement({model:"imageBlock",view:(e,{writer:i})=>s.toImageWidget(Wf(i,"imageBlock"),i,t("image widget"))}),i.for("downcast").add(rg(s,"imageBlock","src")).add(rg(s,"imageBlock","alt")).add(og(s,"imageBlock")),i.for("upcast").elementToElement({view:Zf(e,"imageBlock"),model:(e,{writer:t})=>t.createElement("imageBlock",{src:e.getAttribute("src")})}).add(function(e){return e=>{e.on("element:figure",t)};function t(t,i,s){if(!s.consumable.test(i.viewItem,{name:!0,classes:"image"}))return;const n=e.findViewImgElement(i.viewItem);if(!n||!n.hasAttribute("src")||!s.consumable.test(n,{name:!0}))return;const o=la(s.convertItem(n,i.modelCursor).modelRange.getItems());o&&(s.convertChildren(i.viewItem,o),s.updateConversionResult(o,i))}}(s))}_setupClipboardIntegration(){const e=this.editor,t=e.model,i=e.editing.view,s=e.plugins.get("ImageUtils");this.listenTo(e.plugins.get("ClipboardPipeline"),"inputTransformation",((n,o)=>{const r=Array.from(o.content.getChildren());let a;if(!r.every(s.isInlineImageView))return;a=o.targetRanges?e.editing.mapper.toModelRange(o.targetRanges[0]):t.document.selection.getFirstRange();const l=t.createSelection(a);if("imageBlock"===Gf(t.schema,l)){const e=new Eh(i.document),t=r.map((t=>e.createElement("figure",{class:"image"},t)));o.content=e.createDocumentFragment(t)}}))}}class fg extends ut{static get requires(){return[pg,vp,ng]}static get pluginName(){return"ImageBlock"}}class gg extends ut{static get requires(){return[ug,Qf,Wm]}static get pluginName(){return"ImageInlineEditing"}init(){const e=this.editor,t=e.model.schema;t.register("imageInline",{isObject:!0,isInline:!0,allowWhere:"$text",allowAttributes:["alt","src","srcset"]}),t.addChildCheck(((e,t)=>{if(e.endsWith("caption")&&"imageInline"===t.name)return!1})),this._setupConversion(),e.plugins.has("ImageBlockEditing")&&(e.commands.add("imageTypeInline",new mg(this.editor,"imageInline")),this._setupClipboardIntegration())}_setupConversion(){const e=this.editor,t=e.t,i=e.conversion,s=e.plugins.get("ImageUtils");i.for("dataDowncast").elementToElement({model:"imageInline",view:(e,{writer:t})=>t.createEmptyElement("img")}),i.for("editingDowncast").elementToElement({model:"imageInline",view:(e,{writer:i})=>s.toImageWidget(Wf(i,"imageInline"),i,t("image widget"))}),i.for("downcast").add(rg(s,"imageInline","src")).add(rg(s,"imageInline","alt")).add(og(s,"imageInline")),i.for("upcast").elementToElement({view:Zf(e,"imageInline"),model:(e,{writer:t})=>t.createElement("imageInline",{src:e.getAttribute("src")})})}_setupClipboardIntegration(){const e=this.editor,t=e.model,i=e.editing.view,s=e.plugins.get("ImageUtils");this.listenTo(e.plugins.get("ClipboardPipeline"),"inputTransformation",((n,o)=>{const r=Array.from(o.content.getChildren());let a;if(!r.every(s.isBlockImageView))return;a=o.targetRanges?e.editing.mapper.toModelRange(o.targetRanges[0]):t.document.selection.getFirstRange();const l=t.createSelection(a);if("imageInline"===Gf(t.schema,l)){const e=new Eh(i.document),t=r.map((t=>1===t.childCount?(Array.from(t.getAttributes()).forEach((i=>e.setAttribute(...i,s.findViewImgElement(t)))),t.getChild(0)):t));o.content=e.createDocumentFragment(t)}}))}}class wg extends ut{static get requires(){return[gg,vp,ng]}static get pluginName(){return"ImageInline"}}function bg(e){for(const t of e.getChildren())if(t&&t.is("element","caption"))return t;return null}function vg(e,t){const i=t.getFirstPosition().findAncestor("caption");return i&&e.isBlockImage(i.parent)?i:null}class yg extends pt{refresh(){const e=this.editor,t=e.plugins.get("ImageUtils");if(!e.plugins.has(pg))return this.isEnabled=!1,void(this.value=!1);const i=e.model.document.selection,s=i.getSelectedElement();if(!s){const e=vg(t,i);return this.isEnabled=!!e,void(this.value=!!e)}this.isEnabled=this.editor.plugins.get("ImageUtils").isImage(s),this.isEnabled?this.value=!!bg(s):this.value=!1}execute(e={}){const{focusCaptionOnShow:t}=e;this.editor.model.change((e=>{this.value?this._hideImageCaption(e):this._showImageCaption(e,t)}))}_showImageCaption(e,t){const i=this.editor.model.document.selection,s=this.editor.plugins.get("ImageCaptionEditing");let n=i.getSelectedElement();const o=s._getSavedCaption(n);this.editor.plugins.get("ImageUtils").isInlineImage(n)&&(this.editor.execute("imageTypeBlock"),n=i.getSelectedElement());const r=o||e.createElement("caption");e.append(r,n),t&&e.setSelection(r,"in")}_hideImageCaption(e){const t=this.editor,i=t.model.document.selection,s=t.plugins.get("ImageCaptionEditing"),n=t.plugins.get("ImageUtils");let o,r=i.getSelectedElement();r?o=bg(r):(o=vg(n,i),r=o.parent),s._saveCaption(r,o),e.setSelection(r,"on"),e.remove(o)}}class _g extends ut{static get requires(){return[Qf]}static get pluginName(){return"ImageCaptionEditing"}constructor(e){super(e),this._savedCaptionsMap=new WeakMap}init(){const e=this.editor,t=e.model.schema;t.isRegistered("caption")?t.extend("caption",{allowIn:"imageBlock"}):t.register("caption",{allowIn:"imageBlock",allowContentOf:"$block",isLimit:!0}),e.commands.add("toggleImageCaption",new yg(this.editor)),this._setupConversion(),this._setupImageTypeCommandsIntegration()}_setupConversion(){const e=this.editor,t=e.editing.view,i=e.plugins.get("ImageUtils"),s=e.t;e.conversion.for("upcast").elementToElement({view:e=>function(e,t){return"figcaption"==t.name&&e.isBlockImageView(t.parent)?{name:!0}:null}(i,e),model:"caption"}),e.conversion.for("dataDowncast").elementToElement({model:"caption",view:(e,{writer:t})=>i.isBlockImage(e.parent)?t.createContainerElement("figcaption"):null}),e.conversion.for("editingDowncast").elementToElement({model:"caption",view:(e,{writer:n})=>{if(!i.isBlockImage(e.parent))return null;const o=n.createEditableElement("figcaption");n.setCustomProperty("imageCaption",!0,o),lh({view:t,element:o,text:s("Enter image caption"),keepOnFocus:!0});const r=op(o,n);return sp(r,n,((e,t,i)=>i.addClass(Ss(t.classes),e)),((e,t,i)=>i.removeClass(Ss(t.classes),e))),r}}),e.editing.mapper.on("modelToViewPosition",kg(t)),e.data.mapper.on("modelToViewPosition",kg(t))}_setupImageTypeCommandsIntegration(){const e=this.editor,t=e.plugins.get("ImageUtils"),i=e.commands.get("imageTypeInline"),s=e.commands.get("imageTypeBlock"),n=e=>{if(!e.return)return;const{oldElement:i,newElement:s}=e.return;if(!i)return;if(t.isBlockImage(i)){const e=bg(i);if(e)return void this._saveCaption(s,e)}const n=this._getSavedCaption(i);n&&this._saveCaption(s,n)};i&&this.listenTo(i,"execute",n,{priority:"low"}),s&&this.listenTo(s,"execute",n,{priority:"low"})}_getSavedCaption(e){const t=this._savedCaptionsMap.get(e);return t?Ta.fromJSON(t):null}_saveCaption(e,t){this._savedCaptionsMap.set(e,t.toJSON())}}function kg(e){return(t,i)=>{const s=i.modelPosition,n=s.parent;if(!n.is("element","imageBlock"))return;const o=i.mapper.toViewElement(n);i.viewPosition=e.createPositionAt(o,s.offset+1)}}class Ag extends ut{static get requires(){return[Qf]}static get pluginName(){return"ImageCaptionUI"}init(){const e=this.editor,t=e.editing.view,i=e.plugins.get("ImageUtils"),s=e.t;e.ui.componentFactory.add("toggleImageCaption",(n=>{const o=e.commands.get("toggleImageCaption"),r=new Rd(n);return r.set({icon:rh.caption,tooltip:!0,isToggleable:!0}),r.bind("isOn","isEnabled").to(o,"value","isEnabled"),r.bind("label").to(o,"value",(e=>s(e?"Toggle caption off":"Toggle caption on"))),this.listenTo(r,"execute",(()=>{e.execute("toggleImageCaption",{focusCaptionOnShow:!0});const s=vg(i,e.model.document.selection);if(s){const i=e.editing.mapper.toViewElement(s);t.scrollToTheSelection(),t.change((e=>{e.addClass("image__caption_highlighted",i)}))}})),r}))}}class xg extends pt{refresh(){const e=this.editor,t=e.plugins.get("ImageUtils").getClosestSelectedImageElement(e.model.document.selection);this.isEnabled=!!t,t&&t.hasAttribute("width")?this.value={width:t.getAttribute("width"),height:null}:this.value=null}execute(e){const t=this.editor,i=t.model,s=t.plugins.get("ImageUtils").getClosestSelectedImageElement(i.document.selection);this.value={width:e.width,height:null},s&&i.change((t=>{t.setAttribute("width",e.width,s)}))}}class Cg extends ut{static get requires(){return[Qf]}static get pluginName(){return"ImageResizeEditing"}constructor(e){super(e),e.config.define("image",{resizeUnit:"%",resizeOptions:[{name:"resizeImage:original",value:null,icon:"original"},{name:"resizeImage:25",value:"25",icon:"small"},{name:"resizeImage:50",value:"50",icon:"medium"},{name:"resizeImage:75",value:"75",icon:"large"}]})}init(){const e=this.editor,t=new xg(e);this._registerSchema(),this._registerConverters("imageBlock"),this._registerConverters("imageInline"),e.commands.add("resizeImage",t),e.commands.add("imageResize",t)}_registerSchema(){this.editor.plugins.has("ImageBlockEditing")&&this.editor.model.schema.extend("imageBlock",{allowAttributes:"width"}),this.editor.plugins.has("ImageInlineEditing")&&this.editor.model.schema.extend("imageInline",{allowAttributes:"width"})}_registerConverters(e){const t=this.editor;t.conversion.for("downcast").add((t=>t.on(`attribute:width:${e}`,((e,t,i)=>{if(!i.consumable.consume(t.item,e.name))return;const s=i.writer,n=i.mapper.toViewElement(t.item);null!==t.attributeNewValue?(s.setStyle("width",t.attributeNewValue,n),s.addClass("image_resized",n)):(s.removeStyle("width",n),s.removeClass("image_resized",n))})))),t.conversion.for("upcast").attributeToAttribute({view:{name:"imageBlock"===e?"figure":"img",styles:{width:/.+/}},model:{key:"width",value:e=>e.getStyle("width")}})}}const Eg={small:rh.objectSizeSmall,medium:rh.objectSizeMedium,large:rh.objectSizeLarge,original:rh.objectSizeFull};class Tg extends ut{static get requires(){return[Cg]}static get pluginName(){return"ImageResizeButtons"}constructor(e){super(e),this._resizeUnit=e.config.get("image.resizeUnit")}init(){const e=this.editor,t=e.config.get("image.resizeOptions"),i=e.commands.get("resizeImage");this.bind("isEnabled").to(i);for(const s of t)this._registerImageResizeButton(s);this._registerImageResizeDropdown(t)}_registerImageResizeButton(e){const t=this.editor,{name:i,value:s,icon:n}=e,o=s?s+this._resizeUnit:null;t.ui.componentFactory.add(i,(i=>{const s=new Rd(i),r=t.commands.get("resizeImage"),a=this._getOptionLabelValue(e,!0);if(!Eg[n])throw new h("imageresizebuttons-missing-icon",t,e);return s.set({label:a,icon:Eg[n],tooltip:a,isToggleable:!0}),s.bind("isEnabled").to(this),s.bind("isOn").to(r,"value",Sg(o)),this.listenTo(s,"execute",(()=>{t.execute("resizeImage",{width:o})})),s}))}_registerImageResizeDropdown(e){const t=this.editor,i=t.t,s=e.find((e=>!e.value)),n=n=>{const o=t.commands.get("resizeImage"),r=su(n,Fd),a=r.buttonView;return a.set({tooltip:i("Resize image"),commandValue:s.value,icon:Eg.medium,isToggleable:!0,label:this._getOptionLabelValue(s),withText:!0,class:"ck-resize-image-button"}),a.bind("label").to(o,"value",(e=>e&&e.width?e.width:this._getOptionLabelValue(s))),r.bind("isOn").to(o),r.bind("isEnabled").to(this),ou(r,this._getResizeDropdownListItemDefinitions(e,o)),r.listView.ariaLabel=i("Image resize list"),this.listenTo(r,"execute",(e=>{t.execute(e.source.commandName,{width:e.source.commandValue}),t.editing.view.focus()})),r};t.ui.componentFactory.add("resizeImage",n),t.ui.componentFactory.add("imageResize",n)}_getOptionLabelValue(e,t){const i=this.editor.t;return e.label?e.label:t?e.value?i("Resize image to %0",e.value+this._resizeUnit):i("Resize image to the original size"):e.value?e.value+this._resizeUnit:i("Original")}_getResizeDropdownListItemDefinitions(e,t){const i=new Es;return e.map((e=>{const s=e.value?e.value+this._resizeUnit:null,n={type:"button",model:new pu({commandName:"resizeImage",commandValue:s,label:this._getOptionLabelValue(e),withText:!0,icon:null})};n.model.bind("isOn").to(t,"value",Sg(s)),i.add(n)})),i}}function Sg(e){return t=>null===e&&t===e||t&&t.width===e}const Pg=/(image|image-inline)/,Og="image_resized";class Ig extends ut{static get requires(){return[$f]}static get pluginName(){return"ImageResizeHandles"}init(){const e=this.editor.commands.get("resizeImage");this.bind("isEnabled").to(e),this._setupResizerCreator()}_setupResizerCreator(){const e=this.editor,t=e.editing.view;t.addObserver(ag),this.listenTo(t.document,"imageLoaded",((i,s)=>{if(!s.target.matches("figure.image.ck-widget > img,figure.image.ck-widget > picture > img,figure.image.ck-widget > a > img,figure.image.ck-widget > a > picture > img,span.image-inline.ck-widget > img,span.image-inline.ck-widget > picture > img"))return;const n=e.editing.view.domConverter,o=n.domToView(s.target).findAncestor({classes:Pg});let r=this.editor.plugins.get($f).getResizerByViewElement(o);if(r)return void r.redraw();const a=e.editing.mapper,l=a.toModelElement(o);r=e.plugins.get($f).attachTo({unit:e.config.get("image.resizeUnit"),modelElement:l,viewElement:o,editor:e,getHandleHost:e=>e.querySelector("img"),getResizeHost:()=>n.viewToDom(a.toViewElement(l.parent)),isCentered(){const e=l.getAttribute("imageStyle");return!e||"block"==e||"alignCenter"==e},onCommit(i){t.change((e=>{e.removeClass(Og,o)})),e.execute("resizeImage",{width:i})}}),r.on("updateSize",(()=>{o.hasClass(Og)||t.change((e=>{e.addClass(Og,o)}))})),r.bind("isEnabled").to(this)}))}}class Rg extends pt{constructor(e,t){super(e),this._defaultStyles={imageBlock:!1,imageInline:!1},this._styles=new Map(t.map((e=>{if(e.isDefault)for(const t of e.modelElements)this._defaultStyles[t]=e.name;return[e.name,e]})))}refresh(){const e=this.editor.plugins.get("ImageUtils").getClosestSelectedImageElement(this.editor.model.document.selection);this.isEnabled=!!e,this.isEnabled?e.hasAttribute("imageStyle")?this.value=e.getAttribute("imageStyle"):this.value=this._defaultStyles[e.name]:this.value=!1}execute(e={}){const t=this.editor,i=t.model,s=t.plugins.get("ImageUtils");i.change((t=>{const n=e.value;let o=s.getClosestSelectedImageElement(i.document.selection);n&&this.shouldConvertImageType(n,o)&&(this.editor.execute(s.isBlockImage(o)?"imageTypeInline":"imageTypeBlock"),o=s.getClosestSelectedImageElement(i.document.selection)),!n||this._styles.get(n).isDefault?t.removeAttribute("imageStyle",o):t.setAttribute("imageStyle",n,o)}))}shouldConvertImageType(e,t){return!this._styles.get(e).modelElements.includes(t.name)}}function zg(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function Mg(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?zg(Object(i),!0).forEach((function(t){Ng(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):zg(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function Ng(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const{objectFullWidth:Dg,objectInline:Vg,objectLeft:Bg,objectRight:Lg,objectCenter:Fg,objectBlockLeft:jg,objectBlockRight:qg}=rh,Hg={inline:{name:"inline",title:"In line",icon:Vg,modelElements:["imageInline"],isDefault:!0},alignLeft:{name:"alignLeft",title:"Left aligned image",icon:Bg,modelElements:["imageBlock","imageInline"],className:"image-style-align-left"},alignBlockLeft:{name:"alignBlockLeft",title:"Left aligned image",icon:jg,modelElements:["imageBlock"],className:"image-style-block-align-left"},alignCenter:{name:"alignCenter",title:"Centered image",icon:Fg,modelElements:["imageBlock"],className:"image-style-align-center"},alignRight:{name:"alignRight",title:"Right aligned image",icon:Lg,modelElements:["imageBlock","imageInline"],className:"image-style-align-right"},alignBlockRight:{name:"alignBlockRight",title:"Right aligned image",icon:qg,modelElements:["imageBlock"],className:"image-style-block-align-right"},block:{name:"block",title:"Centered image",icon:Fg,modelElements:["imageBlock"],isDefault:!0},side:{name:"side",title:"Side image",icon:Lg,modelElements:["imageBlock"],className:"image-style-side"}},$g={full:Dg,left:jg,right:qg,center:Fg,inlineLeft:Bg,inlineRight:Lg,inline:Vg},Ug=[{name:"imageStyle:wrapText",title:"Wrap text",defaultItem:"imageStyle:alignLeft",items:["imageStyle:alignLeft","imageStyle:alignRight"]},{name:"imageStyle:breakText",title:"Break text",defaultItem:"imageStyle:block",items:["imageStyle:alignBlockLeft","imageStyle:block","imageStyle:alignBlockRight"]}];function Wg(e){d("image-style-configuration-definition-invalid",e)}const Zg={normalizeStyles:function(e){return(e.configuredStyles.options||[]).map((e=>function(e){return"string"==typeof(e="string"==typeof e?Hg[e]?Mg({},Hg[e]):{name:e}:function(e,t){const i=Mg({},t);for(const s in e)Object.prototype.hasOwnProperty.call(t,s)||(i[s]=e[s]);return i}(Hg[e.name],e)).icon&&(e.icon=$g[e.icon]||e.icon),e}(e))).filter((t=>function(e,{isBlockPluginLoaded:t,isInlinePluginLoaded:i}){const{modelElements:s,name:n}=e;if(!(s&&s.length&&n))return Wg({style:e}),!1;{const n=[t?"imageBlock":null,i?"imageInline":null];if(!s.some((e=>n.includes(e))))return d("image-style-missing-dependency",{style:e,missingPlugins:s.map((e=>"imageBlock"===e?"ImageBlockEditing":"ImageInlineEditing"))}),!1}return!0}(t,e)))},getDefaultStylesConfiguration:function(e,t){return e&&t?{options:["inline","alignLeft","alignRight","alignCenter","alignBlockLeft","alignBlockRight","block","side"]}:e?{options:["block","side"]}:t?{options:["inline","alignLeft","alignRight"]}:{}},getDefaultDropdownDefinitions:function(e){return e.has("ImageBlockEditing")&&e.has("ImageInlineEditing")?[...Ug]:[]},warnInvalidStyle:Wg,DEFAULT_OPTIONS:Hg,DEFAULT_ICONS:$g,DEFAULT_DROPDOWN_DEFINITIONS:Ug};function Gg(e,t){for(const i of t)if(i.name===e)return i}class Kg extends ut{static get pluginName(){return"ImageStyleEditing"}static get requires(){return[Qf]}init(){const{normalizeStyles:e,getDefaultStylesConfiguration:t}=Zg,i=this.editor,s=i.plugins.has("ImageBlockEditing"),n=i.plugins.has("ImageInlineEditing");i.config.define("image.styles",t(s,n)),this.normalizedStyles=e({configuredStyles:i.config.get("image.styles"),isBlockPluginLoaded:s,isInlinePluginLoaded:n}),this._setupConversion(s,n),this._setupPostFixer(),i.commands.add("imageStyle",new Rg(i,this.normalizedStyles))}_setupConversion(e,t){const i=this.editor,s=i.model.schema,n=(o=this.normalizedStyles,(e,t,i)=>{if(!i.consumable.consume(t.item,e.name))return;const s=Gg(t.attributeNewValue,o),n=Gg(t.attributeOldValue,o),r=i.mapper.toViewElement(t.item),a=i.writer;n&&a.removeClass(n.className,r),s&&a.addClass(s.className,r)});var o;const r=function(e){const t={imageInline:e.filter((e=>!e.isDefault&&e.modelElements.includes("imageInline"))),imageBlock:e.filter((e=>!e.isDefault&&e.modelElements.includes("imageBlock")))};return(e,i,s)=>{if(!i.modelRange)return;const n=i.viewItem,o=la(i.modelRange.getItems());if(o&&s.schema.checkAttribute(o,"imageStyle"))for(const r of t[o.name])s.consumable.consume(n,{classes:r.className})&&s.writer.setAttribute("imageStyle",r.name,o)}}(this.normalizedStyles);i.editing.downcastDispatcher.on("attribute:imageStyle",n),i.data.downcastDispatcher.on("attribute:imageStyle",n),e&&(s.extend("imageBlock",{allowAttributes:"imageStyle"}),i.data.upcastDispatcher.on("element:figure",r,{priority:"low"})),t&&(s.extend("imageInline",{allowAttributes:"imageStyle"}),i.data.upcastDispatcher.on("element:img",r,{priority:"low"}))}_setupPostFixer(){const e=this.editor,t=e.model.document,i=e.plugins.get(Qf),s=new Map(this.normalizedStyles.map((e=>[e.name,e])));t.registerPostFixer((e=>{let n=!1;for(const o of t.differ.getChanges())if("insert"==o.type||"attribute"==o.type&&"imageStyle"==o.attributeKey){let t="insert"==o.type?o.position.nodeAfter:o.range.start.nodeAfter;if(t&&t.is("element","paragraph")&&t.childCount>0&&(t=t.getChild(0)),!i.isImage(t))continue;const r=t.getAttribute("imageStyle");if(!r)continue;const a=s.get(r);a&&a.modelElements.includes(t.name)||(e.removeAttribute("imageStyle",t),n=!0)}return n}))}}class Jg extends ut{static get requires(){return[Kg]}static get pluginName(){return"ImageStyleUI"}get localizedDefaultStylesTitles(){const e=this.editor.t;return{"Wrap text":e("Wrap text"),"Break text":e("Break text"),"In line":e("In line"),"Full size image":e("Full size image"),"Side image":e("Side image"),"Left aligned image":e("Left aligned image"),"Centered image":e("Centered image"),"Right aligned image":e("Right aligned image")}}init(){const e=this.editor.plugins,t=this.editor.config.get("image.toolbar")||[],i=Yg(e.get("ImageStyleEditing").normalizedStyles,this.localizedDefaultStylesTitles);for(const n of i)this._createButton(n);const s=Yg([...t.filter(E),...Zg.getDefaultDropdownDefinitions(e)],this.localizedDefaultStylesTitles);for(const n of s)this._createDropdown(n,i)}_createDropdown(e,t){const i=this.editor.ui.componentFactory;i.add(e.name,(s=>{let n;const{defaultItem:o,items:r,title:a}=e,l=r.filter((e=>t.find((({name:t})=>Qg(t)===e)))).map((e=>{const t=i.create(e);return e===o&&(n=t),t}));r.length!==l.length&&Zg.warnInvalidStyle({dropdown:e});const c=su(s,jd),h=c.buttonView;return nu(c,l),h.set({label:Xg(a,n.label),class:null,tooltip:!0}),h.bind("icon").toMany(l,"isOn",((...e)=>{const t=e.findIndex(ae);return t<0?n.icon:l[t].icon})),h.bind("label").toMany(l,"isOn",((...e)=>{const t=e.findIndex(ae);return Xg(a,t<0?n.label:l[t].label)})),h.bind("isOn").toMany(l,"isOn",((...e)=>e.some(ae))),h.bind("class").toMany(l,"isOn",((...e)=>e.some(ae)?"ck-splitbutton_flatten":null)),h.on("execute",(()=>{l.some((({isOn:e})=>e))?c.isOpen=!c.isOpen:n.fire("execute")})),c.bind("isEnabled").toMany(l,"isEnabled",((...e)=>e.some(ae))),c}))}_createButton(e){const t=e.name;this.editor.ui.componentFactory.add(Qg(t),(i=>{const s=this.editor.commands.get("imageStyle"),n=new Rd(i);return n.set({label:e.title,icon:e.icon,tooltip:!0,isToggleable:!0}),n.bind("isEnabled").to(s,"isEnabled"),n.bind("isOn").to(s,"value",(e=>e===t)),n.on("execute",this._executeCommand.bind(this,t)),n}))}_executeCommand(e){this.editor.execute("imageStyle",{value:e}),this.editor.editing.view.focus()}}function Yg(e,t){for(const i of e)t[i.title]&&(i.title=t[i.title]);return e}function Qg(e){return`imageStyle:${e}`}function Xg(e,t){return(e?e+": ":"")+t}class ew{constructor(){const e=new window.FileReader;this._reader=e,this._data=void 0,this.set("loaded",0),e.onprogress=e=>{this.loaded=e.loaded}}get error(){return this._reader.error}get data(){return this._data}read(e){const t=this._reader;return this.total=e.size,new Promise(((i,s)=>{t.onload=()=>{const e=t.result;this._data=e,i(e)},t.onerror=()=>{s("error")},t.onabort=()=>{s("aborted")},this._reader.readAsDataURL(e)}))}abort(){this._reader.abort()}}dt(ew,ot);class tw extends ut{static get pluginName(){return"FileRepository"}static get requires(){return[oh]}init(){this.loaders=new Es,this.loaders.on("add",(()=>this._updatePendingAction())),this.loaders.on("remove",(()=>this._updatePendingAction())),this._loadersMap=new Map,this._pendingAction=null,this.set("uploaded",0),this.set("uploadTotal",null),this.bind("uploadedPercent").to(this,"uploaded",this,"uploadTotal",((e,t)=>t?e/t*100:0))}getLoader(e){return this._loadersMap.get(e)||null}createLoader(e){if(!this.createUploadAdapter)return d("filerepository-no-upload-adapter"),null;const t=new iw(Promise.resolve(e),this.createUploadAdapter);return this.loaders.add(t),this._loadersMap.set(e,t),e instanceof Promise&&t.file.then((e=>{this._loadersMap.set(e,t)})).catch((()=>{})),t.on("change:uploaded",(()=>{let e=0;for(const t of this.loaders)e+=t.uploaded;this.uploaded=e})),t.on("change:uploadTotal",(()=>{let e=0;for(const t of this.loaders)t.uploadTotal&&(e+=t.uploadTotal);this.uploadTotal=e})),t}destroyLoader(e){const t=e instanceof iw?e:this.getLoader(e);t._destroy(),this.loaders.remove(t),this._loadersMap.forEach(((e,i)=>{e===t&&this._loadersMap.delete(i)}))}_updatePendingAction(){const e=this.editor.plugins.get(oh);if(this.loaders.length){if(!this._pendingAction){const t=this.editor.t,i=e=>`${t("Upload in progress")} ${parseInt(e)}%.`;this._pendingAction=e.add(i(this.uploadedPercent)),this._pendingAction.bind("message").to(this,"uploadedPercent",i)}}else e.remove(this._pendingAction),this._pendingAction=null}}dt(tw,ot);class iw{constructor(e,t){this.id=r(),this._filePromiseWrapper=this._createFilePromiseWrapper(e),this._adapter=t(this),this._reader=new ew,this.set("status","idle"),this.set("uploaded",0),this.set("uploadTotal",null),this.bind("uploadedPercent").to(this,"uploaded",this,"uploadTotal",((e,t)=>t?e/t*100:0)),this.set("uploadResponse",null)}get file(){return this._filePromiseWrapper?this._filePromiseWrapper.promise.then((e=>this._filePromiseWrapper?e:null)):Promise.resolve(null)}get data(){return this._reader.data}read(){if("idle"!=this.status)throw new h("filerepository-read-wrong-status",this);return this.status="reading",this.file.then((e=>this._reader.read(e))).then((e=>{if("reading"!==this.status)throw this.status;return this.status="idle",e})).catch((e=>{if("aborted"===e)throw this.status="aborted","aborted";throw this.status="error",this._reader.error?this._reader.error:e}))}upload(){if("idle"!=this.status)throw new h("filerepository-upload-wrong-status",this);return this.status="uploading",this.file.then((()=>this._adapter.upload())).then((e=>(this.uploadResponse=e,this.status="idle",e))).catch((e=>{if("aborted"===this.status)throw"aborted";throw this.status="error",e}))}abort(){const e=this.status;this.status="aborted",this._filePromiseWrapper.isFulfilled?"reading"==e?this._reader.abort():"uploading"==e&&this._adapter.abort&&this._adapter.abort():(this._filePromiseWrapper.promise.catch((()=>{})),this._filePromiseWrapper.rejecter("aborted")),this._destroy()}_destroy(){this._filePromiseWrapper=void 0,this._reader=void 0,this._adapter=void 0,this.uploadResponse=void 0}_createFilePromiseWrapper(e){const t={};return t.promise=new Promise(((i,s)=>{t.rejecter=s,t.isFulfilled=!1,e.then((e=>{t.isFulfilled=!0,i(e)})).catch((e=>{t.isFulfilled=!0,s(e)}))})),t}}dt(iw,ot);class sw extends ad{constructor(e){super(e),this.buttonView=new Rd(e),this._fileInputView=new nw(e),this._fileInputView.bind("acceptedType").to(this),this._fileInputView.bind("allowMultipleFiles").to(this),this._fileInputView.delegate("done").to(this),this.setTemplate({tag:"span",attributes:{class:"ck-file-dialog-button"},children:[this.buttonView,this._fileInputView]}),this.buttonView.on("execute",(()=>{this._fileInputView.open()}))}focus(){this.buttonView.focus()}}class nw extends ad{constructor(e){super(e),this.set("acceptedType"),this.set("allowMultipleFiles",!1);const t=this.bindTemplate;this.setTemplate({tag:"input",attributes:{class:["ck-hidden"],type:"file",tabindex:"-1",accept:t.to("acceptedType"),multiple:t.to("allowMultipleFiles")},on:{change:t.to((()=>{this.element&&this.element.files&&this.element.files.length&&this.fire("done",this.element.files),this.element.value=""}))}})}open(){this.element.click()}}function ow(e){const t=e.map((e=>e.replace("+","\\+")));return new RegExp(`^image\\/(${t.join("|")})$`)}function rw(e){return new Promise(((t,i)=>{const s=e.getAttribute("src");fetch(s).then((e=>e.blob())).then((e=>{const i=aw(e,s),n=i.replace("image/",""),o=new File([e],`image.${n}`,{type:i});t(o)})).catch((e=>e&&"TypeError"===e.name?function(e){return function(e){return new Promise(((t,i)=>{const s=Jo.document.createElement("img");s.addEventListener("load",(()=>{const e=Jo.document.createElement("canvas");e.width=s.width,e.height=s.height,e.getContext("2d").drawImage(s,0,0),e.toBlob((e=>e?t(e):i()))})),s.addEventListener("error",(()=>i())),s.src=e}))}(e).then((t=>{const i=aw(t,e),s=i.replace("image/","");return new File([t],`image.${s}`,{type:i})}))}(s).then(t).catch(i):i(e)))}))}function aw(e,t){return e.type?e.type:t.match(/data:(image\/\w+);base64/)?t.match(/data:(image\/\w+);base64/)[1].toLowerCase():"image/jpeg"}class lw extends ut{static get pluginName(){return"ImageUploadUI"}init(){const e=this.editor,t=e.t,i=i=>{const s=new sw(i),n=e.commands.get("uploadImage"),o=e.config.get("image.upload.types"),r=ow(o);return s.set({acceptedType:o.map((e=>`image/${e}`)).join(","),allowMultipleFiles:!0}),s.buttonView.set({label:t("Insert image"),icon:rh.image,tooltip:!0}),s.buttonView.bind("isEnabled").to(n),s.on("done",((t,i)=>{const s=Array.from(i).filter((e=>r.test(e.type)));s.length&&e.execute("uploadImage",{file:s})})),s};e.ui.componentFactory.add("uploadImage",i),e.ui.componentFactory.add("imageUpload",i)}}class cw extends ut{static get pluginName(){return"ImageUploadProgress"}constructor(e){super(e),this.placeholder="data:image/svg+xml;utf8,"+encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 700 250"><rect rx="4"/></svg>')}init(){const e=this.editor;e.plugins.has("ImageBlockEditing")&&e.editing.downcastDispatcher.on("attribute:uploadStatus:imageBlock",((...e)=>this.uploadStatusChange(...e))),e.plugins.has("ImageInlineEditing")&&e.editing.downcastDispatcher.on("attribute:uploadStatus:imageInline",((...e)=>this.uploadStatusChange(...e)))}uploadStatusChange(e,t,i){const s=this.editor,n=t.item,o=n.getAttribute("uploadId");if(!i.consumable.consume(t.item,e.name))return;const r=s.plugins.get("ImageUtils"),a=s.plugins.get(tw),l=o?t.attributeNewValue:null,c=this.placeholder,h=s.editing.mapper.toViewElement(n),d=i.writer;if("reading"==l)return hw(h,d),void dw(r,c,h,d);if("uploading"==l){const e=a.loaders.get(o);return hw(h,d),void(e?(uw(h,d),function(e,t,i,s){const n=function(e){const t=e.createUIElement("div",{class:"ck-progress-bar"});return e.setCustomProperty("progressBar",!0,t),t}(t);t.insert(t.createPositionAt(e,"end"),n),i.on("change:uploadedPercent",((e,t,i)=>{s.change((e=>{e.setStyle("width",i+"%",n)}))}))}(h,d,e,s.editing.view),function(e,t,i,s){if(s.data){const n=e.findViewImgElement(t);i.setAttribute("src",s.data,n)}}(r,h,d,e)):dw(r,c,h,d))}"complete"==l&&a.loaders.get(o)&&function(e,t,i){const s=t.createUIElement("div",{class:"ck-image-upload-complete-icon"});t.insert(t.createPositionAt(e,"end"),s),setTimeout((()=>{i.change((e=>e.remove(e.createRangeOn(s))))}),3e3)}(h,d,s.editing.view),function(e,t){pw(e,t,"progressBar")}(h,d),uw(h,d),function(e,t){t.removeClass("ck-appear",e)}(h,d)}}function hw(e,t){e.hasClass("ck-appear")||t.addClass("ck-appear",e)}function dw(e,t,i,s){i.hasClass("ck-image-upload-placeholder")||s.addClass("ck-image-upload-placeholder",i);const n=e.findViewImgElement(i);n.getAttribute("src")!==t&&s.setAttribute("src",t,n),mw(i,"placeholder")||s.insert(s.createPositionAfter(n),function(e){const t=e.createUIElement("div",{class:"ck-upload-placeholder-loader"});return e.setCustomProperty("placeholder",!0,t),t}(s))}function uw(e,t){e.hasClass("ck-image-upload-placeholder")&&t.removeClass("ck-image-upload-placeholder",e),pw(e,t,"placeholder")}function mw(e,t){for(const i of e.getChildren())if(i.getCustomProperty(t))return i}function pw(e,t,i){const s=mw(e,i);s&&t.remove(t.createRangeOn(s))}function fw(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function gw(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?fw(Object(i),!0).forEach((function(t){ww(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):fw(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function ww(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class bw extends pt{refresh(){const e=this.editor,t=e.plugins.get("ImageUtils"),i=e.model.document.selection.getSelectedElement();this.isEnabled=t.isImageAllowed()||t.isImage(i)}execute(e){const t=Ss(e.file),i=this.editor.model.document.selection,s=this.editor.plugins.get("ImageUtils"),n=Object.fromEntries(i.getAttributes());t.forEach(((e,t)=>{const o=i.getSelectedElement();if(t&&o&&s.isImage(o)){const t=this.editor.model.createPositionAfter(o);this._uploadImage(e,n,t)}else this._uploadImage(e,n)}))}_uploadImage(e,t,i){const s=this.editor,n=s.plugins.get(tw).createLoader(e),o=s.plugins.get("ImageUtils");n&&o.insertImage(gw(gw({},t),{},{uploadId:n.id}),i)}}class vw extends ut{static get requires(){return[tw,mu,Wm,Qf]}static get pluginName(){return"ImageUploadEditing"}constructor(e){super(e),e.config.define("image",{upload:{types:["jpeg","png","gif","bmp","webp","tiff"]}}),this._uploadImageElements=new Map}init(){const e=this.editor,t=e.model.document,i=e.conversion,s=e.plugins.get(tw),n=e.plugins.get("ImageUtils"),o=ow(e.config.get("image.upload.types")),r=new bw(e);e.commands.add("uploadImage",r),e.commands.add("imageUpload",r),i.for("upcast").attributeToAttribute({view:{name:"img",key:"uploadId"},model:"uploadId"}),this.listenTo(e.editing.view.document,"clipboardInput",((t,i)=>{if(s=i.dataTransfer,Array.from(s.types).includes("text/html")&&""!==s.getData("text/html"))return;var s;const n=Array.from(i.dataTransfer.files).filter((e=>!!e&&o.test(e.type)));n.length&&(t.stop(),e.model.change((t=>{i.targetRanges&&t.setSelection(i.targetRanges.map((t=>e.editing.mapper.toModelRange(t)))),e.model.enqueueChange("default",(()=>{e.execute("uploadImage",{file:n})}))})))})),this.listenTo(e.plugins.get("ClipboardPipeline"),"inputTransformation",((t,i)=>{const o=Array.from(e.editing.view.createRangeIn(i.content)).filter((e=>function(e,t){return!(!e.isInlineImageView(t)||!t.getAttribute("src"))&&(t.getAttribute("src").match(/^data:image\/\w+;base64,/g)||t.getAttribute("src").match(/^blob:/g))}(n,e.item)&&!e.item.getAttribute("uploadProcessed"))).map((e=>({promise:rw(e.item),imageElement:e.item})));if(!o.length)return;const r=new Eh(e.editing.view.document);for(const e of o){r.setAttribute("uploadProcessed",!0,e.imageElement);const t=s.createLoader(e.promise);t&&(r.setAttribute("src","",e.imageElement),r.setAttribute("uploadId",t.id,e.imageElement))}})),e.editing.view.document.on("dragover",((e,t)=>{t.preventDefault()})),t.on("change",(()=>{const i=t.differ.getChanges({includeChangesInGraveyard:!0}).reverse(),n=new Set;for(const t of i)if("insert"==t.type&&"$text"!=t.name){const i=t.position.nodeAfter,o="$graveyard"==t.position.root.rootName;for(const t of yw(e,i)){const e=t.getAttribute("uploadId");if(!e)continue;const i=s.loaders.get(e);i&&(o?n.has(e)||i.abort():(n.add(e),this._uploadImageElements.set(e,t),"idle"==i.status&&this._readAndUpload(i)))}}})),this.on("uploadComplete",((e,{imageElement:t,data:i})=>{const s=i.urls?i.urls:i;this.editor.model.change((e=>{e.setAttribute("src",s.default,t),this._parseAndSetSrcsetAttributeOnImage(s,t,e)}))}),{priority:"low"})}afterInit(){const e=this.editor.model.schema;this.editor.plugins.has("ImageBlockEditing")&&e.extend("imageBlock",{allowAttributes:["uploadId","uploadStatus"]}),this.editor.plugins.has("ImageInlineEditing")&&e.extend("imageInline",{allowAttributes:["uploadId","uploadStatus"]})}_readAndUpload(e){const t=this.editor,i=t.model,s=t.locale.t,n=t.plugins.get(tw),o=t.plugins.get(mu),r=t.plugins.get("ImageUtils"),a=this._uploadImageElements;return i.enqueueChange("transparent",(t=>{t.setAttribute("uploadStatus","reading",a.get(e.id))})),e.read().then((()=>{const s=e.upload(),n=a.get(e.id);if(io.isSafari){const e=t.editing.mapper.toViewElement(n),i=r.findViewImgElement(e);t.editing.view.once("render",(()=>{if(!i.parent)return;const e=t.editing.view.domConverter.mapViewToDom(i.parent);if(!e)return;const s=e.style.display;e.style.display="none",e._ckHack=e.offsetHeight,e.style.display=s}))}return i.enqueueChange("transparent",(e=>{e.setAttribute("uploadStatus","uploading",n)})),s})).then((t=>{i.enqueueChange("transparent",(i=>{const s=a.get(e.id);i.setAttribute("uploadStatus","complete",s),this.fire("uploadComplete",{data:t,imageElement:s})})),l()})).catch((t=>{if("error"!==e.status&&"aborted"!==e.status)throw t;"error"==e.status&&t&&o.showWarning(t,{title:s("Upload failed"),namespace:"upload"}),i.enqueueChange("transparent",(t=>{t.remove(a.get(e.id))})),l()}));function l(){i.enqueueChange("transparent",(t=>{const i=a.get(e.id);t.removeAttribute("uploadId",i),t.removeAttribute("uploadStatus",i),a.delete(e.id)})),n.destroyLoader(e)}}_parseAndSetSrcsetAttributeOnImage(e,t,i){let s=0;const n=Object.keys(e).filter((e=>{const t=parseInt(e,10);if(!isNaN(t))return s=Math.max(s,t),!0})).map((t=>`${e[t]} ${t}w`)).join(", ");""!=n&&i.setAttribute("srcset",{data:n,width:s},t)}}function yw(e,t){const i=e.plugins.get("ImageUtils");return Array.from(e.model.createRangeOn(t)).filter((e=>i.isImage(e.item))).map((e=>e.item))}class _w extends ut{static get pluginName(){return"IndentEditing"}init(){const e=this.editor;e.commands.add("indent",new gt(e)),e.commands.add("outdent",new gt(e))}}const kw='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm5 6c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM2.75 16.5h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 1 0 0 1.5zM1.632 6.95 5.02 9.358a.4.4 0 0 1-.013.661l-3.39 2.207A.4.4 0 0 1 1 11.892V7.275a.4.4 0 0 1 .632-.326z"/></svg>',Aw='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm5 6c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM2.75 16.5h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 1 0 0 1.5zm1.618-9.55L.98 9.358a.4.4 0 0 0 .013.661l3.39 2.207A.4.4 0 0 0 5 11.892V7.275a.4.4 0 0 0-.632-.326z"/></svg>';class xw extends ut{static get pluginName(){return"IndentUI"}init(){const e=this.editor,t=e.locale,i=e.t,s="ltr"==t.uiLanguageDirection?kw:Aw,n="ltr"==t.uiLanguageDirection?Aw:kw;this._defineButton("indent",i("Increase indent"),s),this._defineButton("outdent",i("Decrease indent"),n)}_defineButton(e,t,i){const s=this.editor;s.ui.componentFactory.add(e,(n=>{const o=s.commands.get(e),r=new Rd(n);return r.set({label:t,icon:i,tooltip:!0}),r.bind("isOn","isEnabled").to(o,"value","isEnabled"),this.listenTo(r,"execute",(()=>{s.execute(e),s.editing.view.focus()})),r}))}}const Cw=function(e,t,i){var s=e.length;return i=void 0===i?s:i,!t&&i>=s?e:cn(e,t,i)};var Ew=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");const Tw=function(e){return Ew.test(e)},Sw=function(e){return e.split("")};var Pw="[\\ud800-\\udfff]",Ow="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Iw="\\ud83c[\\udffb-\\udfff]",Rw="[^\\ud800-\\udfff]",zw="(?:\\ud83c[\\udde6-\\uddff]){2}",Mw="[\\ud800-\\udbff][\\udc00-\\udfff]",Nw="(?:"+Ow+"|"+Iw+")?",Dw="[\\ufe0e\\ufe0f]?",Vw=Dw+Nw+"(?:\\u200d(?:"+[Rw,zw,Mw].join("|")+")"+Dw+Nw+")*",Bw="(?:"+[Rw+Ow+"?",Ow,zw,Mw,Pw].join("|")+")",Lw=RegExp(Iw+"(?="+Iw+")|"+Bw+Vw,"g");const Fw=function(e){return e.match(Lw)||[]},jw=function(e){return Tw(e)?Fw(e):Sw(e)},qw=function(e){return function(t){t=nn(t);var i=Tw(t)?jw(t):void 0,s=i?i[0]:t.charAt(0),n=i?Cw(i,1).join(""):t.slice(1);return s[e]()+n}}("toUpperCase"),Hw=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,$w=/^(?:(?:https?|ftps?|mailto):|[^a-z]|[a-z+.-]+(?:[^a-z+.:-]|$))/i,Uw=/^[\S]+@((?![-_])(?:[-\w\u00a1-\uffff]{0,63}[^-_]\.))+(?:[a-z\u00a1-\uffff]{2,})$/i,Ww=/^((\w+:(\/{2,})?)|(\W))/i,Zw="Ctrl+K";function Gw(e,{writer:t}){const i=t.createAttributeElement("a",{href:e},{priority:5});return t.setCustomProperty("link",!0,i),i}function Kw(e){return function(e){return e.replace(Hw,"").match($w)}(e=String(e))?e:"#"}function Jw(e,t){return!!e&&t.checkAttribute(e.name,"linkHref")}function Yw(e,t){const i=(s=e,Uw.test(s)?"mailto:":t);var s;const n=!!i&&!Ww.test(e);return e&&n?i+e:e}const Qw=new RegExp("(^|\\s)(((?:(?:(?:https?|ftp):)?\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(((?!www\\.)|(www\\.))(?![-_])(?:[-_a-z0-9\\u00a1-\\uffff]{1,63}\\.)+(?:[a-z\\u00a1-\\uffff]{2,63})))(?::\\d{2,5})?(?:[/?#]\\S*)?)|((www.|(\\S+@))((?![-_])(?:[-_a-z0-9\\u00a1-\\uffff]{1,63}\\.))+(?:[a-z\\u00a1-\\uffff]{2,63})))$","i");class Xw extends ut{static get pluginName(){return"AutoLink"}init(){const e=this.editor.model.document.selection;e.on("change:range",(()=>{this.isEnabled=!e.anchor.parent.is("element","codeBlock")})),this._enableTypingHandling()}afterInit(){this._enableEnterHandling(),this._enableShiftEnterHandling()}_enableTypingHandling(){const e=this.editor,t=new fm(e.model,(e=>{if(!function(e){return e.length>4&&" "===e[e.length-1]&&" "!==e[e.length-2]}(e))return;const t=eb(e.substr(0,e.length-1));return t?{url:t}:void 0})),i=e.plugins.get("Input");t.on("matched:data",((t,s)=>{const{batch:n,range:o,url:r}=s;if(!i.isInput(n))return;const a=o.end.getShiftedBy(-1),l=a.getShiftedBy(-r.length),c=e.model.createRange(l,a);this._applyAutoLink(r,c)})),t.bind("isEnabled").to(this)}_enableEnterHandling(){const e=this.editor,t=e.model,i=e.commands.get("enter");i&&i.on("execute",(()=>{const e=t.document.selection.getFirstPosition();if(!e.parent.previousSibling)return;const i=t.createRangeIn(e.parent.previousSibling);this._checkAndApplyAutoLinkOnRange(i)}))}_enableShiftEnterHandling(){const e=this.editor,t=e.model,i=e.commands.get("shiftEnter");i&&i.on("execute",(()=>{const e=t.document.selection.getFirstPosition(),i=t.createRange(t.createPositionAt(e.parent,0),e.getShiftedBy(-1));this._checkAndApplyAutoLinkOnRange(i)}))}_checkAndApplyAutoLinkOnRange(e){const t=this.editor.model,{text:i,range:s}=pm(e,t),n=eb(i);if(n){const e=t.createRange(s.end.getShiftedBy(-n.length),s.end);this._applyAutoLink(n,e)}}_applyAutoLink(e,t){const i=this.editor.model;this.isEnabled&&function(e,t){return t.schema.checkAttributeInSelection(t.createSelection(e),"linkHref")}(t,i)&&i.enqueueChange((i=>{const s=this.editor.config.get("link.defaultProtocol"),n=Yw(e,s);i.setAttribute("linkHref",n,t)}))}}function eb(e){const t=Qw.exec(e);return t?t[2]:null}class tb{constructor(){this._definitions=new Set}get length(){return this._definitions.size}add(e){Array.isArray(e)?e.forEach((e=>this._definitions.add(e))):this._definitions.add(e)}getDispatcher(){return e=>{e.on("attribute:linkHref",((e,t,i)=>{if(!i.consumable.test(t.item,"attribute:linkHref"))return;const s=i.writer,n=s.document.selection;for(const o of this._definitions){const e=s.createAttributeElement("a",o.attributes,{priority:5});o.classes&&s.addClass(o.classes,e);for(const t in o.styles)s.setStyle(t,o.styles[t],e);s.setCustomProperty("link",!0,e),o.callback(t.attributeNewValue)?t.item.is("selection")?s.wrap(n.getFirstRange(),e):s.wrap(i.mapper.toViewRange(t.range),e):s.unwrap(i.mapper.toViewRange(t.range),e)}}),{priority:"high"})}}getDispatcherForLinkedImage(){return e=>{e.on("attribute:linkHref:imageBlock",((e,t,{writer:i,mapper:s})=>{const n=s.toViewElement(t.item),o=Array.from(n.getChildren()).find((e=>"a"===e.name));for(const r of this._definitions){const e=Fs(r.attributes);if(r.callback(t.attributeNewValue)){for(const[t,s]of e)"class"===t?i.addClass(s,o):i.setAttribute(t,s,o);r.classes&&i.addClass(r.classes,o);for(const e in r.styles)i.setStyle(e,r.styles[e],o)}else{for(const[t,s]of e)"class"===t?i.removeClass(s,o):i.removeAttribute(t,o);r.classes&&i.removeClass(r.classes,o);for(const e in r.styles)i.removeStyle(e,o)}}}))}}}class ib extends pt{constructor(e){super(e),this.manualDecorators=new Es,this.automaticDecorators=new tb}restoreManualDecoratorStates(){for(const e of this.manualDecorators)e.value=this._getDecoratorStateFromModel(e.id)}refresh(){const e=this.editor.model,t=e.document.selection,i=t.getSelectedElement()||la(t.getSelectedBlocks());Jw(i,e.schema)?(this.value=i.getAttribute("linkHref"),this.isEnabled=e.schema.checkAttribute(i,"linkHref")):(this.value=t.getAttribute("linkHref"),this.isEnabled=e.schema.checkAttributeInSelection(t,"linkHref"));for(const s of this.manualDecorators)s.value=this._getDecoratorStateFromModel(s.id)}execute(e,t={}){const i=this.editor.model,s=i.document.selection,n=[],o=[];for(const r in t)t[r]?n.push(r):o.push(r);i.change((t=>{if(s.isCollapsed){const r=s.getFirstPosition();if(s.hasAttribute("linkHref")){const a=Im(r,"linkHref",s.getAttribute("linkHref"),i);t.setAttribute("linkHref",e,a),n.forEach((e=>{t.setAttribute(e,!0,a)})),o.forEach((e=>{t.removeAttribute(e,a)})),t.setSelection(t.createPositionAfter(a.end.nodeBefore))}else if(""!==e){const o=Fs(s.getAttributes());o.set("linkHref",e),n.forEach((e=>{o.set(e,!0)}));const{end:a}=i.insertContent(t.createText(e,o),r);t.setSelection(a)}["linkHref",...n,...o].forEach((e=>{t.removeSelectionAttribute(e)}))}else{const r=i.schema.getValidRanges(s.getRanges(),"linkHref"),a=[];for(const e of s.getSelectedBlocks())i.schema.checkAttribute(e,"linkHref")&&a.push(t.createRangeOn(e));const l=a.slice();for(const e of r)this._isRangeToUpdate(e,a)&&l.push(e);for(const i of l)t.setAttribute("linkHref",e,i),n.forEach((e=>{t.setAttribute(e,!0,i)})),o.forEach((e=>{t.removeAttribute(e,i)}))}}))}_getDecoratorStateFromModel(e){const t=this.editor.model,i=t.document.selection,s=i.getSelectedElement();return Jw(s,t.schema)?s.getAttribute(e):i.getAttribute(e)}_isRangeToUpdate(e,t){for(const i of t)if(i.containsRange(e))return!1;return!0}}class sb extends pt{refresh(){const e=this.editor.model,t=e.document.selection,i=t.getSelectedElement();Jw(i,e.schema)?this.isEnabled=e.schema.checkAttribute(i,"linkHref"):this.isEnabled=e.schema.checkAttributeInSelection(t,"linkHref")}execute(){const e=this.editor,t=this.editor.model,i=t.document.selection,s=e.commands.get("link");t.change((e=>{const n=i.isCollapsed?[Im(i.getFirstPosition(),"linkHref",i.getAttribute("linkHref"),t)]:t.schema.getValidRanges(i.getRanges(),"linkHref");for(const t of n)if(e.removeAttribute("linkHref",t),s)for(const i of s.manualDecorators)e.removeAttribute(i.id,t)}))}}class nb{constructor({id:e,label:t,attributes:i,classes:s,styles:n,defaultValue:o}){this.id=e,this.set("value"),this.defaultValue=o,this.label=t,this.attributes=i,this.classes=s,this.styles=n}_createPattern(){return{attributes:this.attributes,classes:this.classes,styles:this.styles}}}function ob(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function rb(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?ob(Object(i),!0).forEach((function(t){ab(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ob(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function ab(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}dt(nb,ot);const lb="automatic",cb=/^(https?:)?\/\//;class hb extends ut{static get pluginName(){return"LinkEditing"}static get requires(){return[gm,cm,Wm]}constructor(e){super(e),e.config.define("link",{addTargetToExternalLinks:!1})}init(){const e=this.editor;e.model.schema.extend("$text",{allowAttributes:"linkHref"}),e.conversion.for("dataDowncast").attributeToElement({model:"linkHref",view:Gw}),e.conversion.for("editingDowncast").attributeToElement({model:"linkHref",view:(e,t)=>Gw(Kw(e),t)}),e.conversion.for("upcast").elementToAttribute({view:{name:"a",attributes:{href:!0}},model:{key:"linkHref",value:e=>e.getAttribute("href")}}),e.commands.add("link",new ib(e)),e.commands.add("unlink",new sb(e));const t=function(e,t){const i={"Open in a new tab":e("Open in a new tab"),Downloadable:e("Downloadable")};return t.forEach((e=>(e.label&&i[e.label]&&(e.label=i[e.label]),e))),t}(e.t,function(e){const t=[];if(e)for(const[i,s]of Object.entries(e)){const e=Object.assign({},s,{id:`link${qw(i)}`});t.push(e)}return t}(e.config.get("link.decorators")));this._enableAutomaticDecorators(t.filter((e=>e.mode===lb))),this._enableManualDecorators(t.filter((e=>"manual"===e.mode))),e.plugins.get(gm).registerAttribute("linkHref"),function(e,t,i,s){const n=e.editing.view,o=new Set;n.document.registerPostFixer((n=>{const r=e.model.document.selection;let a=!1;if(r.hasAttribute(t)){const l=Im(r.getFirstPosition(),t,r.getAttribute(t),e.model),c=e.editing.mapper.toViewRange(l);for(const e of c.getItems())e.is("element",i)&&!e.hasClass(s)&&(n.addClass(s,e),o.add(e),a=!0)}return a})),e.conversion.for("editingDowncast").add((e=>{function t(){n.change((e=>{for(const t of o.values())e.removeClass(s,t),o.delete(t)}))}e.on("insert",t,{priority:"highest"}),e.on("remove",t,{priority:"highest"}),e.on("attribute",t,{priority:"highest"}),e.on("selection",t,{priority:"highest"})}))}(e,"linkHref","a","ck-link_selected"),this._enableInsertContentSelectionAttributesFixer(),this._enableClickingAfterLink(),this._enableTypingOverLink(),this._handleDeleteContentAfterLink()}_enableAutomaticDecorators(e){const t=this.editor,i=t.commands.get("link").automaticDecorators;t.config.get("link.addTargetToExternalLinks")&&i.add({id:"linkIsExternal",mode:lb,callback:e=>cb.test(e),attributes:{target:"_blank",rel:"noopener noreferrer"}}),i.add(e),i.length&&t.conversion.for("downcast").add(i.getDispatcher())}_enableManualDecorators(e){if(!e.length)return;const t=this.editor,i=t.commands.get("link").manualDecorators;e.forEach((e=>{t.model.schema.extend("$text",{allowAttributes:e.id}),e=new nb(e),i.add(e),t.conversion.for("downcast").attributeToElement({model:e.id,view:(t,{writer:i})=>{if(t){const t=i.createAttributeElement("a",e.attributes,{priority:5});e.classes&&i.addClass(e.classes,t);for(const s in e.styles)i.setStyle(s,e.styles[s],t);return i.setCustomProperty("link",!0,t),t}}}),t.conversion.for("upcast").elementToAttribute({view:rb({name:"a"},e._createPattern()),model:{key:e.id}})}))}_enableInsertContentSelectionAttributesFixer(){const e=this.editor.model,t=e.document.selection;this.listenTo(e,"insertContent",(()=>{const i=t.anchor.nodeBefore,s=t.anchor.nodeAfter;t.hasAttribute("linkHref")&&i&&i.hasAttribute("linkHref")&&(s&&s.hasAttribute("linkHref")||e.change((t=>{db(t,mb(e.schema))})))}),{priority:"low"})}_enableClickingAfterLink(){const e=this.editor,t=e.model;e.editing.view.addObserver(Ch);let i=!1;this.listenTo(e.editing.view.document,"mousedown",(()=>{i=!0})),this.listenTo(e.editing.view.document,"selectionChange",(()=>{if(!i)return;i=!1;const e=t.document.selection;if(!e.isCollapsed)return;if(!e.hasAttribute("linkHref"))return;const s=e.getFirstPosition(),n=Im(s,"linkHref",e.getAttribute("linkHref"),t);(s.isTouching(n.start)||s.isTouching(n.end))&&t.change((e=>{db(e,mb(t.schema))}))}))}_enableTypingOverLink(){const e=this.editor,t=e.editing.view;let i,s;this.listenTo(t.document,"delete",(()=>{s=!0}),{priority:"high"}),this.listenTo(e.model,"deleteContent",(()=>{const t=e.model.document.selection;t.isCollapsed||(s?s=!1:ub(e)&&function(e){const t=e.document.selection,i=t.getFirstPosition(),s=t.getLastPosition(),n=i.nodeAfter;return!!n&&!!n.is("$text")&&!!n.hasAttribute("linkHref")&&(n===(s.textNode||s.nodeBefore)||Im(i,"linkHref",n.getAttribute("linkHref"),e).containsRange(e.createRange(i,s),!0))}(e.model)&&(i=t.getAttributes()))}),{priority:"high"}),this.listenTo(e.model,"insertContent",((t,[n])=>{s=!1,ub(e)&&i&&(e.model.change((e=>{for(const[t,s]of i)e.setAttribute(t,s,n)})),i=null)}),{priority:"high"})}_handleDeleteContentAfterLink(){const e=this.editor,t=e.model,i=t.document.selection,s=e.editing.view;let n=!1,o=!1;this.listenTo(s.document,"delete",((e,t)=>{o=t.domEvent.keyCode===oo.backspace}),{priority:"high"}),this.listenTo(t,"deleteContent",(()=>{n=!1;const e=i.getFirstPosition(),s=i.getAttribute("linkHref");if(!s)return;const o=Im(e,"linkHref",s,t);n=o.containsPosition(e)||o.end.isEqual(e)}),{priority:"high"}),this.listenTo(t,"deleteContent",(()=>{o&&(o=!1,n||e.model.enqueueChange((e=>{db(e,mb(t.schema))})))}),{priority:"low"})}}function db(e,t){e.removeSelectionAttribute("linkHref");for(const i of t)e.removeSelectionAttribute(i)}function ub(e){return e.plugins.get("Input").isInput(e.model.change((e=>e.batch)))}function mb(e){return e.getDefinition("$text").allowAttributes.filter((e=>e.startsWith("link")))}class pb extends ad{constructor(e,t){super(e);const i=e.t;this.focusTracker=new ca,this.keystrokes=new ha,this.urlInputView=this._createUrlInput(),this.saveButtonView=this._createButton(i("Save"),rh.check,"ck-button-save"),this.saveButtonView.type="submit",this.cancelButtonView=this._createButton(i("Cancel"),rh.cancel,"ck-button-cancel","cancel"),this._manualDecoratorSwitches=this._createManualDecoratorSwitches(t),this.children=this._createFormChildren(t.manualDecorators),this._focusables=new rd,this._focusCycler=new Dd({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}});const s=["ck","ck-link-form","ck-responsive-form"];t.manualDecorators.length&&s.push("ck-link-form_layout-vertical","ck-vertical-form"),this.setTemplate({tag:"form",attributes:{class:s,tabindex:"-1"},children:this.children}),nd(this)}getDecoratorSwitchesState(){return Array.from(this._manualDecoratorSwitches).reduce(((e,t)=>(e[t.name]=t.isOn,e)),{})}render(){super.render(),od({view:this}),[this.urlInputView,...this._manualDecoratorSwitches,this.saveButtonView,this.cancelButtonView].forEach((e=>{this._focusables.add(e),this.focusTracker.add(e.element)})),this.keystrokes.listenTo(this.element)}focus(){this._focusCycler.focusFirst()}_createUrlInput(){const e=this.locale.t,t=new du(this.locale,uu);return t.label=e("Link URL"),t}_createButton(e,t,i,s){const n=new Rd(this.locale);return n.set({label:e,icon:t,tooltip:!0}),n.extendTemplate({attributes:{class:i}}),s&&n.delegate("execute").to(this,s),n}_createManualDecoratorSwitches(e){const t=this.createCollection();for(const i of e.manualDecorators){const s=new zd(this.locale);s.set({name:i.id,label:i.label,withText:!0}),s.bind("isOn").toMany([i,e],"value",((e,t)=>void 0===t&&void 0===e?i.defaultValue:e)),s.on("execute",(()=>{i.set("value",!s.isOn)})),t.add(s)}return t}_createFormChildren(e){const t=this.createCollection();if(t.add(this.urlInputView),e.length){const e=new ad;e.setTemplate({tag:"ul",children:this._manualDecoratorSwitches.map((e=>({tag:"li",children:[e],attributes:{class:["ck","ck-list__item"]}}))),attributes:{class:["ck","ck-reset","ck-list"]}}),t.add(e)}return t.add(this.saveButtonView),t.add(this.cancelButtonView),t}}class fb extends ad{constructor(e){super(e);const t=e.t;this.focusTracker=new ca,this.keystrokes=new ha,this.previewButtonView=this._createPreviewButton(),this.unlinkButtonView=this._createButton(t("Unlink"),'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.077 15 .991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.748.748 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.741.741 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294l.006.004zm5.494-5.335a.748.748 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.748.748 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955zm-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184zm4.919 10.562-1.414 1.414a.75.75 0 1 1-1.06-1.06l1.414-1.415-1.415-1.414a.75.75 0 0 1 1.061-1.06l1.414 1.414 1.414-1.415a.75.75 0 0 1 1.061 1.061l-1.414 1.414 1.414 1.415a.75.75 0 0 1-1.06 1.06l-1.415-1.414z"/></svg>',"unlink"),this.editButtonView=this._createButton(t("Edit link"),rh.pencil,"edit"),this.set("href"),this._focusables=new rd,this._focusCycler=new Dd({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-link-actions","ck-responsive-form"],tabindex:"-1"},children:[this.previewButtonView,this.editButtonView,this.unlinkButtonView]})}render(){super.render(),[this.previewButtonView,this.editButtonView,this.unlinkButtonView].forEach((e=>{this._focusables.add(e),this.focusTracker.add(e.element)})),this.keystrokes.listenTo(this.element)}focus(){this._focusCycler.focusFirst()}_createButton(e,t,i){const s=new Rd(this.locale);return s.set({label:e,icon:t,tooltip:!0}),s.delegate("execute").to(this,i),s}_createPreviewButton(){const e=new Rd(this.locale),t=this.bindTemplate,i=this.t;return e.set({withText:!0,tooltip:i("Open link in new tab")}),e.extendTemplate({attributes:{class:["ck","ck-link-actions__preview"],href:t.to("href",(e=>e&&Kw(e))),target:"_blank",rel:"noopener noreferrer"}}),e.bind("label").to(this,"href",(e=>e||i("This link has no URL"))),e.bind("isEnabled").to(this,"href",(e=>!!e)),e.template.tag="a",e.template.eventListeners={},e}}const gb="link-ui";class wb extends ut{static get requires(){return[Au]}static get pluginName(){return"LinkUI"}init(){const e=this.editor;e.editing.view.addObserver(xh),this.actionsView=this._createActionsView(),this.formView=this._createFormView(),this._balloon=e.plugins.get(Au),this._createToolbarLinkButton(),this._enableUserBalloonInteractions(),e.conversion.for("editingDowncast").markerToHighlight({model:gb,view:{classes:["ck-fake-link-selection"]}}),e.conversion.for("editingDowncast").markerToElement({model:gb,view:{name:"span",classes:["ck-fake-link-selection","ck-fake-link-selection_collapsed"]}})}destroy(){super.destroy(),this.formView.destroy()}_createActionsView(){const e=this.editor,t=new fb(e.locale),i=e.commands.get("link"),s=e.commands.get("unlink");return t.bind("href").to(i,"value"),t.editButtonView.bind("isEnabled").to(i),t.unlinkButtonView.bind("isEnabled").to(s),this.listenTo(t,"edit",(()=>{this._addFormView()})),this.listenTo(t,"unlink",(()=>{e.execute("unlink"),this._hideUI()})),t.keystrokes.set("Esc",((e,t)=>{this._hideUI(),t()})),t.keystrokes.set(Zw,((e,t)=>{this._addFormView(),t()})),t}_createFormView(){const e=this.editor,t=e.commands.get("link"),i=e.config.get("link.defaultProtocol"),s=new pb(e.locale,t);return s.urlInputView.fieldView.bind("value").to(t,"value"),s.urlInputView.bind("isReadOnly").to(t,"isEnabled",(e=>!e)),s.saveButtonView.bind("isEnabled").to(t),this.listenTo(s,"submit",(()=>{const{value:t}=s.urlInputView.fieldView.element,n=Yw(t,i);e.execute("link",n,s.getDecoratorSwitchesState()),this._closeFormView()})),this.listenTo(s,"cancel",(()=>{this._closeFormView()})),s.keystrokes.set("Esc",((e,t)=>{this._closeFormView(),t()})),s}_createToolbarLinkButton(){const e=this.editor,t=e.commands.get("link"),i=e.t;e.keystrokes.set(Zw,((e,i)=>{i(),t.isEnabled&&this._showUI(!0)})),e.ui.componentFactory.add("link",(e=>{const s=new Rd(e);return s.isEnabled=!0,s.label=i("Link"),s.icon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.077 15 .991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.748.748 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.741.741 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294l.006.004zm5.494-5.335a.748.748 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.748.748 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955zm-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184z"/></svg>',s.keystroke=Zw,s.tooltip=!0,s.isToggleable=!0,s.bind("isEnabled").to(t,"isEnabled"),s.bind("isOn").to(t,"value",(e=>!!e)),this.listenTo(s,"execute",(()=>this._showUI(!0))),s}))}_enableUserBalloonInteractions(){const e=this.editor.editing.view.document;this.listenTo(e,"click",(()=>{this._getSelectedLinkElement()&&this._showUI()})),this.editor.keystrokes.set("Tab",((e,t)=>{this._areActionsVisible&&!this.actionsView.focusTracker.isFocused&&(this.actionsView.focus(),t())}),{priority:"high"}),this.editor.keystrokes.set("Esc",((e,t)=>{this._isUIVisible&&(this._hideUI(),t())})),sd({emitter:this.formView,activator:()=>this._isUIInPanel,contextElements:[this._balloon.view.element],callback:()=>this._hideUI()})}_addActionsView(){this._areActionsInPanel||this._balloon.add({view:this.actionsView,position:this._getBalloonPositionData()})}_addFormView(){if(this._isFormInPanel)return;const e=this.editor.commands.get("link");this.formView.disableCssTransitions(),this._balloon.add({view:this.formView,position:this._getBalloonPositionData()}),this._balloon.visibleView===this.formView&&this.formView.urlInputView.fieldView.select(),this.formView.enableCssTransitions(),this.formView.urlInputView.fieldView.element.value=e.value||""}_closeFormView(){const e=this.editor.commands.get("link");e.restoreManualDecoratorStates(),void 0!==e.value?this._removeFormView():this._hideUI()}_removeFormView(){this._isFormInPanel&&(this.formView.saveButtonView.focus(),this._balloon.remove(this.formView),this.editor.editing.view.focus(),this._hideFakeVisualSelection())}_showUI(e=!1){this._getSelectedLinkElement()?(this._areActionsVisible?this._addFormView():this._addActionsView(),e&&this._balloon.showStack("main")):(this._showFakeVisualSelection(),this._addActionsView(),e&&this._balloon.showStack("main"),this._addFormView()),this._startUpdatingUI()}_hideUI(){if(!this._isUIInPanel)return;const e=this.editor;this.stopListening(e.ui,"update"),this.stopListening(this._balloon,"change:visibleView"),e.editing.view.focus(),this._removeFormView(),this._balloon.remove(this.actionsView),this._hideFakeVisualSelection()}_startUpdatingUI(){const e=this.editor,t=e.editing.view.document;let i=this._getSelectedLinkElement(),s=o();const n=()=>{const e=this._getSelectedLinkElement(),t=o();i&&!e||!i&&t!==s?this._hideUI():this._isUIVisible&&this._balloon.updatePosition(this._getBalloonPositionData()),i=e,s=t};function o(){return t.selection.focus.getAncestors().reverse().find((e=>e.is("element")))}this.listenTo(e.ui,"update",n),this.listenTo(this._balloon,"change:visibleView",n)}get _isFormInPanel(){return this._balloon.hasView(this.formView)}get _areActionsInPanel(){return this._balloon.hasView(this.actionsView)}get _areActionsVisible(){return this._balloon.visibleView===this.actionsView}get _isUIInPanel(){return this._isFormInPanel||this._areActionsInPanel}get _isUIVisible(){return this._balloon.visibleView==this.formView||this._areActionsVisible}_getBalloonPositionData(){const e=this.editor.editing.view,t=this.editor.model,i=e.document;let s=null;if(t.markers.has(gb)){const t=Array.from(this.editor.editing.mapper.markerNameToElements(gb)),i=e.createRange(e.createPositionBefore(t[0]),e.createPositionAfter(t[t.length-1]));s=e.domConverter.viewRangeToDom(i)}else s=()=>{const t=this._getSelectedLinkElement();return t?e.domConverter.mapViewToDom(t):e.domConverter.viewRangeToDom(i.selection.getFirstRange())};return{target:s}}_getSelectedLinkElement(){const e=this.editor.editing.view,t=e.document.selection,i=t.getSelectedElement();if(t.isCollapsed||i&&Xm(i))return bb(t.getFirstPosition());{const i=t.getFirstRange().getTrimmed(),s=bb(i.start),n=bb(i.end);return s&&s==n&&e.createRangeIn(s).getTrimmed().isEqual(i)?s:null}}_showFakeVisualSelection(){const e=this.editor.model;e.change((t=>{const i=e.document.selection.getFirstRange();if(e.markers.has(gb))t.updateMarker(gb,{range:i});else if(i.start.isAtEnd){const s=i.start.getLastMatchingPosition((({item:t})=>!e.schema.isContent(t)),{boundaries:i});t.addMarker(gb,{usingOperation:!1,affectsData:!1,range:t.createRange(s,i.end)})}else t.addMarker(gb,{usingOperation:!1,affectsData:!1,range:i})}))}_hideFakeVisualSelection(){const e=this.editor.model;e.markers.has(gb)&&e.change((e=>{e.removeMarker(gb)}))}}function bb(e){return e.getAncestors().find((e=>{return(t=e).is("attributeElement")&&!!t.getCustomProperty("link");var t}))}class vb extends pt{constructor(e,t){super(e),this.type=t}refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(e={}){const t=this.editor.model,i=t.document,s=Array.from(i.selection.getSelectedBlocks()).filter((e=>_b(e,t.schema))),n=void 0!==e.forceValue?!e.forceValue:this.value;t.change((e=>{if(n){let t=s[s.length-1].nextSibling,i=Number.POSITIVE_INFINITY,n=[];for(;t&&"listItem"==t.name&&0!==t.getAttribute("listIndent");){const e=t.getAttribute("listIndent");e<i&&(i=e);const s=e-i;n.push({element:t,listIndent:s}),t=t.nextSibling}n=n.reverse();for(const s of n)e.setAttribute("listIndent",s.listIndent,s.element)}if(!n){let e=Number.POSITIVE_INFINITY;for(const t of s)t.is("element","listItem")&&t.getAttribute("listIndent")<e&&(e=t.getAttribute("listIndent"));e=0===e?1:e,yb(s,!0,e),yb(s,!1,e)}for(const t of s.reverse())n&&"listItem"==t.name?e.rename(t,"paragraph"):n||"listItem"==t.name?n||"listItem"!=t.name||t.getAttribute("listType")==this.type||e.setAttribute("listType",this.type,t):(e.setAttributes({listType:this.type,listIndent:0},t),e.rename(t,"listItem"));this.fire("_executeCleanup",s)}))}_getValue(){const e=la(this.editor.model.document.selection.getSelectedBlocks());return!!e&&e.is("element","listItem")&&e.getAttribute("listType")==this.type}_checkEnabled(){if(this.value)return!0;const e=this.editor.model.document.selection,t=this.editor.model.schema,i=la(e.getSelectedBlocks());return!!i&&_b(i,t)}}function yb(e,t,i){const s=t?e[0]:e[e.length-1];if(s.is("element","listItem")){let n=s[t?"previousSibling":"nextSibling"],o=s.getAttribute("listIndent");for(;n&&n.is("element","listItem")&&n.getAttribute("listIndent")>=i;)o>n.getAttribute("listIndent")&&(o=n.getAttribute("listIndent")),n.getAttribute("listIndent")==o&&e[t?"unshift":"push"](n),n=n[t?"previousSibling":"nextSibling"]}}function _b(e,t){return t.checkChild(e.parent,"listItem")&&!t.isObject(e)}class kb extends pt{constructor(e,t){super(e),this._indentBy="forward"==t?1:-1}refresh(){this.isEnabled=this._checkEnabled()}execute(){const e=this.editor.model,t=e.document;let i=Array.from(t.selection.getSelectedBlocks());e.change((e=>{const t=i[i.length-1];let s=t.nextSibling;for(;s&&"listItem"==s.name&&s.getAttribute("listIndent")>t.getAttribute("listIndent");)i.push(s),s=s.nextSibling;this._indentBy<0&&(i=i.reverse());for(const n of i){const t=n.getAttribute("listIndent")+this._indentBy;t<0?e.rename(n,"paragraph"):e.setAttribute("listIndent",t,n)}this.fire("_executeCleanup",i)}))}_checkEnabled(){const e=la(this.editor.model.document.selection.getSelectedBlocks());if(!e||!e.is("element","listItem"))return!1;if(this._indentBy>0){const t=e.getAttribute("listIndent"),i=e.getAttribute("listType");let s=e.previousSibling;for(;s&&s.is("element","listItem")&&s.getAttribute("listIndent")>=t;){if(s.getAttribute("listIndent")==t)return s.getAttribute("listType")==i;s=s.previousSibling}return!1}return!0}}function Ab(e,t){const i=t.mapper,s=t.writer,n="numbered"==e.getAttribute("listType")?"ol":"ul",o=function(e){const t=e.createContainerElement("li");return t.getFillerOffset=Pb,t}(s),r=s.createContainerElement(n,null);return s.insert(s.createPositionAt(r,0),o),i.bindElements(e,o),o}function xb(e,t,i,s){const n=t.parent,o=i.mapper,r=i.writer;let a=o.toViewPosition(s.createPositionBefore(e));const l=Tb(e.previousSibling,{sameIndent:!0,smallerIndent:!0,listIndent:e.getAttribute("listIndent")}),c=e.previousSibling;if(l&&l.getAttribute("listIndent")==e.getAttribute("listIndent")){const e=o.toViewElement(l);a=r.breakContainer(r.createPositionAfter(e))}else if(c&&"listItem"==c.name){a=o.toViewPosition(s.createPositionAt(c,"end"));const e=o.findMappedViewAncestor(a),t=function(e){for(const t of e.getChildren())if("ul"==t.name||"ol"==t.name)return t;return null}(e);a=t?r.createPositionBefore(t):r.createPositionAt(e,"end")}else a=o.toViewPosition(s.createPositionBefore(e));if(a=Eb(a),r.insert(a,n),c&&"listItem"==c.name){const e=o.toViewElement(c),i=r.createRange(r.createPositionAt(e,0),a).getWalker({ignoreElementEnd:!0});for(const s of i)if(s.item.is("element","li")){const e=r.breakContainer(r.createPositionBefore(s.item)),n=s.item.parent,o=r.createPositionAt(t,"end");Cb(r,o.nodeBefore,o.nodeAfter),r.move(r.createRangeOn(n),o),i.position=e}}else{const i=n.nextSibling;if(i&&(i.is("element","ul")||i.is("element","ol"))){let s=null;for(const t of i.getChildren()){const i=o.toModelElement(t);if(!(i&&i.getAttribute("listIndent")>e.getAttribute("listIndent")))break;s=t}s&&(r.breakContainer(r.createPositionAfter(s)),r.move(r.createRangeOn(s.parent),r.createPositionAt(t,"end")))}}Cb(r,n,n.nextSibling),Cb(r,n.previousSibling,n)}function Cb(e,t,i){return!t||!i||"ul"!=t.name&&"ol"!=t.name||t.name!=i.name||t.getAttribute("class")!==i.getAttribute("class")?null:e.mergeContainers(e.createPositionAfter(t))}function Eb(e){return e.getLastMatchingPosition((e=>e.item.is("uiElement")))}function Tb(e,t){const i=!!t.sameIndent,s=!!t.smallerIndent,n=t.listIndent;let o=e;for(;o&&"listItem"==o.name;){const e=o.getAttribute("listIndent");if(i&&n==e||s&&n>e)return o;o="forward"===t.direction?o.nextSibling:o.previousSibling}return null}function Sb(e,t,i,s){e.ui.componentFactory.add(t,(n=>{const o=e.commands.get(t),r=new Rd(n);return r.set({label:i,icon:s,tooltip:!0,isToggleable:!0}),r.bind("isOn","isEnabled").to(o,"value","isEnabled"),r.on("execute",(()=>{e.execute(t),e.editing.view.focus()})),r}))}function Pb(){const e=!this.isEmpty&&("ul"==this.getChild(0).name||"ol"==this.getChild(0).name);return this.isEmpty||e?0:In.call(this)}function Ob(e){return(t,i,s)=>{const n=s.consumable;if(!n.test(i.item,"insert")||!n.test(i.item,"attribute:listType")||!n.test(i.item,"attribute:listIndent"))return;n.consume(i.item,"insert"),n.consume(i.item,"attribute:listType"),n.consume(i.item,"attribute:listIndent");const o=i.item;xb(o,Ab(o,s),s,e)}}function Ib(e,t,i){if(!i.consumable.consume(t.item,"attribute:listType"))return;const s=i.mapper.toViewElement(t.item),n=i.writer;n.breakContainer(n.createPositionBefore(s)),n.breakContainer(n.createPositionAfter(s));const o=s.parent,r="numbered"==t.attributeNewValue?"ol":"ul";n.rename(r,o)}function Rb(e,t,i){const s=i.mapper.toViewElement(t.item).parent,n=i.writer;Cb(n,s,s.nextSibling),Cb(n,s.previousSibling,s);for(const o of t.item.getChildren())i.consumable.consume(o,"insert")}function zb(e,t,i){if("listItem"!=t.item.name){let e=i.mapper.toViewPosition(t.range.start);const s=i.writer,n=[];for(;("ul"==e.parent.name||"ol"==e.parent.name)&&(e=s.breakContainer(e),"li"==e.parent.name);){const t=e,i=s.createPositionAt(e.parent,"end");if(!t.isEqual(i)){const e=s.remove(s.createRange(t,i));n.push(e)}e=s.createPositionAfter(e.parent)}if(n.length>0){for(let t=0;t<n.length;t++){const i=e.nodeBefore;if(e=s.insert(e,n[t]).end,t>0){const t=Cb(s,i,i.nextSibling);t&&t.parent==i&&e.offset--}}Cb(s,e.nodeBefore,e.nodeAfter)}}}function Mb(e,t,i){const s=i.mapper.toViewPosition(t.position),n=s.nodeBefore,o=s.nodeAfter;Cb(i.writer,n,o)}function Nb(e,t,i){if(i.consumable.consume(t.viewItem,{name:!0})){const e=i.writer,s=e.createElement("listItem"),n=function(e){let t=0,i=e.parent;for(;i;){if(i.is("element","li"))t++;else{const e=i.previousSibling;e&&e.is("element","li")&&t++}i=i.parent}return t}(t.viewItem);e.setAttribute("listIndent",n,s);const o=t.viewItem.parent&&"ol"==t.viewItem.parent.name?"numbered":"bulleted";if(e.setAttribute("listType",o,s),!i.safeInsert(s,t.modelCursor))return;const r=function(e,t,i){const{writer:s,schema:n}=i;let o=s.createPositionAfter(e);for(const r of t)if("ul"==r.name||"ol"==r.name)o=i.convertItem(r,o).modelCursor;else{const t=i.convertItem(r,s.createPositionAt(e,"end")),a=t.modelRange.start.nodeAfter;a&&a.is("element")&&!n.checkChild(e,a.name)&&(e=t.modelCursor.parent.is("element","listItem")?t.modelCursor.parent:Fb(t.modelCursor),o=s.createPositionAfter(e))}return o}(s,t.viewItem.getChildren(),i);t.modelRange=e.createRange(t.modelCursor,r),i.updateConversionResult(s,t)}}function Db(e,t,i){if(i.consumable.test(t.viewItem,{name:!0})){const e=Array.from(t.viewItem.getChildren());for(const t of e)!t.is("element","li")&&!qb(t)&&t._remove()}}function Vb(e,t,i){if(i.consumable.test(t.viewItem,{name:!0})){if(0===t.viewItem.childCount)return;const e=[...t.viewItem.getChildren()];let i=!1,s=!0;for(const t of e)i&&!qb(t)&&t._remove(),t.is("$text")?(s&&(t._data=t.data.trimStart()),t.nextSibling&&!qb(t.nextSibling)||(t._data=t.data.trimEnd())):qb(t)&&(i=!0),s=!1}}function Bb(e){return(t,i)=>{if(i.isPhantom)return;const s=i.modelPosition.nodeBefore;if(s&&s.is("element","listItem")){const t=i.mapper.toViewElement(s),n=t.getAncestors().find(qb),o=e.createPositionAt(t,0).getWalker();for(const e of o){if("elementStart"==e.type&&e.item.is("element","li")){i.viewPosition=e.previousPosition;break}if("elementEnd"==e.type&&e.item==n){i.viewPosition=e.nextPosition;break}}}}}function Lb(e,[t,i]){let s,n=t.is("documentFragment")?t.getChild(0):t;if(s=i?this.createSelection(i):this.document.selection,n&&n.is("element","listItem")){const e=s.getFirstPosition();let t=null;if(e.parent.is("element","listItem")?t=e.parent:e.nodeBefore&&e.nodeBefore.is("element","listItem")&&(t=e.nodeBefore),t){const e=t.getAttribute("listIndent");if(e>0)for(;n&&n.is("element","listItem");)n._setAttribute("listIndent",n.getAttribute("listIndent")+e),n=n.nextSibling}}}function Fb(e){const t=new Sa({startPosition:e});let i;do{i=t.next()}while(!i.value.item.is("element","listItem"));return i.value.item}function jb(e,t,i,s,n,o){const r=Tb(t.nodeBefore,{sameIndent:!0,smallerIndent:!0,listIndent:e,foo:"b"}),a=n.mapper,l=n.writer,c=r?r.getAttribute("listIndent"):null;let h;if(r)if(c==e){const e=a.toViewElement(r).parent;h=l.createPositionAfter(e)}else{const e=o.createPositionAt(r,"end");h=a.toViewPosition(e)}else h=i;h=Eb(h);for(const d of[...s.getChildren()])qb(d)&&(h=l.move(l.createRangeOn(d),h).end,Cb(l,d,d.nextSibling),Cb(l,d.previousSibling,d))}function qb(e){return e.is("element","ol")||e.is("element","ul")}class Hb extends ut{static get pluginName(){return"ListEditing"}static get requires(){return[Ku,um]}init(){const e=this.editor;e.model.schema.register("listItem",{inheritAllFrom:"$block",allowAttributes:["listType","listIndent"]});const t=e.data,i=e.editing;var s;e.model.document.registerPostFixer((t=>function(e,t){const i=e.document.differ.getChanges(),s=new Map;let n=!1;for(const l of i)if("insert"==l.type&&"listItem"==l.name)o(l.position);else if("insert"==l.type&&"listItem"!=l.name){if("$text"!=l.name){const i=l.position.nodeAfter;i.hasAttribute("listIndent")&&(t.removeAttribute("listIndent",i),n=!0),i.hasAttribute("listType")&&(t.removeAttribute("listType",i),n=!0),i.hasAttribute("listStyle")&&(t.removeAttribute("listStyle",i),n=!0);for(const t of Array.from(e.createRangeIn(i)).filter((e=>e.item.is("element","listItem"))))o(t.previousPosition)}o(l.position.getShiftedBy(l.length))}else"remove"==l.type&&"listItem"==l.name?o(l.position):("attribute"==l.type&&"listIndent"==l.attributeKey||"attribute"==l.type&&"listType"==l.attributeKey)&&o(l.range.start);for(const l of s.values())r(l),a(l);return n;function o(e){const t=e.nodeBefore;if(t&&t.is("element","listItem")){let e=t;if(s.has(e))return;for(let t=e.previousSibling;t&&t.is("element","listItem");t=e.previousSibling)if(e=t,s.has(e))return;s.set(t,e)}else{const t=e.nodeAfter;t&&t.is("element","listItem")&&s.set(t,t)}}function r(e){let i=0,s=null;for(;e&&e.is("element","listItem");){const o=e.getAttribute("listIndent");if(o>i){let r;null===s?(s=o-i,r=i):(s>o&&(s=o),r=o-s),t.setAttribute("listIndent",r,e),n=!0}else s=null,i=e.getAttribute("listIndent")+1;e=e.nextSibling}}function a(e){let i=[],s=null;for(;e&&e.is("element","listItem");){const o=e.getAttribute("listIndent");if(s&&s.getAttribute("listIndent")>o&&(i=i.slice(0,o+1)),0!=o)if(i[o]){const s=i[o];e.getAttribute("listType")!=s&&(t.setAttribute("listType",s,e),n=!0)}else i[o]=e.getAttribute("listType");s=e,e=e.nextSibling}}}(e.model,t))),i.mapper.registerViewToModelLength("li",$b),t.mapper.registerViewToModelLength("li",$b),i.mapper.on("modelToViewPosition",Bb(i.view)),i.mapper.on("viewToModelPosition",(s=e.model,(e,t)=>{const i=t.viewPosition,n=i.parent,o=t.mapper;if("ul"==n.name||"ol"==n.name){if(i.isAtEnd){const e=o.toModelElement(i.nodeBefore),n=o.getModelLength(i.nodeBefore);t.modelPosition=s.createPositionBefore(e).getShiftedBy(n)}else{const e=o.toModelElement(i.nodeAfter);t.modelPosition=s.createPositionBefore(e)}e.stop()}else if("li"==n.name&&i.nodeBefore&&("ul"==i.nodeBefore.name||"ol"==i.nodeBefore.name)){const r=o.toModelElement(n);let a=1,l=i.nodeBefore;for(;l&&qb(l);)a+=o.getModelLength(l),l=l.previousSibling;t.modelPosition=s.createPositionBefore(r).getShiftedBy(a),e.stop()}})),t.mapper.on("modelToViewPosition",Bb(i.view)),e.conversion.for("editingDowncast").add((t=>{t.on("insert",zb,{priority:"high"}),t.on("insert:listItem",Ob(e.model)),t.on("attribute:listType:listItem",Ib,{priority:"high"}),t.on("attribute:listType:listItem",Rb,{priority:"low"}),t.on("attribute:listIndent:listItem",function(e){return(t,i,s)=>{if(!s.consumable.consume(i.item,"attribute:listIndent"))return;const n=s.mapper.toViewElement(i.item),o=s.writer;o.breakContainer(o.createPositionBefore(n)),o.breakContainer(o.createPositionAfter(n));const r=n.parent,a=r.previousSibling,l=o.createRangeOn(r);o.remove(l),a&&a.nextSibling&&Cb(o,a,a.nextSibling),jb(i.attributeOldValue+1,i.range.start,l.start,n,s,e),xb(i.item,n,s,e);for(const e of i.item.getChildren())s.consumable.consume(e,"insert")}}(e.model)),t.on("remove:listItem",function(e){return(t,i,s)=>{const n=s.mapper.toViewPosition(i.position).getLastMatchingPosition((e=>!e.item.is("element","li"))).nodeAfter,o=s.writer;o.breakContainer(o.createPositionBefore(n)),o.breakContainer(o.createPositionAfter(n));const r=n.parent,a=r.previousSibling,l=o.createRangeOn(r),c=o.remove(l);a&&a.nextSibling&&Cb(o,a,a.nextSibling),jb(s.mapper.toModelElement(n).getAttribute("listIndent")+1,i.position,l.start,n,s,e);for(const e of o.createRangeIn(c).getItems())s.mapper.unbindViewElement(e);t.stop()}}(e.model)),t.on("remove",Mb,{priority:"low"})})),e.conversion.for("dataDowncast").add((t=>{t.on("insert",zb,{priority:"high"}),t.on("insert:listItem",Ob(e.model))})),e.conversion.for("upcast").add((e=>{e.on("element:ul",Db,{priority:"high"}),e.on("element:ol",Db,{priority:"high"}),e.on("element:li",Vb,{priority:"high"}),e.on("element:li",Nb)})),e.model.on("insertContent",Lb,{priority:"high"}),e.commands.add("numberedList",new vb(e,"numbered")),e.commands.add("bulletedList",new vb(e,"bulleted")),e.commands.add("indentList",new kb(e,"forward")),e.commands.add("outdentList",new kb(e,"backward"));const n=i.view.document;this.listenTo(n,"enter",((e,t)=>{const i=this.editor.model.document,s=i.selection.getLastPosition().parent;i.selection.isCollapsed&&"listItem"==s.name&&s.isEmpty&&(this.editor.execute("outdentList"),t.preventDefault(),e.stop())}),{context:"li"}),this.listenTo(n,"delete",((e,t)=>{if("backward"!==t.direction)return;const i=this.editor.model.document.selection;if(!i.isCollapsed)return;const s=i.getFirstPosition();if(!s.isAtStart)return;const n=s.parent;"listItem"===n.name&&(n.previousSibling&&"listItem"===n.previousSibling.name||(this.editor.execute("outdentList"),t.preventDefault(),e.stop()))}),{context:"li"});const o=e=>(t,i)=>{this.editor.commands.get(e).isEnabled&&(this.editor.execute(e),i())};e.keystrokes.set("Tab",o("indentList")),e.keystrokes.set("Shift+Tab",o("outdentList"))}afterInit(){const e=this.editor.commands,t=e.get("indent"),i=e.get("outdent");t&&t.registerChildCommand(e.get("indentList")),i&&i.registerChildCommand(e.get("outdentList"))}}function $b(e){let t=1;for(const i of e.getChildren())if("ul"==i.name||"ol"==i.name)for(const e of i.getChildren())t+=$b(e);return t}class Ub extends ut{static get pluginName(){return"ListUI"}init(){const e=this.editor.t;Sb(this.editor,"numberedList",e("Numbered List"),'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM3.5 3v5H2V3.7H1v-1h2.5V3zM.343 17.857l2.59-3.257H2.92a.6.6 0 1 0-1.04 0H.302a2 2 0 1 1 3.995 0h-.001c-.048.405-.16.734-.333.988-.175.254-.59.692-1.244 1.312H4.3v1h-4l.043-.043zM7 14.75a.75.75 0 0 1 .75-.75h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75z"/></svg>'),Sb(this.editor,"bulletedList",e("Bulleted List"),'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zm-6 0C1 4.784 1.777 4 2.75 4c.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75C1.784 7.5 1 6.723 1 5.75zm6 9c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zm-6 0c0-.966.777-1.75 1.75-1.75.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75-.966 0-1.75-.777-1.75-1.75z"/></svg>')}}function Wb(e,t){return e=>{e.on("attribute:url:media",i)};function i(i,s,n){if(!n.consumable.consume(s.item,i.name))return;const o=s.attributeNewValue,r=n.writer,a=n.mapper.toViewElement(s.item),l=[...a.getChildren()].find((e=>e.getCustomProperty("media-content")));r.remove(l);const c=e.getMediaViewElement(r,o,t);r.insert(r.createPositionAt(a,0),c)}}function Zb(e,t,i,s){const n=e.createContainerElement("figure",{class:"media"});return e.insert(e.createPositionAt(n,0),t.getMediaViewElement(e,i,s)),n}function Gb(e){const t=e.getSelectedElement();return t&&t.is("element","media")?t:null}function Kb(e,t,i){e.change((s=>{const n=s.createElement("media",{url:t});e.insertContent(n,i),s.setSelection(n,"on")}))}class Jb extends pt{refresh(){const e=this.editor.model,t=e.document.selection,i=Gb(t);this.value=i?i.getAttribute("url"):null,this.isEnabled=function(e){const t=e.getSelectedElement();return!!t&&"media"===t.name}(t)||function(e,t){let i=rp(e,t).start.parent;return i.isEmpty&&!t.schema.isLimit(i)&&(i=i.parent),t.schema.checkChild(i,"media")}(t,e)}execute(e){const t=this.editor.model,i=t.document.selection,s=Gb(i);s?t.change((t=>{t.setAttribute("url",e,s)})):Kb(t,e,rp(i,t))}}class Yb{constructor(e,t){const i=t.providers,s=t.extraProviders||[],n=new Set(t.removeProviders),o=i.concat(s).filter((e=>{const t=e.name;return t?!n.has(t):(d("media-embed-no-provider-name",{provider:e}),!1)}));this.locale=e,this.providerDefinitions=o}hasMedia(e){return!!this._getMedia(e)}getMediaViewElement(e,t,i){return this._getMedia(t).getViewElement(e,i)}_getMedia(e){if(!e)return new Qb(this.locale);e=e.trim();for(const t of this.providerDefinitions){const i=t.html,s=Ss(t.url);for(const t of s){const s=this._getUrlMatches(e,t);if(s)return new Qb(this.locale,e,s,i)}}return null}_getUrlMatches(e,t){let i=e.match(t);if(i)return i;let s=e.replace(/^https?:\/\//,"");return i=s.match(t),i||(s=s.replace(/^www\./,""),i=s.match(t),i||null)}}class Qb{constructor(e,t,i,s){this.url=this._getValidUrl(t),this._t=e.t,this._match=i,this._previewRenderer=s}getViewElement(e,t){const i={};let s;if(t.renderForEditingView||t.renderMediaPreview&&this.url&&this._previewRenderer){this.url&&(i["data-oembed-url"]=this.url),t.renderForEditingView&&(i.class="ck-media__wrapper");const n=this._getPreviewHtml(t);s=e.createRawElement("div",i,(function(e){e.innerHTML=n}))}else this.url&&(i.url=this.url),s=e.createEmptyElement(t.elementName,i);return e.setCustomProperty("media-content",!0,s),s}_getPreviewHtml(e){return this._previewRenderer?this._previewRenderer(this._match):this.url&&e.renderForEditingView?this._getPlaceholderHtml():""}_getPlaceholderHtml(){const e=new Id,t=new Od;return e.text=this._t("Open media in new tab"),t.content='<svg viewBox="0 0 64 42" xmlns="http://www.w3.org/2000/svg"><path d="M47.426 17V3.713L63.102 0v19.389h-.001l.001.272c0 1.595-2.032 3.43-4.538 4.098-2.506.668-4.538-.083-4.538-1.678 0-1.594 2.032-3.43 4.538-4.098.914-.244 2.032-.565 2.888-.603V4.516L49.076 7.447v9.556A1.014 1.014 0 0 0 49 17h-1.574zM29.5 17h-8.343a7.073 7.073 0 1 0-4.657 4.06v3.781H3.3a2.803 2.803 0 0 1-2.8-2.804V8.63a2.803 2.803 0 0 1 2.8-2.805h4.082L8.58 2.768A1.994 1.994 0 0 1 10.435 1.5h8.985c.773 0 1.477.448 1.805 1.149l1.488 3.177H26.7c1.546 0 2.8 1.256 2.8 2.805V17zm-11.637 0H17.5a1 1 0 0 0-1 1v.05A4.244 4.244 0 1 1 17.863 17zm29.684 2c.97 0 .953-.048.953.889v20.743c0 .953.016.905-.953.905H19.453c-.97 0-.953.048-.953-.905V19.89c0-.937-.016-.889.97-.889h28.077zm-4.701 19.338V22.183H24.154v16.155h18.692zM20.6 21.375v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616V37.53H20.6zm24.233-16.155v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615V37.53h-1.615zM29.485 25.283a.4.4 0 0 1 .593-.35l9.05 4.977a.4.4 0 0 1 0 .701l-9.05 4.978a.4.4 0 0 1-.593-.35v-9.956z"/></svg>',t.viewBox="0 0 64 42",new ld({tag:"div",attributes:{class:"ck ck-reset_all ck-media__placeholder"},children:[{tag:"div",attributes:{class:"ck-media__placeholder__icon"},children:[t]},{tag:"a",attributes:{class:"ck-media__placeholder__url",target:"_blank",rel:"noopener noreferrer",href:this.url},children:[{tag:"span",attributes:{class:"ck-media__placeholder__url__text"},children:[this.url]},e]}]}).render().outerHTML}_getValidUrl(e){return e?e.match(/^https?/)?e:"https://"+e:null}}class Xb extends ut{static get pluginName(){return"MediaEmbedEditing"}constructor(e){super(e),e.config.define("mediaEmbed",{elementName:"oembed",providers:[{name:"dailymotion",url:/^dailymotion\.com\/video\/(\w+)/,html:e=>`<div style="position: relative; padding-bottom: 100%; height: 0; "><iframe src="https://www.dailymotion.com/embed/video/${e[1]}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" width="480" height="270" allowfullscreen allow="autoplay"></iframe></div>`},{name:"spotify",url:[/^open\.spotify\.com\/(artist\/\w+)/,/^open\.spotify\.com\/(album\/\w+)/,/^open\.spotify\.com\/(track\/\w+)/],html:e=>`<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 126%;"><iframe src="https://open.spotify.com/embed/${e[1]}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" allowtransparency="true" allow="encrypted-media"></iframe></div>`},{name:"youtube",url:[/^(?:m\.)?youtube\.com\/watch\?v=([\w-]+)/,/^(?:m\.)?youtube\.com\/v\/([\w-]+)/,/^youtube\.com\/embed\/([\w-]+)/,/^youtu\.be\/([\w-]+)/],html:e=>`<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 56.2493%;"><iframe src="https://www.youtube.com/embed/${e[1]}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div>`},{name:"vimeo",url:[/^vimeo\.com\/(\d+)/,/^vimeo\.com\/[^/]+\/[^/]+\/video\/(\d+)/,/^vimeo\.com\/album\/[^/]+\/video\/(\d+)/,/^vimeo\.com\/channels\/[^/]+\/(\d+)/,/^vimeo\.com\/groups\/[^/]+\/videos\/(\d+)/,/^vimeo\.com\/ondemand\/[^/]+\/(\d+)/,/^player\.vimeo\.com\/video\/(\d+)/],html:e=>`<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 56.2493%;"><iframe src="https://player.vimeo.com/video/${e[1]}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe></div>`},{name:"instagram",url:/^instagram\.com\/p\/(\w+)/},{name:"twitter",url:/^twitter\.com/},{name:"googleMaps",url:[/^google\.com\/maps/,/^goo\.gl\/maps/,/^maps\.google\.com/,/^maps\.app\.goo\.gl/]},{name:"flickr",url:/^flickr\.com/},{name:"facebook",url:/^facebook\.com/}]}),this.registry=new Yb(e.locale,e.config.get("mediaEmbed"))}init(){const e=this.editor,t=e.model.schema,i=e.t,s=e.conversion,n=e.config.get("mediaEmbed.previewsInData"),o=e.config.get("mediaEmbed.elementName"),r=this.registry;e.commands.add("mediaEmbed",new Jb(e)),t.register("media",{isObject:!0,isBlock:!0,allowWhere:"$block",allowAttributes:["url"]}),s.for("dataDowncast").elementToElement({model:"media",view:(e,{writer:t})=>{const i=e.getAttribute("url");return Zb(t,r,i,{elementName:o,renderMediaPreview:i&&n})}}),s.for("dataDowncast").add(Wb(r,{elementName:o,renderMediaPreview:n})),s.for("editingDowncast").elementToElement({model:"media",view:(e,{writer:t})=>{const s=e.getAttribute("url");return function(e,t,i){return t.setCustomProperty("media",!0,e),ep(e,t,{label:i})}(Zb(t,r,s,{elementName:o,renderForEditingView:!0}),t,i("media widget"))}}),s.for("editingDowncast").add(Wb(r,{elementName:o,renderForEditingView:!0})),s.for("upcast").elementToElement({view:e=>["oembed",o].includes(e.name)&&e.getAttribute("url")?{name:!0}:null,model:(e,{writer:t})=>{const i=e.getAttribute("url");if(r.hasMedia(i))return t.createElement("media",{url:i})}}).elementToElement({view:{name:"div",attributes:{"data-oembed-url":!0}},model:(e,{writer:t})=>{const i=e.getAttribute("data-oembed-url");if(r.hasMedia(i))return t.createElement("media",{url:i})}})}}const ev=/^(?:http(s)?:\/\/)?[\w-]+\.[\w-.~:/?#[\]@!$&'()*+,;=%]+$/;class tv extends ut{static get requires(){return[Sp,Wp]}static get pluginName(){return"AutoMediaEmbed"}constructor(e){super(e),this._timeoutId=null,this._positionToInsert=null}init(){const e=this.editor,t=e.model.document;this.listenTo(e.plugins.get("ClipboardPipeline"),"inputTransformation",(()=>{const e=t.selection.getFirstRange(),i=Rc.fromPosition(e.start);i.stickiness="toPrevious";const s=Rc.fromPosition(e.end);s.stickiness="toNext",t.once("change:data",(()=>{this._embedMediaBetweenPositions(i,s),i.detach(),s.detach()}),{priority:"high"})})),e.commands.get("undo").on("execute",(()=>{this._timeoutId&&(Jo.window.clearTimeout(this._timeoutId),this._positionToInsert.detach(),this._timeoutId=null,this._positionToInsert=null)}),{priority:"high"})}_embedMediaBetweenPositions(e,t){const i=this.editor,s=i.plugins.get(Xb).registry,n=new Za(e,t),o=n.getWalker({ignoreElementEnd:!0});let r="";for(const a of o)a.item.is("$textProxy")&&(r+=a.item.data);r=r.trim(),r.match(ev)&&s.hasMedia(r)&&i.commands.get("mediaEmbed").isEnabled?(this._positionToInsert=Rc.fromPosition(e),this._timeoutId=Jo.window.setTimeout((()=>{i.model.change((e=>{let t;this._timeoutId=null,e.remove(n),n.detach(),"$graveyard"!==this._positionToInsert.root.rootName&&(t=this._positionToInsert),Kb(i.model,r,t),this._positionToInsert.detach(),this._positionToInsert=null}))}),100)):n.detach()}}class iv extends ad{constructor(e,t){super(t);const i=t.t;this.focusTracker=new ca,this.keystrokes=new ha,this.set("mediaURLInputValue",""),this.urlInputView=this._createUrlInput(),this.saveButtonView=this._createButton(i("Save"),rh.check,"ck-button-save"),this.saveButtonView.type="submit",this.saveButtonView.bind("isEnabled").to(this,"mediaURLInputValue",(e=>!!e)),this.cancelButtonView=this._createButton(i("Cancel"),rh.cancel,"ck-button-cancel","cancel"),this._focusables=new rd,this._focusCycler=new Dd({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this._validators=e,this.setTemplate({tag:"form",attributes:{class:["ck","ck-media-form","ck-responsive-form"],tabindex:"-1"},children:[this.urlInputView,this.saveButtonView,this.cancelButtonView]}),nd(this)}render(){super.render(),od({view:this}),[this.urlInputView,this.saveButtonView,this.cancelButtonView].forEach((e=>{this._focusables.add(e),this.focusTracker.add(e.element)})),this.keystrokes.listenTo(this.element);const e=e=>e.stopPropagation();this.keystrokes.set("arrowright",e),this.keystrokes.set("arrowleft",e),this.keystrokes.set("arrowup",e),this.keystrokes.set("arrowdown",e),this.listenTo(this.urlInputView.element,"selectstart",((e,t)=>{t.stopPropagation()}),{priority:"high"})}focus(){this._focusCycler.focusFirst()}get url(){return this.urlInputView.fieldView.element.value.trim()}set url(e){this.urlInputView.fieldView.element.value=e.trim()}isValid(){this.resetFormStatus();for(const e of this._validators){const t=e(this);if(t)return this.urlInputView.errorText=t,!1}return!0}resetFormStatus(){this.urlInputView.errorText=null,this.urlInputView.infoText=this._urlInputViewInfoDefault}_createUrlInput(){const e=this.locale.t,t=new du(this.locale,uu),i=t.fieldView;return this._urlInputViewInfoDefault=e("Paste the media URL in the input."),this._urlInputViewInfoTip=e("Tip: Paste the URL into the content to embed faster."),t.label=e("Media URL"),t.infoText=this._urlInputViewInfoDefault,i.on("input",(()=>{t.infoText=i.element.value?this._urlInputViewInfoTip:this._urlInputViewInfoDefault,this.mediaURLInputValue=i.element.value.trim()})),t}_createButton(e,t,i,s){const n=new Rd(this.locale);return n.set({label:e,icon:t,tooltip:!0}),n.extendTemplate({attributes:{class:i}}),s&&n.delegate("execute").to(this,s),n}}class sv extends ut{static get requires(){return[Xb]}static get pluginName(){return"MediaEmbedUI"}init(){const e=this.editor,t=e.commands.get("mediaEmbed"),i=e.plugins.get(Xb).registry;e.ui.componentFactory.add("mediaEmbed",(s=>{const n=su(s),o=new iv(function(e,t){return[t=>{if(!t.url.length)return e("The URL must not be empty.")},i=>{if(!t.hasMedia(i.url))return e("This media URL is not supported.")}]}(e.t,i),e.locale);return this._setUpDropdown(n,o,t,e),this._setUpForm(n,o,t),n}))}_setUpDropdown(e,t,i){const s=this.editor,n=s.t,o=e.buttonView;function r(){s.editing.view.focus(),e.isOpen=!1}e.bind("isEnabled").to(i),e.panelView.children.add(t),o.set({label:n("Insert media"),icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M18.68 3.03c.6 0 .59-.03.59.55v12.84c0 .59.01.56-.59.56H1.29c-.6 0-.59.03-.59-.56V3.58c0-.58-.01-.55.6-.55h17.38zM15.77 15V5H4.2v10h11.57zM2 4v1h1V4H2zm0 2v1h1V6H2zm0 2v1h1V8H2zm0 2v1h1v-1H2zm0 2v1h1v-1H2zm0 2v1h1v-1H2zM17 4v1h1V4h-1zm0 2v1h1V6h-1zm0 2v1h1V8h-1zm0 2v1h1v-1h-1zm0 2v1h1v-1h-1zm0 2v1h1v-1h-1zM7.5 7.177a.4.4 0 0 1 .593-.351l5.133 2.824a.4.4 0 0 1 0 .7l-5.133 2.824a.4.4 0 0 1-.593-.35V7.176v.001z"/></svg>',tooltip:!0}),o.on("open",(()=>{t.disableCssTransitions(),t.url=i.value||"",t.urlInputView.fieldView.select(),t.focus(),t.enableCssTransitions()}),{priority:"low"}),e.on("submit",(()=>{t.isValid()&&(s.execute("mediaEmbed",t.url),r())})),e.on("change:isOpen",(()=>t.resetFormStatus())),e.on("cancel",(()=>r()))}_setUpForm(e,t,i){t.delegate("submit","cancel").to(e),t.urlInputView.bind("value").to(i,"value"),t.urlInputView.bind("isReadOnly").to(i,"isEnabled",(e=>!e))}}function nv(e,t){if(!e.childCount)return;const i=new Eh(e.document),s=function(e,t){const i=t.createRangeIn(e),s=new js({name:/^p|h\d+$/,styles:{"mso-list":/.*/}}),n=[];for(const o of i)if("elementStart"===o.type&&s.match(o.item)){const e=av(o.item);n.push({element:o.item,id:e.id,order:e.order,indent:e.indent})}return n}(e,i);if(!s.length)return;let n=null,o=1;s.forEach(((e,r)=>{const a=function(e,t){if(!e)return!0;if(e.id!==t.id)return t.indent-e.indent!=1;const i=t.element.previousSibling;return!i||!((s=i).is("element","ol")||s.is("element","ul"));var s}(s[r-1],e),l=(h=e,(c=a?null:s[r-1])?h.indent-c.indent:h.indent-1);var c,h;if(a&&(n=null,o=1),!n||0!==l){const s=function(e,t){const i=/mso-level-number-format:([^;]{0,100});/gi,s=new RegExp(`@list l${e.id}:level${e.indent}\\s*({[^}]*)`,"gi").exec(t);let n="decimal",o="ol";if(s&&s[1]){const t=i.exec(s[1]);if(t&&t[1]&&(n=t[1].trim(),o="bullet"!==n&&"image"!==n?"ol":"ul"),"bullet"===n){const t=function(e){const t=function(e){if(e.getChild(0).is("$text"))return null;for(const t of e.getChildren()){if(!t.is("element","span"))continue;const e=t.getChild(0);return e.is("$text")?e:e.getChild(0)}}(e);if(!t)return null;const i=t._data;return"o"===i?"circle":"\xb7"===i?"disc":"\xa7"===i?"square":null}(e.element);t&&(n=t)}}return{type:o,style:ov(n)}}(e,t);if(n){if(e.indent>o){const e=n.getChild(n.childCount-1),t=e.getChild(e.childCount-1);n=rv(s,t,i),o+=1}else if(e.indent<o){const t=o-e.indent;n=function(e,t){const i=e.getAncestors({parentFirst:!0});let s=null,n=0;for(const o of i)if("ul"!==o.name&&"ol"!==o.name||n++,n===t){s=o;break}return s}(n,t),o=parseInt(e.indent)}}else n=rv(s,e.element,i);e.indent<=o&&(n.is("element",s.type)||(n=i.rename(s.type,n)))}const d=function(e,t){return function(e,t){const i=new js({name:"span",styles:{"mso-list":"Ignore"}}),s=t.createRangeIn(e);for(const n of s)"elementStart"===n.type&&i.match(n.item)&&t.remove(n.item)}(e,t),t.rename("li",e)}(e.element,i);i.appendChild(d,n)}))}function ov(e){switch(e){case"arabic-leading-zero":return"decimal-leading-zero";case"alpha-upper":return"upper-alpha";case"alpha-lower":return"lower-alpha";case"roman-upper":return"upper-roman";case"roman-lower":return"lower-roman";case"circle":case"disc":case"square":return e;default:return null}}function rv(e,t,i){const s=t.parent,n=i.createElement(e.type),o=s.getChildIndex(t)+1;return i.insertChild(o,n,s),e.style&&i.setStyle("list-style-type",e.style,n),n}function av(e){const t={},i=e.getStyle("mso-list");if(i){const e=i.match(/(^|\s{1,100})l(\d+)/i),s=i.match(/\s{0,100}lfo(\d+)/i),n=i.match(/\s{0,100}level(\d+)/i);e&&s&&n&&(t.id=e[2],t.order=s[1],t.indent=n[1])}return t}const lv=/id=("|')docs-internal-guid-[-0-9a-f]+("|')/i;class cv{constructor(e){this.document=e}isActive(e){return lv.test(e)}execute(e){const t=new Eh(this.document),{body:i}=e._parsedData;!function(e,t){for(const i of e.getChildren())if(i.is("element","b")&&"normal"===i.getStyle("font-weight")){const s=e.getChildIndex(i);t.remove(i),t.insertChild(s,i.getChildren(),e)}}(i,t),function(e,t){for(const i of t.createRangeIn(e)){const e=i.item;if(e.is("element","li")){const i=e.getChild(0);i&&i.is("element","p")&&t.unwrapElement(i)}}}(i,t),e.content=i}}function hv(e,t){if(!e.childCount)return;const i=new Eh;!function(e,t,i){const s=i.createRangeIn(t),n=new js({name:"img"}),o=[];for(const r of s)if(n.match(r.item)){const t=r.item,i=t.getAttribute("v:shapes")?t.getAttribute("v:shapes").split(" "):[];i.length&&i.every((t=>e.indexOf(t)>-1))?o.push(t):t.getAttribute("src")||o.push(t)}for(const r of o)i.remove(r)}(function(e,t){const i=t.createRangeIn(e),s=new js({name:/v:(.+)/}),n=[];for(const o of i){const e=o.item,t=e.previousSibling&&e.previousSibling.name||null;s.match(e)&&e.getAttribute("o:gfxdata")&&"v:shapetype"!==t&&n.push(o.item.getAttribute("id"))}return n}(e,i),e,i),function(e,t){const i=t.createRangeIn(e),s=new js({name:/v:(.+)/}),n=[];for(const o of i)s.match(o.item)&&n.push(o.item);for(const o of n)t.remove(o)}(e,i);const s=function(e,t){const i=t.createRangeIn(e),s=new js({name:"img"}),n=[];for(const o of i)s.match(o.item)&&o.item.getAttribute("src").startsWith("file://")&&n.push(o.item);return n}(e,i);s.length&&function(e,t,i){if(e.length===t.length)for(let s=0;s<e.length;s++){const n=`data:${t[s].type};base64,${dv(t[s].hex)}`;i.setAttribute("src",n,e[s])}}(s,function(e){if(!e)return[];const t=/{\\pict[\s\S]+?\\bliptag-?\d+(\\blipupi-?\d+)?({\\\*\\blipuid\s?[\da-fA-F]+)?[\s}]*?/,i=new RegExp("(?:("+t.source+"))([\\da-fA-F\\s]+)\\}","g"),s=e.match(i),n=[];if(s)for(const o of s){let e=!1;o.includes("\\pngblip")?e="image/png":o.includes("\\jpegblip")&&(e="image/jpeg"),e&&n.push({hex:o.replace(t,"").replace(/[^\da-fA-F]/g,""),type:e})}return n}(t),i)}function dv(e){return btoa(e.match(/\w{2}/g).map((e=>String.fromCharCode(parseInt(e,16)))).join(""))}const uv=/<meta\s*name="?generator"?\s*content="?microsoft\s*word\s*\d+"?\/?>/i,mv=/xmlns:o="urn:schemas-microsoft-com/i;class pv{constructor(e){this.document=e}isActive(e){return uv.test(e)||mv.test(e)}execute(e){const{body:t,stylesString:i}=e._parsedData;nv(t,i),hv(t,e.dataTransfer.getData("text/rtf")),e.content=t}}function fv(e){return e.replace(/<span(?: class="Apple-converted-space"|)>(\s+)<\/span>/g,((e,t)=>1===t.length?" ":Array(t.length+1).join("\xa0 ").substr(0,t.length)))}function gv(e,t){const i=new DOMParser,s=function(e){return fv(fv(e)).replace(/(<span\s+style=['"]mso-spacerun:yes['"]>[^\S\r\n]*?)[\r\n]+([^\S\r\n]*<\/span>)/g,"$1$2").replace(/<span\s+style=['"]mso-spacerun:yes['"]><\/span>/g,"").replace(/ <\//g,"\xa0</").replace(/ <o:p><\/o:p>/g,"\xa0<o:p></o:p>").replace(/<o:p>(&nbsp;|\u00A0)<\/o:p>/g,"").replace(/>([^\S\r\n]*[\r\n]\s*)</g,"><")}(function(e){const t="</body>",i="</html>",s=e.indexOf(t);if(s<0)return e;const n=e.indexOf(i,s+t.length);return e.substring(0,s+t.length)+(n>=0?e.substring(n):"")}(e=e.replace(/<!--\[if gte vml 1]>/g,""))),n=i.parseFromString(s,"text/html");!function(e){e.querySelectorAll("span[style*=spacerun]").forEach((e=>{const t=e.innerText.length||0;e.innerHTML=Array(t+1).join("\xa0 ").substr(0,t)}))}(n);const o=n.body.innerHTML,r=function(e,t){const i=new Kn(t),s=new ir(i,{blockFillerMode:"nbsp"}),n=e.createDocumentFragment(),o=e.body.childNodes;for(;o.length>0;)n.appendChild(o[0]);return s.domToView(n,{skipComments:!0})}(n,t),a=function(e){const t=[],i=[],s=Array.from(e.getElementsByTagName("style"));for(const n of s)n.sheet&&n.sheet.cssRules&&n.sheet.cssRules.length&&(t.push(n.sheet),i.push(n.innerHTML));return{styles:t,stylesString:i.join(" ")}}(n);return{body:r,bodyString:o,styles:a.styles,stylesString:a.stylesString}}function wv(e,t,i,s,n=1){t>n?s.setAttribute(e,t,i):s.removeAttribute(e,i)}function bv(e,t,i={}){const s=e.createElement("tableCell",i);return e.insertElement("paragraph",s),e.insert(s,t),s}function vv(e,t){const i=t.parent.parent,s=parseInt(i.getAttribute("headingColumns")||0),{column:n}=e.getCellLocation(t);return!!s&&n<s}function yv(){return e=>{e.on("element:table",((e,t,i)=>{const s=t.viewItem;if(!i.consumable.test(s,{name:!0}))return;const{rows:n,headingRows:o,headingColumns:r}=function(e){const t={headingRows:0,headingColumns:0},i=[],s=[];let n;for(const o of Array.from(e.getChildren()))if("tbody"===o.name||"thead"===o.name||"tfoot"===o.name){"thead"!==o.name||n||(n=o);const e=Array.from(o.getChildren()).filter((e=>e.is("element","tr")));for(const o of e)if("thead"===o.parent.name&&o.parent===n)t.headingRows++,i.push(o);else{s.push(o);const e=kv(o);e>t.headingColumns&&(t.headingColumns=e)}}return t.rows=[...i,...s],t}(s),a={};r&&(a.headingColumns=r),o&&(a.headingRows=o);const l=i.writer.createElement("table",a);if(i.safeInsert(l,t.modelCursor)){if(i.consumable.consume(s,{name:!0}),n.forEach((e=>i.convertItem(e,i.writer.createPositionAt(l,"end")))),i.convertChildren(s,i.writer.createPositionAt(l,"end")),l.isEmpty){const e=i.writer.createElement("tableRow");i.writer.insert(e,i.writer.createPositionAt(l,"end")),bv(i.writer,i.writer.createPositionAt(e,"end"))}i.updateConversionResult(l,t)}}))}}function _v(e){return t=>{t.on(`element:${e}`,((e,t,i)=>{if(t.modelRange&&t.viewItem.isEmpty){const e=t.modelRange.start.nodeAfter,s=i.writer.createPositionAt(e,0);i.writer.insertElement("paragraph",s)}}),{priority:"low"})}}function kv(e){let t=0,i=0;const s=Array.from(e.getChildren()).filter((e=>"th"===e.name||"td"===e.name));for(;i<s.length&&"th"===s[i].name;){const e=s[i];t+=parseInt(e.getAttribute("colspan")||1),i++}return t}class Av{constructor(e,t={}){this._table=e,this._startRow=void 0!==t.row?t.row:t.startRow||0,this._endRow=void 0!==t.row?t.row:t.endRow,this._startColumn=void 0!==t.column?t.column:t.startColumn||0,this._endColumn=void 0!==t.column?t.column:t.endColumn,this._includeAllSlots=!!t.includeAllSlots,this._skipRows=new Set,this._row=0,this._rowIndex=0,this._column=0,this._cellIndex=0,this._spannedCells=new Map,this._nextCellAtColumn=-1}[Symbol.iterator](){return this}next(){const e=this._table.getChild(this._rowIndex);if(!e||this._isOverEndRow())return{done:!0};if(!e.is("element","tableRow"))return this._rowIndex++,this.next();if(this._isOverEndColumn())return this._advanceToNextRow();let t=null;const i=this._getSpanned();if(i)this._includeAllSlots&&!this._shouldSkipSlot()&&(t=this._formatOutValue(i.cell,i.row,i.column));else{const i=e.getChild(this._cellIndex);if(!i)return this._advanceToNextRow();const s=parseInt(i.getAttribute("colspan")||1),n=parseInt(i.getAttribute("rowspan")||1);(s>1||n>1)&&this._recordSpans(i,n,s),this._shouldSkipSlot()||(t=this._formatOutValue(i)),this._nextCellAtColumn=this._column+s}return this._column++,this._column==this._nextCellAtColumn&&this._cellIndex++,t||this.next()}skipRow(e){this._skipRows.add(e)}_advanceToNextRow(){return this._row++,this._rowIndex++,this._column=0,this._cellIndex=0,this._nextCellAtColumn=-1,this.next()}_isOverEndRow(){return void 0!==this._endRow&&this._row>this._endRow}_isOverEndColumn(){return void 0!==this._endColumn&&this._column>this._endColumn}_formatOutValue(e,t=this._row,i=this._column){return{done:!1,value:new xv(this,e,t,i)}}_shouldSkipSlot(){const e=this._skipRows.has(this._row),t=this._row<this._startRow,i=this._column<this._startColumn,s=void 0!==this._endColumn&&this._column>this._endColumn;return e||t||i||s}_getSpanned(){const e=this._spannedCells.get(this._row);return e&&e.get(this._column)||null}_recordSpans(e,t,i){const s={cell:e,row:this._row,column:this._column};for(let n=this._row;n<this._row+t;n++)for(let e=this._column;e<this._column+i;e++)n==this._row&&e==this._column||this._markSpannedCell(n,e,s)}_markSpannedCell(e,t,i){this._spannedCells.has(e)||this._spannedCells.set(e,new Map),this._spannedCells.get(e).set(t,i)}}class xv{constructor(e,t,i,s){this.cell=t,this.row=e._row,this.column=e._column,this.cellAnchorRow=i,this.cellAnchorColumn=s,this._cellIndex=e._cellIndex,this._rowIndex=e._rowIndex,this._table=e._table}get isAnchor(){return this.row===this.cellAnchorRow&&this.column===this.cellAnchorColumn}get cellWidth(){return parseInt(this.cell.getAttribute("colspan")||1)}get cellHeight(){return parseInt(this.cell.getAttribute("rowspan")||1)}get rowIndex(){return this._rowIndex}getPositionBefore(){return this._table.root.document.model.createPositionAt(this._table.getChild(this.row),this._cellIndex)}}function Cv(e={}){return t=>t.on("insert:table",((t,i,s)=>{const n=i.item;if(!s.consumable.consume(n,"insert"))return;s.consumable.consume(n,"attribute:headingRows:table"),s.consumable.consume(n,"attribute:headingColumns:table");const o=e&&e.asWidget,r=s.writer.createContainerElement("figure",{class:"table"}),a=s.writer.createContainerElement("table");let l;var c,h;s.writer.insert(s.writer.createPositionAt(r,0),a),o&&(c=r,(h=s.writer).setCustomProperty("table",!0,c),l=ep(c,h,{hasSelectionHandle:!0}));const d=new Av(n),u={headingRows:n.getAttribute("headingRows")||0,headingColumns:n.getAttribute("headingColumns")||0},m=new Map;for(const f of d){const{row:t,cell:i}=f,o=n.getChild(t),r=m.get(t)||Ov(a,o,t,u,s);m.set(t,r),s.consumable.consume(i,"insert"),Pv(f,u,s.writer.createPositionAt(r,"end"),s,e)}for(const e of n.getChildren()){const t=e.index;e.is("element","tableRow")&&!m.has(t)&&m.set(t,Ov(a,e,t,u,s))}const p=s.mapper.toViewPosition(i.range.start);s.mapper.bindElements(n,o?l:r),s.writer.insert(p,o?l:r)}))}function Ev(e,t){const{writer:i}=t;if(e.parent.is("element","tableCell"))return Tv(e)?i.createContainerElement("span",{class:"ck-table-bogus-paragraph"}):i.createContainerElement("p")}function Tv(e){return 1===e.parent.childCount&&!Mv(e)}function Sv(e,t,i){const{cell:s}=e,n=Iv(e,t),o=i.mapper.toViewElement(s);o&&o.name!==n&&function(e,t,i){const s=i.writer,n=i.mapper.toViewElement(e),o=op(s.createEditableElement(t,n.getAttributes()),s);sp(o,s,((e,t,i)=>i.addClass(Ss(t.classes),e)),((e,t,i)=>i.removeClass(Ss(t.classes),e))),s.insert(s.createPositionAfter(n),o),s.move(s.createRangeIn(n),s.createPositionAt(o,0)),s.remove(s.createRangeOn(n)),i.mapper.unbindViewElement(n),i.mapper.bindElements(e,o)}(s,n,i)}function Pv(e,t,i,s,n){const o=n&&n.asWidget,r=Iv(e,t),a=o?op(s.writer.createEditableElement(r),s.writer):s.writer.createContainerElement(r);o&&sp(a,s.writer,((e,t,i)=>i.addClass(Ss(t.classes),e)),((e,t,i)=>i.removeClass(Ss(t.classes),e)));const l=e.cell,c=l.getChild(0),h=1===l.childCount&&"paragraph"===c.name;if(s.writer.insert(i,a),s.mapper.bindElements(l,a),!o&&h&&!Mv(c)){const e=l.getChild(0);s.consumable.consume(e,"insert"),s.mapper.bindElements(e,a)}}function Ov(e,t,i,s,n){n.consumable.consume(t,"insert");const o=t.isEmpty?n.writer.createEmptyElement("tr"):n.writer.createContainerElement("tr");n.mapper.bindElements(t,o);const r=s.headingRows,a=function(e,t,i){return Rv(e,t)||function(e,t,i){const s=i.writer.createContainerElement(e),n=i.writer.createPositionAt(t,"tbody"==e?"end":0);return i.writer.insert(n,s),s}(e,t,i)}(function(e,t){return e<t.headingRows?"thead":"tbody"}(i,s),e,n),l=r>0&&i>=r?i-r:i,c=n.writer.createPositionAt(a,l);return n.writer.insert(c,o),o}function Iv(e,t){const{row:i,column:s}=e,{headingColumns:n,headingRows:o}=t;return o&&o>i||n&&n>s?"th":"td"}function Rv(e,t){for(const i of t.getChildren())if(i.name==e)return i}function zv(e,t,i){const s=Rv(e,t);s&&0===s.childCount&&i.writer.remove(i.writer.createRangeOn(s))}function Mv(e){return!![...e.getAttributeKeys()].length}class Nv extends pt{refresh(){const e=this.editor.model,t=e.document.selection,i=e.schema;this.isEnabled=function(e,t){const i=e.getFirstPosition().parent,s=i===i.root?i:i.parent;return t.checkChild(s,"table")}(t,i)}execute(e={}){const t=this.editor.model,i=t.document.selection,s=this.editor.plugins.get("TableUtils"),n=this.editor.config.get("table"),o=rp(i,t),r=n.defaultHeadings.rows,a=n.defaultHeadings.columns;void 0===e.headingRows&&r&&(e.headingRows=r),void 0===e.headingColumns&&a&&(e.headingColumns=a),t.change((i=>{const n=s.createTable(i,e);t.insertContent(n,o),i.setSelection(i.createPositionAt(n.getNodeByPath([0,0,0]),0))}))}}function Dv(e){const t=[];for(const i of qv(e.getRanges())){const e=i.getContainedElement();e&&e.is("element","tableCell")&&t.push(e)}return t}function Vv(e){const t=[];for(const i of e.getRanges()){const e=i.start.findAncestor("tableCell");e&&t.push(e)}return t}function Bv(e){const t=Dv(e);return t.length?t:Vv(e)}function Lv(e){return Hv(e.map((e=>e.parent.index)))}function Fv(e){const t=e[0].findAncestor("table");return Hv([...new Av(t)].filter((t=>e.includes(t.cell))).map((e=>e.column)))}function jv(e,t){if(e.length<2||!function(e){const t=e[0].findAncestor("table");if(!Uv(Lv(e),parseInt(t.getAttribute("headingRows")||0)))return!1;const i=parseInt(t.getAttribute("headingColumns")||0);return Uv(Fv(e),i)}(e))return!1;const i=new Set,s=new Set;let n=0;for(const o of e){const{row:e,column:r}=t.getCellLocation(o),a=parseInt(o.getAttribute("rowspan")||1),l=parseInt(o.getAttribute("colspan")||1);i.add(e),s.add(r),a>1&&i.add(e+a-1),l>1&&s.add(r+l-1),n+=a*l}return function(e,t){const i=Array.from(e.values()),s=Array.from(t.values());return(Math.max(...i)-Math.min(...i)+1)*(Math.max(...s)-Math.min(...s)+1)}(i,s)==n}function qv(e){return Array.from(e).sort($v)}function Hv(e){const t=e.sort(((e,t)=>e-t));return{first:t[0],last:t[t.length-1]}}function $v(e,t){const i=e.start,s=t.start;return i.isBefore(s)?-1:1}function Uv({first:e,last:t},i){return e<i===t<i}class Wv extends pt{constructor(e,t={}){super(e),this.order=t.order||"below"}refresh(){const e=!!Bv(this.editor.model.document.selection).length;this.isEnabled=e}execute(){const e=this.editor,t=e.model.document.selection,i=e.plugins.get("TableUtils"),s="above"===this.order,n=Bv(t),o=Lv(n),r=s?o.first:o.last,a=n[0].findAncestor("table");i.insertRows(a,{at:s?r:r+1,copyStructureFromAbove:!s})}}class Zv extends pt{constructor(e,t={}){super(e),this.order=t.order||"right"}refresh(){const e=!!Bv(this.editor.model.document.selection).length;this.isEnabled=e}execute(){const e=this.editor,t=e.model.document.selection,i=e.plugins.get("TableUtils"),s="left"===this.order,n=Bv(t),o=Fv(n),r=s?o.first:o.last,a=n[0].findAncestor("table");i.insertColumns(a,{columns:1,at:s?r:r+1})}}class Gv extends pt{constructor(e,t={}){super(e),this.direction=t.direction||"horizontally"}refresh(){const e=Bv(this.editor.model.document.selection);this.isEnabled=1===e.length}execute(){const e=Bv(this.editor.model.document.selection)[0],t="horizontally"===this.direction,i=this.editor.plugins.get("TableUtils");t?i.splitCellHorizontally(e,2):i.splitCellVertically(e,2)}}function Kv(e,t,i){const{startRow:s,startColumn:n,endRow:o,endColumn:r}=t,a=i.createElement("table"),l=o-s+1;for(let h=0;h<l;h++)i.insertElement("tableRow",a,"end");const c=[...new Av(e,{startRow:s,endRow:o,startColumn:n,endColumn:r,includeAllSlots:!0})];for(const{row:h,column:d,cell:u,isAnchor:m,cellAnchorRow:p,cellAnchorColumn:f}of c){const e=h-s,t=a.getChild(e);if(m){const e=i.cloneElement(u);i.append(e,t),ey(e,h,d,o,r,i)}else(p<s||f<n)&&bv(i,i.createPositionAt(t,"end"))}return function(e,t,i,s,n){const o=parseInt(t.getAttribute("headingRows")||0);o>0&&wv("headingRows",o-i,e,n,0);const r=parseInt(t.getAttribute("headingColumns")||0);r>0&&wv("headingColumns",r-s,e,n,0)}(a,e,s,n,i),a}function Jv(e,t,i=0){const s=[],n=new Av(e,{startRow:i,endRow:t-1});for(const o of n){const{row:e,cellHeight:i}=o,n=e+i-1;e<t&&t<=n&&s.push(o)}return s}function Yv(e,t,i){const s=e.parent,n=s.parent,o=s.index,r=t-o,a={},l=parseInt(e.getAttribute("rowspan"))-r;l>1&&(a.rowspan=l);const c=parseInt(e.getAttribute("colspan")||1);c>1&&(a.colspan=c);const h=o+r,d=[...new Av(n,{startRow:o,endRow:h,includeAllSlots:!0})];let u,m=null;for(const p of d){const{row:t,column:s,cell:n}=p;n===e&&void 0===u&&(u=s),void 0!==u&&u===s&&t===h&&(m=bv(i,p.getPositionBefore(),a))}return wv("rowspan",r,e,i),m}function Qv(e,t){const i=[],s=new Av(e);for(const n of s){const{column:e,cellWidth:s}=n,o=e+s-1;e<t&&t<=o&&i.push(n)}return i}function Xv(e,t,i,s){const n=i-t,o={},r=parseInt(e.getAttribute("colspan"))-n;r>1&&(o.colspan=r);const a=parseInt(e.getAttribute("rowspan")||1);a>1&&(o.rowspan=a);const l=bv(s,s.createPositionAfter(e),o);return wv("colspan",n,e,s),l}function ey(e,t,i,s,n,o){const r=parseInt(e.getAttribute("colspan")||1),a=parseInt(e.getAttribute("rowspan")||1);i+r-1>n&&wv("colspan",n-i+1,e,o,1),t+a-1>s&&wv("rowspan",s-t+1,e,o,1)}function ty(e,t){const i=t.getColumns(e),s=new Array(i).fill(0);for(const{column:o}of new Av(e))s[o]++;const n=s.reduce(((e,t,i)=>t?e:[...e,i]),[]);if(n.length>0){const i=n[n.length-1];return t.removeColumns(e,{at:i}),!0}return!1}function iy(e,t){const i=[],s=t.getRows(e);for(let n=0;n<s;n++)e.getChild(n).isEmpty&&i.push(n);if(i.length>0){const s=i[i.length-1];return t.removeRows(e,{at:s}),!0}return!1}function sy(e,t){ty(e,t)||iy(e,t)}function ny(e,t){const i=Array.from(new Av(e,{startColumn:t.firstColumn,endColumn:t.lastColumn,row:t.lastRow}));if(i.every((({cellHeight:e})=>1===e)))return t.lastRow;const s=i[0].cellHeight-1;return t.lastRow+s}function oy(e,t){const i=Array.from(new Av(e,{startRow:t.firstRow,endRow:t.lastRow,column:t.lastColumn}));if(i.every((({cellWidth:e})=>1===e)))return t.lastColumn;const s=i[0].cellWidth-1;return t.lastColumn+s}class ry extends pt{constructor(e,t){super(e),this.direction=t.direction,this.isHorizontal="right"==this.direction||"left"==this.direction}refresh(){const e=this._getMergeableCell();this.value=e,this.isEnabled=!!e}execute(){const e=this.editor.model,t=Vv(e.document.selection)[0],i=this.value,s=this.direction;e.change((e=>{const n="right"==s||"down"==s,o=n?t:i,r=n?i:t,a=r.parent;!function(e,t,i){ay(e)||(ay(t)&&i.remove(i.createRangeIn(t)),i.move(i.createRangeIn(e),i.createPositionAt(t,"end"))),i.remove(e)}(r,o,e);const l=this.isHorizontal?"colspan":"rowspan",c=parseInt(t.getAttribute(l)||1),h=parseInt(i.getAttribute(l)||1);e.setAttribute(l,c+h,o),e.setSelection(e.createRangeIn(o));const d=this.editor.plugins.get("TableUtils");sy(a.findAncestor("table"),d)}))}_getMergeableCell(){const e=Vv(this.editor.model.document.selection)[0];if(!e)return;const t=this.editor.plugins.get("TableUtils"),i=this.isHorizontal?function(e,t,i){const s=e.parent.parent,n="right"==t?e.nextSibling:e.previousSibling,o=(s.getAttribute("headingColumns")||0)>0;if(!n)return;const r="right"==t?e:n,a="right"==t?n:e,{column:l}=i.getCellLocation(r),{column:c}=i.getCellLocation(a),h=parseInt(r.getAttribute("colspan")||1),d=vv(i,r),u=vv(i,a);return o&&d!=u?void 0:l+h===c?n:void 0}(e,this.direction,t):function(e,t,i){const s=e.parent,n=s.parent,o=n.getChildIndex(s);if("down"==t&&o===i.getRows(n)-1||"up"==t&&0===o)return;const r=parseInt(e.getAttribute("rowspan")||1),a=n.getAttribute("headingRows")||0;if(a&&("down"==t&&o+r===a||"up"==t&&o===a))return;const l=parseInt(e.getAttribute("rowspan")||1),c="down"==t?o+l:o,h=[...new Av(n,{endRow:c})],d=h.find((t=>t.cell===e)).column,u=h.find((({row:e,cellHeight:i,column:s})=>s===d&&("down"==t?e===c:c===e+i)));return u&&u.cell}(e,this.direction,t);if(!i)return;const s=this.isHorizontal?"rowspan":"colspan",n=parseInt(e.getAttribute(s)||1);return parseInt(i.getAttribute(s)||1)===n?i:void 0}}function ay(e){return 1==e.childCount&&e.getChild(0).is("element","paragraph")&&e.getChild(0).isEmpty}class ly extends pt{refresh(){const e=Bv(this.editor.model.document.selection),t=e[0];if(t){const i=t.findAncestor("table"),s=this.editor.plugins.get("TableUtils").getRows(i)-1,n=Lv(e),o=0===n.first&&n.last===s;this.isEnabled=!o}else this.isEnabled=!1}execute(){const e=this.editor.model,t=this.editor.plugins.get("TableUtils"),i=Bv(e.document.selection),s=Lv(i),n=i[0],o=n.findAncestor("table"),r=t.getCellLocation(n).column;e.change((e=>{const i=s.last-s.first+1;t.removeRows(o,{at:s.first,rows:i});const n=function(e,t,i,s){const n=e.getChild(Math.min(t,s-1));let o=n.getChild(0),r=0;for(const a of n.getChildren()){if(r>i)return o;o=a,r+=parseInt(a.getAttribute("colspan")||1)}return o}(o,s.first,r,t.getRows(o));e.setSelection(e.createPositionAt(n,0))}))}}class cy extends pt{refresh(){const e=Bv(this.editor.model.document.selection),t=e[0];if(t){const i=t.findAncestor("table"),s=this.editor.plugins.get("TableUtils").getColumns(i),{first:n,last:o}=Fv(e);this.isEnabled=o-n<s-1}else this.isEnabled=!1}execute(){const[e,t]=function(e){const t=Bv(e),i=t[0],s=t.pop(),n=[i,s];return i.isBefore(s)?n:n.reverse()}(this.editor.model.document.selection),i=e.parent.parent,s=[...new Av(i)],n={first:s.find((t=>t.cell===e)).column,last:s.find((e=>e.cell===t)).column},o=function(e,t,i,s){return parseInt(i.getAttribute("colspan")||1)>1?i:t.previousSibling||i.nextSibling?i.nextSibling||t.previousSibling:s.first?e.reverse().find((({column:e})=>e<s.first)).cell:e.reverse().find((({column:e})=>e>s.last)).cell}(s,e,t,n);this.editor.model.change((e=>{const t=n.last-n.first+1;this.editor.plugins.get("TableUtils").removeColumns(i,{at:n.first,columns:t}),e.setSelection(e.createPositionAt(o,0))}))}}class hy extends pt{refresh(){const e=Bv(this.editor.model.document.selection),t=e.length>0;this.isEnabled=t,this.value=t&&e.every((e=>this._isInHeading(e,e.parent.parent)))}execute(e={}){if(e.forceValue===this.value)return;const t=this.editor.model,i=Bv(t.document.selection),s=i[0].findAncestor("table"),{first:n,last:o}=Lv(i),r=this.value?n:o+1,a=s.getAttribute("headingRows")||0;t.change((e=>{if(r){const t=Jv(s,r,r>a?a:0);for(const{cell:i}of t)Yv(i,r,e)}wv("headingRows",r,s,e,0)}))}_isInHeading(e,t){const i=parseInt(t.getAttribute("headingRows")||0);return!!i&&e.parent.index<i}}class dy extends pt{refresh(){const e=Bv(this.editor.model.document.selection),t=this.editor.plugins.get("TableUtils"),i=e.length>0;this.isEnabled=i,this.value=i&&e.every((e=>vv(t,e)))}execute(e={}){if(e.forceValue===this.value)return;const t=this.editor.model,i=Bv(t.document.selection),s=i[0].findAncestor("table"),{first:n,last:o}=Fv(i),r=this.value?n:o+1;t.change((e=>{if(r){const t=Qv(s,r);for(const{cell:i,column:s}of t)Xv(i,s,r,e)}wv("headingColumns",r,s,e,0)}))}}class uy extends ut{static get pluginName(){return"TableUtils"}init(){this.decorate("insertColumns"),this.decorate("insertRows")}getCellLocation(e){const t=e.parent,i=t.parent,s=i.getChildIndex(t),n=new Av(i,{row:s});for(const{cell:o,row:r,column:a}of n)if(o===e)return{row:r,column:a}}createTable(e,t){const i=e.createElement("table"),s=parseInt(t.rows)||2,n=parseInt(t.columns)||2;return my(e,i,0,s,n),t.headingRows&&wv("headingRows",Math.min(t.headingRows,s),i,e,0),t.headingColumns&&wv("headingColumns",Math.min(t.headingColumns,n),i,e,0),i}insertRows(e,t={}){const i=this.editor.model,s=t.at||0,n=t.rows||1,o=void 0!==t.copyStructureFromAbove,r=t.copyStructureFromAbove?s-1:s,a=this.getRows(e),l=this.getColumns(e);if(s>a)throw new h("tableutils-insertrows-insert-out-of-range",this,{options:t});i.change((t=>{const i=e.getAttribute("headingRows")||0;if(i>s&&wv("headingRows",i+n,e,t,0),!o&&(0===s||s===a))return void my(t,e,s,n,l);const c=o?Math.max(s,r):s,h=new Av(e,{endRow:c}),d=new Array(l).fill(1);for(const{row:e,column:a,cellHeight:l,cellWidth:u,cell:m}of h){const i=e+l-1,c=e<=r&&r<=i;e<s&&s<=i?(t.setAttribute("rowspan",l+n,m),d[a]=-u):o&&c&&(d[a]=u)}for(let o=0;o<n;o++){const i=t.createElement("tableRow");t.insert(i,e,s);for(let e=0;e<d.length;e++){const s=d[e],n=t.createPositionAt(i,"end");s>0&&bv(t,n,s>1?{colspan:s}:null),e+=Math.abs(s)-1}}}))}insertColumns(e,t={}){const i=this.editor.model,s=t.at||0,n=t.columns||1;i.change((t=>{const i=e.getAttribute("headingColumns");s<i&&t.setAttribute("headingColumns",i+n,e);const o=this.getColumns(e);if(0===s||o===s){for(const i of e.getChildren())i.is("element","tableRow")&&py(n,t,t.createPositionAt(i,s?"end":0));return}const r=new Av(e,{column:s,includeAllSlots:!0});for(const e of r){const{row:i,cell:o,cellAnchorColumn:a,cellAnchorRow:l,cellWidth:c,cellHeight:h}=e;if(a<s){t.setAttribute("colspan",c+n,o);const e=l+h-1;for(let t=i;t<=e;t++)r.skipRow(t)}else py(n,t,e.getPositionBefore())}}))}removeRows(e,t){const i=this.editor.model,s=t.rows||1,n=this.getRows(e),o=t.at,r=o+s-1;if(r>n-1)throw new h("tableutils-removerows-row-index-out-of-range",this,{table:e,options:t});i.change((t=>{const{cellsToMove:i,cellsToTrim:s}=function(e,t,i){const s=new Map,n=[];for(const{row:o,column:r,cellHeight:a,cell:l}of new Av(e,{endRow:i})){const e=o+a-1;if(o>=t&&o<=i&&e>i){const e=a-(i-o+1);s.set(r,{cell:l,rowspan:e})}if(o<t&&e>=t){let s;s=e>=i?i-t+1:e-t+1,n.push({cell:l,rowspan:a-s})}}return{cellsToMove:s,cellsToTrim:n}}(e,o,r);i.size&&function(e,t,i,s){const n=[...new Av(e,{includeAllSlots:!0,row:t})],o=e.getChild(t);let r;for(const{column:a,cell:l,isAnchor:c}of n)if(i.has(a)){const{cell:e,rowspan:t}=i.get(a),n=r?s.createPositionAfter(r):s.createPositionAt(o,0);s.move(s.createRangeOn(e),n),wv("rowspan",t,e,s),r=e}else c&&(r=l)}(e,r+1,i,t);for(let n=r;n>=o;n--)t.remove(e.getChild(n));for(const{rowspan:e,cell:n}of s)wv("rowspan",e,n,t);!function(e,t,i,s){const n=e.getAttribute("headingRows")||0;t<n&&wv("headingRows",i<n?n-(i-t+1):t,e,s,0)}(e,o,r,t),ty(e,this)||iy(e,this)}))}removeColumns(e,t){const i=this.editor.model,s=t.at,n=t.columns||1,o=t.at+n-1;i.change((t=>{!function(e,t,i){const s=e.getAttribute("headingColumns")||0;if(s&&t.first<s){const n=Math.min(s-1,t.last)-t.first+1;i.setAttribute("headingColumns",s-n,e)}}(e,{first:s,last:o},t);for(let i=o;i>=s;i--)for(const{cell:s,column:n,cellWidth:o}of[...new Av(e)])n<=i&&o>1&&n+o>i?wv("colspan",o-1,s,t):n===i&&t.remove(s);iy(e,this)||ty(e,this)}))}splitCellVertically(e,t=2){const i=this.editor.model,s=e.parent.parent,n=parseInt(e.getAttribute("rowspan")||1),o=parseInt(e.getAttribute("colspan")||1);i.change((i=>{if(o>1){const{newCellsSpan:s,updatedSpan:r}=fy(o,t);wv("colspan",r,e,i);const a={};s>1&&(a.colspan=s),n>1&&(a.rowspan=n),py(o>t?t-1:o-1,i,i.createPositionAfter(e),a)}if(o<t){const r=t-o,a=[...new Av(s)],{column:l}=a.find((({cell:t})=>t===e)),c=a.filter((({cell:t,cellWidth:i,column:s})=>t!==e&&s===l||s<l&&s+i>l));for(const{cell:e,cellWidth:t}of c)i.setAttribute("colspan",t+r,e);const h={};n>1&&(h.rowspan=n),py(r,i,i.createPositionAfter(e),h);const d=s.getAttribute("headingColumns")||0;d>l&&wv("headingColumns",d+r,s,i)}}))}splitCellHorizontally(e,t=2){const i=this.editor.model,s=e.parent,n=s.parent,o=n.getChildIndex(s),r=parseInt(e.getAttribute("rowspan")||1),a=parseInt(e.getAttribute("colspan")||1);i.change((i=>{if(r>1){const s=[...new Av(n,{startRow:o,endRow:o+r-1,includeAllSlots:!0})],{newCellsSpan:l,updatedSpan:c}=fy(r,t);wv("rowspan",c,e,i);const{column:h}=s.find((({cell:t})=>t===e)),d={};l>1&&(d.rowspan=l),a>1&&(d.colspan=a);for(const e of s){const{column:t,row:s}=e,n=t===h,r=(s+o+c)%l==0;s>=o+c&&n&&r&&py(1,i,e.getPositionBefore(),d)}}if(r<t){const s=t-r,l=[...new Av(n,{startRow:0,endRow:o})];for(const{cell:t,cellHeight:n,row:r}of l)if(t!==e&&r+n>o){const e=n+s;i.setAttribute("rowspan",e,t)}const c={};a>1&&(c.colspan=a),my(i,n,o+1,s,1,c);const h=n.getAttribute("headingRows")||0;h>o&&wv("headingRows",h+s,n,i)}}))}getColumns(e){return[...e.getChild(0).getChildren()].reduce(((e,t)=>e+parseInt(t.getAttribute("colspan")||1)),0)}getRows(e){return Array.from(e.getChildren()).reduce(((e,t)=>t.is("element","tableRow")?e+1:e),0)}}function my(e,t,i,s,n,o={}){for(let r=0;r<s;r++){const s=e.createElement("tableRow");e.insert(s,t,i),py(n,e,e.createPositionAt(s,"end"),o)}}function py(e,t,i,s={}){for(let n=0;n<e;n++)bv(t,i,s)}function fy(e,t){if(e<t)return{newCellsSpan:1,updatedSpan:1};const i=Math.floor(e/t);return{newCellsSpan:i,updatedSpan:e-i*t+i}}class gy extends pt{refresh(){const e=Dv(this.editor.model.document.selection);this.isEnabled=jv(e,this.editor.plugins.get(uy))}execute(){const e=this.editor.model,t=this.editor.plugins.get(uy);e.change((i=>{const s=Dv(e.document.selection),n=s.shift(),{mergeWidth:o,mergeHeight:r}=function(e,t,i){let s=0,n=0;for(const a of t){const{row:e,column:t}=i.getCellLocation(a);s=vy(a,t,s,"colspan"),n=vy(a,e,n,"rowspan")}const{row:o,column:r}=i.getCellLocation(e);return{mergeWidth:s-r,mergeHeight:n-o}}(n,s,t);wv("colspan",o,n,i),wv("rowspan",r,n,i);for(const e of s)wy(e,n,i);sy(n.findAncestor("table"),t),i.setSelection(n,"in")}))}}function wy(e,t,i){by(e)||(by(t)&&i.remove(i.createRangeIn(t)),i.move(i.createRangeIn(e),i.createPositionAt(t,"end"))),i.remove(e)}function by(e){return 1==e.childCount&&e.getChild(0).is("element","paragraph")&&e.getChild(0).isEmpty}function vy(e,t,i,s){const n=parseInt(e.getAttribute(s)||1);return Math.max(i,t+n)}class yy extends pt{refresh(){const e=Bv(this.editor.model.document.selection);this.isEnabled=e.length>0}execute(){const e=this.editor.model,t=Bv(e.document.selection),i=Lv(t),s=t[0].findAncestor("table"),n=[];for(let o=i.first;o<=i.last;o++)for(const t of s.getChild(o).getChildren())n.push(e.createRangeOn(t));e.change((e=>{e.setSelection(n)}))}}class _y extends pt{refresh(){const e=Bv(this.editor.model.document.selection);this.isEnabled=e.length>0}execute(){const e=this.editor.model,t=Bv(e.document.selection),i=t[0],s=t.pop(),n=i.findAncestor("table"),o=this.editor.plugins.get("TableUtils"),r=o.getCellLocation(i),a=o.getCellLocation(s),l=Math.min(r.column,a.column),c=Math.max(r.column,a.column),h=[];for(const d of new Av(n,{startColumn:l,endColumn:c}))h.push(e.createRangeOn(d.cell));e.change((e=>{e.setSelection(h)}))}}function ky(e){e.document.registerPostFixer((t=>function(e,t){const i=t.document.differ.getChanges();let s=!1;const n=new Set;for(const o of i){let t;"table"==o.name&&"insert"==o.type&&(t=o.position.nodeAfter),"tableRow"!=o.name&&"tableCell"!=o.name||(t=o.position.findAncestor("table")),Cy(o)&&(t=o.range.start.findAncestor("table")),t&&!n.has(t)&&(s=Ay(t,e)||s,s=xy(t,e)||s,n.add(t))}return s}(t,e)))}function Ay(e,t){let i=!1;const s=function(e){const t=parseInt(e.getAttribute("headingRows")||0),i=Array.from(e.getChildren()).reduce(((e,t)=>t.is("element","tableRow")?e+1:e),0),s=[];for(const{row:n,cell:o,cellHeight:r}of new Av(e)){if(r<2)continue;const e=n<t?t:i;if(n+r>e){const t=e-n;s.push({cell:o,rowspan:t})}}return s}(e);if(s.length){i=!0;for(const e of s)wv("rowspan",e.rowspan,e.cell,t,1)}return i}function xy(e,t){let i=!1;const s=function(e){const t=new Array(e.childCount).fill(0);for(const{rowIndex:i}of new Av(e,{includeAllSlots:!0}))t[i]++;return t}(e),n=[];for(const[a,l]of s.entries())!l&&e.getChild(a).is("element","tableRow")&&n.push(a);if(n.length){i=!0;for(const i of n.reverse())t.remove(e.getChild(i)),s.splice(i,1)}const o=s.filter(((t,i)=>e.getChild(i).is("element","tableRow"))),r=o[0];if(!o.every((e=>e===r))){const s=o.reduce(((e,t)=>t>e?t:e),0);for(const[n,r]of o.entries()){const o=s-r;if(o){for(let i=0;i<o;i++)bv(t,t.createPositionAt(e.getChild(n),"end"));i=!0}}}return i}function Cy(e){const t="attribute"===e.type,i=e.attributeKey;return t&&("headingRows"===i||"colspan"===i||"rowspan"===i)}function Ey(e){e.document.registerPostFixer((t=>function(e,t){const i=t.document.differ.getChanges();let s=!1;for(const n of i)"insert"==n.type&&"table"==n.name&&(s=Ty(n.position.nodeAfter,e)||s),"insert"==n.type&&"tableRow"==n.name&&(s=Sy(n.position.nodeAfter,e)||s),"insert"==n.type&&"tableCell"==n.name&&(s=Py(n.position.nodeAfter,e)||s),Oy(n)&&(s=Py(n.position.parent,e)||s);return s}(t,e)))}function Ty(e,t){let i=!1;for(const s of e.getChildren())s.is("element","tableRow")&&(i=Sy(s,t)||i);return i}function Sy(e,t){let i=!1;for(const s of e.getChildren())i=Py(s,t)||i;return i}function Py(e,t){if(0==e.childCount)return t.insertElement("paragraph",e),!0;const i=Array.from(e.getChildren()).filter((e=>e.is("$text")));for(const s of i)t.wrap(t.createRangeOn(s),"paragraph");return!!i.length}function Oy(e){return!(!e.position||!e.position.parent.is("element","tableCell"))&&("insert"==e.type&&"$text"==e.name||"remove"==e.type)}function Iy(e,t){e.document.registerPostFixer((()=>function(e,t){const i=new Set;for(const s of e.getChanges()){const e="attribute"==s.type?s.range.start.parent:s.position.parent;e.is("element","tableCell")&&i.add(e)}for(const s of i.values())for(const i of[...s.getChildren()].filter((e=>Ry(e,t))))e.refreshItem(i);return!1}(e.document.differ,t)))}function Ry(e,t){if(!e.is("element","paragraph"))return!1;const i=t.toViewElement(e);return!!i&&Tv(e)!==i.is("element","span")}function zy(e){e.document.registerPostFixer((()=>function(e){const t=e.document.differ,i=new Set;for(const s of t.getChanges()){if("attribute"!=s.type)continue;const e=s.range.start.nodeAfter;e&&e.is("element","table")&&"headingRows"==s.attributeKey&&i.add(e)}if(i.size){for(const e of i.values())t.refreshItem(e);return!0}return!1}(e)))}class My extends ut{static get pluginName(){return"TableEditing"}init(){const e=this.editor,t=e.model,i=t.schema,s=e.conversion;i.register("table",{allowWhere:"$block",allowAttributes:["headingRows","headingColumns"],isObject:!0,isBlock:!0}),i.register("tableRow",{allowIn:"table",isLimit:!0}),i.register("tableCell",{allowIn:"tableRow",allowChildren:"$block",allowAttributes:["colspan","rowspan"],isLimit:!0,isSelectable:!0}),s.for("upcast").add((e=>{e.on("element:figure",((e,t,i)=>{if(!i.consumable.test(t.viewItem,{name:!0,classes:"table"}))return;const s=function(e){for(const t of e.getChildren())if(t.is("element","table"))return t}(t.viewItem);if(!s||!i.consumable.test(s,{name:!0}))return;const n=la(i.convertItem(s,t.modelCursor).modelRange.getItems());n&&(i.convertChildren(t.viewItem,i.writer.createPositionAt(n,"end")),i.updateConversionResult(n,t))}))})),s.for("upcast").add(yv()),s.for("editingDowncast").add(Cv({asWidget:!0})),s.for("dataDowncast").add(Cv()),s.for("upcast").elementToElement({model:"tableRow",view:"tr"}),s.for("upcast").add((e=>{e.on("element:tr",((e,t)=>{t.viewItem.isEmpty&&0==t.modelCursor.index&&e.stop()}),{priority:"high"})})),s.for("editingDowncast").add((e=>e.on("insert:tableRow",((e,t,i)=>{const s=t.item;if(!i.consumable.consume(s,"insert"))return;const n=s.parent,o=function(e){for(const t of e.getChildren())if("table"===t.name)return t}(i.mapper.toViewElement(n)),r=n.getChildIndex(s),a=new Av(n,{row:r}),l={headingRows:n.getAttribute("headingRows")||0,headingColumns:n.getAttribute("headingColumns")||0},c=new Map;for(const h of a){const e=c.get(r)||Ov(o,s,r,l,i);c.set(r,e),i.consumable.consume(h.cell,"insert"),Pv(h,l,i.writer.createPositionAt(e,"end"),i,{asWidget:!0})}})))),s.for("editingDowncast").add((e=>e.on("remove:tableRow",((e,t,i)=>{e.stop();const s=i.writer,n=i.mapper,o=n.toViewPosition(t.position).getLastMatchingPosition((e=>!e.item.is("element","tr"))).nodeAfter,r=o.parent.parent,a=s.createRangeOn(o),l=s.remove(a);for(const c of s.createRangeIn(l).getItems())n.unbindViewElement(c);zv("thead",r,i),zv("tbody",r,i)}),{priority:"higher"}))),s.for("upcast").elementToElement({model:"tableCell",view:"td"}),s.for("upcast").elementToElement({model:"tableCell",view:"th"}),s.for("upcast").add(_v("td")),s.for("upcast").add(_v("th")),s.for("editingDowncast").add((e=>e.on("insert:tableCell",((e,t,i)=>{const s=t.item;if(!i.consumable.consume(s,"insert"))return;const n=s.parent,o=n.parent,r=o.getChildIndex(n),a=new Av(o,{row:r}),l={headingRows:o.getAttribute("headingRows")||0,headingColumns:o.getAttribute("headingColumns")||0};for(const c of a)if(c.cell===s){const e=i.mapper.toViewElement(n);return void Pv(c,l,i.writer.createPositionAt(e,n.getChildIndex(s)),i,{asWidget:!0})}})))),s.for("editingDowncast").elementToElement({model:"paragraph",view:Ev,converterPriority:"high"}),s.for("downcast").attributeToAttribute({model:"colspan",view:"colspan"}),s.for("upcast").attributeToAttribute({model:{key:"colspan",value:Ny("colspan")},view:"colspan"}),s.for("downcast").attributeToAttribute({model:"rowspan",view:"rowspan"}),s.for("upcast").attributeToAttribute({model:{key:"rowspan",value:Ny("rowspan")},view:"rowspan"}),s.for("editingDowncast").add((e=>e.on("attribute:headingColumns:table",((e,t,i)=>{const s=t.item;if(!i.consumable.consume(t.item,e.name))return;const n={headingRows:s.getAttribute("headingRows")||0,headingColumns:s.getAttribute("headingColumns")||0},o=t.attributeOldValue,r=t.attributeNewValue,a=(o>r?o:r)-1;for(const l of new Av(s,{endColumn:a}))Sv(l,n,i)})))),e.data.mapper.on("modelToViewPosition",((e,t)=>{const i=t.modelPosition.parent,s=t.modelPosition.nodeBefore;if(!i.is("element","tableCell"))return;if(!s||!s.is("element","paragraph"))return;const n=t.mapper.toViewElement(s),o=t.mapper.toViewElement(i);n===o&&(t.viewPosition=t.mapper.findPositionIn(o,s.maxOffset))})),e.config.define("table.defaultHeadings.rows",0),e.config.define("table.defaultHeadings.columns",0),e.commands.add("insertTable",new Nv(e)),e.commands.add("insertTableRowAbove",new Wv(e,{order:"above"})),e.commands.add("insertTableRowBelow",new Wv(e,{order:"below"})),e.commands.add("insertTableColumnLeft",new Zv(e,{order:"left"})),e.commands.add("insertTableColumnRight",new Zv(e,{order:"right"})),e.commands.add("removeTableRow",new ly(e)),e.commands.add("removeTableColumn",new cy(e)),e.commands.add("splitTableCellVertically",new Gv(e,{direction:"vertically"})),e.commands.add("splitTableCellHorizontally",new Gv(e,{direction:"horizontally"})),e.commands.add("mergeTableCells",new gy(e)),e.commands.add("mergeTableCellRight",new ry(e,{direction:"right"})),e.commands.add("mergeTableCellLeft",new ry(e,{direction:"left"})),e.commands.add("mergeTableCellDown",new ry(e,{direction:"down"})),e.commands.add("mergeTableCellUp",new ry(e,{direction:"up"})),e.commands.add("setTableColumnHeader",new dy(e)),e.commands.add("setTableRowHeader",new hy(e)),e.commands.add("selectTableRow",new yy(e)),e.commands.add("selectTableColumn",new _y(e)),zy(t),ky(t),Iy(t,e.editing.mapper),Ey(t)}static get requires(){return[uy]}}function Ny(e){return t=>{const i=parseInt(t.getAttribute(e));return Number.isNaN(i)||i<=0?null:i}}class Dy extends ad{constructor(e){super(e);const t=this.bindTemplate;this.items=this._createGridCollection(),this.set("rows",0),this.set("columns",0),this.bind("label").to(this,"columns",this,"rows",((e,t)=>`${t} \xd7 ${e}`)),this.setTemplate({tag:"div",attributes:{class:["ck"]},children:[{tag:"div",attributes:{class:["ck-insert-table-dropdown__grid"]},on:{"mouseover@.ck-insert-table-dropdown-grid-box":t.to("boxover")},children:this.items},{tag:"div",attributes:{class:["ck-insert-table-dropdown__label"]},children:[{text:t.to("label")}]}],on:{mousedown:t.to((e=>{e.preventDefault()})),click:t.to((()=>{this.fire("execute")}))}}),this.on("boxover",((e,t)=>{const{row:i,column:s}=t.target.dataset;this.set({rows:parseInt(i),columns:parseInt(s)})})),this.on("change:columns",(()=>{this._highlightGridBoxes()})),this.on("change:rows",(()=>{this._highlightGridBoxes()}))}focus(){}focusLast(){}_highlightGridBoxes(){const e=this.rows,t=this.columns;this.items.map(((i,s)=>{const n=Math.floor(s/10)<e&&s%10<t;i.set("isOn",n)}))}_createGridCollection(){const e=[];for(let t=0;t<100;t++){const i=Math.floor(t/10),s=t%10;e.push(new Vy(this.locale,i+1,s+1))}return this.createCollection(e)}}class Vy extends ad{constructor(e,t,i){super(e);const s=this.bindTemplate;this.set("isOn",!1),this.setTemplate({tag:"div",attributes:{class:["ck-insert-table-dropdown-grid-box",s.if("isOn","ck-on")],"data-row":t,"data-column":i}})}}class By extends ut{static get pluginName(){return"TableUI"}init(){const e=this.editor,t=this.editor.t,i="ltr"===e.locale.contentLanguageDirection;e.ui.componentFactory.add("insertTable",(i=>{const s=e.commands.get("insertTable"),n=su(i);let o;return n.bind("isEnabled").to(s),n.buttonView.set({icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 6v3h4V6H3zm0 4v3h4v-3H3zm0 4v3h4v-3H3zm5 3h4v-3H8v3zm5 0h4v-3h-4v3zm4-4v-3h-4v3h4zm0-4V6h-4v3h4zm1.5 8a1.5 1.5 0 0 1-1.5 1.5H3A1.5 1.5 0 0 1 1.5 17V4c.222-.863 1.068-1.5 2-1.5h13c.932 0 1.778.637 2 1.5v13zM12 13v-3H8v3h4zm0-4V6H8v3h4z"/></svg>',label:t("Insert table"),tooltip:!0}),n.on("change:isOpen",(()=>{o||(o=new Dy(i),n.panelView.children.add(o),o.delegate("execute").to(n),n.buttonView.on("open",(()=>{o.rows=0,o.columns=0})),n.on("execute",(()=>{e.execute("insertTable",{rows:o.rows,columns:o.columns}),e.editing.view.focus()})))})),n})),e.ui.componentFactory.add("tableColumn",(e=>{const s=[{type:"switchbutton",model:{commandName:"setTableColumnHeader",label:t("Header column"),bindIsOn:!0}},{type:"separator"},{type:"button",model:{commandName:i?"insertTableColumnLeft":"insertTableColumnRight",label:t("Insert column left")}},{type:"button",model:{commandName:i?"insertTableColumnRight":"insertTableColumnLeft",label:t("Insert column right")}},{type:"button",model:{commandName:"removeTableColumn",label:t("Delete column")}},{type:"button",model:{commandName:"selectTableColumn",label:t("Select column")}}];return this._prepareDropdown(t("Column"),'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M18 7v1H2V7h16zm0 5v1H2v-1h16z" opacity=".6"/><path d="M14 1v18a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V1a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1zm-2 1H8v4h4V2zm0 6H8v4h4V8zm0 6H8v4h4v-4z"/></svg>',s,e)})),e.ui.componentFactory.add("tableRow",(e=>{const i=[{type:"switchbutton",model:{commandName:"setTableRowHeader",label:t("Header row"),bindIsOn:!0}},{type:"separator"},{type:"button",model:{commandName:"insertTableRowAbove",label:t("Insert row above")}},{type:"button",model:{commandName:"insertTableRowBelow",label:t("Insert row below")}},{type:"button",model:{commandName:"removeTableRow",label:t("Delete row")}},{type:"button",model:{commandName:"selectTableRow",label:t("Select row")}}];return this._prepareDropdown(t("Row"),'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M7 2h1v16H7V2zm5 0h1v16h-1V2z" opacity=".6"/><path d="M1 6h18a1 1 0 0 1 1 1v6a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1zm1 2v4h4V8H2zm6 0v4h4V8H8zm6 0v4h4V8h-4z"/></svg>',i,e)})),e.ui.componentFactory.add("mergeTableCells",(e=>{const s=[{type:"button",model:{commandName:"mergeTableCellUp",label:t("Merge cell up")}},{type:"button",model:{commandName:i?"mergeTableCellRight":"mergeTableCellLeft",label:t("Merge cell right")}},{type:"button",model:{commandName:"mergeTableCellDown",label:t("Merge cell down")}},{type:"button",model:{commandName:i?"mergeTableCellLeft":"mergeTableCellRight",label:t("Merge cell left")}},{type:"separator"},{type:"button",model:{commandName:"splitTableCellVertically",label:t("Split cell vertically")}},{type:"button",model:{commandName:"splitTableCellHorizontally",label:t("Split cell horizontally")}}];return this._prepareMergeSplitButtonDropdown(t("Merge cells"),'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M7 2h1v16H7V2zm5 0h1v7h-1V2zm6 5v1H2V7h16zM8 12v1H2v-1h6z" opacity=".6"/><path d="M7 7h12a1 1 0 0 1 1 1v11a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1zm1 2v9h10V9H8z"/></svg>',s,e)}))}_prepareDropdown(e,t,i,s){const n=this.editor,o=su(s),r=this._fillDropdownWithListOptions(o,i);return o.buttonView.set({label:e,icon:t,tooltip:!0}),o.bind("isEnabled").toMany(r,"isEnabled",((...e)=>e.some((e=>e)))),this.listenTo(o,"execute",(e=>{n.execute(e.source.commandName),n.editing.view.focus()})),o}_prepareMergeSplitButtonDropdown(e,t,i,s){const n=this.editor,o=su(s,jd),r="mergeTableCells",a=n.commands.get(r),l=this._fillDropdownWithListOptions(o,i);return o.buttonView.set({label:e,icon:t,tooltip:!0,isEnabled:!0}),o.bind("isEnabled").toMany([a,...l],"isEnabled",((...e)=>e.some((e=>e)))),this.listenTo(o.buttonView,"execute",(()=>{n.execute(r),n.editing.view.focus()})),this.listenTo(o,"execute",(e=>{n.execute(e.source.commandName),n.editing.view.focus()})),o}_fillDropdownWithListOptions(e,t){const i=this.editor,s=[],n=new Es;for(const o of t)Ly(o,i,s,n);return ou(e,n,i.ui.componentFactory),s}}function Ly(e,t,i,s){const n=e.model=new pu(e.model),{commandName:o,bindIsOn:r}=e.model;if("button"===e.type||"switchbutton"===e.type){const e=t.commands.get(o);i.push(e),n.set({commandName:o}),n.bind("isEnabled").to(e),r&&n.bind("isOn").to(e,"value")}n.set({withText:!0}),s.add(e)}class Fy extends ut{static get pluginName(){return"TableSelection"}static get requires(){return[uy]}init(){const e=this.editor.model;this.listenTo(e,"deleteContent",((e,t)=>this._handleDeleteContent(e,t)),{priority:"high"}),this._defineSelectionConverter(),this._enablePluginDisabling()}getSelectedTableCells(){const e=Dv(this.editor.model.document.selection);return 0==e.length?null:e}getSelectionAsFragment(){const e=this.getSelectedTableCells();return e?this.editor.model.change((t=>{const i=t.createDocumentFragment(),s=this.editor.plugins.get("TableUtils"),{first:n,last:o}=Fv(e),{first:r,last:a}=Lv(e),l=e[0].findAncestor("table");let c=a,h=o;if(jv(e,s)){const e={firstColumn:n,lastColumn:o,firstRow:r,lastRow:a};c=ny(l,e),h=oy(l,e)}const d=Kv(l,{startRow:r,startColumn:n,endRow:c,endColumn:h},t);return t.insert(d,i,0),i})):null}setCellSelection(e,t){const i=this._getCellsToSelect(e,t);this.editor.model.change((e=>{e.setSelection(i.cells.map((t=>e.createRangeOn(t))),{backward:i.backward})}))}getFocusCell(){const e=[...this.editor.model.document.selection.getRanges()].pop().getContainedElement();return e&&e.is("element","tableCell")?e:null}getAnchorCell(){const e=la(this.editor.model.document.selection.getRanges()).getContainedElement();return e&&e.is("element","tableCell")?e:null}_defineSelectionConverter(){const e=this.editor,t=new Set;e.conversion.for("editingDowncast").add((e=>e.on("selection",((e,i,s)=>{const n=s.writer;!function(e){for(const i of t)e.removeClass("ck-editor__editable_selected",i);t.clear()}(n);const o=this.getSelectedTableCells();if(!o)return;for(const a of o){const e=s.mapper.toViewElement(a);n.addClass("ck-editor__editable_selected",e),t.add(e)}const r=s.mapper.toViewElement(o[o.length-1]);n.setSelection(r,0)}),{priority:"lowest"})))}_enablePluginDisabling(){const e=this.editor;this.on("change:isEnabled",(()=>{if(!this.isEnabled){const t=this.getSelectedTableCells();if(!t)return;e.model.change((i=>{const s=i.createPositionAt(t[0],0),n=e.model.schema.getNearestSelectionRange(s);i.setSelection(n)}))}}))}_handleDeleteContent(e,t){const[i,s]=t,n=this.editor.model,o=!s||"backward"==s.direction,r=Dv(i);r.length&&(e.stop(),n.change((e=>{const t=r[o?r.length-1:0];n.change((e=>{for(const t of r)n.deleteContent(e.createSelection(t,"in"))}));const s=n.schema.getNearestSelectionRange(e.createPositionAt(t,0));i.is("documentSelection")?e.setSelection(s):i.setTo(s)})))}_getCellsToSelect(e,t){const i=this.editor.plugins.get("TableUtils"),s=i.getCellLocation(e),n=i.getCellLocation(t),o=Math.min(s.row,n.row),r=Math.max(s.row,n.row),a=Math.min(s.column,n.column),l=Math.max(s.column,n.column),c=new Array(r-o+1).fill(null).map((()=>[])),h={startRow:o,endRow:r,startColumn:a,endColumn:l};for(const{row:m,cell:p}of new Av(e.findAncestor("table"),h))c[m-o].push(p);const d=n.row<s.row,u=n.column<s.column;return d&&c.reverse(),u&&c.forEach((e=>e.reverse())),{cells:c.flat(),backward:d||u}}}class jy extends ut{static get pluginName(){return"TableClipboard"}static get requires(){return[Fy,uy]}init(){const e=this.editor,t=e.editing.view.document;this.listenTo(t,"copy",((e,t)=>this._onCopyCut(e,t))),this.listenTo(t,"cut",((e,t)=>this._onCopyCut(e,t))),this.listenTo(e.model,"insertContent",((e,t)=>this._onInsertContent(e,...t)),{priority:"high"}),this.decorate("_replaceTableSlotCell")}_onCopyCut(e,t){const i=this.editor.plugins.get(Fy);if(!i.getSelectedTableCells())return;if("cut"==e.name&&this.editor.isReadOnly)return;t.preventDefault(),e.stop();const s=this.editor.data,n=this.editor.editing.view.document,o=s.toView(i.getSelectionAsFragment());n.fire("clipboardOutput",{dataTransfer:t.dataTransfer,content:o,method:e.name})}_onInsertContent(e,t,i){if(i&&!i.is("documentSelection"))return;const s=this.editor.model,n=this.editor.plugins.get(uy);let o=function(e,t){if(!e.is("documentFragment")&&!e.is("element"))return null;if(e.is("element","table"))return e;if(1==e.childCount&&e.getChild(0).is("element","table"))return e.getChild(0);const i=t.createRangeIn(e);for(const s of i.getItems())if(s.is("element","table")){const e=t.createRange(i.start,t.createPositionBefore(s));if(t.hasContent(e,{ignoreWhitespaces:!0}))return null;const n=t.createRange(t.createPositionAfter(s),i.end);return t.hasContent(n,{ignoreWhitespaces:!0})?null:s}return null}(t,s);if(!o)return;const r=Bv(s.document.selection);r.length?(e.stop(),s.change((e=>{const t={width:n.getColumns(o),height:n.getRows(o)},i=function(e,t,i,s){const n=e[0].findAncestor("table"),o=Fv(e),r=Lv(e),a={firstColumn:o.first,lastColumn:o.last,firstRow:r.first,lastRow:r.last},l=1===e.length;return l&&(a.lastRow+=t.height-1,a.lastColumn+=t.width-1,function(e,t,i,s){const n=s.getColumns(e),o=s.getRows(e);i>n&&s.insertColumns(e,{at:n,columns:i-n}),t>o&&s.insertRows(e,{at:o,rows:t-o})}(n,a.lastRow+1,a.lastColumn+1,s)),l||!jv(e,s)?function(e,t,i){const{firstRow:s,lastRow:n,firstColumn:o,lastColumn:r}=t,a={first:s,last:n},l={first:o,last:r};Hy(e,o,a,i),Hy(e,r+1,a,i),qy(e,s,l,i),qy(e,n+1,l,i,s)}(n,a,i):(a.lastRow=ny(n,a),a.lastColumn=oy(n,a)),a}(r,t,e,n),s=i.lastRow-i.firstRow+1,a=i.lastColumn-i.firstColumn+1,l={startRow:0,startColumn:0,endRow:Math.min(s,t.height)-1,endColumn:Math.min(a,t.width)-1};o=Kv(o,l,e);const c=r[0].findAncestor("table"),h=this._replaceSelectedCellsWithPasted(o,t,c,i,e);if(this.editor.plugins.get("TableSelection").isEnabled){const t=qv(h.map((t=>e.createRangeOn(t))));e.setSelection(t)}else e.setSelection(h[0],0)}))):sy(o,n)}_replaceSelectedCellsWithPasted(e,t,i,s,n){const{width:o,height:r}=t,a=function(e,t,i){const s=new Array(i).fill(null).map((()=>new Array(t).fill(null)));for(const{column:n,row:o,cell:r}of new Av(e))s[o][n]=r;return s}(e,o,r),l=[...new Av(i,{startRow:s.firstRow,endRow:s.lastRow,startColumn:s.firstColumn,endColumn:s.lastColumn,includeAllSlots:!0})],c=[];let h;for(const f of l){const{row:e,column:t}=f;t===s.firstColumn&&(h=f.getPositionBefore());const i=e-s.firstRow,l=t-s.firstColumn,d=a[i%r][l%o],u=d?n.cloneElement(d):null,m=this._replaceTableSlotCell(f,u,h,n);m&&(ey(m,e,t,s.lastRow,s.lastColumn,n),c.push(m),h=n.createPositionAfter(m))}const d=parseInt(i.getAttribute("headingRows")||0),u=parseInt(i.getAttribute("headingColumns")||0),m=s.firstRow<d&&d<=s.lastRow,p=s.firstColumn<u&&u<=s.lastColumn;if(m){const e=qy(i,d,{first:s.firstColumn,last:s.lastColumn},n,s.firstRow);c.push(...e)}if(p){const e=Hy(i,u,{first:s.firstRow,last:s.lastRow},n);c.push(...e)}return c}_replaceTableSlotCell(e,t,i,s){const{cell:n,isAnchor:o}=e;return o&&s.remove(n),t?(s.insert(t,i),t):null}}function qy(e,t,i,s,n=0){if(!(t<1))return Jv(e,t,n).filter((({column:e,cellWidth:t})=>$y(e,t,i))).map((({cell:e})=>Yv(e,t,s)))}function Hy(e,t,i,s){if(!(t<1))return Qv(e,t).filter((({row:e,cellHeight:t})=>$y(e,t,i))).map((({cell:e,column:i})=>Xv(e,i,t,s)))}function $y(e,t,i){const s=e+t-1,{first:n,last:o}=i;return e>=n&&e<=o||e<n&&s>=n}class Uy extends ut{static get pluginName(){return"TableKeyboard"}static get requires(){return[Fy]}init(){const e=this.editor.editing.view.document;this.editor.keystrokes.set("Tab",((...e)=>this._handleTabOnSelectedTable(...e)),{priority:"low"}),this.editor.keystrokes.set("Tab",this._getTabHandler(!0),{priority:"low"}),this.editor.keystrokes.set("Shift+Tab",this._getTabHandler(!1),{priority:"low"}),this.listenTo(e,"arrowKey",((...e)=>this._onArrowKey(...e)),{context:"table"})}_handleTabOnSelectedTable(e,t){const i=this.editor,s=i.model.document.selection.getSelectedElement();s&&s.is("element","table")&&(t(),i.model.change((e=>{e.setSelection(e.createRangeIn(s.getChild(0).getChild(0)))})))}_getTabHandler(e){const t=this.editor;return(i,s)=>{let n=Vv(t.model.document.selection)[0];if(n||(n=this.editor.plugins.get("TableSelection").getFocusCell()),!n)return;s();const o=n.parent,r=o.parent,a=r.getChildIndex(o),l=o.getChildIndex(n),c=0===l;if(!e&&c&&0===a)return void t.model.change((e=>{e.setSelection(e.createRangeOn(r))}));const h=this.editor.plugins.get("TableUtils"),d=l===o.childCount-1,u=a===h.getRows(r)-1;if(e&&u&&d&&(t.execute("insertTableRowBelow"),a===h.getRows(r)-1))return void t.model.change((e=>{e.setSelection(e.createRangeOn(r))}));let m;if(e&&d){const e=r.getChild(a+1);m=e.getChild(0)}else if(!e&&c){const e=r.getChild(a-1);m=e.getChild(e.childCount-1)}else m=o.getChild(l+(e?1:-1));t.model.change((e=>{e.setSelection(e.createRangeIn(m))}))}}_onArrowKey(e,t){const i=this.editor,s=ho(t.keyCode,i.locale.contentLanguageDirection);this._handleArrowKeys(s,t.shiftKey)&&(t.preventDefault(),t.stopPropagation(),e.stop())}_handleArrowKeys(e,t){const i=this.editor.model.document.selection,s=["right","down"].includes(e),n=Dv(i);if(n.length){let i;return i=t?this.editor.plugins.get("TableSelection").getFocusCell():s?n[n.length-1]:n[0],this._navigateFromCellInDirection(i,e,t),!0}const o=i.focus.findAncestor("tableCell");return!!o&&!(t&&!i.isCollapsed&&i.isBackward==s)&&!!this._isSelectionAtCellEdge(i,o,s)&&(this._navigateFromCellInDirection(o,e,t),!0)}_isSelectionAtCellEdge(e,t,i){const s=this.editor.model,n=this.editor.model.schema,o=i?e.getLastPosition():e.getFirstPosition();if(!n.getLimitElement(o).is("element","tableCell"))return s.createPositionAt(t,i?"end":0).isTouching(o);const r=s.createSelection(o);return s.modifySelection(r,{direction:i?"forward":"backward"}),o.isEqual(r.focus)}_navigateFromCellInDirection(e,t,i=!1){const s=this.editor.model,n=e.findAncestor("table"),o=[...new Av(n,{includeAllSlots:!0})],{row:r,column:a}=o[o.length-1],l=o.find((({cell:t})=>t==e));let{row:c,column:h}=l;switch(t){case"left":h--;break;case"up":c--;break;case"right":h+=l.cellWidth;break;case"down":c+=l.cellHeight}if(c<0||c>r||h<0&&c<=0||h>a&&c>=r)return void s.change((e=>{e.setSelection(e.createRangeOn(n))}));h<0?(h=i?0:a,c--):h>a&&(h=i?a:0,c++);const d=o.find((e=>e.row==c&&e.column==h)).cell,u=["right","down"].includes(t),m=this.editor.plugins.get("TableSelection");if(i&&m.isEnabled){const t=m.getAnchorCell()||e;m.setCellSelection(t,d)}else{const e=s.createPositionAt(d,u?0:"end");s.change((t=>{t.setSelection(e)}))}}}class Wy extends zr{constructor(e){super(e),this.domEventType=["mousemove","mouseleave"]}onDomEvent(e){this.fire(e.type,e)}}class Zy extends ut{static get pluginName(){return"TableMouse"}static get requires(){return[Fy]}init(){this.editor.editing.view.addObserver(Wy),this._enableShiftClickSelection(),this._enableMouseDragSelection()}_enableShiftClickSelection(){const e=this.editor;let t=!1;const i=e.plugins.get(Fy);this.listenTo(e.editing.view.document,"mousedown",((s,n)=>{if(!this.isEnabled||!i.isEnabled)return;if(!n.domEvent.shiftKey)return;const o=i.getAnchorCell()||Vv(e.model.document.selection)[0];if(!o)return;const r=this._getModelTableCellFromDomEvent(n);r&&Gy(o,r)&&(t=!0,i.setCellSelection(o,r),n.preventDefault())})),this.listenTo(e.editing.view.document,"mouseup",(()=>{t=!1})),this.listenTo(e.editing.view.document,"selectionChange",(e=>{t&&e.stop()}),{priority:"highest"})}_enableMouseDragSelection(){const e=this.editor;let t,i,s=!1,n=!1;const o=e.plugins.get(Fy);this.listenTo(e.editing.view.document,"mousedown",((e,i)=>{this.isEnabled&&o.isEnabled&&(i.domEvent.shiftKey||i.domEvent.ctrlKey||i.domEvent.altKey||(t=this._getModelTableCellFromDomEvent(i)))})),this.listenTo(e.editing.view.document,"mousemove",((e,r)=>{if(!r.domEvent.buttons)return;if(!t)return;const a=this._getModelTableCellFromDomEvent(r);a&&Gy(t,a)&&(i=a,s||i==t||(s=!0)),s&&(n=!0,o.setCellSelection(t,i),r.preventDefault())})),this.listenTo(e.editing.view.document,"mouseup",(()=>{s=!1,n=!1,t=null,i=null})),this.listenTo(e.editing.view.document,"selectionChange",(e=>{n&&e.stop()}),{priority:"highest"})}_getModelTableCellFromDomEvent(e){const t=e.target,i=this.editor.editing.view.createPositionAt(t,0);return this.editor.editing.mapper.toModelPosition(i).parent.findAncestor("tableCell",{includeSelf:!0})}}function Gy(e,t){return e.parent.parent==t.parent.parent}function Ky(e){const t=e.getSelectedElement();return t&&Yy(t)?t:null}function Jy(e){let t=e.getFirstPosition().parent;for(;t;){if(t.is("element")&&Yy(t))return t;t=t.parent}return null}function Yy(e){return!!e.getCustomProperty("table")&&Xm(e)}a(1462);var Qy=a(6482),Xy=a.n(Qy);function e_({url:e,iframelyApiKey:t}){const i=`\n    <div class="ck-media__wrapper" data-oembed-url="${e}">\n      <div class="iframely-embed">\n        <div class="iframely-responsive">\n          <iframe src="${function({url:e,iframelyApiKey:t}){return`//cdn.iframe.ly/api/iframe?app=1&api_key=${t}&url=${encodeURIComponent(e)}`}({url:e,iframelyApiKey:t})}"></iframe>\n        </div>\n      </div>\n    </div>`;return Xy()(i,{allowedTags:Xy().defaults.allowedTags.concat(["iframe","div"]),allowedAttributes:{iframe:["src"],div:["class","data-oembed-url"]},allowedIframeHostnames:["cdn.iframe.ly"],allowIframeRelativeUrls:!1,allowedClasses:{"*":["iframely-embed","iframely-responsive","ck-media__wrapper"]}})}class t_{constructor(e,{policyUrl:t,hopinAuthorizationToken:i,maxFileSize:s,skipContentType:n,onSuccess:o}){this.loader=e,this.policyUrl=t,this.hopinAuthorizationToken=i,this.maxFileSize=s,this.shouldAppendContentType=!n,this.onSuccess=o}upload(){return this.getCredentials().then(this.uploadImage.bind(this))}abort(){this.xhr&&this.xhr.abort()}getCredentials(){return this.loader.file.then((e=>new Promise(((t,i)=>{if(!e.name)return i("Image cannot be uploaded: file name is missing.");if(e.size>this.maxFileSize)return i("Image cannot be uploaded: file is too big.");if(!e.type.startsWith("image/"))return i("Image cannot be uploaded: file is not an image.");const s=`${this.policyUrl}?filename=${encodeURIComponent(e.name)}`,n={headers:{Authorization:`Bearer: ${this.hopinAuthorizationToken}`}};fetch(s,n).then((s=>{if(200!==s.status)return i("Image cannot be uploaded. Please try again.");s.json().then((i=>{t({s3creds:i,file:e})}))}))}))))}uploadImage({s3creds:e,file:t}){return new Promise(((i,s)=>{var n=new FormData;Object.keys(e.params).forEach((t=>n.append(t,e.params[t]))),this.shouldAppendContentType&&n.append("Content-Type",t.type),n.append("file",t);var o=new XMLHttpRequest;o.withCredentials=!1,o.responseType="document",o.addEventListener("error",(()=>s("Image cannot be uploaded."))),o.addEventListener("abort",(()=>s("Image upload cancelled."))),o.addEventListener("load",(()=>{var t;const n=o.response;return n?n.querySelector("Error")?s(n.querySelector("Message").textContent):(null===(t=this.onSuccess)||void 0===t||t.call(this),void i({default:e.image_url})):s("No Response")})),o.upload&&o.upload.addEventListener("progress",(e=>{e.lengthComputable&&(this.loader.uploadTotal=e.total,this.loader.uploaded=e.loaded)})),o.open("POST",e.endpoint_url,!0),o.send(n)}))}}class i_ extends jm{}i_.builtinPlugins=[class extends ut{static get requires(){return[Sp,Ku,Mp,Xu,mm,Wp]}static get pluginName(){return"Essentials"}},class extends ut{static get requires(){return[tw]}static get pluginName(){return"S3Upload"}init(){var e;const t=this.editor.config.get("s3Upload.policyUrl"),i=this.editor.config.get("s3Upload.maxFileSize"),s=this.editor.config.get("s3Upload.skipContentType"),n=this.editor.config.get("s3Upload.hopinAuthorizationToken"),o=null===(e=this.editor.config.get("s3Upload"))||void 0===e?void 0:e.onSuccess;t?this.editor.plugins.get("FileRepository").createUploadAdapter=e=>new t_(e,{policyUrl:t,hopinAuthorizationToken:n,maxFileSize:i,skipContentType:s,onSuccess:o}):console.warn("s3Upload.policyUrl is not configured")}},class extends ut{static get pluginName(){return"Autoformat"}afterInit(){this._addListAutoformats(),this._addBasicStylesAutoformats(),this._addHeadingAutoformats(),this._addBlockQuoteAutoformats(),this._addCodeBlockAutoformats(),this._addHorizontalLineAutoformats()}_addListAutoformats(){const e=this.editor.commands;e.get("bulletedList")&&Wh(this.editor,this,/^[*-]\s$/,"bulletedList"),e.get("numberedList")&&Wh(this.editor,this,/^1[.|)]\s$/,"numberedList"),e.get("todoList")&&Wh(this.editor,this,/^\[\s?\]\s$/,"todoList"),e.get("checkTodoList")&&Wh(this.editor,this,/^\[\s?x\s?\]\s$/,(()=>{this.editor.execute("todoList"),this.editor.execute("checkTodoList")}))}_addBasicStylesAutoformats(){const e=this.editor.commands;if(e.get("bold")){const e=Kh(this.editor,"bold");Zh(this.editor,this,/(?:^|\s)(\*\*)([^*]+)(\*\*)$/g,e),Zh(this.editor,this,/(?:^|\s)(__)([^_]+)(__)$/g,e)}if(e.get("italic")){const e=Kh(this.editor,"italic");Zh(this.editor,this,/(?:^|\s)(\*)([^*_]+)(\*)$/g,e),Zh(this.editor,this,/(?:^|\s)(_)([^_]+)(_)$/g,e)}if(e.get("code")){const e=Kh(this.editor,"code");Zh(this.editor,this,/(`)([^`]+)(`)$/g,e)}if(e.get("strikethrough")){const e=Kh(this.editor,"strikethrough");Zh(this.editor,this,/(~~)([^~]+)(~~)$/g,e)}}_addHeadingAutoformats(){const e=this.editor.commands.get("heading");e&&e.modelElements.filter((e=>e.match(/^heading[1-6]$/))).forEach((t=>{const i=t[7],s=new RegExp(`^(#{${i}})\\s$`);Wh(this.editor,this,s,(()=>{if(!e.isEnabled||e.value===t)return!1;this.editor.execute("heading",{value:t})}))}))}_addBlockQuoteAutoformats(){this.editor.commands.get("blockQuote")&&Wh(this.editor,this,/^>\s$/,"blockQuote")}_addCodeBlockAutoformats(){const e=this.editor,t=e.model.document.selection;e.commands.get("codeBlock")&&Wh(e,this,/^```$/,(()=>{if(t.getFirstPosition().parent.is("element","listItem"))return!1;this.editor.execute("codeBlock",{usePreviousLanguageChoice:!0})}))}_addHorizontalLineAutoformats(){this.editor.commands.get("horizontalLine")&&Wh(this.editor,this,/^---$/,"horizontalLine")}},class extends ut{static get requires(){return[id,Tu]}static get pluginName(){return"Alignment"}},class extends ut{static get requires(){return[Ou,Ru]}static get pluginName(){return"Bold"}},class extends ut{static get requires(){return[Mu,Du]}static get pluginName(){return"Italic"}},class extends ut{static get requires(){return[qu,$u]}static get pluginName(){return"Underline"}},class extends ut{static get requires(){return[Bu,Fu]}static get pluginName(){return"Strikethrough"}},class extends ut{static get requires(){return[Vm,Bm]}static get pluginName(){return"BlockQuote"}},class extends ut{static get requires(){return[Nf,Df]}static get pluginName(){return"Heading"}},class extends ut{static get requires(){return[fg,wg]}static get pluginName(){return"Image"}},class extends ut{static get requires(){return[_g,Ag]}static get pluginName(){return"ImageCaption"}},class extends ut{static get requires(){return[Kg,Jg]}static get pluginName(){return"ImageStyle"}},class extends ut{static get requires(){return[Vf,Qf]}static get pluginName(){return"ImageToolbar"}afterInit(){const e=this.editor,t=e.t,i=e.plugins.get(Vf),s=e.plugins.get("ImageUtils");var n;i.register("image",{ariaLabel:t("Image toolbar"),items:(n=e.config.get("image.toolbar")||[],n.map((e=>E(e)?e.name:e))),getRelatedElement:e=>s.getClosestSelectedImageWidget(e)})}},class extends ut{static get pluginName(){return"ImageUpload"}static get requires(){return[vw,lw,cw]}},class extends ut{static get requires(){return[Cg,Ig,Tg]}static get pluginName(){return"ImageResize"}},class extends ut{static get pluginName(){return"Indent"}static get requires(){return[_w,xw]}},class extends ut{static get requires(){return[hb,wb,Xw]}static get pluginName(){return"Link"}},Xw,class extends ut{static get requires(){return[Hb,Ub]}static get pluginName(){return"List"}},class extends ut{static get requires(){return[Xb,sv,tv,vp]}static get pluginName(){return"MediaEmbed"}},If,class extends ut{static get pluginName(){return"PasteFromOffice"}static get requires(){return[Wm]}init(){const e=this.editor,t=e.editing.view.document,i=[];i.push(new pv(t)),i.push(new cv(t)),e.plugins.get("ClipboardPipeline").on("inputTransformation",((e,s)=>{if(s._isTransformedWithPasteFromOffice)return;const n=s.dataTransfer.getData("text/html"),o=i.find((e=>e.isActive(n)));o&&(s._parsedData=gv(n,t.stylesProcessor),o.execute(s),s._isTransformedWithPasteFromOffice=!0)}),{priority:"high"})}},class extends ut{static get requires(){return[My,By,Fy,Zy,Uy,jy,vp]}static get pluginName(){return"Table"}},class extends ut{static get requires(){return[Vf]}static get pluginName(){return"TableToolbar"}afterInit(){const e=this.editor,t=e.t,i=e.plugins.get(Vf),s=e.config.get("table.contentToolbar"),n=e.config.get("table.tableToolbar");s&&i.register("tableContent",{ariaLabel:t("Table toolbar"),items:s,getRelatedElement:Jy}),n&&i.register("table",{ariaLabel:t("Table toolbar"),items:n,getRelatedElement:Ky})}},class extends ut{static get pluginName(){return"TextTransformation"}constructor(e){super(e),e.config.define("typing",{transformations:{include:Em}})}init(){const e=this.editor.model.document.selection;e.on("change:range",(()=>{this.isEnabled=!e.anchor.parent.is("element","codeBlock")})),this._enableTransformationWatchers()}_enableTransformationWatchers(){const e=this.editor,t=e.model,i=e.plugins.get("Input"),s=function(e){const t=e.extra||[],i=e.remove||[],s=e=>!i.includes(e);return function(e){const t=new Set;for(const i of e)if(Cm[i])for(const e of Cm[i])t.add(e);else t.add(i);return Array.from(t)}(e.include.concat(t).filter(s)).filter(s).map((e=>xm[e]||e)).map((e=>({from:Tm(e.from),to:Sm(e.to)})))}(e.config.get("typing.transformations")),n=new fm(e.model,(e=>{for(const t of s)if(t.from.test(e))return{normalizedTransformation:t}}));n.on("matched:data",((e,s)=>{if(!i.isInput(s.batch))return;const{from:n,to:o}=s.normalizedTransformation,r=n.exec(s.text),a=o(r.slice(1)),l=s.range;let c=r.index;t.enqueueChange((e=>{for(let i=1;i<r.length;i++){const s=r[i],n=a[i-1];if(null==n){c+=s.length;continue}const o=l.start.getShiftedBy(c),h=t.createRange(o,o.getShiftedBy(s.length)),d=Pm(o);t.insertContent(e.createText(n,d),h),c+=n.length}}))})),n.bind("isEnabled").to(this)}},class extends ut{static get requires(){return[hf,bf,Af,Tf]}static get pluginName(){return"Font"}}],i_.defaultConfig={fontColor:{columns:6,colors:[{color:"#FF7A1A"},{color:"#E64646"},{color:"#36BA79"},{color:"#175FFF"},{color:"#696E7C"},{color:"#2C3242"}]},toolbar:{items:["heading","|","bold","italic","underline","strikethrough","fontColor","link","|","bulletedList","numberedList","|","imageUpload","blockQuote","mediaEmbed"]},link:{addTargetToExternalLinks:!0,defaultProtocol:"http://"},image:{styles:["alignLeft","alignCenter","alignRight"],resizeOptions:[{name:"imageResize:original",label:"Original",value:null},{name:"imageResize:50",label:"50%",value:"50"},{name:"imageResize:75",label:"75%",value:"75"}],toolbar:["imageStyle:alignLeft","imageStyle:alignCenter","imageStyle:alignRight","|","imageResize","|","imageTextAlternative"]},language:"en",mediaEmbed:{previewsInData:!1,providers:[{name:"iframely previews",url:[{s:"^https?:\\/\\/(?:web\\.)?500px\\.com\\/photo\\/(\\d+)",m:"i"},{s:"^https?:\\/\\/abcnews\\.go\\.com\\/\\w+\\/(?:\\w+\\/)?video\\/[a-zA-Z0-9\\-_]+\\-(\\d+)",m:"i"},{s:"^https?:\\/\\/animoto\\.com\\/play\\/\\w+",m:"i"},{s:"^https?:\\/\\/archive\\.org\\/details\\/([^\\/]+)\\/?\\??",m:"i"},{s:"^(https?:\\/\\/art19\\.com\\/shows\\/[a-zA-Z0-9\\-_]+\\/episodes\\/[a-zA-Z0-9\\-_]+)",m:"i"},{s:"^(https?:\\/\\/art19\\.com\\/shows\\/[a-zA-Z0-9\\-_]+)",m:"i"},{s:"^https?:\\/\\/[a-z0-9-]+\\.bandcamp\\.com\\/(album|track)\\/(\\w+)",m:"i"},{s:"^https?:\\/\\/([a-z-\\.]+)\\/(album|track)\\/([a-z-]+)\\/?$",m:"i"},{s:"^https?:\\/\\/(?:www|pro)\\.beatport\\.com\\/(track|mix)\\/[a-zA-Z0-9\\.\\-]+\\/(\\d+)",m:"i"},{s:"^https?:\\/\\/bigthink\\.com\\/videos\\/([a-zA-Z0-9\\-]+)",m:"i"},{s:"^https:\\/\\/app\\.box\\.com\\/(?:embed|embed_widget)?\\/?s\\/([a-zA-Z0-9]+)",m:""},{s:"^https:\\/\\/(\\w+)\\.app\\.box\\.com\\/(?:embed|embed_widget)?\\/?s\\/([a-zA-Z0-9]+)",m:""},{s:"^https:\\/\\/app\\.box\\.com\\/embed\\/preview\\/([a-zA-Z0-9]+)",m:""},{s:"^https:\\/\\/(\\w+)\\.app\\.box\\.com\\/embed\\/preview\\/([a-zA-Z0-9]+)",m:""},{s:"^https?:\\/\\/(?:www\\.)?brainyquote\\.com\\/quotes(?:\\/quotes)?\\/\\w\\/?",m:"i"},{s:"^https?:\\/\\/players\\.brightcove\\.net\\/\\d+\\/[a-zA-Z0-9]+_[a-zA-Z0-9]+\\/index\\.html\\?videoId=\\d+",m:"i"},{s:"^https?:\\/\\/www\\.buzzfeed\\.com\\/",m:"i"},{s:"^https?:\\/\\/www\\.c-span\\.org\\/video\\/\\?(c?[\\d-]+)(\\/[\\w-]+)",m:"i"},{s:"^https?:(\\/\\/[\\w-]+\\.carto(?:db)?\\.com\\/(?:u\\/[\\w-]+\\/)?viz\\/[a-z0-9-]+)",m:"i"},{s:"^https?:\\/\\/www\\.cbc\\.ca\\/player\\/",m:"i"},{s:"^https?:\\/\\/channel9\\.msdn\\.com\\/Events\\/([\\w-]+\\/\\d+\\/[\\w-]+)",m:"i"},{s:":\\/\\/cnevids\\.com",m:"i"},{s:"^https?:\\/\\/(www|edition)?\\.?cnn\\.com\\/videos?\\/",m:"i"},{s:"https?:\\/\\/codepen\\.io\\/(?:[a-z0-9\\-_]+\\/)?(pen|details|full)\\/([a-z0-9\\-]+)",m:"i"},{s:"^https?:\\/\\/(\\w+\\.)?d\\.pr(?:\\/free)?\\/(?:i|v|)\\/",m:"i"},{s:"^https?:\\/\\/www\\.dailymail\\.co\\.uk\\/[^#]+#(v\\-\\d+)$",m:"i"},{s:"^https?:\\/\\/www\\.dailymail\\.co\\.uk\\/video\\/\\w+\\/video\\-(\\d+)\\/",m:"i"},{s:":\\/\\/dailymotion\\.com",m:"i"},{s:"^https?:\\/\\/www\\.dailymotion\\.com\\/playlist\\/",m:"i"},{s:"^https?:\\/\\/www\\.dailymotion\\.com\\/embed\\/playlist\\/",m:"i"},{s:"^https?:\\/\\/www\\.dailymotion\\.com\\/(swf|embed)\\/video\\/",m:"i"},{s:"^https?:\\/\\/(?:www)?\\.?documentcloud\\.org\\/documents?\\/\\d+",m:"i"},{s:"^https?:\\/\\/dribbble\\.com\\/shots\\/([a-zA-Z0-9\\-]+)",m:"i"},{s:"^https?:\\/\\/dribbble\\.com\\/([a-zA-Z0-9\\-]+)(?:\\?[^\\/]+)?$",m:"i"},{s:"^https?:\\/\\/www\\.ebaumsworld\\.com\\/video\\/watch\\/(\\d+)",m:"i"},{s:"^https?:\\/\\/\\w+\\.ebaumsworld\\.com\\/videos\\/[a-zA-Z0-9_-]+\\/(\\d+)",m:"i"},{s:"^https?:\\/\\/(?:www\\.)?espn\\.com?(?:\\.\\w{2})?\\/video\\/clip\\?id=espn:(\\d+)",m:"i"},{s:"^https?:\\/\\/(?:www\\.)?espn\\.com?(?:\\.\\w{2})?\\/video\\/clip\\?id=(\\d+)",m:"i"},{s:"^https?:\\/\\/(?:www\\.)?secsports\\.com\\/video\\/(\\d+)",m:"i"},{s:"^https?:\\/\\/(?:www\\.)?espn\\.com?(?:\\.\\w{2})?\\/(?:videohub\\/)?video\\/clip\\/_\\/id\\/(\\d+)",m:"i"},{s:"^https?:\\/\\/(?:www|business)\\.facebook\\.com\\/video\\/video\\.php.*[\\?&]v=(\\d{5,})(?:$|&)",m:"i"},{s:"^https?:\\/\\/(?:www|business)\\.facebook\\.com\\/photo\\.php.*[\\?&]v=(\\d{5,})(?:$|&)",m:"i"},{s:"^https?:\\/\\/(?:www|business)\\.facebook\\.com\\/video\\/video\\.php\\?v=(\\d{5,})$",m:"i"},{s:"^https?:\\/\\/(?:www|business)\\.facebook\\.com\\/video\\.php.*[\\?&]v=(\\d{5,})(?:$|&)",m:"i"},{s:"^https?:\\/\\/(?:www|business)\\.facebook\\.com\\/video\\.php.*[\\?&]id=(\\d{5,})(?:$|&)",m:"i"},{s:"^https?:\\/\\/(?:www|business)\\.facebook\\.com\\/[a-zA-Z0-9.]+\\/videos\\/.+",m:"i"},{s:"^https?:\\/\\/(?:www|business)\\.facebook\\.com\\/watch\\/?\\?(?:.+&)?v=",m:"i"},{s:"^https?:\\/\\/(?:www|m|business)\\.facebook\\.com\\/(permalink|story)\\.php\\?[^\\/]+(\\d{10,})",m:"i"},{s:"^https?:\\/\\/(?:www|m|business)\\.facebook\\.com\\/photo\\.php\\?(?:[^\\?]+)?fbid=(\\d{10,})",m:"i"},{s:"^https?:\\/\\/(?:www|m|business)\\.facebook\\.com\\/photo\\/?\\?(?:[^\\?]+)?fbid=(\\d{10,})",m:"i"},{s:"^https?:\\/\\/(?:www|m|business)\\.facebook\\.com\\/([a-zA-Z0-9\\.\\-]+)\\/(posts|activity)\\/(\\d{10,})",m:"i"},{s:"^https?:\\/\\/(?:www|m|business)\\.facebook\\.com\\/([a-zA-Z0-9\\.\\-]+)\\/photos\\/[^\\/]+\\/(\\d{10,})",m:"i"},{s:"^https?:\\/\\/(?:www|m|business)\\.facebook\\.com\\/notes\\/([^\\/\\?]+)\\/[^\\/]+\\/(\\d{10,})",m:"i"},{s:"^https?:\\/\\/(?:www|m|business)\\.facebook\\.com\\/media\\/set\\/\\?set=[^\\/]+(\\d{10,})",m:"i"},{s:"^https?:\\/\\/(www|m)\\.facebook\\.com\\/([^\\/\\?]+(?<!\\.php))\\/?(?:about|photos|videos|events|timeline|photos_stream)?\\/?(?:\\?[^\\/\\?]+)?$",m:"i"},{s:"^https?:\\/\\/(www|m)\\.facebook\\.com\\/(?:pg|pages)\\/",m:"i"},{s:"^https?:\\/\\/www\\.flickr\\.com(\\/photos\\/[@a-zA-Z0-9_\\.\\-]+\\/(?:sets|albums)\\/(\\d+))",m:"i"},{s:"^https?:\\/\\/www\\.flickr\\.com\\/photos\\/([@a-zA-Z0-9_\\.\\-]+)\\/(\\d+).*?$",m:"i"},{s:"^https?:\\/\\/(?:tube|www)\\.geogebra\\.org\\/material\\/\\w+\\/id\\/([a-zA-Z0-9]+)",m:"i"},{s:"^https?:\\/\\/(?:tube|www)\\.geogebra\\.org\\/(?:m|classic|graphing)\\/(?:[a-zA-Z0-9]+)#material\\/([a-zA-Z0-9#]+)",m:"i"},{s:"^https?:\\/\\/(?:tube|www)\\.geogebra\\.org\\/(?:m|classic|graphing)\\/([a-zA-Z0-9]+)",m:"i"},{s:"^https?:\\/\\/(?:tube|www)\\.geogebra\\.org\\/student\\/m([a-zA-Z0-9]+)",m:"i"},{s:"^https?:\\/\\/(?:tube|www)\\.geogebra\\.org\\/m\\/([a-zA-Z0-9]+)",m:"i"},{s:"^https?:\\/\\/giphy\\.com\\/(?:gifs|stickers)\\/(?:[a-zA-Z0-9_-]+\\-)?([a-z0-9\\-]+)",m:"i"},{s:"^https?:\\/\\/giphy\\.com\\/(?:videos|clips)\\/(?:[a-zA-Z0-9_-]+\\-)?([a-zA-Z0-9]+)(?:\\?.+)?",m:"i"},{s:"^https?:\\/\\/gist\\.github\\.com\\/([\\w\\.\\-]+\\/)(\\w+)(#([\\w\\.\\-]+))?",m:"i"},{s:"^https:\\/\\/(?:docs|drive)\\.google\\.com\\/(?:a\\/[a-zA-Z0-9\\-\\_\\.]+\\/)?(forms|document|presentation|spreadsheets|file|drawings)\\/(?:u\\/\\d\\/)?d(?:\\/e)?\\/([a-zA-Z0-9_-]+)",m:"i"},{s:"https?:\\/\\/(?:www|calendar)\\.google\\.com\\/calendar\\/embed\\/?\\?([^\\/]+)",m:"i"},{s:"^https?:\\/\\/(?:www\\.)?google\\.(?:com?\\.)?[a-z]+\\/maps\\/d\\/(?:edit|embed|viewer)\\?(?:[^&]+&)*(mid)=([a-zA-Z0-9\\.\\-_]+)",m:"i"},{s:"^https?:\\/\\/(?:www\\.)?google\\.(?:com?\\.)?[a-z]+\\/maps\\/d\\/u\\/0\\/(?:edit|embed|viewer)\\?(?:[^&]+&)*(mid)=([a-zA-Z0-9\\.\\-_]+)",m:"i"},{s:"^https?:\\/\\/mapsengine\\.google\\.(?:com?\\.)?[a-z]+\\/map\\/u\\/0\\/(?:edit|embed|viewer)\\?(?:[^&]+&)*(mid)=([a-zA-Z0-9\\.\\-_]+)",m:"i"},{s:"^https?:\\/\\/mapsengine\\.google\\.(?:com?\\.)?[a-z]+\\/map\\/u\\/0\\/viewer\\?(?:[^&]+&)*(mid)=([a-zA-Z0-9\\.\\-_]+)",m:"i"},{s:"^https?:\\/\\/mapse\\.google\\.(?:com?\\.)?[a-z]+\\/map\\/ms\\?(?:[^&]+&)*(mid)=([a-zA-Z0-9\\.\\-_]+)",m:"i"},{s:"^https?:\\/\\/(?:www\\.)?google\\.(?:com?\\.)?[a-z]+\\/maps\\/embed\\?(pb)=([^\\/\\?]+)$",m:"i"},{s:"^https?:\\/\\/(?:www\\.)?google\\.(?:com?\\.)?[a-z]+\\/maps\\/(?:preview\\/)?(place)(?:\\/preview)?\\/([^\\/\\?@]+)\\/?(@[^\\/]+)?",m:"i"},{s:"^https?:\\/\\/(?:www\\.)?google\\.(?:com?\\.)?[a-z]+\\/maps\\/(dir\\/[^\\/]+)\\/([^@\\?]+)\\/(@[a-z0-9.,\\-]+)",m:"i"},{s:"^https?:\\/\\/(?:www\\.)?google\\.(?:com?\\.)?[a-z]+\\/maps\\/(dir\\/[^\\/]+)\\/([^\\/\\?]+)\\/?(@[a-z0-9.,\\-]+)?",m:"i"},{s:"^https?:\\/\\/(?:www\\.)?google\\.(?:com?\\.)?[a-z]+\\/maps\\/(search)\\/([^\\/\\?]+)\\/?(@[^\\/]+)?",m:"i"},{s:"^https?:\\/\\/(?:www\\.)?google\\.(?:com?\\.)?[a-z]+\\/maps\\/?\\?(q)=([^&@\\/\\?]+)$",m:"i"},{s:"^https?:\\/\\/(?:www\\.)?google\\.(?:com?\\.)?[a-z]+\\/(maps)\\/()(@[^\\/\\?]+)",m:"i"},{s:"^https?:\\/\\/(?:www\\.)?google\\.(?:com?\\.)?[a-z]+\\/(maps)\\/place\\/()(@[^\\/\\?]+)",m:"i"},{s:"^https?:\\/\\/(?:www\\.)?google\\.(?:com?\\.)?[a-z]+\\/(maps)\\/dir\\/(?:[^\\/]+)\\/()\\/(@[^\\/\\?]+)",m:"i"},{s:"^https?:\\/\\/maps\\.google\\.(?:com?\\.)?[a-z]+\\/(?:maps(?:\\/ms|\\/preview)?)?[\\?\\#].+",m:"i"},{s:"^https?:\\/\\/(?:www\\.)?google\\.(?:com?\\.)?[a-z]+\\/maps(?:\\/preview)?[\\?\\#].+&.+",m:"i"},{s:"^https?:\\/\\/www\\.hockeydb\\.com\\/ihdb\\/stats\\/pdisplay\\.php\\?pid=(\\d+)",m:"i"},{s:"https?:\\/\\/(?:giant|thumbs|zippy)\\.gfycat\\.com\\/([a-zA-Z0-9]+)(?:\\-mobile|\\-size_restricted)?\\.(?:webm|mp4|gif)$",m:"i"},{s:"https?:\\/\\/gfycat\\.com\\/(?:detail|ifr)\\/([a-zA-Z0-9]+)$",m:"i"},{s:"https?:\\/\\/j\\.gifs\\.com\\/(\\w+)\\.gif$",m:"i"},{s:"https?:\\/\\/i\\.giphy\\.com\\/(\\w+)\\.gif(\\?.*)?$",m:"i"},{s:"https?:\\/\\/media\\d?\\.giphy\\.com\\/media\\/(\\w+)\\/([^\\.\\?]+)?\\.(?:gif|mp4|webm|mov)(\\?.*)?$",m:"i"},{s:"https?:\\/\\/giphy\\.com\\/gifs\\/(\\w+)\\/html5(\\?.*)?$",m:"i"},{s:"https?:\\/\\/giphy\\.com\\/embed\\/(\\w+)",m:"i"},{s:"^https?:\\/\\/imageshack\\.com\\/i\\/\\w+",m:"i"},{s:"^https?:\\/\\/www\\.imdb\\.com\\/video\\/(?:[\\w]+\\/)?vi(\\d+)",m:"i"},{s:"^https?:\\/\\/www\\.imdb\\.com(?:\\/(?:title|list|name)\\/\\w{2}[\\d]+)?\\/videoplayer\\/vi(\\d+)",m:"i"},{s:"^https?:\\/\\/www\\.imdb\\.com\\/title\\/\\w{2}[\\d]+\\/?[^\\/#]+#\\w{2}\\-vi(\\d+)$",m:"i"},{s:"^https?:\\/\\/www\\.instagram\\.com\\/(?:[a-zA-Z0-9_\\-\\.]+\\/)?(?:p|tv|reel)\\/([a-zA-Z0-9_-]+)\\/?",m:"i"},{s:"^https?:\\/\\/instagr\\.am\\/(?:[a-zA-Z0-9_\\-\\.]+\\/)?p\\/([a-zA-Z0-9_-]+)",m:"i"},{s:"^https?:\\/\\/www\\.instagram\\.com\\/(?:[a-zA-Z0-9_\\-\\.]+\\/)?(?:p|tv)\\/([a-zA-Z0-9_-]+)$",m:"i"},{s:"^https?:\\/\\/issuu\\.com\\/[\\w_.-]+\\/docs\\/([\\w_.-]+)",m:"i"},{s:"^https?:\\/\\/music\\.apple\\.com\\/(\\w{2})\\/(album)(?:\\/[^\\/]+)?\\/id(\\d+)\\?i=(\\d+)?",m:"i"},{s:"^https?:\\/\\/music\\.apple\\.com\\/(\\w{2})\\/(album|playlist|post)(?:\\/[^\\/]+)?\\/(?:id)?(?:pl\\.)?(\\w+)",m:"i"},{s:"^https?:\\/\\/music\\.apple\\.com\\/()(album)\\/(?:id)?(\\d+)\\??",m:"i"},{s:"(https?:\\/\\/jsfiddle.net\\/(?:\\w+\\/)?\\w+\\/).*",m:"i"},{s:"^https?:\\/\\/(?:www\\.)?kickstarter\\.com\\/projects\\/[a-zA-Z0-9-]+\\/[a-zA-Z0-9-]+\\/?(?:widget\\/video\\.html)?(?:\\?.*)?$",m:"i"},{s:"^https?:\\/\\/s3\\.amazonaws\\.com\\/(?:uploads|CDN)\\.knightlab\\.com\\/(storymapjs)\\/\\w+\\/(?:[a-zA-Z0-9\\-\\/]+)\\.html",m:"i"},{s:"^https?:\\/\\/cdn\\.knightlab\\.com\\/libs\\/(storymapjs)\\/(?:dev|latest)\\/embed\\/",m:""},{s:"^https?:\\/\\/cdn\\.knightlab\\.com\\/libs\\/(juxtapose|timeline3?)\\/(?:dev|latest)\\/embed\\/index\\.html\\?",m:""},{s:"^https?:\\/\\/[a-zA-Z0-9\\.]+\\.libsyn(?:pro)?\\.com\\/",m:""},{s:"^https?:\\/\\/live\\.amcharts\\.com\\/([a-zA-Z0-9\\-]+)",m:"i"},{s:"^https?:\\/\\/livestream\\.com\\/(\\w+)\\/events\\/(\\d+)(\\/videos?\\/\\d+)?",m:"i"},{s:"^https?:\\/\\/livestream\\.com\\/accounts\\/(\\d+)\\/events\\/(\\d+)(\\/videos?\\/\\d+)?",m:"i"},{s:"^https?:\\/\\/livestream\\.com\\/accounts\\/(\\d+)\\/(\\w+)(\\/videos?\\/\\d+)?",m:"i"},{s:"^https?:\\/\\/livestream\\.com\\/(\\w+)\\/(\\w+)(\\/videos?\\/\\d+)",m:"i"},{s:"^https?:\\/\\/livestream\\.com\\/(\\w+)\\/(\\w+)(?:\\/?\\?t=\\d+)?$",m:"i"},{s:"^https?:\\/\\/magnatune\\.com\\/artists\\/albums\\/([-_a-z0-9]+)(?:\\/(?:lofi_play)?)?(?:[\\?#].*)?$",m:"i"},{s:"^https?:\\/\\/my\\.mail\\.ru\\/\\/?[a-z\\.]+\\/[a-zA-Z0-9\\._\\-]+\\/video\\/([a-zA-Z0-9_]+)\\/([a-zA-Z0-9_]+)\\.html",m:"i"},{s:"^https:\\/\\/yandex\\.ru\\/maps\\/",m:""},{s:"^https:\\/\\/yandex\\.ru\\/maps\\/-\\/",m:""},{s:"^https:\\/\\/(?:[a-z0-9\\-]+\\.)?medium\\.com\\/@?[\\w-]+",m:"i"},{s:"^https?:\\/\\/www\\.metacafe\\.com\\/watch\\/yt\\-([\\-_a-zA-Z0-9]+)\\/",m:"i"},{s:"^https?:\\/\\/www\\.metacafe\\.com\\/watch\\/(\\d+)",m:"i"},{s:"^https?:\\/\\/(?:www\\.)mixcloud\\.com\\/(?:live\\/)?[a-zA-Z0-9\\.\\-_]+\\/?(?:\\?.+)?$",m:""},{s:"^https?:\\/\\/(?:www\\.)mixcloud\\.com\\/[a-zA-Z0-9\\.\\-_]+\\/[a-zA-Z0-9\\.\\-_]+\\/?(?:\\?.+)?",m:""},{s:":\\/\\/momindum\\.com",m:"i"},{s:"^https?:\\/\\/www\\.nbcnews\\.com\\/(?:[a-z\\-]+\\/)?videos?\\/[a-zA-Z0-9-]+\\-(\\d+)",m:"i"},{s:"^https?:\\/\\/www\\.nbcsports\\.com\\/videos?\\/[a-zA-Z0-9-]+",m:"i"},{s:"https?:\\/\\/(?:www\\.)?nhl\\.com(\\/\\w+\\/)video\\/(?:embed\\/)?([a-zA-Z0-9\\-]+\\/t\\-\\d+\\/c\\-\\d+)",m:"i"},{s:"https?:\\/\\/(?:www\\.)?nhl\\.com(\\/)video\\/(?:embed\\/)?([a-zA-Z0-9\\-]+\\/t\\-\\d+\\/c\\-\\d+)",m:"i"},{s:"^https?:\\/\\/www\\.npr\\.org\\/sections\\/",m:"i"},{s:"^https?:\\/\\/www\\.npr\\.org\\/\\d{4}\\/\\d{2}\\/\\d{2}\\/\\d+\\/",m:"i"},{s:"^https?:\\/\\/www\\.nytimes\\.com\\/video\\/[a-zA-Z0-9\\-]+\\/(\\d+)\\/",m:""},{s:"^https?:\\/\\/www\\.nytimes\\.com\\/video\\/\\w+\\/\\w+\\/(\\d+)\\/",m:""},{s:"^https?:\\/\\/(?:www\\.)?openstreetmap\\.org\\/(?:node\\/\\d+)?(?:\\?.+|\\#.*map=.+|export\\/embed\\.html\\?)",m:"i"},{s:"^https?:\\/\\/ow\\.ly\\/i\\/",m:"i"},{s:"^https?:\\/\\/padlet\\.com\\/[0-9a-zA-Z_\\-]+\\/([0-9a-zA-Z_\\-]+)",m:"i"},{s:"^https?:\\/\\/pastebin\\.com\\/(?!search)([a-zA-Z0-9]+)",m:"i"},{s:"^https?:\\/\\/(?:magic|create)\\.piktochart\\.com\\/output\\/(\\d+\\-[\\-a-zA-Z-0-9_]+)",m:"i"},{s:"^https?:\\/\\/(?:\\w{2,3}\\.)?pinterest(?:\\.com?)?\\.\\w{2,3}\\/((?!pin)[a-zA-Z0-9%_]+|pinterest)\\/([a-zA-Z0-9%\\-]+)\\/?(?:$|\\?|#)",m:"i"},{s:"^https?:\\/\\/(?:\\w{2,3}\\.)?pinterest(?:\\.com?)?\\.\\w{2,3}\\/pin\\/(\\d+)",m:"i"},{s:"^https?:\\/\\/(?:\\w{2,3}\\.)?pinterest(?:\\.com?)?\\.\\w{2,3}\\/((?!pin)[a-zA-Z0-9%_]+|pinterest)\\/?(?:$|\\?|#)",m:"i"},{s:"^https?:\\/\\/(?:\\w+\\.)?polldaddy\\.com\\/poll\\/([0-9]+)",m:"i"},{s:"^https?:\\/\\/(?:\\w+\\.)?polldaddy\\.com\\/s\\/",m:"i"},{s:"^https?:\\/\\/poll\\.fm\\/(?:poll\\/)?([0-9]+)\\/?",m:"i"},{s:"^https:\\/\\/prezi\\.com\\/([a-z0-9\\-_]+)\\/[^\\/]+\\/(?:\\?[^\\/\\?]+)?$",m:"i"},{s:"^https?:\\/\\/quizlet\\.com\\/(?:\\w{2}\\/)?(\\d+)\\/([^\\/]+)\\/?",m:"i"},{s:"^https?:\\/\\/(?:[\\w\\-]+\\.)?genius\\.com\\/(?!jobs)([a-zA-Z0-9\\-]+)",m:"i"},{s:"^https?:\\/\\/readymag\\.com\\/\\w+\\/(\\d+)",m:"i"},{s:"^https?:\\/\\/(?:www|\\w{2})\\.scribd\\.com\\/(doc|document|embeds|presentation|fullscreen)\\/(\\d+)",m:"i"},{s:"^https?:\\/\\/[a-zA-Z0-9\\-_]+\\.simplecast\\.com\\/episodes\\/[a-zA-Z0-9\\-]+",m:"i"},{s:"^https?:\\/\\/embed\\.simplecast\\.com\\/[a-zA-Z0-9\\-]+",m:"i"},{s:"^https?:\\/\\/simplecast\\.com\\/s\\/[a-zA-Z0-9\\-]+",m:"i"},{s:"^https?:\\/\\/slides\\.com\\/([a-zA-Z0-9_\\-]+)\\/([a-zA-Z0-9_\\-]+)",m:"i"},{s:":\\/\\/slideshare\\.net",m:"i"},{s:":\\/\\/smugmug\\.com",m:"i"},{s:":\\/\\/soundcloud\\.com",m:"i"},{s:"^https:?\\/\\/w\\.soundcloud\\.com\\/player\\/?\\?",m:"i"},{s:":\\/\\/speakerdeck\\.com",m:"i"},{s:"^https?:\\/\\/(?:open|play|www)\\.spotify\\.com\\/(?:track|album|artist|show|episode|playlist)",m:"i"},{s:"^https?:\\/\\/(?:www\\.)?strawpoll\\.me\\/([0-9]+)$",m:"i"},{s:"^https?:\\/\\/sverigesradio\\.se\\/sida\\/artikel\\.aspx\\?programid=\\d+&artikel=(\\d+)",m:"i"},{s:"^https?:\\/\\/sverigesradio\\.se\\/artikel\\/(\\d+)",m:"i"},{s:"^https?:\\/\\/(?:www\\.)?ted\\.com\\/talks\\/",m:"i"},{s:"^https?:\\/\\/(?:www\\.)?ted\\.com\\/playlists\\/",m:"i"},{s:":\\/\\/test\\.com",m:"i"},{s:"^https?:\\/\\/(?:www\\.)?theatlas\\.com\\/charts\\/([a-zA-Z0-9]+)",m:"i"},{s:"https?:\\/\\/www\\.theguardian\\.com\\/[\\w-]+\\/video\\/\\d+\\/\\w+\\/\\d+\\/[\\w-]+",m:"i"},{s:"https:\\/\\/theta360\\.com\\/(?:spheres|s)(?:\\/\\w+)?\\/[\\w-]+",m:"i"},{s:"^https?:\\/\\/www\\.tmz\\.com\\/videos\\/([a-zA-Z0-9_]+)",m:""},{s:"^https?:\\/\\/([a-z0-9-]+\\.tumblr\\.com)\\/(post|image)\\/(\\d+)(?:\\/[a-z0-9-]+)?",m:"i"},{s:"^https?:\\/\\/([a-z-\\.]+)\\/(post)\\/(\\d{11,14})(?:\\/[a-z0-9-]+)?(?:\\?.*)?(?:#.*)?$",m:"i"},{s:"^https?:\\/\\/clips.twitch\\.tv\\/([^\\?\\/]+)(?:\\?[^\\?]+)?$",m:"i"},{s:"^https?:\\/\\/www\\.twitch\\.tv\\/\\w+\\/clip\\/([^\\?\\/]+)",m:"i"},{s:"^https?:\\/\\/(?:www\\.|go\\.)?twitch\\.tv\\/([a-zA-Z0-9_]+)(?:\\?parent=.*)?$",m:"i"},{s:"^https?:\\/\\/(?:www\\.|go\\.)?twitch\\.tv\\/[a-zA-Z0-9_]+\\/video\\/(\\d+)",m:"i"},{s:"^https?:\\/\\/(?:www\\.|go\\.)?twitch\\.tv\\/[a-zA-Z0-9_]+\\/v\\/(\\d+)",m:"i"},{s:"^https?:\\/\\/(?:www\\.|go\\.)?twitch\\.tv\\/(?:[a-zA-Z0-9_]+\\/)?videos?\\/(\\d+)",m:"i"},{s:"^https?:\\/\\/twitter\\.com\\/(?:\\w+)\\/status(?:es)?\\/(\\d+)",m:"i"},{s:"^https?:\\/\\/twitter\\.com\\/(\\w+)\\/(?:timelines?|moments?|likes?)\\/(\\d+)",m:"i"},{s:"^https?:\\/\\/twitter\\.com\\/(\\w+)\\/?(?:\\?.*)?$",m:"i"},{s:"^https?:\\/\\/twitter\\.com\\/(\\w+)\\/(?:timelines?|moments?|likes?|lists?)\\/?",m:"i"},{s:"^https?:\\/\\/www\\.([a-z\\-]+)\\.com\\/media\\/cinematic\\/video\\/(\\d{7,12})\\/[a-zA-Z0-9\\-\\_:\\.]+\\/?(?:[^\\/]+)?$",m:"i"},{s:"^https?:\\/\\/www\\.([a-z\\-]+)\\.com\\/media\\/cinematic\\/video\\/(\\d{7,12})\\/?(?:[^\\/]+)?$",m:"i"},{s:"^https?:\\/\\/www\\.([a-z\\-]+)\\.com\\/videos\\/\\w+\\/(?:[a-z0-9\\-\\_\\/]+)?\\d{4}\\/\\d{2}\\/\\d{2}\\/(\\d{7,12})\\/?(?:[^\\/]+)?$",m:"i"},{s:"^https?:\\/\\/www\\.([a-z\\-]+)\\.com\\/videos\\/\\w+\\/(?:[a-z0-9\\-\\_\\/]+)?\\d{4}\\/\\d{2}\\/\\d{2}\\/[a-zA-Z0-9\\-\\_\\.:]+\\/(\\d{7,12})\\/?(?:[^\\/]+)?$",m:"i"},{s:"^https?:\\/\\/v\\.qq\\.com\\/page\\/\\w\\/\\w\\/\\w\\/(\\w+)\\.html$",m:"i"},{s:"^https?:\\/\\/v\\.qq\\.com\\/\\w+\\/page\\/(\\w+)\\.html$",m:"i"},{s:"^https?:\\/\\/v\\.qq\\.com\\/\\w+\\/\\w\\/\\w+\\.html\\?vid=(\\w+)$",m:"i"},{s:"^https?:\\/\\/v\\.qq\\.com\\/iframe\\/(?:player|preview)\\.html\\?vid=(\\w+)",m:"i"},{s:"^https?:\\/\\/v\\.qq\\.com\\/\\w\\/cover\\/\\w+\\/(\\w+)\\.html",m:"i"},{s:"https?:\\/\\/(?:www\\.)?vbox7\\.com\\/play:(\\w+)",m:"i"},{s:"^https?:\\/\\/vimeo\\.com\\/moogaloop\\.swf\\?clip_id=(\\d+)",m:"i"},{s:"^https?:\\/\\/player\\.vimeo\\.com\\/video\\/(\\d+)",m:"i"},{s:"^https:\\/\\/vimeo\\.com(?:\\/channels?\\/\\w+)?\\/\\d+",m:"i"},{s:"^https:\\/\\/www\\.washingtonpost\\.com\\/(?:video|posttv)\\/\\w+\\/[a-z0-9-]+\\/\\d+\\/\\d+\\/\\d+\\/([a-z0-9-]+)_video\\.html",m:"i"},{s:"https?:\\/\\/widgetic\\.com\\/widgets\\/",m:"i"},{s:"https?:\\/\\/app\\.widgetic\\.com\\/",m:"i"},{s:"^https?:\\/\\/([a-zA-Z0-9]+).wistia\\.com\\/medias\\/([_a-zA-Z0-9]+)",m:"i"},{s:"^https?:\\/\\/(?:www.)?xkcd\\.com\\/\\d+",m:"i"},{s:"^https?:\\/\\/v\\.youku\\.com\\/v_show\\/id_([a-z0-9=_]{3,})\\.html",m:"i"},{s:"^https?:\\/\\/news\\.youku\\.com\\/(\\w{3,})",m:"i"},{s:"^https?:\\/\\/(?:www\\.)?youtube\\.com\\/(channel)\\/([a-zA-Z0-9_-]+)",m:"i"},{s:"^https?:\\/\\/(?:www\\.)?youtube\\.com\\/(user|c)\\/([a-zA-Z0-9_-]+)",m:"i"},{s:"^https?:\\/\\/www\\.youtube\\.com\\/playlist\\?(?:[=\\-_a-zA-Z0-9&]+)?list=([\\-_a-zA-Z0-9]+)",m:"i"},{s:"^https?:\\/\\/www\\.youtube\\.com\\/shared\\/?\\?ci=([a-zA-Z0-9_-]+)",m:"i"},{s:"^https?:\\/\\/(?:www\\.)?youtube\\.com\\/(?:tv#\\/)?watch\\/?\\?(?:[^&]+&)*v=([a-zA-Z0-9_-]+)",m:"i"},{s:"^https?:\\/\\/youtu.be\\/([a-zA-Z0-9_-]+)",m:"i"},{s:"^https?:\\/\\/m\\.youtube\\.com\\/#\\/watch\\?(?:[^&]+&)*v=([a-zA-Z0-9_-]+)",m:"i"},{s:"^https?:\\/\\/www\\.youtube\\.com\\/embed\\/([a-zA-Z0-9_-]+)",m:"i"},{s:"^https?:\\/\\/www\\.youtube\\.com\\/v\\/([a-zA-Z0-9_-]+)",m:"i"},{s:"^https?:\\/\\/www\\.youtube\\.com\\/user\\/[a-zA-Z0-9_-]+\\/?\\?v=([a-zA-Z0-9_-]+)",m:"i"},{s:"^https?:\\/\\/www\\.youtube-nocookie\\.com\\/(?:v|embed)\\/([a-zA-Z0-9_-]+)",m:"i"},{s:"^https?:\\/\\/form\\.123formbuilder\\.com\\/(\\d+)\\/?",m:"i"},{s:"^https?:\\/\\/www\\.123formbuilder\\.com\\/form-(\\d+)\\/",m:"i"},{s:"^https?:\\/\\/(?:live|www)\\.24liveblog\\.com\\/live\\/[a-zA-Z0-9\\-_]+\\/?(?:\\?.+)?$",m:"i"},{s:"^https?:\\/\\/(?:www\\.)360cities\\.net\\/image\\/",m:"i"},{s:"^https?:\\/\\/airtable\\.com\\/embed\\/[a-zA-Z0-9_\\-]+",m:"i"},{s:"^https?:\\/\\/(?:.+)\\.cdn\\.ampproject\\.org\\/\\w\\/(.+)",m:"i"},{s:"^https?:\\/\\/archive\\.org\\/(?:embed|download|stream)\\/([^\\/]+)\\/?\\??",m:"i"},{s:"^https?:\\/\\/cdn\\.embedly.com\\/widgets\\/",m:"i"},{s:"https?:\\/\\/codepen\\.io\\/(?:[a-z0-9\\-_]+\\/)?embed\\/[a-z0-9\\-]+",m:"i"},{s:"^https?:\\/\\/codesandbox\\.io\\/embed\\/([^\\/]+)$",m:"i"},{s:"^https?:\\/\\/embed\\.music\\.apple\\.com\\/",m:"i"},{s:"^https?:\\/\\/embed(?:der)?\\.wirewax\\.com\\/(\\d+)\\/?",m:"i"},{s:"^https?:\\/\\/(?:www\\.)?espn\\.com\\/core\\/video\\/iframe\\/?\\?id=(\\d+)",m:"i"},{s:"https?:\\/\\/flo\\.uri\\.sh\\/(visualisation|story)\\/(\\d+)\\/embed",m:"i"},{s:"^https?:\\/\\/flowplayer\\.com\\/app\\/(?:videos|livestreams)\\/([a-zA-Z0-9_\\-]+)",m:"i"},{s:"^https?:\\/\\/(?:www\\.)?google\\.(?:com?\\.)?[a-z]+\\/url\\?",m:"i"},{s:"^https?:\\/\\/(?:www\\.)?google\\.(?:com?\\.)?[a-z]+\\/imgres\\?.+(imgrefurl=).+",m:"i"},{s:"^https?:\\/\\/(?:www\\.)?google\\.(?:com?\\.)?[a-z]+\\/amp\\/.+#(ampshare=)[^#].+$",m:"i"},{s:"^https?:\\/\\/(?:www|secure)?\\.hulu\\.com\\/embed\\.html",m:"i"},{s:"^https?:\\/\\/images\\.google\\.(?:com?\\.)?[a-z]+\\/imgres\\?imgurl=",m:"i"},{s:"^https?:\\/\\/listen\\.tidal\\.com\\/(album|track|video|playlist)",m:"i"},{s:"^https?:\\/\\/www\\.liveleak\\.com\\/e\\/([a-zA-Z0-9_\\-]+)",m:"i"},{s:"^https?:\\/\\/m\\.ok\\.ru\\/video\\/\\d+",m:"i"},{s:"^http?s?:\\/\\/media\\.gettyimages\\.com\\/(photos|vectors)\\/[a-zA-Z\\/\\-]+([0-9]+)",m:"i"},{s:"^https?:\\/\\/(?:www\\.)?mixcloud\\.com\\/widget\\/iframe",m:"i"},{s:"^https?:\\/\\/www\\.nbcnews\\.com\\/widget\\/video\\-embed\\/(\\d+)",m:"i"},{s:"^https?:\\/\\/www\\.(?:nbcnews|today)\\.com\\/(?:\\w+\\/)?embedded\\-video\\/mmvo(\\d+)",m:"i"},{s:"^https?:\\/\\/(?:www\\.)?openstreetmap\\.org\\/node\\/\\d+$",m:"i"},{s:"^https?:\\/\\/pastebin\\.com\\/raw\\/([a-zA-Z0-9]+)",m:"i"},{s:"^https?:\\/\\/play.vidyard\\.com\\/([a-zA-Z-0-9]+)(?:\\.html)?",m:"i"},{s:"^https?:\\/\\/player\\.youku\\.com\\/embed\\/([a-zA-Z0-9=_\\-]+)\\/?(?:\\?.+)?$",m:"i"},{s:"^https?:\\/\\/prezi\\.com\\/(?:embed|m)\\/([a-z0-9_-]+)\\/",m:"i"},{s:"^https?:\\/\\/prezi\\.com\\/bin\\/preziloader\\.swf\\?prezi_id=([a-z0-9_-]+)",m:"i"},{s:"^https?:\\/\\/(?:renderer|preview)\\.qmerce\\.com\\/interaction\\/([a-z0-9]+)",m:"i"},{s:"^https?:\\/\\/(?:www\\.)?reverbnation\\.com\\/widget_code\\/html_widget\\/",m:"i"},{s:"^https?:\\/\\/(?:www\\.)?reverbnation\\.com\\/open_graph\\/",m:"i"},{s:"^https?:\\/\\/simplecast\\.com\\/(?:card|e)\\/([a-zA-Z0-9\\-]+)",m:"i"},{s:"^https?:\\/\\/player\\.simplecast\\.com\\/([a-zA-Z0-9\\-]+)",m:"i"},{s:"^https?:\\/\\/www\\.slideshare\\.net\\/mobile\\/[^\\/]+\\/[^\\/]+",m:"i"},{s:":\\/\\/_redirects",m:"i"},{s:"^https?:\\/\\/(?:www\\.)?speakerdeck\\.com\\/player\\/",m:"i"},{s:"^https?:\\/\\/streamable\\.com\\/(s|t|e|o)\\/([^\\/]+)\\/?",m:"i"},{s:"^https?:\\/\\/embed.ted.com\\/talks\\/",m:"i"},{s:"^https?:\\/\\/www\\.thinglink\\.com\\/fullscreen\\/(\\d+)",m:"i"},{s:"^https?:\\/\\/(?:www\\.)tiktok\\.com\\/embed\\/(\\d+)",m:"i"},{s:"^https?:\\/\\/www\\.today\\.com\\/offsite",m:"i"},{s:"^https?:\\/\\/player\\.twitch\\.tv\\/?\\?",m:"i"},{s:"^https?:\\/\\/twitter\\.com\\/intent\\/tweet\\/?",m:"i"},{s:"^https?:\\/\\/twitter\\.com\\/i\\/web\\/status\\/(\\d+)",m:"i"},{s:"^https?:\\/\\/mobile\\.twitter\\.com\\/(?:\\w+)\\/status(?:es)?\\/(\\d+)",m:"i"},{s:"^https?:\\/\\/(?:www\\.)?ultimedia\\.com\\/deliver\\/generic\\/iframe\\/mdtk\\/(\\d+)\\/(?:[a-zA-Z0-9\\/]+)?src\\/([a-zA-Z0-9]+)?",m:"i"},{s:"^https?:\\/\\/(?:www\\.)?ustream\\.tv\\/embed\\/(?:recorded\\/)?(\\d+)",m:"i"},{s:"^https?:\\/\\/(?:www\\.)viddler\\.com\\/embed\\/([a-zA-Z0-9_\\-]+)",m:"i"},{s:"^https?:\\/\\/fast\\.wistia\\.(com|net)\\/embed\\/medias\\/([a-zA-Z0-9]+)",m:"i"},{s:"^https?:\\/\\/(?:www\\.)?youscribe\\.com\\/BookReader\\/Index\\/(\\d+)\\/?\\?documentId=(\\d+)",m:"i"},{s:"^https?:\\/\\/(?:www\\.)?youscribe\\.com\\/BookReader\\/IframeEmbed\\/?\\?productId=(\\d+)",m:"i"},{s:"^https?:\\/\\/(player|shows|open|play)\\.acast\\.com\\/",m:""},{s:"^https?:\\/\\/embed\\.acast\\.com\\/([^\\/]+)\\/[a-zA-Z0-9_\\-]+",m:"i"},{s:"^https?:\\/\\/play\\.acast\\.com\\/s\\/",m:""},{s:"https?:\\/\\/spark\\.adobe\\.com\\/video\\/[a-z-A-Z0-9]+",m:"i"},{s:"^https?:\\/\\/video\\.tv\\.adobe\\.com\\/v\\/\\d+",m:""},{s:"^https?:\\/\\/(?:\\w{2,3}\\.)?airbnb(?:\\.com?)?\\.\\w{2,3}\\/rooms\\/(\\d+)",m:"i"},{s:"^https?:\\/\\/(?:[a-z0-9-]+\\.)?amazon\\.(com|ca|com\\.au|be|dk|de|es|fr|in|ie|it|nl|cn|ru|co\\.nz|com\\.mx|com\\.br|no|at|pt|ch|fi|se|ae|pl|co\\.uk|co\\.jp)\\/(?:\\-\\/\\w{2}\\/)?(?:[a-zA-Z0-9\\-%]+\\/)?(?:dp|gp)\\/[a-zA-Z0-9\\-%]+",m:"i"},{s:"^https?:\\/\\/music\\.amazon\\.(com|ca|com\\.au|be|dk|de|es|fr|in|ie|it|nl|cn|ru|co\\.nz|com\\.mx|com\\.br|no|at|pt|ch|fi|se|ae|pl|co\\.uk|co\\.jp)\\/(albums|user-playlists|playlists|artists)\\/([a-zA-Z0-9\\-%]+)(\\?.+)?",m:"i"},{s:"^https?:\\/\\/docs\\.aws\\.amazon\\.com\\/.*\\.html(?:\\?.*)?$",m:"i"},{s:":\\/\\/anchor\\.fm",m:"i"},{s:"^https?:\\/\\/answergarden\\.ch\\/(?:m|embed\\/)?(\\d+)",m:"i"},{s:"^https?:\\/\\/(?:renderer|preview)\\.apester\\.com\\/(?:interaction|v\\d+)\\/([a-z0-9]+)",m:"i"},{s:"^https?:\\/\\/(?:discover|www)?\\.?apester\\.com\\/media\\/([a-z0-9]+)",m:"i"},{s:"^https?:\\/\\/app\\.apester\\.com\\/editor\\/([a-z0-9]+)",m:"i"},{s:"^https?:\\/\\/www\\.arcgis\\.com\\/apps\\/\\w+\\/index\\.html\\?appid=([a-zA-Z0-9]+)",m:"i"},{s:"^https?:\\/\\/[a-zA-Z0-9\\-]+\\.maps\\.arcgis\\.com\\/apps\\/\\w+\\/index\\.html\\?appid=([a-zA-Z0-9]+)",m:"i"},{s:"^https?:\\/\\/www\\.arcgis\\.com\\/home\\/\\w+\\/viewer\\.html\\?",m:"i"},{s:"^https?:\\/\\/storymaps\\.(?:esri|arcgis)\\.com\\/stories\\/",m:"i"},{s:"^https?:\\/\\/www\\.ardmediathek\\.de\\/ard\\/video\\/(?:[a-zA-Z0-9\\-]+)\\/(?:[a-zA-Z0-9\\-]+)\\/(?:[a-zA-Z0-9\\-]+)\\/([a-zA-Z0-9]+)(?:\\/)?",m:"i"},{s:":\\/\\/artmajeur\\.com",m:"i"},{s:"^https?:\\/\\/player\\.ausha\\.co\\/index\\.html\\?",m:"i"},{s:"^https?:\\/\\/widget\\.ausha\\.co\\/index.html\\?",m:"i"},{s:":\\/\\/bandzoogle\\.com",m:"i"},{s:"^https?:\\/\\/(?:www\\.)?[a-z]+\\.com+\\/beat\\/[a-zA-Z0-9\\-]+\\-\\d+",m:"i"},{s:"^https?:\\/\\/(?:\\w+\\.)?beatstars\\.com\\/beat\\/[a-zA-Z0-9\\-]+\\-(\\d+)",m:"i"},{s:"^https?:\\/\\/www\\.behance\\.net\\/gallery\\/([a-zA-Z0-9\\-\\(\\)]+)\\/([0-9]+)",m:"i"},{s:"^https?:\\/\\/www\\.behance\\.net\\/gallery\\/([0-9]+)\\/([a-zA-Z0-9\\-\\(\\)]+)",m:"i"},{s:"^https?:\\/\\/(\\w+)\\.bfmtv\\.com\\/",m:"i"},{s:"^https?:\\/\\/www\\.(01net)\\.com\\/",m:"i"},{s:"^https?:\\/\\/(?:www\\.)?bilibili\\.com\\/video\\/([a-zA-Z0-9]+)?",m:"i"},{s:":\\/\\/bizjournals\\.com",m:"i"},{s:"^https?:\\/\\/(?:www\\.)?blogtalkradio\\.com\\/[a-zA-Z0-9\\-_]+\\/?$",m:"i"},{s:"^https?:\\/\\/www\\.bloomberg\\.com\\/news\\/videos\\/(\\d{4}\\-\\d{2}\\-\\d{2}\\/[a-zA-Z0-9\\-]+)",m:"i"},{s:"^https?:\\/\\/www\\.bloomberg\\.com\\/news\\/videos\\/(b\\/[a-zA-Z0-9-]+)",m:"i"},{s:"^https?:\\/\\/www\\.bloomberg\\.com\\/video\\/([a-zA-Z0-9-]+)\\.html$",m:"i"},{s:"^https?:\\/\\/(?:www\\.)?x3711\\.com(?:\\/embed)?\\/video\\/(\\d+\\/\\d+)",m:"i"},{s:"^https?:\\/\\/(?:www\\.)?calendly\\.com\\/(?:[A-Za-z0-9-]+)",m:"i"},{s:"^https:\\/\\/www\\.canva\\.com\\/design\\/",m:"i"},{s:"^https?:\\/\\/cawemo\\.com\\/(?:share|embed)\\/([a-zA-Z0-9\\-]+)",m:"i"},{s:"^https?:\\/\\/(cl\\.ly)\\/([a-zA-Z0-9_\\-]+)\\??(?:.+)?$",m:"i"},{s:"^https?:\\/\\/share\\.(getcloudapp)\\.com\\/([a-zA-Z0-9_\\-]+)\\??(?:.+)?$",m:"i"},{s:"^https?:\\/\\/(?:www\\.)?cnbc\\.com\\/video\\/",m:"i"},{s:"^https?:\\/\\/(?:www\\.)?cnbc\\.com\\/\\d+\\/\\d+\\/\\d+\\/",m:"i"},{s:"^https?:\\/\\/(?:www\\.)?codeply.com\\/(?:v|p)\\/([a-zA-Z0-9]+)",m:"i"},{s:"^https?:\\/\\/(?:www\\.)?consumerreports\\.org\\/video\\/[a-zA-Z0-9\\/\\-]+\\/(\\d+)\\/",m:"i"},{s:"^https?:\\/\\/(content|cdn)\\.jw(platform|player)\\.com\\/(previews|players)\\/[a-zA-Z0-9\\-]",m:"i"},{s:"^https?:\\/\\/[\\w\\-]+.[\\w\\-]+.\\w+\\/(previews|players)\\/[a-zA-Z0-9]+\\-[a-zA-Z0-9]+\\.html",m:"i"},{s:"^https?:\\/\\/livecenter\\.(nifs)\\.no\\/module\\/[a-z0-9\\-\\/\\.]+\\?",m:"i"},{s:"^https?:\\/\\/(livreblanc)\\.lexpress\\.fr\\/.+",m:"i"},{s:"^https?:\\/\\/(livreblanc)\\.bfmtv\\.com\\/.+",m:"i"},{s:"^https?:\\/\\/event(?:\\-widget)?\\.(bfmtv)\\.com\\/.+",m:"i"},{s:"^https?:\\/\\/(rd)\\.pagina12\\.com\\.ar\\/html\\/",m:"i"},{s:"^https?:\\/\\/(?:widget\\.\\w+\\.)(pronostika)\\.es\\/?\\?id=\\d+",m:""},{s:"^https?:\\/\\/(ourworldindata)\\.org\\/grapher\\/[a-zA-Z0-9\\-]+",m:"i"},{s:"^https?:\\/\\/www\\.(flexiquiz)\\.com\\/SC\\/N\\/([a-zA-Z0-9-]+)",m:"i"},{s:"^https?:\\/\\/www\\.dailymotion\\.com\\/video\\/",m:"i"},{s:"^https?:\\/\\/dataviz\\.nbcnews\\.com\\/projects\\/(20200122\\-coronavirus\\-[^\\/]+)\\/(?:[^\\/\\.]+\\.html)?",m:"i"},{s:"^https?:\\/\\/dataviz\\.nbcnews\\.com\\/projects\\/(\\d+\\-[^\\/]+)\\/(?:[^\\/\\.]+\\.html)?",m:"i"},{s:"^https?:\\/\\/cf\\.datawrapper\\.de\\/([a-zA-Z0-9]+(\\/\\d+)?)",m:"i"},{s:"^https?:\\/\\/(?:www\\.)?datawrapper\\.de\\/_\\/([a-zA-Z0-9\\_\\-]+)",m:"i"},{s:"^https?:\\/\\/(?:www\\.)?deezer\\.com\\/(?:\\w+\\/?)(track|playlist|album)\\/",m:"i"},{s:":\\/\\/delivery\\.vidible\\.tv",m:"i"},{s:"^https?:\\/\\/delivery\\.youplay\\.se\\/load\\.html\\?",m:"i"},{s:":\\/\\/democracynow\\.org",m:"i"},{s:"^https:\\/\\/secure\\.disney\\.com\\/embed\\/[a-zA-Z0-9]+",m:"i"},{s:"^https?:\\/\\/video(?:\\d+)?\\.dkn\\.tv\\/[a-zA-Z0-9\\-]+_([a-zA-Z0-9]+)\\.html",m:"i"},{s:"^https?:\\/\\/(?:www\\.)?dropbox\\.com\\/(sh?|scl)\\/[^?]+(?:\\?(?:[^\\?]+)?dl=\\d+)?",m:"i"},{s:"^(https?:\\/\\/(?:www\\.)?dropbox\\.com\\/s\\/[^?]+\\.(?:png|gif|jpg|jpeg|mp4))(?:\\?dl=\\d+)?$",m:"i"},{s:"^https?:\\/\\/(?:www|es|fr)\\.educaplay\\.com\\/(?:learning-resources|ressources-pedagogiques|recursos-educativos)\\/\\d+\\-",m:"i"},{s:"^https?:\\/\\/(?:www|es|fr)\\.educaplay\\.com\\/(?:game|juego|jeu)\\/\\d+\\-",m:"i"},{s:"^https?:\\/\\/(?:www\\.)?ellentube\\.com\\/(?:share\\/)?video\\/([a-zA-Z0-9_\\-]+\\.html)",m:"i"},{s:"https:\\/\\/www\\.eventbrite\\.com\\/e\\/",m:"i"},{s:"^https?:\\/\\/app\\.ex\\.co\\/stories\\/",m:"i"},{s:"^https?:\\/\\/(?:www\\.)?expressen\\.se\\/tv\\/([a-zA-Z0-9\\-\\/]+)\\/",m:"i"},{s:"^https:\\/\\/([a-zA-Z\\-]+\\.)?figma.com\\/(file|proto)\\/?",m:"i"},{s:"^https?:\\/\\/figshare\\.com\\/(?:articles|collections)\\/(?:[\\w]+\\/)?(?:[\\w_]+)\\/(\\d+)(?:\\/[\\d]+)?",m:"i"},{s:"^https?:\\/\\/online\\.flippingbook\\.com\\/view\\/(\\d+)\\/?(?:\\?.+)?$",m:"i"},{s:"^https?:\\/\\/[^\\/]+\\/view\\/(\\d+)\\/?(?:\\?.+)?$",m:"i"},{s:"^https?:\\/\\/(?:[a-zA-Z0-9]+\\.)?formstack\\.com\\/forms\\/[a-zA-Z0-9_\\-]+",m:"i"},{s:"^https?:\\/\\/www\\.foxsports\\.com\\/watch\\/(\\d+)",m:"i"},{s:"^https?:\\/\\/www\\.foxsports\\.com\\/(?:\\w+\\/)?video\\/?\\?vid=(\\d+)",m:"i"},{s:"^https?:\\/\\/www\\.foxsports\\.com\\/(?:\\w+\\/)?video\\/[a-zA-Z-]+\\-()",m:"i"},{s:"^https?:\\/\\/www\\.foxsports\\.com\\/(?:[a-zA-Z0-9\\-]+\\/)?(?:[a-zA-Z0-9\\-]+\\/)?video\\/(\\d+)",m:"i"},{s:"^https?:\\/\\/framer\\.cloud\\/[a-zA-Z0-9]+\\/?$",m:"i"},{s:"^https?:\\/\\/(?:www\\.)?gettyimages\\.(?:com|ca|com\\.au|be|dk|de|es|fr|in|ie|it|nl|co\\.nz|no|at|pt|ch|fi|se|ae|co\\.uk|co\\.jp)\\/(?:detail|license)\\/(?:[^\\/]+\\/[^\\/]+\\/)?([0-9\\-]+)",m:"i"},{s:"^https?:\\/\\/(?:www\\.)?gettyimages\\.(?:com|ca|com\\.au|be|dk|de|es|fr|in|ie|it|nl|co\\.nz|no|at|pt|ch|fi|se|ae|co\\.uk|co\\.jp)\\/[^\\/]+\\/(?:[^\\/]+\\/?)#\\/?[^\\/]+picture\\-id(\\d+)",m:"i"},{s:"^https?:\\/\\/(?:www\\.)?gettyimages\\.(?:com|ca|com\\.au|be|dk|de|es|fr|in|ie|it|nl|co\\.nz|no|at|pt|ch|fi|se|ae|co\\.uk|co\\.jp)\\/[^\\/]+\\/[^\\/]+photo\\-(\\d+)",m:"i"},{s:"^https?:\\/\\/(?:www\\.)?gettyimages\\.(?:com|ca|com\\.au|be|dk|de|es|fr|in|ie|it|nl|co\\.nz|no|at|pt|ch|fi|se|ae|co\\.uk|co\\.jp)\\/share\\/event\\/[^\\/#]\\/(\\d+)",m:"i"},{s:":\\/\\/gfycat\\.com",m:"i"},{s:"^https?:\\/\\/(?:www\\.)?gigapan\\.com\\/(?:galleries\\/\\d+\\/)?gigapans\\/(d+)?",m:"i"},{s:"^https?:\\/\\/gimletmedia\\.com\\/[\\w-]+\\/[\\w-]+\\/([A-Za-z0-9]+)\\/",m:"i"},{s:"^https?:\\/\\/player\\.gimletmedia\\.com\\/gen\\/([A-Za-z0-9]+)",m:"i"},{s:"^https?:\\/\\/player\\.gimletmedia\\.com\\/[\\w-]+\\/([A-Za-z0-9]+)$",m:"i"},{s:"^https?:\\/\\/giphy\\.com\\/(stories?|explore)\\/?",m:"i"},{s:"^(https?:\\/\\/(?:www\\.)?gofundme\\.com\\/f\\/[a-zA-Z0-9\\-]+)?\\/?(?:\\?.*)?$",m:"i"},{s:"^https?:\\/\\/datastudio\\.google\\.com\\/(?:embed\\/)?(?:u\\/\\d\\/)?reporting\\/([a-zA-Z0-9\\-_]+)",m:"i"},{s:"^https?:\\/\\/datastudio\\.google\\.com\\/org\\/[a-zA-Z0-9]+\\/reporting\\/([a-zA-Z0-9\\-_]+)",m:"i"},{s:"^https:\\/\\/drive\\.google\\.com\\/drive\\/folders\\/([a-zA-Z0-9_\\-]+)",m:"i"},{s:"^(https:\\/\\/grafik\\.apa\\.at\\/fastbuild\\/[^\\/]+\\/[^\\/]+\\/index\\.html)",m:"i"},{s:"^https?:\\/\\/gumroad\\.com\\/l\\/([a-zA-Z0-9\\-]+)",m:"i"},{s:"^https?:\\/\\/()h5p\\.org\\/(?:h5p\\/)?(?:node|embed)\\/(\\d+)",m:"i"},{s:"^https?:\\/\\/([a-zA-Z0-9\\-_]+\\.h5p\\.com)\\/content\\/(\\d+)",m:"i"},{s:"^https:\\/\\/hbr\\.org\\/video\\/(\\d+)\\/([\\w-]+)",m:"i"},{s:"^https?:\\/\\/cloud\\.highcharts\\.com\\/(show|charts|embed|inject)\\/([a-zA-Z0-9\\-_]+)",m:"i"},{s:"^https?:\\/\\/app\\.everviz\\.com\\/(show|charts|embed|inject)\\/([a-zA-Z0-9\\-_]+)",m:"i"},{s:"^https?:\\/\\/elections\\.huffingtonpost\\.com\\/pollster\\/(?:embed\\/)?([-a-z0-9]+)(?:\\/edit)?(.*)",m:"i"},{s:"^https?:\\/\\/www\\.icloud\\.com\\/keynote\\/([a-zA-Z0-9\\-_]+)\\/?",m:"i"},{s:":\\/\\/iframe\\.dacast\\.com",m:"i"},{s:":\\/\\/iframely\\.com",m:"i"},{s:"^https:\\/\\/www\\.ign\\.com\\/video-embed\\?url=https?:\\/\\/",m:"i"},{s:"^(https?:\\/\\/\\w+\\.ign\\.com\\/\\w+\\/videos?\\/\\d+\\/\\w+\\/)[a-zA-Z0-9-]+",m:"i"},{s:"^(https?:\\/\\/\\w+\\.ign\\.com\\/videos?\\/\\d+\\/\\d+\\/\\d+\\/)[a-zA-Z0-9-]+",m:"i"},{s:"^(https?:\\/\\/\\w+\\.ign\\.com\\/(?:\\w+\\/)?[a-zA-Z0-9-]+\\/\\d+\\/video\\/)",m:"i"},{s:"^(https?:\\/\\/\\w+\\.ign\\.com\\/\\w+\\/video\\/\\d+\\/)[a-zA-Z0-9-]+",m:"i"},{s:"^(https?:\\/\\/www\\.ign\\.com\\/videos\\/[^\\/]+)",m:"i"},{s:":\\/\\/imgflip\\.com",m:"i"},{s:"^https?:\\/\\/i\\.(?:stack\\.)?imgur\\.com\\/(\\w+)\\.(jpg|gif|png|gifv|webm|mp4)(\\?.*)?$",m:"i"},{s:"^https?:\\/\\/imgur\\.com\\/download\\/(\\w+)$",m:"i"},{s:"^https:\\/\\/imgur\\.com\\/(?:\\w+\\/)?(\\w+).*",m:"i"},{s:"^(https?:\\/\\/imgur\\.com\\/a\\/[a-zA-Z0-9]+)\\/embed$",m:"i"},{s:"^http:\\/\\/imgur\\.com\\/",m:"i"},{s:"^https:\\/\\/imgur\\.com\\/t\\/[a-zA-Z0-9\\-_&]+\\/(\\w+).*",m:"i"},{s:"^https:\\/\\/imgur\\.com\\/topic\\/[a-zA-Z0-9\\-_&]+\\/(\\w+).*",m:"i"},{s:"^https?:\\/\\/instagram\\.com\\/(.+)$",m:"i"},{s:"^https?:\\/\\/(?:www\\.)?instagram\\.com\\/[a-zA-Z0-9\\._]+\\/?(?:\\?.*)?$",m:"i"},{s:"^https?:\\/\\/(?:www\\.)?instagram\\.com\\/([a-zA-Z0-9\\._]+)\\/?(?:\\?.*)?$",m:"i"},{s:"^https?:\\/\\/\\w+\\.invisionapp\\.com\\/share\\/",m:"i"},{s:"^https?:\\/\\/(\\w+)\\.irisconnect\\.com\\/embed_sessions\\/new\\?id=(\\d+)",m:"i"},{s:"^https:\\/\\/www\\.jotform\\.com\\/\\?utm_source=unknown&utm_medium=form&utm_campaign=form\\-deleted$",m:"i"},{s:"^https?:\\/\\/jwp\\.io\\/s\\/",m:"i"},{s:"^https?:\\/\\/embed\\.kahoot\\.it\\/([a-zA-Z\\d-]+)",m:"i"},{s:"^https?:\\/\\/create\\.kahoot\\.it\\/share\\/(?:[a-zA-Z\\d-]+)\\/([a-zA-Z\\d-]+)",m:"i"},{s:"^https?:\\/\\/create\\.kahoot\\.it\\/details\\/([a-zA-Z\\d-]+)",m:"i"},{s:"^https?:\\/\\/play\\.kahoot\\.it\\/v2\\/\\?quizId=([a-zA-Z\\d-]+)",m:"i"},{s:"^https?:\\/\\/\\w+\\.kaltura\\.com\\/index\\.php\\/extwidget\\/preview\\/partner_id\\/(\\d+)\\/uiconf_id\\/(\\d+)\\/entry_id\\/([a-zA-Z0-9_]+)",m:"i"},{s:"^https?:\\/\\/\\w+\\.kaltura\\.com\\/index\\.php\\/kwidget\\/wid\\/_(\\d+)\\/uiconf_id\\/(\\d+)\\/entry_id\\/([a-zA-Z0-9_]+)",m:"i"},{s:"^https?:\\/\\/\\w+\\.kaltura\\.com\\/html5\\/html5lib\\/v[0-9\\.]+\\/[a-zA-Z]+\\.php\\/p\\/(\\d+)\\/uiconf_id\\/(\\d+)\\/entry_id\\/([a-zA-Z0-9_]+)",m:"i"},{s:"^https?:\\/\\/\\w+\\.kaltura\\.com\\/p\\/\\d+\\/sp\\/\\d+\\/embedIframeJs\\/uiconf_id\\/(\\d+)\\/partner_id\\/(\\d+)\\?.+&entry_id=([a-zA-Z0-9_]+)",m:"i"},{s:"^https?:\\/\\/(?:www\\.)?(ladbible|pretty52|sportbible|tyla)\\.com\\/brightcove\\-iframe\\.html\\?videoId=(\\d+)",m:"i"},{s:"^https?:\\/\\/(?:www\\.)?(ladbible|pretty52|sportbible|tyla)\\.com\\/brightcove\\-iframe\\.html\\?videoId=(ref\\:[a-zA-Z0-9]+)",m:"i"},{s:"^https?:\\/\\/html5\\-player\\.libsyn\\.com\\/embed\\/episode\\/id\\/(\\d+)\\/",m:"i"},{s:"^https?:\\/\\/link\\.brightcove\\.com\\/services\\/player\\/bcpid(\\d+)",m:"i"},{s:"^https?:\\/\\/link\\.brightcove\\.co.jp\\/services\\/player\\/bcpid(\\d+)",m:"i"},{s:"^https?:\\/\\/[a-z\\-]+\\.\\w+\\.(com|org|net|co|)\\/services\\/player\\/bcpid(\\d+)",m:"i"},{s:"^https?:\\/\\/([a-zA-Z0-9\\-]+)\\.liveblog\\.pro\\/([a-zA-Z0-9\\-]+)\\/blogs\\/([a-zA-Z0-9]+)\\/index\\.html",m:"i"},{s:"^https?:\\/\\/liveblog\\-embed\\.schibsted\\.tech\\/v\\d\\/\\w+\\/liveblogs\\/\\d+",m:"i"},{s:"^https?:\\/\\/www\\.itemfix\\.com\\/v\\?t=([_a-zA-Z0-9]+)",m:"i"},{s:":\\/\\/loom\\.com",m:"i"},{s:"^https?:\\/\\/(www|app)\\.lucidchart\\.com\\/documents\\/(view|edit|embeddedchart)\\/([a-zA-Z0-9\\-]+)\\/?\\??(?:.+)?",m:"i"},{s:"^https?:\\/\\/lucid\\.(app)\\/documents\\/(embeddedchart)\\/([a-zA-Z0-9\\-]+)\\/?",m:"i"},{s:"^https?:\\/\\/(www|app)\\.lucidchart\\.com\\/(lucidchart)\\/([a-zA-Z0-9\\-]+)\\/(?:view|edit)",m:"i"},{s:"^https?:\\/\\/lucid\\.(app)\\/(lucidchart)\\/([a-zA-Z0-9\\-]+)\\/(?:view|edit)",m:"i"},{s:":\\/\\/mapquest\\.com",m:"i"},{s:"^https?:\\/\\/dynamic\\.maps4news\\.com\\/?\\?id=([a-zA-Z0-9]+)",m:"i"},{s:"^https:\\/\\/[a-zA-Z0-9\\.\\-]+\\/@[a-zA-Z0-9\\.\\-\\_]+\\/\\d+",m:"i"},{s:"^https:\\/\\/[a-zA-Z0-9\\.\\-]+\\/users\\/[a-zA-Z0-9\\.\\-\\_]+\\/statuses\\/\\d+",m:"i"},{s:"^https?:\\/\\/(?:www\\.)?(menti).com\\/[a-zA-A-0-9]+\\/?(?:\\?.+)?$",m:"i"},{s:"^https?:\\/\\/(?:www\\.)?(mentimeter).com\\/(?:public|embed|s)\\/([a-zA-A-0-9]+(?:\\/[a-zA-A-0-9]+)?)",m:"i"},{s:"^https?:\\/\\/[^\\.]+\\.microsoftstream\\.com\\/",m:"i"},{s:"^https?:\\/\\/www\\.milliyet\\.com\\.tr\\/\\w+\\-tv\\/",m:"i"},{s:"^https?:\\/\\/(?:www\\.)?mlb\\.com(?:\\/\\w+)?\\/video\\/([a-zA-Z0-9\\-]+)(?:\\?.+)?$",m:"i"},{s:"^https?:\\/\\/m\\.mlb\\.com\\/shared\\/video\\/embed\\/embed\\.html\\?content_id=(\\d+)&?(?:&amp;)?topic_id=(\\d+)",m:""},{s:"^https?:\\/\\/(?:www\\.)?mlb\\.com(?:\\/\\w+)?\\/video\\/share\\/[a-zA-Z0-9\\-]+(\\/c\\-\\d+)",m:""},{s:"^https?:\\/\\/(?:www\\.)?(mlssoccer|atlutd|chicagofirefc|coloradorapids|columbuscrew|dcunited|fcdallas|houstondynamofc|lagalaxy|mnufc|cfmontreal|revolutionsoccer|nycfc|newyorkredbulls|orlandocitysc|philadelphiaunion|timbers|rsl|sjearthquakes|soundersfc|sportingkc|torontofc|whitecapsfc)\\.(com|ca|net)\\/(?:fr\\/)?(post|video)\\/",m:"i"},{s:"^https?:\\/\\/modeanalytics\\.com\\/(?:editor\\/)?([a-zA-Z0-9\\.\\-]+)\\/reports\\/([a-zA-Z0-9]+)(\\/runs\\/[a-zA-Z0-9]+)?(\\/embed)?\\/?(?:\\?.+)?$",m:"i"},{s:"^https?:\\/\\/app.mode\\.com\\/(?:editor\\/)?([a-zA-Z0-9\\.\\-]+)\\/reports\\/([a-zA-Z0-9]+)(\\/runs\\/[a-zA-Z0-9]+)?(\\/embed)?\\/?(?:\\?.+)?$",m:"i"},{s:"^https?:\\/\\/(?:www\\.)?momento360\\.com\\/e\\/u\\/([a-zA-Z0-9]+)(?:\\?[^\\?]+)?$",m:"i"},{s:"^https?:\\/\\/mp3\\.zing\\.vn\\/([a-zA-Z-]+)\\/[0-9a-zA-Z-]+\\/(\\w+)\\.html",m:"i"},{s:"^https?:\\/\\/(?:www\\.)?msnbc\\.com\\/([a-zA-Z0-9-]+\\/)?(?:episodes\\/)?watch\\/",m:"i"},{s:"https?:\\/\\/\\w+\\.mtv\\.com\\/video\\-(clips|collections|playlists)\\/",m:"i"},{s:"^https?:\\/\\/media\\.mtvnservices\\.com\\/embed\\/mgid:arc:video:([0-9a-zA-Z\\-\\.]+):([0-9a-zA-Z\\-]+)(?:\\?+)?",m:"i"},{s:":\\/\\/music\\.yandex\\.ru",m:"i"},{s:"^https?:\\/\\/live.myvrspot\\.com\\/iframe\\?v=[a-zA-Z0-9]",m:"i"},{s:"^https?:\\/\\/app\\.nearpod\\.com\\/(?:presentation\\/?)?\\?pin=",m:"i"},{s:"^https?:\\/\\/share\\.nearpod\\.com\\/[a-zA-Z0-9]+$",m:"i"},{s:"https?:\\/\\/(?:www\\.)?nhl\\.com(?:\\/\\w+)?\\/video\\/(?:[a-zA-Z0-9\\-]+\\/)?c\\-(\\d+)",m:"i"},{s:"^https?:\\/\\/(?:www\\.)?norgeskart\\.no\\/#!\\?",m:""},{s:"^https?:\\/\\/www\\.npr\\.org\\/event\\/\\w+\\/\\d+\\/",m:"i"},{s:"^https?:\\/\\/valgresultater\\.ntb\\-it\\.com\\/widget\\/",m:"i"},{s:"^https:\\/\\/stories\\.nws\\.ai\\/",m:"i"},{s:"^https?:\\/\\/(?:www\\.)?omnivirt\\.com\\/(view|campaign)\\/(\\d+)",m:"i"},{s:"^https?:\\/\\/omny\\.fm\\/shows\\/([^\\/]+\\/[^\\/]+)\\/embed(\\/?\\?[^\\/\\?]+)?$",m:"i"},{s:"^https?:\\/\\/omny\\.fm\\/shows\\/([^\\/]+\\/[^\\/]+)(\\/?\\?[^\\/\\?]+)?$",m:"i"},{s:"^https?:\\/\\/omny\\.fm\\/shows\\/([^\\/]+)\\/playlists\\/([a-zA-Z0-9\\-]+)\\/embed",m:"i"},{s:"^(https?:\\/\\/omny\\.fm\\/shows\\/[^\\/]+\\/playlists\\/podcast)\\/?(?:\\?[^\\/\\?]+)?$",m:"i"},{s:":\\/\\/oprah\\.com",m:"i"},{s:"^https?:\\/\\/overflow.io\\/(?:s|embed)?\\/[a-zA-Z0-9]+(?:\\/?\\?node=)?",m:""},{s:"^https?:\\/\\/www\\.pbs\\.org\\/(?!video)",m:"i"},{s:"^https?:\\/\\/player\\.pbs\\.org\\/partnerplayer\\/[a-zA-Z0-9\\-]+(?:==|%3D%3D)",m:"i"},{s:"^https?:\\/\\/(video|player)\\.pbs\\.org\\/widget\\/partnerplayer\\/\\d+",m:"i"},{s:"^https?:\\/\\/player\\.pbs\\.org\\/viralplayer\\/\\d+",m:"i"},{s:"^https?:\\/\\/www\\.pbs\\.org\\/video\\/(\\d+)\\/",m:"i"},{s:"^https?:\\/\\/www\\.pbs\\.org\\/video\\/([a-zA-Z0-9\\-]+)\\/",m:"i"},{s:"^https?:\\/\\/video\\.\\w+\\.\\w+\\/video\\/([a-zA-Z0-9\\-]+)\\/?(?:\\?.+)?$",m:"i"},{s:"^https?:\\/\\/app\\.pitch\\.com\\/app\\/public\\/presentation\\/([a-zA-Z-0-9\\-]+)",m:"i"},{s:"^https?:\\/\\/app\\.pitch\\.com\\/app\\/embed\\/([a-zA-Z-0-9\\-]+)",m:"i"},{s:"^https?:\\/\\/app\\.pitch\\.com\\/app\\/presentation\\/[a-zA-Z-0-9\\-]+\\/([a-zA-Z-0-9\\-]+)",m:"i"},{s:"^https?:\\/\\/player.ooyala\\.com\\/(?:t|i)frame\\.html\\?",m:"i"},{s:"^https?:\\/\\/player\\.ooyala\\.com\\/(.+\\/)iframe\\.html",m:"i"},{s:":\\/\\/player\\.theplatform\\.com",m:"i"},{s:"^https?:\\/\\/plot\\.ly\\/(?:~|%7E)([a-zA-Z0-9\\.]+)\\/(\\d+)",m:"i"},{s:"^https?:\\/\\/(?:[a-zA-Z0-9-\\.]+)?plotly\\.com\\/(?:~|%7E)([a-zA-Z0-9\\.]+)\\/(\\d+)",m:"i"},{s:"^https?:\\/\\/(?:www\\.)?podbean\\.com\\/media\\/share\\/pb\\-([a-zA-Z0-9\\\\-]+)",m:""},{s:"^https?:\\/\\/podcasts\\.apple\\.com\\/(\\w+\\/podcast\\/[^\\/]+\\/id\\d+)(\\?i=\\d+)?",m:"i"},{s:"^https?:\\/\\/podcasts\\.apple\\.com\\/(podcast\\/id\\d+)",m:"i"},{s:"^https?:\\/\\/[_a-zA-Z0-9]+\\.podigee\\.io\\/[_\\-a-zA-Z0-9]+\\/embed",m:"i"},{s:"^https?:\\/\\/app\\.powerbi\\.com\\/view\\?r=([a-zA-Z0-9%_-]+)",m:"i"},{s:"^https?:\\/\\/(?:www\\.)?powtoon\\.com\\/online\\-presentation\\/([a-zA-Z0-9\\.\\-_]+)\\/?",m:"i"},{s:"^https?:\\/\\/(?:www\\.)?powtoon\\.com\\/p\\/([a-zA-Z0-9\\.\\-_]+)\\/?",m:"i"},{s:"^https?:\\/\\/prezi\\.com\\/(view\\/[a-zA-Z0-9_-]+)\\/?",m:"i"},{s:"^https?:\\/\\/prezi\\.com\\/(p\\/[a-zA-Z0-9_-]+)\\/",m:"i"},{s:"^https?:\\/\\/prezi\\.com\\/p\\/edit\\/[a-zA-Z0-9_-]+\\/",m:"i"},{s:"^https?:\\/\\/www\\.proprofs\\.com\\/games\\/",m:"i"},{s:"^https?:\\/\\/www\\.proprofsgames\\.com\\/",m:"i"},{s:"^https?:\\/\\/www\\.proprofs\\.com\\/quiz\\-school\\/(?:[a-z]+\\/)?(?:[a-z-]+)\\.php\\?title=",m:"i"},{s:"^https?:\\/\\/public\\.tableau\\.com\\/views\\/([^\\/]+)\\/([^\\/\\?#]+)",m:"i"},{s:"^https?:\\/\\/public\\.tableau\\.com\\/profile\\/[^\\/\\?#!]+#!\\/vizhome\\/([^\\/]+)\\/([^\\/\\?#]+)",m:"i"},{s:"^https?:\\/\\/public\\.tableau\\.com\\/profile\\/publish\\/([^\\/]+)\\/([^\\/\\?#]+)",m:"i"},{s:"^https?:\\/\\/public\\.tableau\\.com\\/shared\\/([a-zA-Z0-9_]+)",m:"i"},{s:"^https?:\\/\\/(?:www\\.)?(?:qzzr|boombox)\\.com\\/widget\\/quiz\\/(\\w+)",m:"i"},{s:"^https?:\\/\\/(?:www\\.)?(?:qzzr|boombox)\\.com\\/c\\/(quiz)\\/(\\w+)(?:\\/[a-zA-Z0-9\\-]+)?",m:"i"},{s:"^https?:\\/\\/(?:www\\.)?(?:qzzr|boombox)\\.com\\/c\\/(poll)\\/([a-zA-Z0-9\\-]+)",m:"i"},{s:"^https?:\\/\\/(?:[a-zA-Z0-9]+\\.)?radio\\.com\\/media\\/audio\\-channel\\/",m:"i"},{s:"^https?:\\/\\/(?:\\w+\\.)audacy\\.com\\/media\\/audio\\-channel\\/",m:"i"},{s:"^https?:\\/\\/www\\.realclearpolitics\\.com\\/videos?\\/",m:"i"},{s:"^https?:\\/\\/(?:miro|realtimeboard)\\.com\\/app\\/board\\/",m:"i"},{s:"^https?:\\/\\/sharevideo\\.redbull\\.com\\/rbup\\/embed\\.html",m:"i"},{s:"^https?:\\/\\/sharevideo\\.redbull\\.com\\/vjs\\/index\\.html",m:"i"},{s:"^https?:\\/\\/(?:www\\.)?redbull\\.com\\/\\w+\\-\\w+\\/tv\\/(?:embed\\/)?video\\/\\w+\\-[a-zA-Z0-9]+\\/",m:"i"},{s:"^https?:\\/\\/(?:www\\.)?redbull\\.com\\/embed\\/\\w+:content:",m:"i"},{s:":\\/\\/reverbnation\\.com",m:"i"},{s:"^https?:\\/\\/(?:\\w+\\.)?(rsi|srf|rts|rtr)\\.ch\\/play\\/(tv|radio)\\/[^\\?]+\\?(?:id|urn)=",m:"i"},{s:"^https?:\\/\\/(?:\\w+\\.)?(swi)ssinfo\\.ch\\/play\\/tv\\/[^\\?]+\\?(?:id|urn)=",m:"i"},{s:":\\/\\/rt\\.com",m:"i"},{s:"^https?:\\/\\/(?:cdn\\.)?rudo\\.video\\/vod\\/([a-zA-Z0-9\\-]+)(?:\\?.+)?$",m:"i"},{s:":\\/\\/runkit\\.com",m:"i"},{s:"^https?:\\/\\/scratch\\.mit\\.edu\\/projects\\/(\\d+)",m:"i"},{s:"^https?:\\/\\/(?:www\\.)?sharepresentation\\.com\\/(?:[a-zA-Z\\d]+)\\/(?:[a-zA-Z\\d-]+)",m:"i"},{s:"^https?:\\/\\/platform\\.shoutout\\.so\\/([^\\/]+)\\/?(?:\\?.+)?$",m:"i"},{s:"^https?:\\/\\/\\w+\\.(com|net)\\/watch\\/$",m:"i"},{s:"^https?:\\/\\/www\\.smugmug\\.com\\/gallery\\/n\\-([a-zA-Z0-9]+)\\/?(?:[^\\/]+)?$",m:"i"},{s:"^https?:\\/\\/www\\.smugmug\\.com\\/gallery\\/n\\-([a-zA-Z0-9]+)(\\/i\\-[a-zA-Z0-9]+)?",m:"i"},{s:"^https?:\\/\\/[^\\/]+\\/frame\\/slideshow\\/?\\?key=([a-zA-Z0-9]+)&",m:"i"},{s:"^https:\\/\\/snack\\.expo\\.io\\/(@[a-zA-Z0-9]+\\/[^\\/\\?]+)",m:"i"},{s:"^https?:\\/\\/(?:www\\.)?snopes\\.com\\/",m:"i"},{s:"^https?:\\/\\/www\\.sporcle\\.com\\/framed\\/\\?",m:"i"},{s:"^https?:\\/\\/www\\.sporcle\\.com\\/games\\/[^\\/]+\\/[^\\/]+",m:"i"},{s:"^https?:\\/\\/(?:cc\\.)?sporttube\\.com\\/embed\\/([a-z0-9\\-]+)",m:"i"},{s:"^https?:\\/\\/embed\\.spotify\\.com",m:"i"},{s:"^https?:\\/\\/open\\.spotify\\.com\\/embed",m:"i"},{s:"^https?:\\/\\/open\\.spotify\\.com\\/(?:track|album|artist|show|episode|playlist)",m:"i"},{s:"^https?:\\/\\/stand\\.fm\\/episodes\\/([A-Za-z\\d]+)",m:"i"},{s:"^https?:\\/\\/www\\.starwars\\.com\\/videos?\\/",m:"i"},{s:"^https:\\/\\/www\\.stitcher\\.com\\/show\\/[a-z0-9A-Z-]+",m:"i"},{s:"^https:\\/\\/store\\.barstoolsports\\.com\\/(?:products|collections)\\/",m:"i"},{s:"^https?:\\/\\/t\\.me\\/([a-zA-Z0-9_]+\\/\\d+)(?:\\?.+)?$",m:"i"},{s:":\\/\\/tf1\\.fr",m:"i"},{s:"^https?:\\/\\/(?:listen\\.)?tidal\\.com\\/(?:browse\\/)?(album|track|video|playlist)\\/(\\d+)",m:"i"},{s:"^https?:\\/\\/(?:listen\\.)?tidal\\.com\\/(?:browse\\/)?(album|track|video|playlist)\\/([a-zA-Z0-9\\-]+)",m:"i"},{s:"^https?:\\/\\/(?:www|t)?\\.?tiktok\\.com\\/(?:i18n\\/)?share\\/video\\/(\\d+)",m:"i"},{s:"^https?:\\/\\/(?:www|t)?\\.?tiktok\\.com\\/@[^\\/]+\\/video\\/(\\d+)",m:"i"},{s:"^https?:\\/\\/time\\.graphics\\/line\\/(\\d+)\\/?",m:"i"},{s:"^https?:\\/\\/www\\.today\\.com\\/video\\/([^\\/\\?]+\\d+)",m:"i"},{s:"^https?:\\/\\/www\\.today\\.com\\/video\\/(today\\/\\d+)",m:"i"},{s:":\\/\\/tradingeconomics\\.com",m:"i"},{s:"^https?:\\/\\/trello\\.com\\/(c|b)\\/([a-zA-Z0-9\\-]+)",m:"i"},{s:"^https?:\\/\\/tunein\\.com\\/",m:"i"},{s:"^https?:\\/\\/tv\\.sohu\\.com\\/v\\/([a-zA-Z0-9\\-=]+)\\.html",m:"i"},{s:"^https?:\\/\\/tv\\.sohu\\.com\\/\\d+\\/n\\d+\\.shtml",m:"i"},{s:"^https?:\\/\\/[a-zA-Z0-9\\-]+\\.typeform\\.com\\/to\\/([a-zA-Z0-9]+)",m:"i"},{s:"^https?:\\/\\/unsplash\\.com\\/photos\\/[a-zA-Z0-9]+\\/?",m:"i"},{s:"^https?:\\/\\/(?:www\\.)?ustream\\.tv\\/channel\\/([a-zA-Z0-9]+)",m:"i"},{s:"^https?:\\/\\/embed\\.vevo\\.com\\/?\\?isrc=([a-zA-Z0-9]+)",m:"i"},{s:"^https?:\\/\\/s?cache\\.vevo\\.com\\/assets\\/html\\/embed\\.html\\/?\\?video=([a-zA-Z0-9]+)",m:"i"},{s:"^https?:\\/\\/www\\.vgtv\\.no\\/(?:#!\\/)?video\\/(\\d+)\\/?",m:"i"},{s:"^https?:\\/\\/www\\.vgtv\\.no\\/embed\\/?\\?id=(\\d+)",m:"i"},{s:"^https:\\/\\/www\\.vice\\.com\\/stories\\/(?:amp\\/)?",m:"i"},{s:"^https?:\\/\\/video\\.vice\\.com\\/([a-zA-Z_\\-]+)\\/embed(?:\\/video\\/[a-zA-Z0-9_\\-]+)?\\/([a-z0-9A-Z]+)",m:"i"},{s:"^https?:\\/\\/video\\.corriere\\.it\\/[^\\/]+\\/([a-zA-Z0-9]+\\-[a-zA-Z0-9]+\\-[a-zA-Z0-9]+\\-[a-zA-Z0-9]+\\-[a-zA-Z0-9]+)",m:"i"},{s:"^https?:\\/\\/(?:\\w+\\.)?video\\.repubblica\\.it\\/([a-zA-Z0-9-])+",m:"i"},{s:"^https?:\\/\\/(?:m|new\\.)?vk\\.com\\/video",m:"i"},{s:"^https?:\\/\\/(?:www\\.)??vlive\\.tv\\/post\\/[\\d-]+",m:"i"},{s:"^https?:\\/\\/(?:www\\.)?vlive\\.tv\\/video\\/(\\d+)",m:"i"},{s:"^https?:\\/\\/vocaroo\\.com\\/([a-zA-Z0-9]+)",m:"i"},{s:"^https?:\\/\\/[a-zA-Z0-9\\-]+\\.votenow\\.tv(?:\\?.+)?$",m:""},{s:"^https?:\\/\\/(?:www\\.)?wattpad\\.com\\/(?:story\\/)?(\\d+)-[a-z0-9\\-]+",m:"i"},{s:"https?:\\/\\/www1?\\.wdr\\.de\\/video\\-",m:"i"},{s:"https:?\\/\\/www\\.planet-wissen\\.de\\/video\\-",m:"i"},{s:":\\/\\/web\\.tv",m:"i"},{s:"^https?:\\/\\/www\\.webatlas\\.no\\/mediakart\\/static\\/urlmaps\\/mediakart\\-iframe\\/iframeembed\\.html\\?",m:"i"},{s:"^https:\\/\\/whimsical.com\\/[a-zA-Z0-9\\-]+\\/?(?:\\?.*)?$",m:"i"},{s:"https:\\/\\/\\w+\\.(wikipedia|wikimedia|wiktionary)\\.org\\/wiki\\/.+",m:"i"},{s:"https:\\/\\/\\w+\\.m\\.(wikipedia|wikimedia|wiktionary)\\.org\\/.+",m:"i"},{s:":\\/\\/windy\\.com",m:"i"},{s:"^https?:\\/\\/(?:www\\.)?(wnyc|wqxr|newsounds|wnycstudios|thegreenespace)\\.org\\/(story)\\/([^\\/]+)",m:"i"},{s:"^https?:\\/\\/(?:www\\.)?(wnyc|wqxr|newsounds|wnycstudios|thegreenespace)\\.org\\/podcasts\\/[^\\/]+\\/(episodes|articles)\\/([^\\/]+)",m:"i"},{s:"^https?:\\/\\/(?:www\\.)?(wnyc|wqxr|newsounds|wnycstudios|thegreenespace)\\.org\\/(?:#!\\/)?",m:""},{s:"^https?:\\/\\/([a-zA-Z0-9\\-]+)\\.wufoo(\\.(?:com?\\.)?[a-z]+)\\/forms\\/[a-zA-Z0-9\\.\\-]+",m:"i"},{s:":\\/\\/yahoo\\.com",m:"i"},{s:"https?:\\/\\/[\\w\\.]+yahoo\\.com\\/gma\\/",m:"i"},{s:"^https?:\\/\\/music\\.youtube\\.com\\/(channel\\/|watch|playlist)",m:"i"},{s:"^https?:\\/\\/www\\.youtube\\.com\\/embed\\/videoseries\\?list=([\\-_a-zA-Z0-9]+)",m:"i"},{s:"^https?:\\/\\/www([0-9]+)\\.zippyshare\\.com\\/v\\/([a-zA-Z0-9]+)\\/file\\.html",m:"i"},{s:":\\/\\/photos\\.google\\.com",m:"i"},{s:":\\/\\/drive\\.google\\.com",m:"i"},{s:":\\/\\/vr\\.google\\.com",m:"i"},{s:":\\/\\/poly\\.google\\.com",m:"i"},{s:":\\/\\/www\\.youtube\\.com",m:"i"},{s:":\\/\\/.+\\.facebook\\.com",m:"i"},{s:":\\/\\/.+\\.amazon\\.com",m:"i"},{s:":\\/\\/.+\\.yahoo\\.com",m:"i"},{s:":\\/\\/.+\\.live\\.com",m:"i"},{s:":\\/\\/.+\\.reddit\\.com",m:"i"},{s:":\\/\\/.+\\.microsoft\\.com",m:"i"},{s:":\\/\\/forms\\.microsoft\\.com",m:"i"},{s:":\\/\\/customervoice\\.microsoft\\.com",m:"i"},{s:":\\/\\/vk\\.com",m:"i"},{s:":\\/\\/.+\\.instagram\\.com",m:"i"},{s:":\\/\\/forms\\.office\\.com",m:"i"},{s:":\\/\\/sway\\.office\\.com",m:"i"},{s:":\\/\\/clips\\.twitch\\.tv",m:"i"},{s:":\\/\\/.+\\.twitch\\.tv",m:"i"},{s:":\\/\\/.+\\.naver\\.com",m:"i"},{s:":\\/\\/.+\\.itunes\\.apple\\.com",m:"i"},{s:":\\/\\/spark\\.adobe\\.com",m:"i"},{s:":\\/\\/trailers\\.apple\\.com",m:"i"},{s:":\\/\\/music\\.apple\\.com",m:"i"},{s:":\\/\\/tv\\.apple\\.com",m:"i"},{s:":\\/\\/.+\\.twitter\\.com",m:"i"},{s:":\\/\\/stock\\.adobe\\.com",m:"i"},{s:":\\/\\/video\\.yandex\\.ru",m:"i"},{s:":\\/\\/yandex\\.ru",m:"i"},{s:":\\/\\/.+\\.aparat\\.com",m:"i"},{s:":\\/\\/aparat\\.com",m:"i"},{s:":\\/\\/apple\\.com",m:"i"},{s:":\\/\\/.+\\.ok\\.ru",m:"i"},{s:":\\/\\/.+\\.nytimes\\.com",m:"i"},{s:":\\/\\/.+\\.spotify\\.com",m:"i"},{s:":\\/\\/www\\.canva\\.com",m:"i"},{s:":\\/\\/bbc\\.com",m:"i"},{s:":\\/\\/.+\\.imgur\\.com",m:"i"},{s:":\\/\\/edition\\.cnn\\.com",m:"i"},{s:":\\/\\/.+\\.cnn\\.com",m:"i"},{s:":\\/\\/.+\\.detik\\.com",m:"i"},{s:":\\/\\/.+\\.pixnet\\.net",m:"i"},{s:":\\/\\/.+\\.tradingview\\.com",m:"i"},{s:":\\/\\/.+\\.soundcloud\\.com",m:"i"},{s:":\\/\\/www\\.tiktok\\.com",m:"i"},{s:":\\/\\/.+\\.bbc\\.co\\.uk",m:"i"},{s:":\\/\\/.+\\.indiatimes\\.com",m:"i"},{s:":\\/\\/video\\.foxnews\\.com",m:"i"},{s:":\\/\\/video\\.latino\\.foxnews\\.com",m:"i"},{s:":\\/\\/vimeo\\.com",m:"i"},{s:":\\/\\/docs\\.zoho\\.com",m:"i"},{s:":\\/\\/video\\.varzesh3\\.com",m:"i"},{s:":\\/\\/sheet\\.zoho\\.com",m:"i"},{s:":\\/\\/www\\.cnet\\.com",m:"i"},{s:":\\/\\/.+\\.slideshare\\.net",m:"i"},{s:":\\/\\/video\\.sindonews\\.com",m:"i"},{s:":\\/\\/telewebion\\.com",m:"i"},{s:":\\/\\/archive\\.org",m:"i"},{s:":\\/\\/.+\\.globo\\.com",m:"i"},{s:":\\/\\/realtor\\.com",m:"i"},{s:":\\/\\/www\\.behance\\.net",m:"i"},{s:":\\/\\/timeline\\.line\\.me",m:"i"},{s:":\\/\\/tv\\.line\\.me",m:"i"},{s:":\\/\\/www\\.nicovideo\\.jp",m:"i"},{s:":\\/\\/www\\.dailymotion\\.com",m:"i"},{s:":\\/\\/.+\\.box\\.com",m:"i"},{s:":\\/\\/.+\\.scribd\\.com",m:"i"},{s:":\\/\\/cricbuzz\\.com",m:"i"},{s:":\\/\\/actualidad\\.rt\\.com",m:"i"},{s:":\\/\\/.+\\.nicovideo\\.jp",m:"i"},{s:":\\/\\/yelp\\.com",m:"i"},{s:":\\/\\/.+\\.kakao\\.com",m:"i"},{s:":\\/\\/videonuz\\.ensonhaber\\.com",m:"i"},{s:":\\/\\/.+\\.ndtv\\.com",m:"i"},{s:":\\/\\/namasha\\.com",m:"i"},{s:":\\/\\/www\\.bloomberg\\.com",m:"i"},{s:":\\/\\/wsj\\.com",m:"i"},{s:":\\/\\/www\\.marca\\.com",m:"i"},{s:":\\/\\/nypost\\.com",m:"i"},{s:":\\/\\/.+\\.ria\\.ru",m:"i"},{s:":\\/\\/deviantart\\.com",m:"i"},{s:":\\/\\/.+\\.issuu\\.com",m:"i"},{s:":\\/\\/www\\.bhphotovideo\\.com",m:"i"},{s:":\\/\\/marketwatch\\.com",m:"i"},{s:":\\/\\/nbcnews\\.com",m:"i"},{s:":\\/\\/www\\.redbubble\\.com",m:"i"},{s:":\\/\\/cnnindonesia\\.com",m:"i"},{s:":\\/\\/giphy\\.com",m:"i"},{s:":\\/\\/hurriyet\\.com\\.tr",m:"i"},{s:":\\/\\/.+\\.vidio\\.com",m:"i"},{s:":\\/\\/cbssports\\.com",m:"i"},{s:":\\/\\/arcade\\.giphy\\.com",m:"i"},{s:":\\/\\/.+\\.ign\\.com",m:"i"},{s:":\\/\\/usnews\\.com",m:"i"},{s:":\\/\\/sketch\\.pixiv\\.net",m:"i"},{s:":\\/\\/pixiv\\.net",m:"i"},{s:":\\/\\/cnbcindonesia\\.com",m:"i"},{s:":\\/\\/www\\.ivi\\.ru",m:"i"},{s:":\\/\\/tv\\.kooora\\.com",m:"i"},{s:":\\/\\/milliyet\\.com\\.tr",m:"i"},{s:":\\/\\/www\\.kickstarter\\.com",m:"i"},{s:":\\/\\/storymaps\\.arcgis\\.com",m:"i"},{s:":\\/\\/.+\\.typeform\\.com",m:"i"},{s:":\\/\\/screencast\\.autodesk\\.com",m:"i"},{s:":\\/\\/knowledge\\.autodesk\\.com",m:"i"},{s:":\\/\\/.+\\.gyazo\\.com",m:"i"},{s:":\\/\\/cbsnews\\.com",m:"i"},{s:":\\/\\/.+\\.gamespot\\.com",m:"i"},{s:":\\/\\/.+\\.flickr\\.com",m:"i"},{s:":\\/\\/video\\.ibm\\.com",m:"i"},{s:":\\/\\/ft\\.cbsnews\\.com",m:"i"},{s:":\\/\\/.+\\.nhk\\.or\\.jp",m:"i"},{s:":\\/\\/.+\\.sputniknews\\.com",m:"i"},{s:":\\/\\/.+\\.bild\\.de",m:"i"},{s:":\\/\\/desmos\\.com",m:"i"},{s:":\\/\\/allrecipes\\.com",m:"i"},{s:":\\/\\/independent\\.co\\.uk",m:"i"},{s:":\\/\\/dribbble\\.com",m:"i"},{s:":\\/\\/.+\\.kp\\.ru",m:"i"},{s:":\\/\\/tv\\.sozcu\\.com\\.tr",m:"i"},{s:":\\/\\/.+\\.jotform\\.com",m:"i"},{s:":\\/\\/zeenews\\.india\\.com",m:"i"},{s:":\\/\\/haibunda\\.com",m:"i"},{s:":\\/\\/sporx\\.com",m:"i"},{s:":\\/\\/tv\\.kaskus\\.co\\.id",m:"i"},{s:":\\/\\/podcast\\.kaskus\\.co\\.id",m:"i"},{s:":\\/\\/.+\\.haberturk\\.com",m:"i"},{s:":\\/\\/.+\\.bandcamp\\.com",m:"i"},{s:":\\/\\/.+\\.rumble\\.com",m:"i"},{s:":\\/\\/purl\\.stanford\\.edu",m:"i"},{s:":\\/\\/b\\.hatena\\.ne\\.jp",m:"i"},{s:":\\/\\/figma\\.com",m:"i"},{s:":\\/\\/voda\\.donga\\.com",m:"i"},{s:":\\/\\/teespring\\.com",m:"i"},{s:":\\/\\/prezi\\.com",m:"i"},{s:":\\/\\/dalfak\\.com",m:"i"},{s:":\\/\\/.+\\.hatenablog\\.com",m:"i"},{s:":\\/\\/.+\\.ted\\.com",m:"i"},{s:":\\/\\/lefigaro\\.fr",m:"i"},{s:":\\/\\/bleacherreport\\.com",m:"i"},{s:":\\/\\/haberler\\.com",m:"i"},{s:":\\/\\/music\\.yandex\\.com",m:"i"},{s:":\\/\\/ieeetv\\.ieee\\.org",m:"i"},{s:":\\/\\/prnt\\.sc",m:"i"},{s:":\\/\\/app\\.seesaw\\.me",m:"i"},{s:":\\/\\/meetup\\.com",m:"i"},{s:":\\/\\/www\\.asahi\\.com",m:"i"},{s:":\\/\\/.+\\.microsoftstream\\.com",m:"i"},{s:":\\/\\/.+\\.nbcsports\\.com",m:"i"},{s:":\\/\\/www\\.cars\\.com",m:"i"},{s:":\\/\\/play\\.afreecatv\\.com",m:"i"},{s:":\\/\\/vod\\.afreecatv\\.com",m:"i"},{s:":\\/\\/webtv\\.un\\.org",m:"i"},{s:":\\/\\/.+\\.zee5\\.com",m:"i"},{s:":\\/\\/.+\\.time\\.com",m:"i"},{s:":\\/\\/www\\.tagesschau\\.de",m:"i"},{s:":\\/\\/1tv\\.ru",m:"i"},{s:":\\/\\/.+\\.louisvuitton\\.com",m:"i"},{s:":\\/\\/indiatoday\\.in",m:"i"},{s:":\\/\\/.+\\.fotor\\.com",m:"i"},{s:":\\/\\/tmz\\.com",m:"i"},{s:":\\/\\/ft\\.com",m:"i"},{s:":\\/\\/insertlive\\.com",m:"i"},{s:":\\/\\/video\\.corriere\\.it",m:"i"},{s:":\\/\\/.+\\.nasa\\.gov",m:"i"},{s:":\\/\\/iz\\.ru",m:"i"},{s:":\\/\\/www\\.thesun\\.co\\.uk",m:"i"},{s:":\\/\\/bitchute\\.com",m:"i"},{s:":\\/\\/events\\.sap\\.com",m:"i"},{s:":\\/\\/.+\\.gab\\.com",m:"i"},{s:":\\/\\/video\\.idnes\\.cz",m:"i"},{s:":\\/\\/mashable\\.com",m:"i"},{s:":\\/\\/trthaber\\.com",m:"i"},{s:":\\/\\/superhaber\\.tv",m:"i"},{s:":\\/\\/kino\\.idnes\\.cz",m:"i"},{s:":\\/\\/pbs\\.org",m:"i"},{s:":\\/\\/www\\.mathworks\\.com",m:"i"},{s:":\\/\\/.+\\.haber7\\.com",m:"i"},{s:":\\/\\/video\\.haber7\\.com",m:"i"},{s:":\\/\\/.+\\.sky\\.com",m:"i"},{s:":\\/\\/.+\\.videos\\.sapo\\.pt",m:"i"},{s:":\\/\\/streamable\\.com",m:"i"},{s:":\\/\\/deezer\\.com",m:"i"},{s:":\\/\\/ibb\\.co",m:"i"},{s:":\\/\\/interact-oembed\\.ap\\.org",m:"i"},{s:":\\/\\/video\\.sanook\\.com",m:"i"},{s:":\\/\\/.+\\.sapo\\.pt",m:"i"},{s:":\\/\\/.+\\.mlb\\.com",m:"i"},{s:":\\/\\/.+\\.mediaset\\.it",m:"i"},{s:":\\/\\/tv\\.idnes\\.cz",m:"i"},{s:":\\/\\/mirror\\.co\\.uk",m:"i"},{s:":\\/\\/www\\.express\\.co\\.uk",m:"i"},{s:":\\/\\/worldstarhiphop\\.com",m:"i"},{s:":\\/\\/.+\\.beinsports\\.com",m:"i"},{s:":\\/\\/today\\.com",m:"i"},{s:":\\/\\/.+\\.terra\\.com\\.br",m:"i"},{s:":\\/\\/codepen\\.io",m:"i"},{s:":\\/\\/www\\.jeuxvideo\\.com",m:"i"},{s:":\\/\\/video\\.vice\\.com",m:"i"},{s:":\\/\\/.+\\.abplive\\.com",m:"i"},{s:":\\/\\/zeit\\.de",m:"i"},{s:":\\/\\/.+\\.gfycat\\.com",m:"i"},{s:":\\/\\/vlog\\.xuite\\.net",m:"i"},{s:":\\/\\/nrk\\.no",m:"i"},{s:":\\/\\/english\\.alarabiya\\.net",m:"i"},{s:":\\/\\/ilmeteo\\.it",m:"i"},{s:":\\/\\/sport\\.es",m:"i"},{s:":\\/\\/video\\.foxbusiness\\.com",m:"i"},{s:":\\/\\/music\\.yandex\\.kz",m:"i"},{s:":\\/\\/yandex\\.kz",m:"i"},{s:":\\/\\/wordwall\\.net",m:"i"},{s:":\\/\\/.+\\.alarab\\.com",m:"i"},{s:":\\/\\/.+\\.islcollective\\.com",m:"i"},{s:":\\/\\/.+\\.slideserve\\.com",m:"i"},{s:":\\/\\/.+\\.iheart\\.com",m:"i"},{s:":\\/\\/.+\\.500px\\.com",m:"i"},{s:":\\/\\/yandex\\.by",m:"i"},{s:":\\/\\/rtve\\.es",m:"i"},{s:":\\/\\/music\\.yandex\\.by",m:"i"},{s:":\\/\\/.+\\.calameo\\.com",m:"i"},{s:":\\/\\/vesti\\.ru",m:"i"},{s:":\\/\\/repl\\.it",m:"i"},{s:":\\/\\/img\\.theqoo\\.net",m:"i"},{s:":\\/\\/msnbc\\.com",m:"i"},{s:":\\/\\/france24\\.com",m:"i"},{s:":\\/\\/.+\\.anchor\\.fm",m:"i"},{s:":\\/\\/tv\\.aftonbladet\\.se",m:"i"},{s:":\\/\\/.+\\.myschoolapp\\.com",m:"i"},{s:":\\/\\/.+\\.popsugar\\.com",m:"i"},{s:":\\/\\/public\\.tableau\\.com",m:"i"},{s:":\\/\\/.+\\.alamy\\.com",m:"i"},{s:":\\/\\/flipgrid\\.com",m:"i"},{s:":\\/\\/www\\.allocine\\.fr",m:"i"},{s:":\\/\\/kinopoisk\\.ru",m:"i"},{s:":\\/\\/shorts\\.flipgrid\\.com",m:"i"},{s:":\\/\\/weheartit\\.com",m:"i"},{s:":\\/\\/iq\\.com",m:"i"},{s:":\\/\\/elcomercio\\.pe",m:"i"},{s:":\\/\\/market\\.icook\\.tw",m:"i"},{s:":\\/\\/areena\\.yle\\.fi",m:"i"},{s:":\\/\\/sketchfab\\.com",m:"i"},{s:":\\/\\/icook\\.tw",m:"i"},{s:":\\/\\/elconfidencial\\.com",m:"i"},{s:":\\/\\/www\\.consumerreports\\.org",m:"i"},{s:":\\/\\/video\\.gazzetta\\.it",m:"i"},{s:":\\/\\/linternaute\\.fr",m:"i"},{s:":\\/\\/skillshare\\.com",m:"i"},{s:":\\/\\/plus\\.kinopoisk\\.ru",m:"i"},{s:":\\/\\/siriusxm\\.com",m:"i"},{s:":\\/\\/complex\\.com",m:"i"},{s:":\\/\\/zdnet\\.com",m:"i"},{s:":\\/\\/dlive\\.tv",m:"i"},{s:":\\/\\/.+\\.mixcloud\\.com",m:"i"},{s:":\\/\\/videos\\.bol\\.uol\\.com\\.br",m:"i"},{s:":\\/\\/ixigua\\.com",m:"i"},{s:":\\/\\/.+\\.voanews\\.com",m:"i"},{s:":\\/\\/www\\.cnnturk\\.com",m:"i"},{s:":\\/\\/airtable\\.com",m:"i"},{s:":\\/\\/.+\\.genial\\.ly",m:"i"},{s:":\\/\\/globalnews\\.ca",m:"i"},{s:":\\/\\/www\\.ifixit\\.com",m:"i"},{s:":\\/\\/.+\\.thechive\\.com",m:"i"},{s:":\\/\\/twitcasting\\.tv",m:"i"},{s:":\\/\\/videohive\\.net",m:"i"},{s:":\\/\\/hln\\.be",m:"i"},{s:":\\/\\/20minutos\\.es",m:"i"},{s:":\\/\\/docs\\.zoho\\.in",m:"i"},{s:":\\/\\/laprensagrafica\\.com",m:"i"},{s:":\\/\\/www\\.ntv\\.ru",m:"i"},{s:":\\/\\/.+\\.obozrevatel\\.com",m:"i"},{s:":\\/\\/av\\.lib\\.uh\\.edu",m:"i"},{s:":\\/\\/unesco\\.org",m:"i"},{s:":\\/\\/gazzetta\\.it",m:"i"},{s:":\\/\\/w3\\.org",m:"i"},{s:":\\/\\/20min\\.ch",m:"i"},{s:":\\/\\/.+\\.matterport\\.com",m:"i"},{s:":\\/\\/learningapps\\.org",m:"i"},{s:":\\/\\/odysee\\.com",m:"i"},{s:":\\/\\/edpuzzle\\.com",m:"i"},{s:":\\/\\/ryecast\\.ryerson\\.ca",m:"i"},{s:":\\/\\/www\\.ndr\\.de",m:"i"},{s:":\\/\\/showtv\\.com\\.tr",m:"i"},{s:":\\/\\/biteable\\.com",m:"i"},{s:":\\/\\/.+\\.smugmug\\.com",m:"i"},{s:":\\/\\/.+\\.nest\\.com",m:"i"},{s:":\\/\\/.+\\.tvp\\.pl",m:"i"},{s:":\\/\\/techrepublic\\.com",m:"i"},{s:":\\/\\/www\\.picmonkey\\.com",m:"i"},{s:":\\/\\/canalplus\\.com",m:"i"},{s:":\\/\\/www\\.nzherald\\.co\\.nz",m:"i"},{s:":\\/\\/screencast-o-matic\\.com",m:"i"},{s:":\\/\\/repository\\.duke\\.edu",m:"i"},{s:":\\/\\/vsco\\.co",m:"i"},{s:":\\/\\/.+\\.biteable\\.com",m:"i"},{s:":\\/\\/.+\\.panopto\\.com",m:"i"},{s:":\\/\\/.+\\.buzzsprout\\.com",m:"i"},{s:":\\/\\/spreaker\\.com",m:"i"},{s:":\\/\\/www\\.kanald\\.com\\.tr",m:"i"},{s:":\\/\\/animoto\\.com",m:"i"},{s:":\\/\\/clipchamp\\.com",m:"i"},{s:":\\/\\/tenor\\.com",m:"i"},{s:":\\/\\/.+\\.wistia\\.com",m:"i"},{s:":\\/\\/rutube\\.ru",m:"i"},{s:":\\/\\/crello\\.com",m:"i"},{s:":\\/\\/chefkoch\\.de",m:"i"},{s:":\\/\\/webtv\\.ac-versailles\\.fr",m:"i"},{s:":\\/\\/ifttt\\.com",m:"i"},{s:":\\/\\/video\\.disney\\.com",m:"i"},{s:":\\/\\/video\\.buffer\\.com",m:"i"},{s:":\\/\\/lynda\\.com",m:"i"},{s:":\\/\\/.+\\.perfil\\.com",m:"i"},{s:":\\/\\/.+\\.libsyn\\.com",m:"i"},{s:":\\/\\/barrons\\.com",m:"i"},{s:":\\/\\/matchtv\\.ru",m:"i"},{s:":\\/\\/.+\\.musescore\\.com",m:"i"},{s:":\\/\\/arte\\.tv",m:"i"},{s:":\\/\\/music\\.yandex\\.ua",m:"i"},{s:":\\/\\/audiomack\\.com",m:"i"},{s:":\\/\\/www\\.20minutes\\.fr",m:"i"},{s:":\\/\\/sheet\\.zoho\\.eu",m:"i"},{s:":\\/\\/.+\\.beatstars\\.com",m:"i"},{s:":\\/\\/.+\\.coda\\.io",m:"i"},{s:":\\/\\/srf\\.ch",m:"i"},{s:":\\/\\/theglobeandmail\\.com",m:"i"},{s:":\\/\\/dideo\\.ir",m:"i"},{s:":\\/\\/flipsnack\\.com",m:"i"},{s:":\\/\\/.+\\.beatport\\.com",m:"i"},{s:":\\/\\/seattletimes\\.com",m:"i"},{s:":\\/\\/otter\\.ai",m:"i"},{s:":\\/\\/www\\.health\\.com",m:"i"},{s:":\\/\\/video\\.sky\\.it",m:"i"},{s:":\\/\\/mixkit\\.co",m:"i"},{s:":\\/\\/.+\\.uservoice\\.com",m:"i"},{s:":\\/\\/jigsawplanet\\.com",m:"i"},{s:":\\/\\/videos\\.sapo\\.ao",m:"i"},{s:":\\/\\/ahaber\\.com\\.tr",m:"i"},{s:":\\/\\/.+\\.hudl\\.com",m:"i"},{s:":\\/\\/.+\\.univ-amu\\.fr",m:"i"},{s:":\\/\\/tv\\.gab\\.com",m:"i"},{s:":\\/\\/.+\\.hatenablog\\.jp",m:"i"},{s:":\\/\\/app\\.usertesting\\.com",m:"i"},{s:":\\/\\/usertesting\\.com",m:"i"},{s:":\\/\\/tokyvideo\\.com",m:"i"},{s:":\\/\\/.+\\.sketch\\.com",m:"i"},{s:":\\/\\/www\\.pearltrees\\.com",m:"i"},{s:":\\/\\/zloekino\\.su",m:"i"},{s:":\\/\\/www\\.internethaber\\.com",m:"i"},{s:":\\/\\/map\\.cam\\.ac\\.uk",m:"i"},{s:":\\/\\/www\\.fandango\\.com",m:"i"},{s:":\\/\\/lbry\\.tv",m:"i"},{s:":\\/\\/imgbox\\.com",m:"i"},{s:":\\/\\/.+\\.skyrock\\.com",m:"i"},{s:":\\/\\/bigstockphoto\\.com",m:"i"},{s:":\\/\\/lottiefiles\\.com",m:"i"},{s:":\\/\\/.+\\.alugha\\.com",m:"i"},{s:":\\/\\/news\\.sbs\\.co\\.kr",m:"i"},{s:":\\/\\/.+\\.ivoox\\.com",m:"i"},{s:":\\/\\/.+\\.wwe\\.com",m:"i"},{s:":\\/\\/.+\\.tsargrad\\.tv",m:"i"},{s:":\\/\\/coub\\.com",m:"i"},{s:":\\/\\/alugha\\.com",m:"i"},{s:":\\/\\/tamasha\\.com",m:"i"},{s:":\\/\\/videos\\.jornada\\.com\\.mx",m:"i"},{s:":\\/\\/tv\\.libertaddigital\\.com",m:"i"},{s:":\\/\\/www\\.eltiempo\\.es",m:"i"},{s:":\\/\\/video\\.mirtesen\\.ru",m:"i"},{s:":\\/\\/moddb\\.com",m:"i"},{s:":\\/\\/www\\.maxpreps\\.com",m:"i"},{s:":\\/\\/freesound\\.org",m:"i"},{s:":\\/\\/bursadabugun\\.com",m:"i"},{s:":\\/\\/docs\\.zohopublic\\.com",m:"i"},{s:":\\/\\/www\\.adorocinema\\.com",m:"i"},{s:":\\/\\/imagebam\\.com",m:"i"},{s:":\\/\\/dotabuff\\.com",m:"i"},{s:":\\/\\/www\\.authorstream\\.com",m:"i"},{s:":\\/\\/wakelet\\.com",m:"i"},{s:":\\/\\/www\\.reverbnation\\.com",m:"i"},{s:":\\/\\/.+\\.jwplayer\\.com",m:"i"},{s:":\\/\\/ambito\\.com",m:"i"},{s:":\\/\\/.+\\.sky\\.it",m:"i"},{s:":\\/\\/video\\.golem\\.de",m:"i"},{s:":\\/\\/eiga\\.com",m:"i"},{s:":\\/\\/pod\\.univ-lille\\.fr",m:"i"},{s:":\\/\\/sport\\.sky\\.it",m:"i"},{s:":\\/\\/docdroid\\.net",m:"i"},{s:":\\/\\/awesomescreenshot\\.com",m:"i"},{s:":\\/\\/.+\\.caracoltv\\.com",m:"i"},{s:":\\/\\/videos\\.doctissimo\\.fr",m:"i"},{s:":\\/\\/.+\\.tidal\\.com",m:"i"},{s:":\\/\\/ren\\.tv",m:"i"},{s:":\\/\\/.+\\.deseret\\.com",m:"i"},{s:":\\/\\/tv\\.estadao\\.com\\.br",m:"i"},{s:":\\/\\/pensador\\.com",m:"i"},{s:":\\/\\/online\\.anyflip\\.com",m:"i"},{s:":\\/\\/doctissimo\\.fr",m:"i"},{s:":\\/\\/.+\\.ualberta\\.ca",m:"i"},{s:":\\/\\/www\\.screencast\\.com",m:"i"},{s:":\\/\\/beyazperde\\.com",m:"i"},{s:":\\/\\/powr\\.io",m:"i"},{s:":\\/\\/www\\.computerworld\\.com",m:"i"},{s:":\\/\\/.+\\.picsart\\.com",m:"i"},{s:":\\/\\/chomikuj\\.pl",m:"i"},{s:":\\/\\/go\\.stitcher\\.com",m:"i"},{s:":\\/\\/stitcher\\.com",m:"i"},{s:":\\/\\/paperlesspost\\.com",m:"i"},{s:":\\/\\/banned\\.video",m:"i"},{s:":\\/\\/video\\.mthai\\.com",m:"i"},{s:":\\/\\/motortrend\\.com",m:"i"},{s:":\\/\\/stackshare\\.io",m:"i"},{s:":\\/\\/videa\\.hu",m:"i"},{s:":\\/\\/minutouno\\.com",m:"i"},{s:":\\/\\/www\\.sensacine\\.com",m:"i"},{s:":\\/\\/hbo\\.com",m:"i"},{s:":\\/\\/.+\\.panopto\\.eu",m:"i"},{s:":\\/\\/bravotv\\.com",m:"i"},{s:":\\/\\/play\\.anghami\\.com",m:"i"},{s:":\\/\\/prntscr\\.com",m:"i"},{s:":\\/\\/bloomberght\\.com",m:"i"},{s:":\\/\\/calcalist\\.co\\.il",m:"i"},{s:":\\/\\/.+\\.5-tv\\.ru",m:"i"},{s:":\\/\\/.+\\.livestream\\.com",m:"i"},{s:":\\/\\/.+\\.cognitoforms\\.com",m:"i"},{s:":\\/\\/wral\\.com",m:"i"},{s:":\\/\\/globes\\.co\\.il",m:"i"},{s:":\\/\\/app\\.zeplin\\.io",m:"i"},{s:":\\/\\/stackblitz\\.com",m:"i"},{s:":\\/\\/yourstory\\.com",m:"i"},{s:":\\/\\/eurosport\\.fr",m:"i"},{s:":\\/\\/mediatheque\\.univ-paris1\\.fr",m:"i"},{s:":\\/\\/.+\\.d\\.pr",m:"i"},{s:":\\/\\/fbi\\.gov",m:"i"},{s:":\\/\\/eurosport\\.ru",m:"i"},{s:":\\/\\/.+\\.wave\\.video",m:"i"},{s:":\\/\\/castbox\\.fm",m:"i"},{s:":\\/\\/infogram\\.com",m:"i"},{s:":\\/\\/.+\\.marvelapp\\.com",m:"i"},{s:":\\/\\/.+\\.fanpage\\.it",m:"i"},{s:":\\/\\/www\\.hungama\\.com",m:"i"},{s:":\\/\\/.+\\.milanote\\.com",m:"i"},{s:":\\/\\/br\\.de",m:"i"},{s:":\\/\\/www\\.svoboda\\.org",m:"i"},{s:":\\/\\/hearthis\\.at",m:"i"},{s:":\\/\\/tasty\\.co",m:"i"},{s:":\\/\\/www\\.gocomics\\.com",m:"i"},{s:":\\/\\/.+\\.smule\\.com",m:"i"},{s:":\\/\\/6play\\.fr",m:"i"},{s:":\\/\\/eda\\.ru",m:"i"},{s:":\\/\\/video\\.arnes\\.si",m:"i"},{s:":\\/\\/.+\\.voxmedia\\.com",m:"i"},{s:":\\/\\/www\\.cooperativa\\.cl",m:"i"},{s:":\\/\\/makecode\\.adafruit\\.com",m:"i"},{s:":\\/\\/listennotes\\.com",m:"i"},{s:":\\/\\/sport1\\.de",m:"i"},{s:":\\/\\/kkbox\\.com",m:"i"},{s:":\\/\\/.+\\.pingboard\\.com",m:"i"},{s:":\\/\\/toofab\\.com",m:"i"},{s:":\\/\\/producthunt\\.com",m:"i"},{s:":\\/\\/www\\.cio\\.com",m:"i"},{s:":\\/\\/tv\\.uqam\\.ca",m:"i"},{s:":\\/\\/24\\.hu",m:"i"},{s:":\\/\\/giantbomb\\.com",m:"i"},{s:":\\/\\/kit\\.co",m:"i"},{s:":\\/\\/.+\\.coggle\\.it",m:"i"},{s:":\\/\\/.+\\.getcloudapp\\.com",m:"i"},{s:":\\/\\/.+\\.simplecast\\.com",m:"i"},{s:":\\/\\/24tv\\.ua",m:"i"},{s:":\\/\\/.+\\.vidyard\\.com",m:"i"},{s:":\\/\\/www\\.military\\.com",m:"i"},{s:":\\/\\/magisto\\.com",m:"i"},{s:":\\/\\/pod\\.uphf\\.fr",m:"i"},{s:":\\/\\/codesandbox\\.io",m:"i"},{s:":\\/\\/.+\\.jsbin\\.com",m:"i"},{s:":\\/\\/www\\.m24\\.ru",m:"i"},{s:":\\/\\/raindrop\\.io",m:"i"},{s:":\\/\\/actionnetwork\\.org",m:"i"},{s:":\\/\\/rts\\.ch",m:"i"},{s:":\\/\\/videos\\.univ-grenoble-alpes\\.fr",m:"i"},{s:":\\/\\/elimparcial\\.com",m:"i"},{s:":\\/\\/indiatv\\.in",m:"i"},{s:":\\/\\/.+\\.u-bordeaux\\.fr",m:"i"},{s:":\\/\\/wittytv\\.it",m:"i"},{s:":\\/\\/joxi\\.ru",m:"i"},{s:":\\/\\/mediaflo\\.txstate\\.edu",m:"i"},{s:":\\/\\/cloudhq\\.net",m:"i"},{s:":\\/\\/eurosport\\.de",m:"i"},{s:":\\/\\/tvigle\\.ru",m:"i"},{s:":\\/\\/.+\\.brightcove\\.com",m:"i"},{s:":\\/\\/app\\.moqups\\.com",m:"i"},{s:":\\/\\/.+\\.kremlin\\.ru",m:"i"},{s:":\\/\\/antena3\\.com",m:"i"},{s:":\\/\\/www\\.thinglink\\.com",m:"i"},{s:":\\/\\/pcgameshardware\\.de",m:"i"},{s:":\\/\\/netzwelt\\.de",m:"i"},{s:":\\/\\/bigthink\\.com",m:"i"},{s:":\\/\\/360tv\\.ru",m:"i"},{s:":\\/\\/shonenjumpplus\\.com",m:"i"},{s:":\\/\\/brighteon\\.com",m:"i"},{s:":\\/\\/www\\.23hq\\.com",m:"i"},{s:":\\/\\/video\\.sibnet\\.ru",m:"i"},{s:":\\/\\/tonarinoyj\\.jp",m:"i"},{s:":\\/\\/joxi\\.net",m:"i"},{s:":\\/\\/.+\\.flourish\\.studio",m:"i"},{s:":\\/\\/tvnz\\.co\\.nz",m:"i"},{s:":\\/\\/tenor\\.co",m:"i"},{s:":\\/\\/www\\.quickmeme\\.com",m:"i"},{s:":\\/\\/read\\.bookcreator\\.com",m:"i"},{s:":\\/\\/la7\\.it",m:"i"},{s:":\\/\\/yasemin\\.com",m:"i"},{s:":\\/\\/www\\.mobypicture\\.com",m:"i"},{s:":\\/\\/.+\\.paperform\\.co",m:"i"},{s:":\\/\\/simplypsychology\\.org",m:"i"},{s:":\\/\\/www\\.filmstarts\\.de",m:"i"},{s:":\\/\\/dashburst\\.com",m:"i"},{s:":\\/\\/.+\\.ac-bordeaux\\.fr",m:"i"},{s:":\\/\\/www\\.jdsupra\\.com",m:"i"},{s:":\\/\\/trtspor\\.com\\.tr",m:"i"},{s:":\\/\\/www\\.capital\\.fr",m:"i"},{s:":\\/\\/www\\.chip\\.com\\.tr",m:"i"},{s:":\\/\\/.+\\.vhx\\.tv",m:"i"},{s:":\\/\\/codeply\\.com",m:"i"},{s:":\\/\\/sporza\\.be",m:"i"},{s:":\\/\\/sharechat\\.com",m:"i"},{s:":\\/\\/lexpress\\.fr",m:"i"},{s:":\\/\\/akharinkhabar\\.ir",m:"i"},{s:":\\/\\/.+\\.latestly\\.com",m:"i"},{s:":\\/\\/www\\.koreus\\.com",m:"i"},{s:":\\/\\/www\\.eyeem\\.com",m:"i"},{s:":\\/\\/.+\\.kaltura\\.com",m:"i"},{s:":\\/\\/visual\\.ly",m:"i"},{s:":\\/\\/gifyu\\.com",m:"i"},{s:":\\/\\/framer\\.com",m:"i"},{s:":\\/\\/.+\\.iflix\\.com",m:"i"},{s:":\\/\\/pod\\.univ-lr\\.fr",m:"i"},{s:":\\/\\/beautiful\\.ai",m:"i"},{s:":\\/\\/widget\\.capital\\.fr",m:"i"},{s:":\\/\\/heraldo\\.es",m:"i"},{s:":\\/\\/media\\.dlib\\.indiana\\.edu",m:"i"},{s:":\\/\\/ncaa\\.com",m:"i"},{s:":\\/\\/stepik\\.org",m:"i"},{s:":\\/\\/.+\\.eurosport\\.com",m:"i"},{s:":\\/\\/.+\\.telegraf\\.rs",m:"i"},{s:":\\/\\/radiocut\\.fm",m:"i"},{s:":\\/\\/tass\\.com",m:"i"},{s:":\\/\\/bax\\.tv",m:"i"},{s:":\\/\\/.+\\.zenfolio\\.com",m:"i"},{s:":\\/\\/.+\\.plnkr\\.co",m:"i"},{s:":\\/\\/givemesport\\.com",m:"i"},{s:":\\/\\/data\\.public\\.lu",m:"i"},{s:":\\/\\/.+\\.telesurtv\\.net",m:"i"},{s:":\\/\\/.+\\.blogtalkradio\\.com",m:"i"},{s:":\\/\\/volume\\.vox-cdn\\.com",m:"i"},{s:":\\/\\/ah\\.nl",m:"i"},{s:":\\/\\/.+\\.ffm\\.to",m:"i"},{s:":\\/\\/digital\\.library\\.unt\\.edu",m:"i"},{s:":\\/\\/delta\\.magisto\\.com",m:"i"},{s:":\\/\\/photodune\\.net",m:"i"},{s:":\\/\\/delishkitchen\\.tv",m:"i"},{s:":\\/\\/fast\\.wistia\\.net",m:"i"},{s:":\\/\\/quotidiano\\.net",m:"i"},{s:":\\/\\/8tracks\\.com",m:"i"},{s:":\\/\\/la-croix\\.com",m:"i"},{s:":\\/\\/.+\\.jyu\\.fi",m:"i"},{s:":\\/\\/osthessen-news\\.de",m:"i"},{s:":\\/\\/live\\.amcharts\\.com",m:"i"},{s:":\\/\\/deutschlandfunk\\.de",m:"i"},{s:":\\/\\/lacapital\\.com\\.ar",m:"i"},{s:":\\/\\/mixlr\\.com",m:"i"},{s:":\\/\\/musiclab\\.chromeexperiments\\.com",m:"i"},{s:":\\/\\/www\\.sinemalar\\.com",m:"i"},{s:":\\/\\/earthcam\\.com",m:"i"},{s:":\\/\\/video\\.uludagsozluk\\.com",m:"i"},{s:":\\/\\/teleportal\\.ua",m:"i"},{s:":\\/\\/sho\\.com",m:"i"},{s:":\\/\\/videos\\.chessbase\\.com",m:"i"},{s:":\\/\\/swr\\.de",m:"i"},{s:":\\/\\/alaatv\\.com",m:"i"},{s:":\\/\\/.+\\.indavideo\\.hu",m:"i"},{s:":\\/\\/tvtime\\.com",m:"i"},{s:":\\/\\/suzuri\\.jp",m:"i"},{s:":\\/\\/voxer\\.com",m:"i"},{s:":\\/\\/.+\\.blubrry\\.com",m:"i"},{s:":\\/\\/tv\\.moneyweb\\.co\\.za",m:"i"},{s:":\\/\\/watson\\.ch",m:"i"},{s:":\\/\\/share\\.descript\\.com",m:"i"},{s:":\\/\\/.+\\.oper\\.ru",m:"i"},{s:":\\/\\/webtv\\.parisnanterre\\.fr",m:"i"},{s:":\\/\\/.+\\.player\\.fm",m:"i"},{s:":\\/\\/untappd\\.com",m:"i"},{s:":\\/\\/goodmorningamerica\\.com",m:"i"},{s:":\\/\\/wien\\.gv\\.at",m:"i"},{s:":\\/\\/sendvid\\.com",m:"i"},{s:":\\/\\/.+\\.blastingnews\\.com",m:"i"},{s:":\\/\\/app\\.involve\\.me",m:"i"},{s:":\\/\\/francebleu\\.fr",m:"i"},{s:":\\/\\/.+\\.onisep\\.fr",m:"i"},{s:":\\/\\/.+\\.getyarn\\.io",m:"i"},{s:":\\/\\/stereo\\.nypl\\.org",m:"i"},{s:":\\/\\/.+\\.acast\\.com",m:"i"},{s:":\\/\\/.+\\.megaphone\\.fm",m:"i"},{s:":\\/\\/www\\.bet\\.com",m:"i"},{s:":\\/\\/.+\\.golfchannel\\.com",m:"i"},{s:":\\/\\/tv4play\\.se",m:"i"},{s:":\\/\\/cds\\.cern\\.ch",m:"i"},{s:":\\/\\/pcgames\\.de",m:"i"},{s:":\\/\\/www\\.voici\\.fr",m:"i"},{s:":\\/\\/www\\.golfchannel\\.com",m:"i"},{s:":\\/\\/.+\\.univ-rouen\\.fr",m:"i"},{s:":\\/\\/ccma\\.cat",m:"i"},{s:":\\/\\/videoask\\.com",m:"i"},{s:":\\/\\/formulatv\\.com",m:"i"},{s:":\\/\\/.+\\.bpb\\.de",m:"i"},{s:":\\/\\/.+\\.cl\\.ly",m:"i"},{s:":\\/\\/www\\.viewbug\\.com",m:"i"},{s:":\\/\\/europafm\\.com",m:"i"},{s:":\\/\\/.+\\.faithlife\\.com",m:"i"},{s:":\\/\\/lookbook\\.nu",m:"i"},{s:":\\/\\/.+\\.collect\\.chat",m:"i"},{s:":\\/\\/mihanvideo\\.com",m:"i"},{s:":\\/\\/subrayado\\.com\\.uy",m:"i"},{s:":\\/\\/.+\\.playbuzz\\.com",m:"i"},{s:":\\/\\/.+\\.dubb\\.com",m:"i"},{s:":\\/\\/.+\\.datpiff\\.com",m:"i"},{s:":\\/\\/me\\.me",m:"i"},{s:":\\/\\/.+\\.captivate\\.fm",m:"i"},{s:":\\/\\/alittihad\\.ae",m:"i"},{s:":\\/\\/www\\.stocksy\\.com",m:"i"},{s:":\\/\\/.+\\.band\\.uol\\.com\\.br",m:"i"},{s:":\\/\\/tooter\\.in",m:"i"},{s:":\\/\\/imgyukle\\.com",m:"i"},{s:":\\/\\/ruutu\\.fi",m:"i"},{s:":\\/\\/.+\\.involve\\.me",m:"i"},{s:":\\/\\/my\\.notjustok\\.com",m:"i"},{s:":\\/\\/.+\\.notjustok\\.com",m:"i"},{s:":\\/\\/.+\\.datawrapper\\.de",m:"i"},{s:":\\/\\/extra\\.cz",m:"i"},{s:":\\/\\/watchlakorn\\.in",m:"i"},{s:":\\/\\/fite\\.tv",m:"i"},{s:":\\/\\/buffed\\.de",m:"i"},{s:":\\/\\/.+\\.transistor\\.fm",m:"i"},{s:":\\/\\/www\\.macleans\\.ca",m:"i"},{s:":\\/\\/video\\.univ-rennes1\\.fr",m:"i"},{s:":\\/\\/makeagif\\.com",m:"i"},{s:":\\/\\/mediaserveur\\.u-bourgogne\\.fr",m:"i"},{s:":\\/\\/d\\.tube",m:"i"},{s:":\\/\\/.+\\.podomatic\\.com",m:"i"},{s:":\\/\\/list\\.ly",m:"i"},{s:":\\/\\/promodj\\.com",m:"i"},{s:":\\/\\/.+\\.citynews\\.ca",m:"i"},{s:":\\/\\/mediaserver\\.uni-bonn\\.de",m:"i"},{s:":\\/\\/audioboom\\.com",m:"i"},{s:":\\/\\/lycees\\.netocentre\\.fr",m:"i"},{s:":\\/\\/tvfanatic\\.com",m:"i"},{s:":\\/\\/canva\\.cn",m:"i"},{s:":\\/\\/beta\\.documentcloud\\.org",m:"i"},{s:":\\/\\/sverigesradio\\.se",m:"i"},{s:":\\/\\/.+\\.noteflight\\.com",m:"i"},{s:":\\/\\/sutori\\.com",m:"i"},{s:":\\/\\/replit\\.com",m:"i"},{s:":\\/\\/polleverywhere\\.com",m:"i"},{s:":\\/\\/channel9\\.msdn\\.com",m:"i"},{s:":\\/\\/app\\.avocode\\.com",m:"i"},{s:":\\/\\/video\\.umontpellier\\.fr",m:"i"},{s:":\\/\\/ondacero\\.es",m:"i"},{s:":\\/\\/services\\.brid\\.tv",m:"i"},{s:":\\/\\/.+\\.rferl\\.org",m:"i"},{s:":\\/\\/pxt\\.microbit\\.org",m:"i"},{s:":\\/\\/makecode\\.microbit\\.org",m:"i"},{s:":\\/\\/pod\\.u-pec\\.fr",m:"i"},{s:":\\/\\/dvidshub\\.net",m:"i"},{s:":\\/\\/ultimahora\\.com",m:"i"},{s:":\\/\\/.+\\.hippovideo\\.io",m:"i"},{s:":\\/\\/snapwidget\\.com",m:"i"},{s:":\\/\\/toornament\\.com",m:"i"},{s:":\\/\\/storyxpress\\.co",m:"i"},{s:":\\/\\/documentcloud\\.org",m:"i"},{s:":\\/\\/www\\.rtl\\.be",m:"i"},{s:":\\/\\/memecenter\\.com",m:"i"},{s:":\\/\\/thrashermagazine\\.com",m:"i"},{s:":\\/\\/www\\.tvc\\.ru",m:"i"},{s:":\\/\\/infocielo\\.com",m:"i"},{s:":\\/\\/.+\\.tv3\\.lt",m:"i"},{s:":\\/\\/mediatheque\\.justice\\.gouv\\.fr",m:"i"},{s:":\\/\\/www\\.izlesene\\.com",m:"i"},{s:":\\/\\/topface\\.com",m:"i"},{s:":\\/\\/cincopa\\.com",m:"i"},{s:":\\/\\/deutschlandfunkkultur\\.de",m:"i"},{s:":\\/\\/gamepro\\.de",m:"i"},{s:":\\/\\/eltrecetv\\.com\\.ar",m:"i"},{s:":\\/\\/parismatch\\.com",m:"i"},{s:":\\/\\/.+\\.ceros\\.com",m:"i"},{s:":\\/\\/.+\\.cincopa\\.com",m:"i"},{s:":\\/\\/airvuz\\.com",m:"i"},{s:":\\/\\/sk\\.mall\\.tv",m:"i"},{s:":\\/\\/overcast\\.fm",m:"i"},{s:":\\/\\/kuula\\.co",m:"i"},{s:":\\/\\/.+\\.thaipbs\\.or\\.th",m:"i"},{s:":\\/\\/clyp\\.it",m:"i"},{s:":\\/\\/service\\.visasq\\.com",m:"i"},{s:":\\/\\/f5haber\\.com",m:"i"},{s:":\\/\\/namayesh\\.com",m:"i"},{s:":\\/\\/cloudup\\.com",m:"i"},{s:":\\/\\/noticias\\.canal1\\.com\\.co",m:"i"},{s:":\\/\\/player\\.castr\\.io",m:"i"},{s:":\\/\\/realtimes\\.real\\.com",m:"i"},{s:":\\/\\/gloria\\.tv",m:"i"},{s:":\\/\\/canal1\\.com\\.co",m:"i"},{s:":\\/\\/workdrive\\.zohoexternal\\.com",m:"i"},{s:":\\/\\/worldcosplay\\.net",m:"i"},{s:":\\/\\/clip2net\\.com",m:"i"},{s:":\\/\\/.+\\.ultimedia\\.com",m:"i"},{s:":\\/\\/globalgiving\\.org",m:"i"},{s:":\\/\\/metabase\\.com",m:"i"},{s:":\\/\\/www\\.soundclick\\.com",m:"i"},{s:":\\/\\/.+\\.zhdk\\.ch",m:"i"},{s:":\\/\\/ilrestodelcarlino\\.it",m:"i"},{s:":\\/\\/shz\\.de",m:"i"},{s:":\\/\\/www\\.studystack\\.com",m:"i"},{s:":\\/\\/.+\\.stream\\.co\\.jp",m:"i"},{s:":\\/\\/.+\\.atresmedia\\.com",m:"i"},{s:":\\/\\/embed\\.droplr\\.com",m:"i"},{s:":\\/\\/pietsmiet\\.de",m:"i"},{s:":\\/\\/hypem\\.com",m:"i"},{s:":\\/\\/urplay\\.se",m:"i"},{s:":\\/\\/tbs\\.com",m:"i"},{s:":\\/\\/.+\\.ivideon\\.com",m:"i"},{s:":\\/\\/rookie\\.shonenjump\\.com",m:"i"},{s:":\\/\\/riddles\\.com",m:"i"},{s:":\\/\\/video\\.tochka\\.net",m:"i"},{s:":\\/\\/planespotters\\.net",m:"i"},{s:":\\/\\/daytube\\.az",m:"i"},{s:":\\/\\/p\\.widencdn\\.net",m:"i"},{s:":\\/\\/.+\\.flowpaper\\.com",m:"i"},{s:":\\/\\/public\\.app",m:"i"},{s:":\\/\\/ibtimes\\.co\\.in",m:"i"},{s:":\\/\\/.+\\.cld\\.bz",m:"i"},{s:":\\/\\/popsugar\\.com\\.au",m:"i"},{s:":\\/\\/www\\.artmajeur\\.com",m:"i"},{s:":\\/\\/mma-core\\.com",m:"i"},{s:":\\/\\/mycujoo\\.tv",m:"i"},{s:":\\/\\/sta\\.sh",m:"i"},{s:":\\/\\/vier\\.be",m:"i"},{s:":\\/\\/youmaker\\.com",m:"i"},{s:":\\/\\/nachrichten\\.at",m:"i"},{s:":\\/\\/.+\\.ac-caen\\.fr",m:"i"},{s:":\\/\\/medal\\.tv",m:"i"},{s:":\\/\\/art19\\.com",m:"i"},{s:":\\/\\/.+\\.sicnoticias\\.pt",m:"i"},{s:":\\/\\/flat\\.io",m:"i"},{s:":\\/\\/esporteinterativo\\.com\\.br",m:"i"},{s:":\\/\\/scrapbook\\.com",m:"i"},{s:":\\/\\/billoreilly\\.com",m:"i"},{s:":\\/\\/mmacore\\.tv",m:"i"},{s:":\\/\\/www\\.educreations\\.com",m:"i"},{s:":\\/\\/.+\\.radiopublic\\.com",m:"i"},{s:":\\/\\/wdrv\\.it",m:"i"},{s:":\\/\\/.+\\.lumni\\.fr",m:"i"},{s:":\\/\\/zeno\\.fm",m:"i"},{s:":\\/\\/jabeh\\.com",m:"i"},{s:":\\/\\/alamyimages\\.fr",m:"i"},{s:":\\/\\/spac1\\.net",m:"i"},{s:":\\/\\/newschoolers\\.com",m:"i"},{s:":\\/\\/audiostock\\.jp",m:"i"},{s:":\\/\\/my\\.playosmo\\.com",m:"i"},{s:":\\/\\/metro\\.pr",m:"i"},{s:":\\/\\/.+\\.carto\\.com",m:"i"},{s:":\\/\\/sportal\\.bg",m:"i"},{s:":\\/\\/wolframcloud\\.com",m:"i"},{s:":\\/\\/lanazione\\.it",m:"i"},{s:":\\/\\/lostpic\\.net",m:"i"},{s:":\\/\\/open\\.firstory\\.me",m:"i"},{s:":\\/\\/pac-12\\.com",m:"i"},{s:":\\/\\/.+\\.instructuremedia\\.com",m:"i"},{s:":\\/\\/artchive\\.ru",m:"i"},{s:":\\/\\/bonjoro\\.com",m:"i"},{s:":\\/\\/videos\\.mtb-news\\.de",m:"i"},{s:":\\/\\/fragdenstaat\\.de",m:"i"},{s:":\\/\\/jeuxonline\\.info",m:"i"},{s:":\\/\\/prva\\.rs",m:"i"},{s:":\\/\\/popsugar\\.co\\.uk",m:"i"},{s:":\\/\\/medibang\\.com",m:"i"},{s:":\\/\\/.+\\.fireside\\.fm",m:"i"},{s:":\\/\\/.+\\.webeyo\\.com",m:"i"},{s:":\\/\\/www\\.ina\\.fr",m:"i"},{s:":\\/\\/sites\\.ina\\.fr",m:"i"},{s:":\\/\\/fotos\\.mtb-news\\.de",m:"i"},{s:":\\/\\/dopl3r\\.com",m:"i"},{s:":\\/\\/edu\\.cospaces\\.io",m:"i"},{s:":\\/\\/video\\.bccampus\\.ca",m:"i"},{s:":\\/\\/tv-programme\\.com",m:"i"},{s:":\\/\\/sproutvideo\\.com",m:"i"},{s:":\\/\\/compass\\.pressekompass\\.net",m:"i"},{s:":\\/\\/breaker\\.audio",m:"i"},{s:":\\/\\/butenunbinnen\\.de",m:"i"},{s:":\\/\\/loveotv\\.com",m:"i"},{s:":\\/\\/xem\\.vn",m:"i"},{s:":\\/\\/uploads\\.knightlab\\.com",m:"i"},{s:":\\/\\/video\\.cube365\\.net",m:"i"},{s:":\\/\\/overflow\\.io",m:"i"},{s:":\\/\\/rsi\\.ch",m:"i"},{s:":\\/\\/.+\\.sermonaudio\\.com",m:"i"},{s:":\\/\\/app\\.searchie\\.io",m:"i"},{s:":\\/\\/.+\\.vidalytics\\.com",m:"i"},{s:":\\/\\/hlamer\\.ru",m:"i"},{s:":\\/\\/.+\\.fotolia\\.com",m:"i"},{s:":\\/\\/wtsp\\.com",m:"i"},{s:":\\/\\/.+\\.skaties\\.lv",m:"i"},{s:":\\/\\/productionhub\\.com",m:"i"},{s:":\\/\\/gifs\\.com",m:"i"},{s:":\\/\\/openprocessing\\.org",m:"i"},{s:":\\/\\/stolaf\\.edu",m:"i"},{s:":\\/\\/tickcounter\\.com",m:"i"},{s:":\\/\\/showturk\\.com\\.tr",m:"i"},{s:":\\/\\/viloud\\.tv",m:"i"},{s:":\\/\\/wanelo\\.com",m:"i"},{s:":\\/\\/www\\.interia\\.tv",m:"i"},{s:":\\/\\/thehollywoodgossip\\.com",m:"i"},{s:":\\/\\/demo\\.chevereto\\.com",m:"i"},{s:":\\/\\/scribblemaps\\.com",m:"i"},{s:":\\/\\/vurbl\\.com",m:"i"},{s:":\\/\\/crosswordlabs\\.com",m:"i"},{s:":\\/\\/.+\\.fragman-tv\\.com",m:"i"},{s:":\\/\\/relive\\.cc",m:"i"},{s:":\\/\\/.+\\.23video\\.com",m:"i"},{s:":\\/\\/www\\.metatube\\.com",m:"i"},{s:":\\/\\/.+\\.apester\\.com",m:"i"},{s:":\\/\\/joshwhotv\\.com",m:"i"},{s:":\\/\\/.+\\.jeuxactu\\.com",m:"i"},{s:":\\/\\/.+\\.apolearn\\.com",m:"i"},{s:":\\/\\/lovethispic\\.com",m:"i"},{s:":\\/\\/media\\.publit\\.io",m:"i"},{s:":\\/\\/jovian\\.ai",m:"i"},{s:":\\/\\/vidalytics\\.com",m:"i"},{s:":\\/\\/mediacenter\\.univ-fcomte\\.fr",m:"i"},{s:":\\/\\/app\\.viloud\\.tv",m:"i"},{s:":\\/\\/song\\.link",m:"i"},{s:":\\/\\/eurosport\\.co\\.uk",m:"i"},{s:":\\/\\/www\\.traileraddict\\.com",m:"i"},{s:":\\/\\/eurosport\\.it",m:"i"},{s:":\\/\\/.+\\.yarn\\.co",m:"i"},{s:":\\/\\/magazines\\.stem\\.org\\.uk",m:"i"},{s:":\\/\\/.+\\.grain\\.co",m:"i"},{s:":\\/\\/.+\\.spotlightr\\.com",m:"i"},{s:":\\/\\/ots\\.at",m:"i"},{s:":\\/\\/mixupload\\.com",m:"i"},{s:":\\/\\/cungcau\\.vn",m:"i"},{s:":\\/\\/eventregist\\.com",m:"i"},{s:":\\/\\/.+\\.eko\\.com",m:"i"},{s:":\\/\\/.+\\.ifremer\\.fr",m:"i"},{s:":\\/\\/.+\\.deutschlandradio\\.de",m:"i"},{s:":\\/\\/api\\.vadoo\\.tv",m:"i"},{s:":\\/\\/clara\\.io",m:"i"},{s:":\\/\\/clippituser\\.tv",m:"i"},{s:":\\/\\/702\\.co\\.za",m:"i"},{s:":\\/\\/generatewp\\.com",m:"i"},{s:":\\/\\/talenthouse\\.com",m:"i"},{s:":\\/\\/audiotool\\.com",m:"i"},{s:":\\/\\/keepcalms\\.com",m:"i"},{s:":\\/\\/show\\.co",m:"i"},{s:":\\/\\/ilgiorno\\.it",m:"i"},{s:":\\/\\/revolvermag\\.com",m:"i"},{s:":\\/\\/showme\\.com",m:"i"},{s:":\\/\\/www\\.indiedb\\.com",m:"i"},{s:":\\/\\/.+\\.gimletmedia\\.com",m:"i"},{s:":\\/\\/.+\\.edumedia-sciences\\.com",m:"i"},{s:":\\/\\/youscribe\\.com",m:"i"},{s:":\\/\\/.+\\.makecode\\.com",m:"i"},{s:":\\/\\/didestan\\.com",m:"i"},{s:":\\/\\/.+\\.univ-artois\\.fr",m:"i"},{s:":\\/\\/audiomicro\\.com",m:"i"},{s:":\\/\\/elpatagonico\\.com",m:"i"},{s:":\\/\\/twitpic\\.com",m:"i"},{s:":\\/\\/piter\\.tv",m:"i"},{s:":\\/\\/play\\.typecast\\.ai",m:"i"},{s:":\\/\\/onzemondial\\.com",m:"i"},{s:":\\/\\/snapguide\\.com",m:"i"},{s:":\\/\\/edumedia-sciences\\.com",m:"i"},{s:":\\/\\/classic\\.europeana\\.eu",m:"i"},{s:":\\/\\/.+\\.kumu\\.io",m:"i"},{s:":\\/\\/.+\\.ina\\.fr",m:"i"},{s:":\\/\\/vero\\.co",m:"i"},{s:":\\/\\/.+\\.uha\\.fr",m:"i"},{s:":\\/\\/.+\\.fleeq\\.io",m:"i"},{s:":\\/\\/.+\\.ausha\\.co",m:"i"},{s:":\\/\\/www\\.ustream\\.tv",m:"i"},{s:":\\/\\/app\\.vidgrid\\.com",m:"i"},{s:":\\/\\/rive\\.app",m:"i"},{s:":\\/\\/huzzaz\\.com",m:"i"},{s:":\\/\\/bitmidi\\.com",m:"i"},{s:":\\/\\/.+\\.youriguide\\.com",m:"i"},{s:":\\/\\/www\\.circuitlab\\.com",m:"i"},{s:":\\/\\/facer\\.io",m:"i"},{s:":\\/\\/socialcompare\\.com",m:"i"},{s:":\\/\\/pod\\.ac-normandie\\.fr",m:"i"},{s:":\\/\\/walls\\.io",m:"i"},{s:":\\/\\/wordpress\\.tv",m:"i"},{s:":\\/\\/alu\\.jp",m:"i"},{s:":\\/\\/ujarani\\.com",m:"i"},{s:":\\/\\/decorpad\\.com",m:"i"},{s:":\\/\\/tppr\\.me",m:"i"},{s:":\\/\\/imgshare\\.io",m:"i"},{s:":\\/\\/tv\\.hautsdefrance\\.fr",m:"i"},{s:":\\/\\/mdstrm\\.com",m:"i"},{s:":\\/\\/podcastone\\.com",m:"i"},{s:":\\/\\/toronews\\.net",m:"i"},{s:":\\/\\/.+\\.cinemad\\.tv",m:"i"},{s:":\\/\\/.+\\.podigee\\.io",m:"i"},{s:":\\/\\/explee\\.com",m:"i"},{s:":\\/\\/changelog\\.com",m:"i"},{s:":\\/\\/.+\\.quizier\\.com",m:"i"},{s:":\\/\\/.+\\.sendspark\\.com",m:"i"},{s:":\\/\\/turbo\\.fr",m:"i"},{s:":\\/\\/ellentube\\.com",m:"i"},{s:":\\/\\/www\\.cutoutandkeep\\.net",m:"i"},{s:":\\/\\/hubhopper\\.com",m:"i"},{s:":\\/\\/3speak\\.co",m:"i"},{s:":\\/\\/my\\.walls\\.io",m:"i"},{s:":\\/\\/.+\\.intoday\\.in",m:"i"},{s:":\\/\\/sharemyimage\\.com",m:"i"},{s:":\\/\\/chamberofcommerce\\.org",m:"i"},{s:":\\/\\/.+\\.sendtonews\\.com",m:"i"},{s:":\\/\\/seeme\\.me",m:"i"},{s:":\\/\\/www\\.haikudeck\\.com",m:"i"},{s:":\\/\\/www\\.viddler\\.com",m:"i"},{s:":\\/\\/boom\\.tv",m:"i"},{s:":\\/\\/www\\.multivu\\.com",m:"i"},{s:":\\/\\/.+\\.zype\\.com",m:"i"},{s:":\\/\\/play\\.ht",m:"i"},{s:":\\/\\/.+\\.swivl\\.com",m:"i"},{s:":\\/\\/videoseyred\\.in",m:"i"},{s:":\\/\\/.+\\.iono\\.fm",m:"i"},{s:":\\/\\/journalism\\.co\\.uk",m:"i"},{s:":\\/\\/canalnet\\.tv",m:"i"},{s:":\\/\\/play\\.tv3\\.ee",m:"i"},{s:":\\/\\/.+\\.cdlib\\.org",m:"i"},{s:":\\/\\/media\\.ccc\\.de",m:"i"},{s:":\\/\\/.+\\.wiredrive\\.com",m:"i"},{s:":\\/\\/app\\.berniesanders\\.com",m:"i"},{s:":\\/\\/webtv\\.u-paris10\\.fr",m:"i"},{s:":\\/\\/graphcommons\\.com",m:"i"},{s:":\\/\\/butfootballclub\\.fr",m:"i"},{s:":\\/\\/newstube\\.ru",m:"i"},{s:":\\/\\/.+\\.vids\\.io",m:"i"},{s:":\\/\\/medyahaber\\.com",m:"i"},{s:":\\/\\/tntsports\\.com\\.ar",m:"i"},{s:":\\/\\/.+\\.api\\.video",m:"i"},{s:":\\/\\/v\\.embedly\\.com",m:"i"},{s:":\\/\\/.+\\.abraia\\.me",m:"i"},{s:":\\/\\/lahzenegar\\.com",m:"i"},{s:":\\/\\/.+\\.h5p\\.com",m:"i"},{s:":\\/\\/athenascope\\.com",m:"i"},{s:":\\/\\/.+\\.whooshkaa\\.com",m:"i"},{s:":\\/\\/autonews\\.fr",m:"i"},{s:":\\/\\/.+\\.ototoy\\.jp",m:"i"},{s:":\\/\\/pod\\.co",m:"i"},{s:":\\/\\/peopo\\.org",m:"i"},{s:":\\/\\/mirtv\\.ru",m:"i"},{s:":\\/\\/forbiddenplanet\\.com",m:"i"},{s:":\\/\\/seyredelim\\.com",m:"i"},{s:":\\/\\/documentarytube\\.com",m:"i"},{s:":\\/\\/ah\\.be",m:"i"},{s:":\\/\\/universenetwork\\.tv",m:"i"},{s:":\\/\\/bbcearth\\.com",m:"i"},{s:":\\/\\/vlipsy\\.com",m:"i"},{s:":\\/\\/av\\.tib\\.eu",m:"i"},{s:":\\/\\/player\\.whooshkaa\\.com",m:"i"},{s:":\\/\\/www\\.documaniatv\\.com",m:"i"},{s:":\\/\\/mymixtapez\\.com",m:"i"},{s:":\\/\\/tvplay\\.tv3\\.ee",m:"i"},{s:":\\/\\/news\\.met\\.police\\.uk",m:"i"},{s:":\\/\\/swrfernsehen\\.de",m:"i"},{s:":\\/\\/lookimg\\.com",m:"i"},{s:":\\/\\/vijf\\.be",m:"i"},{s:":\\/\\/frinkiac\\.com",m:"i"},{s:":\\/\\/videopress\\.com",m:"i"},{s:":\\/\\/blend\\.io",m:"i"},{s:":\\/\\/blackfire\\.io",m:"i"},{s:":\\/\\/www\\.iplayerhd\\.com",m:"i"},{s:":\\/\\/spinrilla\\.com",m:"i"},{s:":\\/\\/www\\.nfb\\.ca",m:"i"},{s:":\\/\\/rtlxl\\.nl",m:"i"},{s:":\\/\\/outplayed\\.tv",m:"i"},{s:":\\/\\/videos\\.rennrad-news\\.de",m:"i"},{s:":\\/\\/cittaceleste\\.it",m:"i"},{s:":\\/\\/vzaar\\.com",m:"i"},{s:":\\/\\/dermandar\\.com",m:"i"},{s:":\\/\\/www\\.voiceamerica\\.com",m:"i"},{s:":\\/\\/.+\\.qualifio\\.com",m:"i"},{s:":\\/\\/radioradicale\\.it",m:"i"},{s:":\\/\\/boxofficebuz\\.com",m:"i"},{s:":\\/\\/.+\\.like\\.co",m:"i"},{s:":\\/\\/.+\\.audioburst\\.com",m:"i"},{s:":\\/\\/veer\\.tv",m:"i"},{s:":\\/\\/mixch\\.tv",m:"i"},{s:":\\/\\/.+\\.flipdocs\\.com",m:"i"},{s:":\\/\\/share\\.wochit\\.com",m:"i"},{s:":\\/\\/gamereactor\\.eu",m:"i"},{s:":\\/\\/.+\\.animedia\\.pro",m:"i"},{s:":\\/\\/ligtv\\.com\\.tr",m:"i"},{s:":\\/\\/simplebooth\\.com",m:"i"},{s:":\\/\\/univideo\\.uni-passau\\.de",m:"i"},{s:":\\/\\/.+\\.didacte\\.com",m:"i"},{s:":\\/\\/aryeo\\.com",m:"i"},{s:":\\/\\/backtracks\\.fm",m:"i"},{s:":\\/\\/.+\\.cappasity\\.com",m:"i"},{s:":\\/\\/awwmemes\\.com",m:"i"},{s:":\\/\\/.+\\.cookist\\.com",m:"i"},{s:":\\/\\/maps\\.vilnius\\.lt",m:"i"},{s:":\\/\\/beet\\.tv",m:"i"},{s:":\\/\\/wralsportsfan\\.com",m:"i"},{s:":\\/\\/deutschlandfunknova\\.de",m:"i"},{s:":\\/\\/yewtu\\.be",m:"i"},{s:":\\/\\/vidoal\\.com",m:"i"},{s:":\\/\\/domradio\\.de",m:"i"},{s:":\\/\\/.+\\.polldaddy\\.com",m:"i"},{s:":\\/\\/post\\.pro",m:"i"},{s:":\\/\\/zahratalkhaleej\\.ae",m:"i"},{s:":\\/\\/media\\.hwr-berlin\\.de",m:"i"},{s:":\\/\\/sportrecs\\.com",m:"i"},{s:":\\/\\/p\\.allego\\.com",m:"i"},{s:":\\/\\/vocadb\\.net",m:"i"},{s:":\\/\\/kadenze\\.com",m:"i"},{s:":\\/\\/mpembed\\.com",m:"i"},{s:":\\/\\/videos\\.sapo\\.mz",m:"i"},{s:":\\/\\/.+\\.buncee\\.com",m:"i"},{s:":\\/\\/chainflix\\.net",m:"i"},{s:":\\/\\/www\\.geograph\\.org\\.uk",m:"i"},{s:":\\/\\/online\\.clickview\\.com\\.au",m:"i"},{s:":\\/\\/.+\\.firstory\\.io",m:"i"},{s:":\\/\\/.+\\.rupress\\.org",m:"i"},{s:":\\/\\/memri\\.org",m:"i"},{s:":\\/\\/videos\\.sapo\\.cv",m:"i"},{s:":\\/\\/wifflegif\\.com",m:"i"},{s:":\\/\\/videakid\\.hu",m:"i"},{s:":\\/\\/truecrimedaily\\.com",m:"i"},{s:":\\/\\/.+\\.sounder\\.fm",m:"i"},{s:":\\/\\/vidlii\\.com",m:"i"},{s:":\\/\\/muse\\.ai",m:"i"},{s:":\\/\\/buttondown\\.email",m:"i"},{s:":\\/\\/sidearmsports\\.com",m:"i"},{s:":\\/\\/ow\\.ly",m:"i"},{s:":\\/\\/eurosport\\.es",m:"i"},{s:":\\/\\/caster\\.io",m:"i"},{s:":\\/\\/rai77\\.com",m:"i"},{s:":\\/\\/memeful\\.com",m:"i"},{s:":\\/\\/.+\\.gosimian\\.com",m:"i"},{s:":\\/\\/spoke\\.app",m:"i"},{s:":\\/\\/hayvid\\.com",m:"i"},{s:":\\/\\/peal\\.io",m:"i"},{s:":\\/\\/upscri\\.be",m:"i"},{s:":\\/\\/buzzvideo\\.com",m:"i"},{s:":\\/\\/.+\\.jwplatform\\.com",m:"i"},{s:":\\/\\/soundee\\.com",m:"i"},{s:":\\/\\/video\\.thebl\\.com",m:"i"},{s:":\\/\\/.+\\.libsynpro\\.com",m:"i"},{s:":\\/\\/.+\\.perigonlive\\.com",m:"i"},{s:":\\/\\/boxcast\\.tv",m:"i"},{s:":\\/\\/.+\\.mediazilla\\.com",m:"i"},{s:":\\/\\/mediazilla\\.com",m:"i"},{s:":\\/\\/public\\.chartblocks\\.com",m:"i"},{s:":\\/\\/video214\\.com",m:"i"},{s:":\\/\\/svz\\.de",m:"i"},{s:":\\/\\/.+\\.gifyourgame\\.com",m:"i"},{s:":\\/\\/veblr\\.com",m:"i"},{s:":\\/\\/videolectures\\.net",m:"i"},{s:":\\/\\/slide\\.ly",m:"i"},{s:":\\/\\/live\\.myvrspot\\.com",m:"i"},{s:":\\/\\/canal10\\.com\\.uy",m:"i"},{s:":\\/\\/eurosport\\.ro",m:"i"},{s:":\\/\\/.+\\.wirewax\\.com",m:"i"},{s:":\\/\\/dreambroker\\.com",m:"i"},{s:":\\/\\/.+\\.pitchdeck\\.io",m:"i"},{s:":\\/\\/vsports\\.pt",m:"i"},{s:":\\/\\/www\\.rightthisminute\\.com",m:"i"},{s:":\\/\\/.+\\.imajize\\.com",m:"i"},{s:":\\/\\/.+\\.widgetic\\.com",m:"i"},{s:":\\/\\/player\\.mediaamp\\.io",m:"i"},{s:":\\/\\/pod\\.univ-avignon\\.fr",m:"i"},{s:":\\/\\/xtv\\.lv",m:"i"},{s:":\\/\\/march\\.es",m:"i"},{s:":\\/\\/3speak\\.tv",m:"i"},{s:":\\/\\/.+\\.yac\\.com",m:"i"},{s:":\\/\\/93fm\\.co\\.il",m:"i"},{s:":\\/\\/sho\\.co",m:"i"},{s:":\\/\\/worshiphousemedia\\.com",m:"i"},{s:":\\/\\/.+\\.rewatch\\.tv",m:"i"},{s:":\\/\\/.+\\.ur\\.se",m:"i"},{s:":\\/\\/financialsense\\.com",m:"i"},{s:":\\/\\/esmemes\\.com",m:"i"},{s:":\\/\\/hapyak\\.com",m:"i"},{s:":\\/\\/gameswelt\\.at",m:"i"},{s:":\\/\\/eurosport\\.dk",m:"i"},{s:":\\/\\/trutv\\.com",m:"i"},{s:":\\/\\/chirb\\.it",m:"i"},{s:":\\/\\/app\\.ludus\\.one",m:"i"},{s:":\\/\\/imagechef\\.com",m:"i"},{s:":\\/\\/truthforlife\\.org",m:"i"},{s:":\\/\\/.+\\.qumucloud\\.com",m:"i"},{s:":\\/\\/shoutengine\\.com",m:"i"},{s:":\\/\\/messes\\.info",m:"i"},{s:":\\/\\/younghollywood\\.com",m:"i"},{s:":\\/\\/noti\\.st",m:"i"},{s:":\\/\\/computerworld\\.es",m:"i"},{s:":\\/\\/www\\.camdemy\\.com",m:"i"},{s:":\\/\\/scientology\\.tv",m:"i"},{s:":\\/\\/.+\\.unreel\\.me",m:"i"},{s:":\\/\\/tech\\.io",m:"i"},{s:":\\/\\/podcast\\.de",m:"i"},{s:":\\/\\/slideslive\\.com",m:"i"},{s:":\\/\\/with\\.in",m:"i"},{s:":\\/\\/.+\\.walkinto\\.in",m:"i"},{s:":\\/\\/simmer\\.io",m:"i"},{s:":\\/\\/onsizzle\\.com",m:"i"},{s:":\\/\\/cinema8\\.com",m:"i"},{s:":\\/\\/walkinto\\.in",m:"i"},{s:":\\/\\/gitpitch\\.com",m:"i"},{s:":\\/\\/manba\\.co\\.jp",m:"i"},{s:":\\/\\/expertise\\.tv",m:"i"},{s:":\\/\\/app\\.altrulabs\\.com",m:"i"},{s:":\\/\\/.+\\.relayto\\.com",m:"i"},{s:":\\/\\/.+\\.vooplayer\\.com",m:"i"},{s:":\\/\\/wikiloops\\.com",m:"i"},{s:":\\/\\/shows\\.cadence13\\.com",m:"i"},{s:":\\/\\/halaman\\.email",m:"i"},{s:":\\/\\/steller\\.co",m:"i"},{s:":\\/\\/highschoolot\\.com",m:"i"},{s:":\\/\\/vidoevo\\.com",m:"i"},{s:":\\/\\/aviewfrommyseat\\.com",m:"i"},{s:":\\/\\/tourmake\\.it",m:"i"},{s:":\\/\\/megaphone\\.link",m:"i"},{s:":\\/\\/relayto\\.com",m:"i"},{s:":\\/\\/.+\\.public-i\\.tv",m:"i"},{s:":\\/\\/seekbeak\\.com",m:"i"},{s:":\\/\\/full30\\.com",m:"i"},{s:":\\/\\/video\\.ukrhome\\.net",m:"i"},{s:":\\/\\/www\\.videogram\\.com",m:"i"},{s:":\\/\\/.+\\.sporty\\.co\\.nz",m:"i"},{s:":\\/\\/ders\\.im",m:"i"},{s:":\\/\\/littlstar\\.com",m:"i"},{s:":\\/\\/tntsports\\.com",m:"i"},{s:":\\/\\/cinnamon\\.video",m:"i"},{s:":\\/\\/media\\.heanet\\.ie",m:"i"},{s:":\\/\\/faithlifetv\\.com",m:"i"},{s:":\\/\\/www\\.seditionart\\.com",m:"i"},{s:":\\/\\/kivitu\\.com",m:"i"},{s:":\\/\\/sportscastr\\.com",m:"i"},{s:":\\/\\/.+\\.podcloud\\.fr",m:"i"},{s:":\\/\\/pinecast\\.com",m:"i"},{s:":\\/\\/vizhub\\.com",m:"i"},{s:":\\/\\/p3d\\.in",m:"i"},{s:":\\/\\/.+\\.podster\\.fm",m:"i"},{s:":\\/\\/naturalatlas\\.com",m:"i"},{s:":\\/\\/trips\\.furkot\\.com",m:"i"},{s:":\\/\\/theysaidso\\.com",m:"i"},{s:":\\/\\/dnbradio\\.com",m:"i"},{s:":\\/\\/.+\\.ustudio\\.com",m:"i"},{s:":\\/\\/akc\\.tv",m:"i"},{s:":\\/\\/reelhouse\\.org",m:"i"},{s:":\\/\\/portall\\.zp\\.ua",m:"i"},{s:":\\/\\/app\\.tella\\.tv",m:"i"},{s:":\\/\\/.+\\.pinecast\\.co",m:"i"},{s:":\\/\\/vid\\.ly",m:"i"},{s:":\\/\\/dotsub\\.com",m:"i"},{s:":\\/\\/create\\.visage\\.co",m:"i"},{s:":\\/\\/.+\\.anvato\\.net",m:"i"},{s:":\\/\\/abplive\\.in",m:"i"},{s:":\\/\\/.+\\.abplive\\.in",m:"i"},{s:":\\/\\/lentv24\\.ru",m:"i"},{s:":\\/\\/.+\\.media\\.eagleplatform\\.com",m:"i"},{s:":\\/\\/orbitvu\\.co",m:"i"},{s:":\\/\\/kindernetz\\.de",m:"i"},{s:":\\/\\/tvuol\\.uol\\.com\\.br",m:"i"},{s:":\\/\\/app\\.everviz\\.com",m:"i"},{s:":\\/\\/www\\.msgnetworks\\.com",m:"i"},{s:":\\/\\/musicboxmaniacs\\.com",m:"i"},{s:":\\/\\/.+\\.pinpoll\\.com",m:"i"},{s:":\\/\\/myvi\\.tv",m:"i"},{s:":\\/\\/podfanatic\\.com",m:"i"},{s:":\\/\\/.+\\.piksel\\.com",m:"i"},{s:":\\/\\/.+\\.crdp-versailles\\.fr",m:"i"},{s:":\\/\\/roomshare\\.jp",m:"i"},{s:":\\/\\/eurosport\\.no",m:"i"},{s:":\\/\\/.+\\.polls\\.getequiem\\.com",m:"i"},{s:":\\/\\/.+\\.spryciarze\\.pl",m:"i"},{s:":\\/\\/neatclip\\.com",m:"i"},{s:":\\/\\/tracks\\.roojoom\\.com",m:"i"},{s:":\\/\\/fyyd\\.de",m:"i"},{s:":\\/\\/codebender\\.cc",m:"i"},{s:":\\/\\/maps\\.eddmaps\\.org",m:"i"},{s:":\\/\\/app\\.zingsoft\\.com",m:"i"},{s:":\\/\\/app\\.holobuilder\\.com",m:"i"},{s:":\\/\\/.+\\.kuvat\\.fi",m:"i"},{s:":\\/\\/briovr\\.com",m:"i"},{s:":\\/\\/play\\.adpaths\\.com",m:"i"},{s:":\\/\\/piclaya\\.com",m:"i"},{s:":\\/\\/www\\.metacdn\\.com",m:"i"},{s:":\\/\\/online\\.clickview\\.co\\.uk",m:"i"},{s:":\\/\\/gamerzonetv\\.com",m:"i"},{s:":\\/\\/gamereactor\\.it",m:"i"},{s:":\\/\\/upic\\.me",m:"i"},{s:":\\/\\/.+\\.ishowlife\\.com",m:"i"},{s:":\\/\\/conservativememes\\.com",m:"i"},{s:":\\/\\/privesc\\.eu",m:"i"},{s:":\\/\\/.+\\.prismamedia\\.com",m:"i"},{s:":\\/\\/.+\\.threshold360\\.com",m:"i"},{s:":\\/\\/.+\\.video-cdn\\.net",m:"i"},{s:":\\/\\/imperiya\\.by",m:"i"},{s:":\\/\\/astrologymemes\\.com",m:"i"},{s:":\\/\\/mensup\\.fr",m:"i"},{s:":\\/\\/codepoints\\.net",m:"i"},{s:":\\/\\/.+\\.iframe\\.ly",m:"i"},{s:":\\/\\/.+\\.loxi\\.io",m:"i"},{s:":\\/\\/noixion\\.tv",m:"i"},{s:":\\/\\/viewbix\\.com",m:"i"},{s:":\\/\\/kyso\\.io",m:"i"},{s:":\\/\\/sway\\.com",m:"i"},{s:":\\/\\/mediatheque\\.lindau-nobel\\.org",m:"i"},{s:":\\/\\/.+\\.podiant\\.co",m:"i"},{s:":\\/\\/.+\\.flowics\\.com",m:"i"},{s:":\\/\\/undrtone\\.com",m:"i"},{s:":\\/\\/spinear\\.com",m:"i"},{s:":\\/\\/app\\.designhubz\\.com",m:"i"},{s:":\\/\\/injurymap\\.com",m:"i"},{s:":\\/\\/verse\\.com",m:"i"},{s:":\\/\\/.+\\.streammonkey\\.com",m:"i"},{s:":\\/\\/.+\\.pivotshare\\.com",m:"i"},{s:":\\/\\/zomatobook\\.com",m:"i"},{s:":\\/\\/mediabank\\.messukeskus\\.com",m:"i"},{s:":\\/\\/netd\\.com",m:"i"},{s:":\\/\\/tvaktuell\\.com",m:"i"},{s:":\\/\\/flux\\.ai",m:"i"},{s:":\\/\\/app\\.squadov\\.gg",m:"i"},{s:":\\/\\/.+\\.kuula\\.io",m:"i"},{s:":\\/\\/www\\.baeblemusic\\.com",m:"i"},{s:":\\/\\/riffreporter\\.de",m:"i"},{s:":\\/\\/sudomemo\\.net",m:"i"},{s:":\\/\\/idescat\\.cat",m:"i"},{s:":\\/\\/data\\.information\\.dk",m:"i"},{s:":\\/\\/exif\\.co",m:"i"},{s:":\\/\\/.+\\.cnevids\\.com",m:"i"},{s:":\\/\\/tvpw\\.pl",m:"i"},{s:":\\/\\/.+\\.myvideoplace\\.tv",m:"i"},{s:":\\/\\/.+\\.maaap\\.it",m:"i"},{s:":\\/\\/.+\\.infoveave\\.net",m:"i"},{s:":\\/\\/.+\\.squarespace\\.com",m:"i"},{s:":\\/\\/open\\.audio",m:"i"},{s:":\\/\\/projects\\.spexigeo\\.com",m:"i"},{s:":\\/\\/webinarsolutions\\.tv",m:"i"},{s:":\\/\\/rec\\.audio",m:"i"},{s:":\\/\\/visiongenius\\.ai",m:"i"},{s:":\\/\\/webtvdoc\\.fr",m:"i"},{s:":\\/\\/music\\.enystre\\.com",m:"i"},{s:":\\/\\/tapereal\\.com",m:"i"},{s:":\\/\\/.+\\.solidtango\\.com",m:"i"},{s:":\\/\\/theatre-contemporain\\.net",m:"i"},{s:":\\/\\/.+\\.wootag\\.com",m:"i"},{s:":\\/\\/epubeditor\\.it",m:"i"},{s:":\\/\\/arqspin\\.com",m:"i"},{s:":\\/\\/themaninblue\\.com",m:"i"},{s:":\\/\\/videonews\\.today",m:"i"},{s:":\\/\\/.+\\.mediastorm\\.com",m:"i"},{s:":\\/\\/streamio\\.com",m:"i"},{s:":\\/\\/player\\.believe\\.fr",m:"i"},{s:":\\/\\/.+\\.diag\\.net",m:"i"},{s:":\\/\\/app\\.learnbrite\\.com",m:"i"},{s:":\\/\\/cookpad-video\\.jp",m:"i"},{s:":\\/\\/topofart\\.com",m:"i"},{s:":\\/\\/investigativeproject\\.org",m:"i"},{s:":\\/\\/safc\\.com",m:"i"},{s:":\\/\\/faktisk\\.no",m:"i"},{s:":\\/\\/podcastics\\.com",m:"i"},{s:":\\/\\/snippet\\.uilicious\\.com",m:"i"},{s:":\\/\\/.+\\.videoperks\\.io",m:"i"},{s:":\\/\\/megafono\\.host",m:"i"},{s:":\\/\\/tzr\\.io",m:"i"},{s:":\\/\\/fyu\\.se",m:"i"},{s:":\\/\\/www\\.rooom\\.com",m:"i"},{s:":\\/\\/branchtrack\\.com",m:"i"},{s:":\\/\\/morbotron\\.com",m:"i"},{s:":\\/\\/djpod\\.com",m:"i"},{s:":\\/\\/perfectrecall\\.app",m:"i"},{s:":\\/\\/reygif\\.com",m:"i"},{s:":\\/\\/.+\\.actionbutton\\.co",m:"i"},{s:":\\/\\/www\\.wellcomemat\\.com",m:"i"},{s:":\\/\\/makecode\\.mindstorms\\.com",m:"i"},{s:":\\/\\/plicy\\.net",m:"i"},{s:":\\/\\/bfv\\.de",m:"i"},{s:":\\/\\/.+\\.warpwire\\.com",m:"i"},{s:":\\/\\/pianopronto\\.com",m:"i"},{s:":\\/\\/npmcharts\\.com",m:"i"},{s:":\\/\\/gamereactor\\.dk",m:"i"},{s:":\\/\\/vaam\\.io",m:"i"},{s:":\\/\\/pressakey\\.com",m:"i"},{s:":\\/\\/adventr\\.io",m:"i"},{s:":\\/\\/vialogues\\.com",m:"i"},{s:":\\/\\/tv\\.pic\\.fi",m:"i"},{s:":\\/\\/.+\\.vzaar\\.me",m:"i"},{s:":\\/\\/keepgif\\.com",m:"i"},{s:":\\/\\/datapane\\.com",m:"i"},{s:":\\/\\/podcasts\\.adorilabs\\.com",m:"i"},{s:":\\/\\/app\\.plattar\\.com",m:"i"},{s:":\\/\\/pollsights\\.com",m:"i"},{s:":\\/\\/vimm\\.tv",m:"i"},{s:":\\/\\/.+\\.brainsonic\\.com",m:"i"},{s:":\\/\\/.+\\.screen9\\.tv",m:"i"},{s:":\\/\\/.+\\.annoto\\.net",m:"i"},{s:":\\/\\/bianco\\.tv",m:"i"},{s:":\\/\\/.+\\.keshif\\.me",m:"i"},{s:":\\/\\/camera\\.plus",m:"i"},{s:":\\/\\/newschainonline\\.com",m:"i"},{s:":\\/\\/nanoo\\.tv",m:"i"},{s:":\\/\\/vibby\\.com",m:"i"},{s:":\\/\\/artistic\\.io",m:"i"},{s:":\\/\\/dealerworld\\.es",m:"i"},{s:":\\/\\/app\\.hi-george\\.com",m:"i"},{s:":\\/\\/ense\\.nyc",m:"i"},{s:":\\/\\/.+\\.1g\\.fi",m:"i"},{s:":\\/\\/bccks\\.jp",m:"i"},{s:":\\/\\/player\\.hihaho\\.com",m:"i"},{s:":\\/\\/bookbuzzr\\.com",m:"i"},{s:":\\/\\/epub-tw\\.com",m:"i"},{s:":\\/\\/sowndhaus\\.audio",m:"i"},{s:":\\/\\/panowalks\\.com",m:"i"},{s:":\\/\\/app\\.panoroo\\.com",m:"i"},{s:":\\/\\/.+\\.galleria\\.fi",m:"i"},{s:":\\/\\/lacnews24\\.it",m:"i"},{s:":\\/\\/share\\.glide\\.me",m:"i"},{s:":\\/\\/rtr\\.ch",m:"i"},{s:":\\/\\/asset\\.tv",m:"i"},{s:":\\/\\/inlet\\.tv",m:"i"},{s:":\\/\\/videoflow\\.io",m:"i"},{s:":\\/\\/sidetaker\\.com",m:"i"},{s:":\\/\\/slidr\\.io",m:"i"},{s:":\\/\\/antena3internacional\\.com",m:"i"},{s:":\\/\\/to\\.be",m:"i"},{s:":\\/\\/.+\\.showcache\\.io",m:"i"},{s:":\\/\\/awesound\\.com",m:"i"},{s:":\\/\\/cevapla\\.tv",m:"i"},{s:":\\/\\/pitchy\\.fr",m:"i"},{s:":\\/\\/video\\.watchmask\\.com",m:"i"},{s:":\\/\\/vizu\\.al",m:"i"},{s:":\\/\\/.+\\.simplecast\\.fm",m:"i"},{s:":\\/\\/skoletube\\.dk",m:"i"},{s:":\\/\\/bulbul\\.kg",m:"i"},{s:":\\/\\/.+\\.simplex\\.tv",m:"i"},{s:":\\/\\/.+\\.getwemap\\.com",m:"i"},{s:":\\/\\/vr3d\\.vn",m:"i"},{s:":\\/\\/teachers\\.io",m:"i"},{s:":\\/\\/share\\.pollforall\\.com",m:"i"},{s:":\\/\\/pollforall\\.com",m:"i"},{s:":\\/\\/.+\\.newstag\\.com",m:"i"},{s:":\\/\\/chickasaw\\.tv",m:"i"},{s:":\\/\\/.+\\.entale\\.co",m:"i"},{s:":\\/\\/benchfly\\.com",m:"i"},{s:":\\/\\/cms\\.springboardplatform\\.com",m:"i"},{s:":\\/\\/footpathapp\\.com",m:"i"},{s:":\\/\\/ethfiddle\\.com",m:"i"},{s:":\\/\\/.+\\.audiostaq\\.com",m:"i"},{s:":\\/\\/herbibot\\.com",m:"i"},{s:":\\/\\/.+\\.fldn\\.tv",m:"i"},{s:":\\/\\/dygvideo\\.dygdigital\\.com",m:"i"},{s:":\\/\\/.+\\.vuevideo\\.net",m:"i"},{s:":\\/\\/online\\.clickview\\.co\\.nz",m:"i"},{s:":\\/\\/podpoint\\.com",m:"i"},{s:":\\/\\/svrf\\.com",m:"i"},{s:":\\/\\/qwikvid\\.com",m:"i"},{s:":\\/\\/lifepodcasts\\.fm",m:"i"},{s:":\\/\\/shortnote\\.jp",m:"i"},{s:":\\/\\/video\\.wmt\\.media",m:"i"},{s:":\\/\\/portal\\.momindum\\.com",m:"i"},{s:":\\/\\/.+\\.gooru\\.live",m:"i"},{s:":\\/\\/boothpics\\.com",m:"i"},{s:":\\/\\/.+\\.trebble\\.fm",m:"i"},{s:":\\/\\/.+\\.voxsnap\\.com",m:"i"},{s:":\\/\\/.+\\.typlog\\.io",m:"i"},{s:":\\/\\/yok\\.ee",m:"i"},{s:":\\/\\/.+\\.bloomberg\\.fm",m:"i"},{s:":\\/\\/.+\\.freecaster\\.com",m:"i"},{s:":\\/\\/ellie-app\\.com",m:"i"},{s:":\\/\\/snappd\\.tv",m:"i"},{s:":\\/\\/tourmake\\.fr",m:"i"},{s:":\\/\\/showtheway\\.io",m:"i"},{s:":\\/\\/quipvid\\.com",m:"i"},{s:":\\/\\/soundgine\\.com",m:"i"},{s:":\\/\\/storyforj\\.com",m:"i"},{s:":\\/\\/.+\\.youplay\\.se",m:"i"},{s:":\\/\\/.+\\.wmaker\\.tv",m:"i"},{s:":\\/\\/videos\\.sapo\\.tl",m:"i"},{s:":\\/\\/mltshp\\.com",m:"i"},{s:":\\/\\/ultiphotos\\.com",m:"i"},{s:":\\/\\/myownmusic\\.de",m:"i"},{s:":\\/\\/ictv\\.com\\.au",m:"i"},{s:":\\/\\/binumi\\.com",m:"i"},{s:":\\/\\/.+\\.vewbie\\.com",m:"i"},{s:":\\/\\/.+\\.creo\\.se",m:"i"},{s:":\\/\\/pictoaccess\\.fr",m:"i"},{s:":\\/\\/testing-playground\\.com",m:"i"},{s:":\\/\\/www\\.winkball\\.com",m:"i"},{s:":\\/\\/pony\\.fm",m:"i"},{s:":\\/\\/pad\\.ma",m:"i"},{s:":\\/\\/.+\\.noise\\.fm",m:"i"},{s:":\\/\\/revmediatv\\.com",m:"i"},{s:":\\/\\/visitmode\\.com",m:"i"},{s:":\\/\\/fulllifechannel\\.com",m:"i"},{s:":\\/\\/viewmake\\.com",m:"i"},{s:":\\/\\/vt\\.se",m:"i"},{s:":\\/\\/.+\\.ubicast\\.tv",m:"i"},{s:":\\/\\/sport360\\.tv",m:"i"},{s:":\\/\\/whatchado\\.com",m:"i"},{s:":\\/\\/scalafiddle\\.io",m:"i"},{s:":\\/\\/.+\\.streamlike\\.com",m:"i"},{s:":\\/\\/mathembed\\.online",m:"i"},{s:":\\/\\/geograph\\.ie",m:"i"},{s:":\\/\\/tvo\\.de",m:"i"},{s:":\\/\\/video\\.silverstream\\.tv",m:"i"},{s:":\\/\\/.+\\.theatro360\\.com",m:"i"},{s:":\\/\\/deportehd\\.com",m:"i"},{s:":\\/\\/pandagif\\.com",m:"i"},{s:":\\/\\/ziggeo\\.io",m:"i"},{s:":\\/\\/embedery\\.com",m:"i"},{s:":\\/\\/presentio\\.us",m:"i"},{s:":\\/\\/play\\.dyntube\\.io",m:"i"},{s:":\\/\\/muralapp\\.io",m:"i"},{s:":\\/\\/soundy\\.top",m:"i"},{s:":\\/\\/.+\\.binumi\\.com",m:"i"},{s:":\\/\\/bellinislushie\\.com",m:"i"},{s:":\\/\\/coachdavelive\\.video",m:"i"},{s:":\\/\\/lamscommunity\\.org",m:"i"},{s:":\\/\\/link\\.bloomberg\\.fm",m:"i"},{s:":\\/\\/popler\\.tv",m:"i"},{s:":\\/\\/cuonda\\.com",m:"i"},{s:":\\/\\/re\\.photos",m:"i"},{s:":\\/\\/pod\\.inspe-paris\\.fr",m:"i"},{s:":\\/\\/3dcrafts\\.net",m:"i"},{s:":\\/\\/.+\\.twomargins\\.com",m:"i"},{s:":\\/\\/lut\\.im",m:"i"},{s:":\\/\\/.+\\.voodfy\\.com",m:"i"},{s:":\\/\\/alive-story\\.com",m:"i"},{s:":\\/\\/.+\\.bespotful\\.com",m:"i"},{s:":\\/\\/mdst\\.it",m:"i"},{s:":\\/\\/.+\\.zoomable\\.ca",m:"i"},{s:":\\/\\/app\\.looplogic\\.com",m:"i"},{s:":\\/\\/.+\\.looplogic\\.com",m:"i"},{s:":\\/\\/mapforenvironment\\.org",m:"i"},{s:":\\/\\/.+\\.cartodb\\.com",m:"i"},{s:":\\/\\/.+\\.cdnvideo\\.me",m:"i"},{s:":\\/\\/theoutloud\\.ru",m:"i"},{s:":\\/\\/gifed\\.net",m:"i"},{s:":\\/\\/app\\.swurveys\\.com",m:"i"},{s:":\\/\\/reading\\.fm",m:"i"},{s:":\\/\\/.+\\.podbean\\.com",m:"i"},{s:":\\/\\/.+\\.tumblr\\.com",m:"i"},{s:":\\/\\/getwhichit\\.com",m:"i"},{s:":\\/\\/.+\\.livejournal\\.com",m:"i"},{s:":\\/\\/andtheniwaslike\\.co",m:"i"},{s:":\\/\\/akademiacpd\\.com",m:"i"},{s:":\\/\\/ystv\\.co\\.uk",m:"i"},{s:":\\/\\/tehiku\\.nz",m:"i"},{s:":\\/\\/nr8\\.com",m:"i"},{s:":\\/\\/.+\\.wistia\\.st",m:"i"},{s:":\\/\\/moveshelf\\.com",m:"i"},{s:":\\/\\/vrchive\\.com",m:"i"},{s:":\\/\\/uie\\.fm",m:"i"},{s:":\\/\\/btprt\\.dj",m:"i"},{s:":\\/\\/view\\.stacker\\.cc",m:"i"},{s:":\\/\\/oggl\\.in",m:"i"},{s:":\\/\\/my\\.panomoments\\.com",m:"i"},{s:":\\/\\/radiobrony\\.fr",m:"i"},{s:":\\/\\/doculet\\.net",m:"i"},{s:":\\/\\/rcvis\\.com",m:"i"},{s:":\\/\\/mediaserver\\.fi",m:"i"},{s:":\\/\\/.+\\.swiftsnip\\.com",m:"i"},{s:":\\/\\/gameji\\.app",m:"i"},{s:":\\/\\/.+\\.qualif\\.io",m:"i"},{s:":\\/\\/.+\\.karaokes\\.moe",m:"i"},{s:":\\/\\/.+\\.allears\\.cc",m:"i"},{s:":\\/\\/kidoju\\.com",m:"i"},{s:":\\/\\/store\\.pixdor\\.com",m:"i"},{s:":\\/\\/omniscope\\.me",m:"i"},{s:":\\/\\/remote-mieruca\\.com",m:"i"},{s:":\\/\\/assettv\\.co\\.za",m:"i"},{s:":\\/\\/eurosport\\.nl",m:"i"},{s:":\\/\\/.+\\.getshow\\.io",m:"i"},{s:":\\/\\/.+\\.letscast\\.fm",m:"i"},{s:":\\/\\/app\\.powerstory\\.io",m:"i"},{s:":\\/\\/nwstg\\.tv",m:"i"},{s:":\\/\\/app\\.joinpalette\\.com",m:"i"},{s:":\\/\\/spkt\\.io",m:"i"}].map((({s:e,m:t})=>{try{return new RegExp(e,t)}catch(e){return}})).filter((e=>e)),html:e=>e_({url:e.input,iframelyApiKey:i_.IFRAMELY_API_KEY})}]}};const s_=i_})(),l})()}}]);